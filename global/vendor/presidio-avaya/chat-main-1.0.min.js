var _AVAYA_HTML_='\x3c!-- This HTML is compiled by src/compile.php into a single JS variable _AVAYA_HTML_note that jQuery UI will build HTML "around" a div that is specified as a dialog.  This is nice but makes overriding styling difficult.  .chatAssets provides an ancestor for better control of .ui elements if needed/wanted--\x3e\x3c!-- CHAT PANEL --\x3e <div id="chatPanel" title="MSC Live Chat"> \x3c!-- Login form --\x3e <div id="chatForm"> <div class="presav-chatInitLogo"> &nbsp;</div> <div class="pres-chatInitInstructions"> Please complete the following information to chat live now! </div> <div class="presav-notice"> <sup class="presav-required">*</sup>Required field </div> <div class="formField"> <div class="presav-w-50"> <span id="firstNameLabel" class="formLabel">First Name</span><br /> <input type="text" id="user-chat" maxLength="50" title="Max length 50 characters"> </div> <div class="presav-w-50"> <span id="lastNameLabel" class="formLabel">Last Name</span><br /> <input type="text" id="user-chat-last" maxLength="50" title="Max length 50 characters"> </div> </div> <div class="formLabel presav-cb" id="emailLabel">Email</div> <div class="formField"> <input type="text" id="email-chat" > </div> <div class="formLabel" id="phoneLabel">Phone</div> <div class="formField"> <div class="presav-w-50 phone-country-tip" style="width: 25%;"> <input type="text" id="phone-country" placeholder="e.g. +1" maxLength="10" title="Country Code.\nFor example +1" pattern="[-+0-9]+"> </div> <div class="presav-w-50 phone-area-tip" style="width: 33%;"> <input type="text" id="phone-area" placeholder="e.g. 904" maxLength="10" title="Area code. Numbers only.\nFor example 907" pattern="[0-9]+"> </div> <div class="presav-w-50 phone-chat-tip" style="width: 42%;"> <input type="text" id="phone-chat" placeholder="e.g. 207-2231" maxLength="32" title="Phone number. Numbers only.\nFor example 555-1234" pattern="[-0-9]+"> </div> </div> \x3c!-- The Chat API requires this field. It will be used in a future release --\x3e <div class="formLabel addressClass">Address (optional)</div> <div class="formField addressClass"> <input type="text" id="address-chat" value=""> </div> <div id="reasonLabel" class="formLabel presav-cb">I need help with...</div> <div class="formField"> <select id="reason"> <option value="" selected> - Select One -</option> </select> </div> \x3c!-- Removed as we could not find a suitable field in Avaya to show here<div class="formLabel">Comments</div> <div class="formField"> <input type="text" id="pageTopic" maxLength="255" title="Denotes a topic for the contact" placeholder="e.g. Tool specifications"> </div> --\x3e<div class="presav-w-50"> \x3c!-- <button id="openbutton-chat" onclick="chatLogon.gatherDetails()" class="button">Chat Now</button> --\x3e\t<button id="openbutton-chat" onclick="chatLogon.gatherDetails()" class="button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Chat Now</span></button></div> <div class="presav-w-50" style="margin-top: 12px;"> <label class="presav-checkbox-label"><input type="checkbox" id="transcript-chat"> Email me the chat transcript</label> </div> <div id="loginErrorsDiv"></div> <div class="formLabel"></div> <div id="chatPostInstructions" class="presav-chatPostInstructions"> </div> </div>\x3c!-- #chatInterface is display: flex so we need this to hide/show it --\x3e<span id="chatInterfaceWrap">\x3c!-- The chat interface, or what the user actually uses to chat with an agent --\x3e <div id="chatInterface"> \x3c!-- messages --\x3e<div id="chatInterfaceHeader"> <button type="button" class="chat-interface-print" onclick="chatUI.printTranscript()" tabindex="-1" title="Print a transcript of the chat"><span class="presav-base-icon presav-print"> </span>Print</button><button type="button" class="chat-interface-copy" onclick="chatUI.copyTranscript()" tabindex="-1" title="Copy the chat transcript to clipboard"><span class="presav-base-icon presav-copy"> </span>Copy</button></div><div id="messages"></div> <div id="otherThanMessages">\x3c!-- participants --\x3e <div id="usersDiv"> <div id="participants"> <div class="hidden"> <img src="" class="hidden"> </div> <div class="hidden"> <img src="" class="hidden"> </div> <div class="hidden"> <img src="" class="hidden"> </div> </div> </div> <div id="controls"> <div class="controls-user-message presav-w-50"><input type="text" id="outmessage" class="chatField" placeholder="Type your message here" maxlength="8000"> </div><div class="controls-user-submit presav-w-50">\x3c!-- <button type="button" id="sendbutton-chat" onclick="webChat.sendChatMessage()" class="button">Send</button> --\x3e<button type="button" id="sendbutton-chat" onclick="webChat.sendChatMessage()" class="button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false" disabled=""><span class="ui-button-text">Send</span></button></div></div> <span><button type="button" id="closebutton-chat" onclick="webChat.quitChat()" class="button">Close</button> </span></div></div></div></div> \x3c!-- Generic div for a jQuery alert dialog --\x3e <div id="alertDialog"></div> \x3c!-- Configuration panel. Remove for production --\x3e <div id="configPanel" class="configPanel" title="Web UI 3.5.0.0 Configuration"> <div onclick="chatConfigPanel.toggleInfo()" class="configHeader"> <span class="configHelpLink" title="This is a configuration panel for testing and configuring demos in a lab. It is not a deployment mechanism.">About this panel</span> </div> <div id="toggleUrls" class="configHeader"> <span style="text-decoration: underline">Click here</span> to configure URLs </div> <div id="urlsListDiv" class="configCollapseDiv"> <table> <tr> <td colspan="2"> <button id="loadCertsPage" class="configButton button">Accept certificates</button> </td> </tr> <tr> <td colspan="2"> <button class="configButton button" id="toggleSecurityButton" onclick="chatConfigPanel.toggleSecureConnections()">Enforce Secure Connections</button> </td> </tr> <tr> <td class="configHelpLink" title="Covers WebChat and Estimated Wait Time">WebChat Host</td> <td><input type="text" id="webChatUrlInput" placeholder="a.b.c.d" /></td> </tr> <tr> <td class="configHelpLink" title="Covers hosts for Customer Journey (Oceana Core Data Service, Customer Management)">Context Store Host</td> <td><input type="text" id="contextStoreHostInput" placeholder="e.f.g.h" /></td> </tr> <tr> <td class="configHelpLink" title="Covers Co-Browsing only">Co-Browsing Host</td> <td><input type="text" id="coBrowseHostInput" placeholder="i.j.k.l" /></td> </tr> </table> </div> <div class="configHeader" id="toggleAttributes"> <span style="text-decoration: underline">Click here</span> to configure attributes </div> <div id="attributesListDiv" class="configCollapseDiv"> <table id="attributesTable"> <tr id="newAttributeRow"> <td><input id="newAttributeInput" placeholder="e.g. Language.English"></td> <td><button class="button configButton" id="addAttributeButton">Add</button></td> </tr> </table> </div> <div class="configHeader" id="toggleWorkflow"> <span style="text-decoration: underline">Click here</span> to configure workflow and routepoints </div> <div id="chatConfigDiv" class="configCollapseDiv"> <table> <tr> <td>Workflow Type</td> <td><input type="text" id="workflowInput" /></td> </tr> <tr> <td>Routepoint Identifer</td> <td><input type="text" id="routepointInput" /></td> </tr> </table> </div> <div class="configHeader" id="toggleReconnectionSettings"> <span style="text-decoration: underline">Click here</span> to configure reconnections </div> <div id="reconnectionConfigDiv" class="configCollapseDiv"> <table> <tr> <td class="configHelpLink" title="How many times should the UI attempt to reconnect after losing connection during a chat">Maximum Reconnection Attempts</td> <td><input type="number" min="1" id="connectionAttemptsInput" /></td> </tr> <tr> <td class="configHelpLink" title="How often should the UI attempt to reconnect after losing connection during a chat">Reconnection Frequency (seconds)</td> <td><input type="number" min="1" max="10" id="connectionFrequencyInput" /></td> </tr> <tr> <td class="configHelpLink" title="If the user leaves this page during a chat, how long should we retain the session before clearing it out?">Idle timeout (seconds)</td> <td><input type="number" id="connectionIdleTimeout" value="180" /></td> </tr> </table> </div> <div class="configHeader" onclick="chatConfigPanel.toggleCustomData()"> <span style="text-decoration:underline">Click here</span> to configure custom data (Watson) </div> <div id="customDataInputDiv" class="configCollapseDiv configHeader"> <textarea id="customDataInput"></textarea> <button class="button configButton" onclick="chatConfigPanel.loadCustomData()">Create custom data</button> </div> <div class="configHeader" id="toggleCoBrowse"> <span style="text-decoration: underline">Click here</span> to configure Co-Browse </div> <div id="coBrowseConfigDiv" class="configCollapseDiv"> <table> <tr> <td class="configHelpLink" title="If this is not enabled, an agent will not be able to initated a Co-Browsing session">Co-Browse Enabled</td> <td><input type="checkbox" id="coBrowseEnabledInput"></td> </tr> </table> </div> <div class="configHeader" id="toggleRequiredContactDetails"> <span style="text-decoration: underline">Click here</span> to toggle require contact details </div> <div id="requireContactDetailsDiv" class="configCollapseDiv"> <input type="checkbox" id="toggleRequireFirstName" > <label for="toggleRequireFirstName">Require first name</label> <input type="checkbox" id="toggleRequireLastName" > <label for="toggleRequireLastName">Require last name</label> <input type="checkbox" id="toggleRequirePhone" > <label for="toggleRequirePhone">Require phone number</label> <input type="checkbox" id="toggleRequireEmail" > <label for="toggleRequireEmail">Require Email</label> </div> <div class="configHeader"> <button class="configButton button" id="requestEwt">Request Estimated Wait Time</button> <button class="configButton button" id="showChatPanel" title="Testing tool to skip EWT and queue a chat anyway">Show Chat Panel Anyway</button> <button class="configButton button" id="initCobrowse">Initialise Co-Browse Library</button> <button class="configButton button" id="saveConfig">Save Configuration</button> <button class="configButton button" id="resetConfig">Reset</button> </div> </div>',xmlToJSON=function(){this.version="1.1";var e={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},t=new RegExp(/(?!xmlns)^.*:/),i=new RegExp(/^\s+|\s+$/g);return this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){return this.parseXML(this.stringToXML(e),t)},this.parseXML=function(a,n){for(var r in n)e[r]=n[r];var s={},o=0,c="";if(e.xmlns&&a.namespaceURI&&(s[e.namespaceKey]=a.namespaceURI),a.attributes&&a.attributes.length>0){for(var l={};o<a.attributes.length;o++){var d=a.attributes.item(o);h={};var u="";u=e.stripAttrPrefix?d.name.replace(t,""):d.name,e.grokAttr?h[e.valueKey]=this.grokType(d.value.replace(i,"")):h[e.valueKey]=d.value.replace(i,""),e.xmlns&&d.namespaceURI&&(h[e.namespaceKey]=d.namespaceURI),e.attrsAsObject?l[u]=h:s[e.attrKey+u]=h}e.attrsAsObject&&(s[e.attrKey]=l)}if(a.hasChildNodes())for(var C,p,h,v=0;v<a.childNodes.length;v++)4===(C=a.childNodes.item(v)).nodeType?e.mergeCDATA?c+=C.nodeValue:s.hasOwnProperty(e.cdataKey)?(s[e.cdataKey].constructor!==Array&&(s[e.cdataKey]=[s[e.cdataKey]]),s[e.cdataKey].push(C.nodeValue)):e.childrenAsArray?(s[e.cdataKey]=[],s[e.cdataKey].push(C.nodeValue)):s[e.cdataKey]=C.nodeValue:3===C.nodeType?c+=C.nodeValue:1===C.nodeType&&(0===o&&(s={}),p=e.stripElemPrefix?C.nodeName.replace(t,""):C.nodeName,h=xmlToJSON.parseXML(C),s.hasOwnProperty(p)?(s[p].constructor!==Array&&(s[p]=[s[p]]),s[p].push(h)):(e.childrenAsArray?(s[p]=[],s[p].push(h)):s[p]=h,o++));else c||(e.childrenAsArray?(s[e.textKey]=[],s[e.textKey].push(null)):s[e.textKey]=null);if(c)if(e.grokText){var S=this.grokType(c.replace(i,""));null!=S&&(s[e.textKey]=S)}else e.normalize?s[e.textKey]=c.replace(i,"").replace(/\s+/g," "):s[e.textKey]=c.replace(i,"");return s},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}();"undefined"!=typeof module&&null!==module&&module.exports?module.exports=xmlToJSON:"function"==typeof define&&define.amd&&define(function(){return xmlToJSON}),function(e){"use strict";function t(e){this.clientConfiguration=e,this.user=void 0,this.mediaEngine=void 0}t.prototype={createUser:function(e){return this.user||(this.user=new t.User(e)),this.user},registerLogger:function(e){t.Base.Logger.addLogger(e)},getMediaEngine:function(){if(void 0===this.mediaEngine){var e=new t.Base.AudioInterface,i=new t.Base.VideoInterface,a=new t.Base.UserMedia;this.mediaEngine=new t.Base.MediaEngine(e,i,a)}return this.mediaEngine}},e.AvayaClientServices=t}(window),function(e){"use strict";!function(e){e.Base=e.Base||{}}(e),function(e){e.Config=e.Config||{}}(e),function(e){e.Services=e.Services||{}}(e),function(e){e.Services.Call=e.Services.Call||{}}(e),function(e){e.Services.Collaboration=e.Services.Collaboration||{}}(e),function(e){e.Services.Messaging=e.Services.Messaging||{}}(e),function(e){e.Services.Conference=e.Services.Conference||{}}(e),function(e){e.Services.Contacts=e.Services.Contacts||{}}(e),function(e){e.Services.ContentSharing=e.Services.ContentSharing||{}}(e),function(e){e.Services.Presence=e.Services.Presence||{}}(e)}(AvayaClientServices),function(e){"use strict";!function(e){e.Base.Validators=e.Base.Validators||{}}(e),function(e){e.Providers=e.Providers||{}}(e),function(e){e.Providers.Interfaces=e.Providers.Interfaces||{}}(e),function(e){e.Providers.AMM=e.Providers.AMM||{}}(e),function(e){e.Providers.Call=e.Providers.Call||{}}(e),function(e){e.Providers.CallGateway=e.Providers.CallGateway||{}}(e),function(e){e.Providers.CallServiceGateway=e.Providers.CallServiceGateway||{}}(e),function(e){e.Providers.Scopia=e.Providers.Scopia||{}}(e),function(e){e.Providers.Focus=e.Providers.Focus||{}}(e),function(e){e.Providers.RTC=e.Providers.RTC||{}}(e),function(e){e.Providers.UCCP=e.Providers.UCCP||{}}(e),function(e){e.Providers.WCS=e.Providers.WCS||{}}(e),function(e){e.Providers.WSP=e.Providers.WSP||{}}(e),function(e){e.User=e.User||{}}(e),function(e){e.Services.Call=e.Services.Call||{}}(e),function(e){e.Services.SessionLogs=e.Services.SessionLogs||{}}(e),function(e){e.Services.Messaging.Common=e.Services.Messaging.Common||{}}(e),function(e){e.Providers.ACS=e.Providers.ACS||{}}(e),function(e){e.Services.SessionLogs=e.Services.SessionLogs||{}}(e),function(e){e.Providers.ContentSharing=e.Providers.ContentSharing||{}}(e)}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Base.CapabilityDenialReason={CAPABILITY_NOT_DENIED:"CAPABILITY_NOT_DENIED",CAPABILITY_INVALID_STATE:"CAPABILITY_INVALID_STATE",CAPABILITY_NOT_SUPPORTED:"CAPABILITY_NOT_SUPPORTED",CAPABILITY_CALL_IS_REMOTE:"CAPABILITY_CALL_IS_REMOTE",CAPABILITY_CALL_IS_NOT_REMOTE:"CAPABILITY_CALL_IS_NOT_REMOTE",CAPABILITY_CALL_HAS_NO_AUDIO:"CAPABILITY_CALL_HAS_NO_AUDIO",CAPABILITY_CALL_HAS_NO_VIDEO:"CAPABILITY_CALL_HAS_NO_VIDEO",CAPABILITY_NOT_ALLOWED:"CAPABILITY_NOT_ALLOWED",CAPABILITY_NEED_SIGNIN:"CAPABILITY_NEED_SIGNIN",CAPABILITY_NEED_MODERATOR:"CAPABILITY_NEED_MODERATOR",CAPABILITY_NEED_SIGNIN_OR_MODERATOR:"CAPABILITY_NEED_SIGNIN_OR_MODERATOR"}}(),function(e,t){"use strict";function i(i){this.isAllowed=i===e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this.denialReason=i,this._onChangedCallbacks=t.Callbacks()}i.prototype={addOnChangedCallback:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"function"}]}),this._onChangedCallbacks.add(t)},removeOnChangedCallback:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"function"}]}),this._onChangedCallbacks.remove(t)},_updateIfChanged:function(e,t){(this.isAllowed!==e||this.denialReason!==t)&&(this.isAllowed=e,this.denialReason=t,this._onChangedCallbacks.fire(this))}},e.Base.Capability=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e){this.dataSet=e,this.dataRetrievalProgress=$.Callbacks(),this.dataRetrievalDone=$.Callbacks(),this.dataRetrievalFailed=$.Callbacks()}t.prototype={getDataSet:function(){return this.dataSet},addOnDataRetrievalProgressCallback:function(e){this.dataRetrievalProgress.add(e)},removeOnDataRetrievalProgressCallback:function(e){this.dataRetrievalProgress.remove(e)},onDataRetrievalProgress:function(e,t,i){this.dataRetrievalProgress.fire(this,arguments)},addOnDataRetrievalDoneCallback:function(e){this.dataRetrievalDone.add(e)},removeOnDataRetrievalDoneCallback:function(e){this.dataRetrievalDone.remove(e)},onDataRetrievalDone:function(){this.dataRetrievalDone.fire(this,arguments)},addOnDataRetrievalFailedCallback:function(e){this.dataRetrievalFailed.add(e)},removeOnDataRetrievalFailedCallback:function(e){this.dataRetrievalFailed.remove(e)},onDataRetrievalFailed:function(e){this.dataRetrievalFailed.fireWith(this,arguments)}},e.Base.DataRetrieval=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";function i(){this.dataSetChangeCallbacks=t.Callbacks(),this.dataSetInvalidatedCallbacks=t.Callbacks()}i.prototype=Object.create(Array.prototype),i.prototype.addOnDataSetChangedCallback=function(e){this.dataSetChangeCallbacks.add(e)},i.prototype.removeOnDataSetChangedCallback=function(e){this.dataSetChangeCallbacks.remove(e)},i.prototype.onDataSetChanged=function(){this.dataSetChangeCallbacks.fire(this)},i.prototype.addOnDataSetInvalidatedCallback=function(e){this.dataSetInvalidatedCallbacks.add(e)},i.prototype.removeOnDataSetInvalidatedCallback=function(e){this.dataSetInvalidatedCallbacks.remove(e)},i.prototype.onDataSetInvalidated=function(){this.dataSetInvalidatedCallbacks.fire(this)},e.Base.DataSet=i}(window.AvayaClientServices,jQuery),function(e){"use strict";var t={INDETERMINATE:"INDETERMINATE",DETERMINATE:"DETERMINATE"};e.Base.Determinateness=function(e){return void 0!==t[e]?t[e]:void 0}}(AvayaClientServices=AvayaClientServices||{}),function(){"use strict";function e(e,t,i,a){AvayaClientServices.Base.Utils.isDefined(a)?e[t](i,a):e[t](i)}function t(e,t,i,a){AvayaClientServices.Base.Utils.isDefined(a)?e.log(t,i,a):e.log(t,i)}var i=[];AvayaClientServices.Base.Logger={log:function(e,a,n){i.forEach(function(i){t(i,e,a,n)})},info:function(a,n){i.forEach(function(i){"function"==typeof i.info?e(i,"info",a,n):t(i,"info",a,n)})},error:function(a,n){i.forEach(function(i){"function"==typeof i.error?e(i,"error",a,n):t(i,"error",a,n)})},fatal:function(a,n){i.forEach(function(i){"function"==typeof i.fatal?e(i,"fatal",a,n):t(i,"fatal",a,n)})},debug:function(a,n){i.forEach(function(i){"function"==typeof i.debug?e(i,"debug",a,n):t(i,"debug",a,n)})},trace:function(a,n){i.forEach(function(i){"function"==typeof i.trace?e(i,"trace",a,n):t(i,"trace",a,n)})},warn:function(a,n){i.forEach(function(i){"function"==typeof i.warn?e(i,"warn",a,n):t(i,"warn",a,n)})},addLogger:function(e){if(!e||void 0===e.log)throw new TypeError("Logger should implement log method.");i.push(e)},removeLogger:function(e){var t=i.indexOf(e);if(-1===t)throw new Error("Specified error does not exist.");i.splice(t,1)}}}(),function(e,t){"use strict";function i(){this._audioCaptureDeviceId=void 0}i._currentChannelId=1,i.prototype={createAudioOnlyChannel:function(){return e.Base.MediaEngine.createChannel()},getAvailableRecordDevices:function(){},getUserRequestedMicrophone:function(){},setUserRequestedMicrophone:function(e){this._audioCaptureDeviceId=e.getDeviceId()}},e.Base.AudioInterface=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(e,t,i){this._audioInterface=e,this._videoInterface=t,this._userMedia=i}i._currentChannelId=1,i.createChannel=function(){return i._currentChannelId++},i.prototype={getAudioInterface:function(){return this._audioInterface},getVideoInterface:function(){return this._videoInterface},getRemoteMediaStream:function(e){},getLocalMediaStream:function(e){}},e.Base.MediaEngine=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){return this.isAvailable()?void 0:void console.info("UserMedia not available")}var i=navigator.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;t.prototype.isAvailable=function(){return i},t.prototype.getUserMedia=function(e,t,a){var n={};e?(e.fake&&(n.fake=e.fake),e.audio&&(n.audio=e.audio),e.video&&(n.video=e.video)):(n.audio=!0,n.video=!0),console.debug("getUserMedia with mediaOptions "+JSON.stringify(n)),i.call(navigator,n,function(e){t(e)},function(){a()}.bind(t))},t.prototype.getStreamDescriptors=function(t){var i=[];return t.getTracks().forEach(function(t){"audio"===t.kind?i.push(new e.Providers.Interfaces.AudioStream(t.id,e.Providers.Interfaces.StreamDirection.SENDRECV)):"video"===t.kind&&i.push(new e.Providers.Interfaces.VideoStream(t.id,e.Providers.Interfaces.StreamDirection.SENDRECV))}),i},e.Base.UserMedia=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";function i(){this._videoCaptureDeviceId=void 0}i.prototype={createVideoChannel:function(){return e.Base.MediaEngine.createChannel()},setSelectedCamera:function(e){this._videoCaptureDeviceId=e.getDeviceId()},getSelectedCamera:function(){}},e.Base.VideoInterface=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){this._config={},this._credentialProvider={}}t.prototype={start:function(e,t,i){this._config=e,this._credentialProvider=t,this.onOpen()},send:function(e,t){},_onCredentialsRequired:function(e){},close:function(){this.onClose()},onOpen:function(){},onClose:function(){},onMessage:function(e){},onError:function(e){}},e.Base.AbstractNetworkProvider=t}(AvayaClientServices),function(e){"use strict";function t(t,i){function a(e,t){e.onOpen=function(e){t.onOpen(e)},e.onMessage=function(e,i){t.onMessage(e,i)},e.onClose=function(e){t.onClose(e)},e.onError=function(e){t.onError(e)}}e.Base.AbstractNetworkProvider.apply(this),this._communicationAdapter={},this._mainProvider=t,this._fallbackProvider=i,this._onCredentialsRequired=function(){},a(this._mainProvider,this),this._fallbackProvider&&a(this._fallbackProvider,this),this._mainProvider.onConnectionUnavailable=function(){this._fallbackProvider?(this._communicationAdapter=this._fallbackProvider,this._communicationAdapter.start(this._config,this._credentialProvider)):this._communicationAdapter.onClose("Connection unavailable!")}.bind(this),this._communicationAdapter=this._mainProvider,this._config={},this._credentialProvider={}}t.prototype=Object.create(e.Base.AbstractNetworkProvider.prototype),t.prototype.start=function(e,t,i){this._config=e,this._credentialProvider=t;var a={message:void 0,options:i};this._credentialProvider&&this._onCredentialsRequired(a),this._communicationAdapter.start(this._config,this._credentialProvider,a.options)},t.prototype.send=function(e,t){var i={message:e,options:t};return this._credentialProvider&&this._onCredentialsRequired(i),this._communicationAdapter.send(i.message,i.options)},t.prototype.close=function(){return this._communicationAdapter.close()},t.prototype.isOpened=function(){return this._communicationAdapter.isOpened()},e.Base.NetworkProvider=t}(AvayaClientServices),function(e){"use strict";function t(){var t,i=this;this._url="",this._interval=1e3,this.startPolling=function(a,n,r,s){this._url=a,this._interval=n,t=setInterval(function(){e.Base.Logger.log("polling "+i._url),function(t,i,a,n,r){var s={type:"GET",url:t,dataType:"text",data:$.param(i)};if(e.Base.Utils.isDefined(a)&&(a.crossDomain&&!0===a.crossDomain&&(s.xhrFields={withCredentials:!0},s.crossDomain=!0),a.authentication&&"Basic"===a.authentication.type)){var o="Basic "+btoa(a.authentication.username+":"+a.authentication.password);s.beforeSend=function(e){e.setRequestHeader("Authorization",o)}}$.ajax(s).then(n,r)}(i._url,r,s,function(e){i.onMessage({data:e})},function(e){i.onError(e)})},i._interval)},this.stopPolling=function(){clearInterval(t)}}e.Providers=e.Providers||{},t.prototype=Object.create(e.Base.AbstractNetworkProvider.prototype),e.Base.PollingRESTProvider=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";function i(){this._config={},this._xhrPool=[]}i.prototype=Object.create(e.Base.AbstractNetworkProvider.prototype),i.prototype.defaultOptions={url:void 0,sendType:"POST",urlSuffix:"",dataType:"text",headers:{},processData:!0},i.prototype.send=function(e,i){var a=t.extend({},this.defaultOptions,i),n={url:this._getServerURL(a),type:a.sendType,dataType:a.dataType,headers:a.headers,processData:a.processData,beforeSend:function(e){this._xhrPool.push(e)}.bind(this)};if(e&&(n.data=e),a.crossDomain&&!0===a.crossDomain&&(n.xhrFields={withCredentials:!0},n.crossDomain=!0),a.authentication&&"Basic"===a.authentication.type){var r="Basic "+btoa(a.authentication.username+":"+a.authentication.password);n.beforeSend=function(e){e.setRequestHeader("Authorization",r),this._xhrPool.push(e)}.bind(this)}return t.ajax(n).then(function(e,t,i){return this._xhrPool.splice(this._xhrPool.indexOf(i),1),this.onMessage(e,i),e}.bind(this),function(e){return this.onError(e),e}.bind(this))},i.prototype._getServerURL=function(e){var t="";return void 0!==e.url?t=e.url:(t+=this._config.isSecure?"https://":"http://",t+=this._config.hostName+":"+this._config.port,t+=e.urlSuffix),t},i.prototype.close=function(){this._xhrPool.forEach(function(e){e.abort()}),this._xhrPool=[],this.onClose()},e.Base.RESTProvider=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){e.Base.AbstractNetworkProvider.apply(this),this._socket=void 0,this._isOpened=!1,this._errorCount=0,this._isShutdown=!1}t.prototype=Object.create(e.Base.AbstractNetworkProvider.prototype),t.prototype.onConnectionUnavailable=function(){},t.prototype.start=function(e,t,i){if(this._isOpened)this.onOpen();else{if(this._config=e,this._isShutdown=!1,this._credentialProvider=t,void 0===WebSocket)return void this.onConnectionUnavailable();this._createSocket(i)}},t.prototype.send=function(e,t){var i=$.Deferred();return this.isOpened()?(this._socket.send(e),i.resolve()):i.reject("Socket is not opened!"),i.promise()},t.prototype.close=function(){this._isShutdown=!0,this._isOpened?(this._socket.close(),this._isOpened=!1):this.onClose(),this._errorCount=0,this._socket=void 0},t.prototype.isOpened=function(){return this._isOpened&&1===this._socket.readyState},t.prototype._getServerURL=function(e){var t="";return e&&void 0!==e.url?t=e.url:(t+=this._config.isSecure?"wss://":"ws://",t+=this._config.hostName,this._config.port&&(t+=":"+this._config.port)),e&&void 0!==e.urlSuffix&&(t+=e.urlSuffix),t},t.prototype._createSocket=function(e){this._isOpening=!0,this._socket=new WebSocket(this._config.webSocketURL||this._getServerURL(e)),this._socket.binaryType="arraybuffer",this._socket.onopen=function(){this._isOpening=!1,this._isShutdown?this._socket.close():(this._isOpened=!0,this._errorCount=0,this.onOpen())}.bind(this),this._socket.onmessage=function(e){this.onMessage(e)}.bind(this),this._socket.onclose=function(){this._isOpening||(this._isOpened=!1,this._socket=void 0,this.onClose())}.bind(this),this._socket.onerror=function(t){this.onError(t),this._handleReconnect(t,e)}.bind(this)},t.prototype._handleReconnect=function(e,t){this._isOpened||(this._errorCount+=1,this._errorCount>=this._config.maxConnectionErrorCount||this._errorCount>=5||this._isShutdown?(this._isOpening=!1,this.onConnectionUnavailable(e)):this._createSocket(t))},e.Base.WebSocketProvider=t}(AvayaClientServices),function(e,t){"use strict";function i(){this._listeners={}}i.prototype={on:function(e,t){return"function"!=typeof t?this:(this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this)},off:function(e,t){if("function"!=typeof t)return this;if(void 0===this._listeners[e])throw new Error("There is no such handler for event with name: "+e+".");var i=this._listeners[e].indexOf(t);if(-1===i)throw new Error("There is no such handler for event with name: "+e+".");return this._listeners[e].splice(i,1),this},trigger:function(e,i){var a=this._listeners[e];void 0!==a&&(i=i||[],t.each(a,function(e,t){t.apply(window,i)}))},_removeListeners:function(){for(var e in this._listeners)if(this._listeners.hasOwnProperty(e))for(var t=0;t<this._listeners[e].length;t++)this.off(e,this._listeners[e][t])}},e.Base.Observable=i}(window.AvayaClientServices=window.AvayaClientServices||{},jQuery=jQuery||{}),function(e){"use strict";function t(){}t.prototype={state:function(){},always:function(e){},done:function(e){},fail:function(e){},progress:function(e){},then:function(e,t,i){}},e.Base.Promise=t}(AvayaClientServices),function(e,t){"use strict";function i(){this.messagingProviders=[],this.conferenceProviders=[],this.callProviders=[],this.collaborationProviders=[],this._ammProviderFactory={},this._ammProvider={},this._wcsProviderFactory={},this._wcsProvider={},this._contactsProviders=[],this._directorySearchProviders=[],this._acsProviderFactory={},this._acsContactsProvider={},this._acsDirectorySearchProvider={},this._scopiaProvider={},this._scopiaCallProvider={},this._sgCallProvider={},this._scopiaConferenceProviderFactory={}}i.prototype={getMessagingProviders:function(e){if(this.messagingProviders.length>0)return this.messagingProviders;var i=this._getAMMProvider(this._getAMMProviderConfiguration(e));return t.isEmptyObject(i)||this.messagingProviders.push(i),this.messagingProviders},getContactsProviders:function(e){if(0===this._contactsProviders.length){var i=this._getACSContactsProvider();t.isEmptyObject(i)||this._contactsProviders.push(i)}return this._contactsProviders},_getACSContactsProvider:function(){return t.isEmptyObject(this._acsContactsProvider)&&(t.isEmptyObject(this._acsProviderFactory)&&(this._acsProviderFactory=new e.Providers.ACS.ACSProviderFactory),this._acsContactsProvider=this._acsProviderFactory.getACSContactsProvider()),this._acsContactsProvider},getDirectorySearchProviders:function(e){if(0===this._directorySearchProviders.length){var i=this._getACSDirectorySearchProvider();t.isEmptyObject(i)||this._directorySearchProviders.push(i)}return this._directorySearchProviders},_getACSDirectorySearchProvider:function(){return t.isEmptyObject(this._acsDirectorySearchProvider)&&(t.isEmptyObject(this._acsProviderFactory)&&(this._acsProviderFactory=new e.Providers.ACS.ACSProviderFactory),this._acsDirectorySearchProvider=this._acsProviderFactory.getACSDirectorySearchProvider()),this._acsDirectorySearchProvider},getConferenceProviders:function(e){if(this.conferenceProviders.length>0)return this.conferenceProviders;var i=this._getScopiaConferenceProvider(e.uccpConfiguration);return t.isEmptyObject(i)||this.conferenceProviders.push(i),this.conferenceProviders},getCallProviders:function(e){if(this.callProviders.length>0)return this.callProviders;if(e.sgConfiguration&&e.sgConfiguration.enabled){var i=this._getSGCallProvider(e.sgConfiguration);if(!t.isEmptyObject(i)){var a=this.getConferenceProviders(e)[0];i.setConferenceProvider(a),this.callProviders.push(i)}}else{var n=this._getScopiaCallProvider(e.uccpConfiguration);t.isEmptyObject(n)||this.callProviders.push(n)}return this.callProviders},_getAMMProvider:function(i){return t.isEmptyObject(this._ammProvider)?(t.isEmptyObject(this._ammProviderFactory)&&(this._ammProviderFactory=new e.Providers.AMM.AMMProviderFactory),this._ammProvider=this._ammProviderFactory.getAMMProvider(i),this._ammProvider):this._ammProvider},_getWCSProvider:function(i){return t.isEmptyObject(this._wcsProvider)?(t.isEmptyObject(this._wcsProviderFactory)&&(this._wcsProviderFactory=new e.Providers.WCS.WCSProviderFactory),this._wcsProvider=this._wcsProviderFactory.getWCSProvider(i),this._wcsProvider):this._wcsProvider},_getWCSProviderConfiguration:function(e){return e.wcsConfiguration},_getScopiaConferenceProvider:function(i){return t.isEmptyObject(this._scopiaProvider)?(t.isEmptyObject(this._scopiaConferenceProviderFactory)&&(this._scopiaConferenceProviderFactory=new e.Providers.Scopia.ScopiaConferenceProviderFactory),this._scopiaProvider=this._scopiaConferenceProviderFactory.getScopiaConferenceProvider(i),this._scopiaProvider):this._scopiaProvider},_getScopiaCallProvider:function(i){return t.isEmptyObject(this._scopiaCallProvider)?(t.isEmptyObject(this._scopiaConferenceProviderFactory)&&(this._scopiaConferenceProviderFactory=new e.Providers.Scopia.ScopiaConferenceProviderFactory),this._scopiaCallProvider=this._scopiaConferenceProviderFactory.getScopiaCallProvider(i),this._scopiaCallProvider):this._scopiaCallProvider},_getSGCallProvider:function(i){if(!t.isEmptyObject(this._sgCallProvider))return this._sgCallProvider;var a=(new e.Providers.CallServiceGateway.CallServiceGatewayProviderFactory).createCallServiceGatewayProvider();return this._sgCallProvider=new e.Providers.Call.CallProvider(i,a),this._sgCallProvider},_getAMMProviderConfiguration:function(e){return e.ammConfiguration},getCollaborationProviders:function(e){if(this.collaborationProviders.length>0)return this.collaborationProviders;var i=this._getWCSProvider(this._getWCSProviderConfiguration(e));return t.isEmptyObject(i)||this.collaborationProviders.push(i),this.collaborationProviders}},e.Base.ProviderFactory=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){this.isAvailable()&&this.createPeerConnection()}var i=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.msRTCPeerConnection,a=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription||window.msRTCSessionDescription;t.prototype.isAvailable=function(){return i&&a},t.prototype.addStream=function(e){this._pc.addStream(e)},t.prototype.createPeerConnection=function(e){this._pc&&this._pc.close(),this._pc=e?new i({iceServers:[{urls:"stun:ec2-52-6-206-240.compute-1.amazonaws.com:3478"}],iceTransportPolicy:"all",bundlePolicy:"balanced",peerIdentity:null},e):new i({iceServers:[{urls:"stun:ec2-52-6-206-240.compute-1.amazonaws.com:3478"}],iceTransportPolicy:"all",bundlePolicy:"balanced",peerIdentity:null}),this._pc.onaddstream=this.onAddStreamInternal.bind(this),this._receivedIce=!1},t.prototype.createOffer=function(t,i,n){this._pc.onicecandidate=this._onIceCandidate.bind(this,t),this._pc.oniceconnectionstatechange=this._oniceConnectionStateChange.bind(this,function(){}),this._pc.createOffer(function(t){var r=t.type,s=t.sdp;"function"==typeof n&&(s=n(s)),this._pc.setLocalDescription(new a({type:r,sdp:s}),function(){},function(t){e.Base.Logger.error("RTCConnectionProvider: Error setting local description for offer: "+t),i(t)})}.bind(this),function(t){e.Base.Logger.error("RTCConnectionProvider: Error creating offer: "+t),i(t)})},t.prototype.receiveAnswer=function(e,t,i){this._pc.setRemoteDescription(new a({type:"answer",sdp:e}),t,i)},t.prototype.createAnswer=function(t,i,n,r){e.Base.Logger.debug("createAnswer offer SDP:\n"+t),this._pc.setRemoteDescription(new a({type:"offer",sdp:t}),function(){this._pc.onicecandidate=this._onIceCandidate.bind(this,i),this._pc.oniceconnectionstatechange=this._oniceConnectionStateChange.bind(this,i),this._pc.createAnswer(function(t){var i=t.type,s=t.sdp;"function"==typeof r&&(s=r(s)),this._pc.setLocalDescription(new a({type:i,sdp:s}),function(){}.bind(this),function(t){e.Base.Logger.error("Error while setting answer as local description: "+t),n(t)})}.bind(this),function(t){e.Base.Logger.error("Error while creating answer for offer: "+t),n(t)})}.bind(this),function(t){e.Base.Logger.error("Error setting remote description while creating answer: "+t),n(t)})},t.prototype.close=function(){this._pc.close()},t.prototype.onAddStreamInternal=function(e){this.onAddStream&&e.stream&&this.onAddStream(e.stream)},t.prototype.onAddStream=function(e){},t.prototype._onIceCandidate=function(t,i){e.Base.Logger.debug("RTCConnectionProvider _onIceCandidate "+this._pc.iceGatheringState),null===i.candidate?(e.Base.Logger.debug("NO more ICE candidate. GatheringState: "+this._pc.iceGatheringState),e.Base.Logger.debug("local SDP:\n"+this._pc.localDescription.sdp),t(this._pc.localDescription)):e.Base.Logger.debug("Candidate: "+i.candidate.candidate)},t.prototype._oniceConnectionStateChange=function(t,i){e.Base.Logger.debug("RTCConnectionProvider _oniceConnectionStateChange "+this._pc.iceConnectionState)},t.prototype.stopAllStreams=function(){this._pc.getLocalStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.stop()}),e.getVideoTracks().forEach(function(e){e.stop()})}),this._pc.getRemoteStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.stop()}),e.getVideoTracks().forEach(function(e){e.stop()})})},t.prototype.enableAllStreams=function(){this._pc.getLocalStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.enabled=!0}),e.getVideoTracks().forEach(function(e){console.debug("Enabling local video track: "+e.id),e.enabled=!0})}),this._pc.getRemoteStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.enabled=!0}),e.getVideoTracks().forEach(function(e){console.debug("Enabling remote video track: "+e.id),e.enabled=!0})})},t.prototype.disableStream=function(e){this.disableAudioStream(e),this.disableVideoStream(e)},t.prototype.enableStream=function(e){this.enableAudioStream(e),this.enableVideoStream(e)},t.prototype.disableAudioStream=function(e){e.getAudioTracks().forEach(function(e){e.enabled=!1})},t.prototype.enableAudioStream=function(e){e.getAudioTracks().forEach(function(e){e.enabled=!0})},t.prototype.disableVideoStream=function(e){e.getVideoTracks().forEach(function(e){e.enabled=!1})},t.prototype.enableVideoStream=function(e){e.getVideoTracks().forEach(function(e){e.enabled=!0})},e.Base.RTCConnectionProvider=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){this._handlers={},this.currentState=null}e.Base.SimpleFsm=function(){},t.prototype={handleEvent:function(t){if(t.stringValue)if(this.currentState&&this._handlers)if(this._handlers[this.currentState.stringValue])if(this._handlers[this.currentState.stringValue][t.stringValue]){e.Base.Logger.debug("Executing handler for state "+this.currentState.stringValue+" and event "+t.stringValue+" "+this._handlers[this.currentState.stringValue][t.stringValue].name);var i=this._handlers[this.currentState.stringValue][t.stringValue](t);e.Base.Logger.debug("Executed handler "+this._handlers[this.currentState.stringValue][t.stringValue].name),i&&i.nextState&&(e.Base.Logger.debug("Next state: "+i.nextState.stringValue),this.currentState=i.nextState),i&&i.nextEvent&&(e.Base.Logger.debug("Next state: "+i.nextEvent.stringValue),this.handleEvent(i.nextEvent))}else e.Base.Logger.error("No handler bound for state "+this.currentState.stringValue+" and event "+t.stringValue);else e.Base.Logger.error("No handler bound for state "+this.currentState.stringValue+" and event "+t.stringValue);else e.Base.Logger.error("State machine's state was not initialized");else e.Base.Logger.error("Unknown event: "+t)},registerHandler:function(t,i,a){if(this._handlers[t.stringValue]||(this._handlers[t.stringValue]={}),this._handlers[t.stringValue][i.stringValue])throw"Duplicate FSM registration state "+t.stringValue+" event "+i.stringValue;this._handlers[t.stringValue][i.stringValue]=a,e.Base.Logger.debug("registered Handler for "+t.stringValue+" event "+i.stringValue)},registerNoOpHandler:function(e,t){this.registerHandler(e,t,function(){})},start:function(e){this.currentState=e}},e.Base.SimpleFsm.SimpleFsm=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(e,t){this.stringValue=e,this.data=t}t.prototype={},e.Base.SimpleFsm.SimpleFsmEvent=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(e){this.stringValue=e}t.prototype={},e.Base.SimpleFsm.SimpleFsmState=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(e,t,i){Error.call(this,e),this.message=e,this.validatedObject=t,this.violatedRule=i,this.name="ValidationError"}t.prototype=Object.create(Error.prototype),e.Base.ValidationError=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={validate:function(){throw new Error("Function is not implemented!")},_processCondition:function(e,t,i,a){if(e)return!0;var n=i.message||this.defaultMessage;return this._handleValidationError(n,t,i,a)},_handleValidationError:function(t,i,a,n){if(n)return!1;throw new e.Base.ValidationError(t,i,a)}},e.Base.Validators.BaseValidator=t}(AvayaClientServices),function(e){"use strict";function t(){this.defaultMessage="Provided element is not defined."}t.prototype=Object.create(e.Base.Validators.BaseValidator.prototype),t.prototype.validate=function(e,t,i){var a=void 0!==e;return this._processCondition(a,e,t,i)},e.Base.Validators.DefinedValidator=t}(AvayaClientServices),function(e){"use strict";function t(){this.defaultMessage="Provided element is not compatible with required type."}t.prototype=Object.create(e.Base.Validators.BaseValidator.prototype),t.prototype.validate=function(e,t,i){var a=typeof e===t.expected||"object"==typeof e&&e instanceof t.expected;return this._processCondition(a,e,t,i)},e.Base.Validators.TypeValidator=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.credentialProvider=new e.Config.CredentialProvider,this.serverInfo=new e.Config.ServerInfo}t.prototype={},e.Config.ACSConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.allowPrevalidation=!1,this.pollIntervalInMinutes=0,this.serverInfo=new e.Config.ServerInfo,this.credentialProvider=new e.Config.CredentialProvider}t.prototype={},e.Config.AMMConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.incomingCall=!1,this.videoEnabled=!1}t.prototype={},e.Config.CallUserConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.serverInfo=new e.Config.ServerInfo,this.voicemailPIN=""}t.prototype={},e.Config.CESConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.conferenceFactoryURI="",this.conferencePortalURI="",this.moderatorCode="",this.participantCode="",this.moderatorURL="",this.participantURL="",this.virtualRoomID=""}t.prototype={},e.Config.ConferenceConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i){this.username=e,this.password=t,this.domain=i}t.prototype={onAuthenticationChallenge:function(e,t){t({username:this.username,password:this.password,domain:this.domain,isGuest:!1,displayName:""})},isGuest:function(){return!1}},e.Config.CredentialProvider=t}(AvayaClientServices),function(e){"use strict";function t(e){this.token=e}t.prototype={onAuthenticationChallenge:function(e,t){t({token:this.token})}},e.Config.CredentialTokenProvider=t}(AvayaClientServices),function(e){"use strict";function t(e){this._displayName=e,this._username=this._createGuestUser(),this._password="",this._domain=""}t.prototype={onAuthenticationChallenge:function(e,t){t({username:this._username,password:this._password,domain:this._domain,isGuest:!0,displayName:this.getDisplayName()})},getDisplayName:function(){return encodeURI(this._displayName)},setDisplayName:function(e){this._displayName=e},isGuest:function(){return!0},_generateUUID:function(){var e=window.crypto||window.msCrypto;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=e.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"===t?i:3&i|8).toString(16)})},_createGuestUser:function(){return"csaGuest/"+this._generateUUID()}},e.Config.GuestCredentialProvider=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.serverInfo=new e.Config.ServerInfo,this.baseDistinguishName="",this.userIMDomain=!1,this.imAttribute="",this.useGssBind=!1,this.directoryType=""}t.prototype={},e.Config.LDAPConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.serverInfo=new e.Config.ServerInfo,this.contactsEnabled=!1}t.prototype={},e.Config.PPMConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.sendAllCallsOnDoNotDisturb=!1,this.serverAddress="",this.autoAwayTimeout=0}t.prototype={isEnabled:function(){},setEnabled:function(e){},getServerAddress:function(){},setServerAddress:function(e){},isSendAllCallsOnDoNotDisturb:function(){},setSendAllCallsOnDoNotDisturb:function(e){},isExportWindowsIMProvider:function(){},setExportWindowsIMProvider:function(e){}},e.Config.PresenceConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.hostName="",this.port=0,this.isSecure=!1}t.prototype={},e.Config.ServerInfo=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.serverInfo=new e.Config.ServerInfo,this.credentialProvider=new e.Config.CredentialProvider,this.gatewayProvider={}}t.prototype={},e.Config.SGConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!0,this.serverInfo=new e.Config.ServerInfo,this.credentialProvider=new e.Config.CredentialProvider,this.promptAdmissionPasscodeHandler=function(e){var t=$.Deferred(),i=prompt("Admission passcode prompt");return null===i?t.reject({name:"ConferenceError",message:"Admission passcode prompt canceled"}):t.resolve(i),t.promise()},this.confirmAdmissionHandler=function(e){var t=$.Deferred();return confirm("Confirm admission")?t.resolve():t.reject({name:"ConferenceError",message:"Admission confirm canceled"}),t.promise()}}t.prototype={},e.Config.UCCPConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.userAgentName="",this.userAgentInstanceId="",this.ammConfiguration=new e.Config.AMMConfiguration,this.acsConfiguration=new e.Config.ACSConfiguration,this.cesConfiguration=new e.Config.CESConfiguration,this.ldapConfiguration=new e.Config.LDAPConfiguration,this.conferenceConfiguration=new e.Config.ConferenceConfiguration,this.dialingRulesConfiguration={},this.ec500Configuration={},this.ppmConfiguration=new e.Config.PPMConfiguration,this.uccpConfiguration=new e.Config.UCCPConfiguration,this.sgConfiguration=new e.Config.SGConfiguration,this.callUserConfiguration=new e.Config.CallUserConfiguration,this.videoUserConfiguration={},this.wcsConfiguration=new e.Config.WCSConfiguration,this.localDeviceConfiguration={},this.presenceConfiguration=new e.Config.PresenceConfiguration}t.prototype={},e.Config.UserConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(){this.enabled=!1,this.serverInfo=new e.Config.ServerInfo,this.credentialProvider=new e.Config.CredentialProvider}t.prototype={},e.Config.WCSConfiguration=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a){this.token=e,this.username=t,this.attendeeId=i,this.sessionId=a}t.prototype={onAuthenticationChallenge:function(t,i){i(new e.Config.WCSCredentials(this.token,this.username,this.attendeeId,this.sessionId))}},e.Config.WCSCredentialTokenProvider=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Config.WCSCredentials=function(e,t,i,a){this.token=e,this.username=t,this.participantId=i,this.sessionId=a}}(),function(e,t){"use strict";function i(){this._defaultProvenance=[{subType:"User",type:"User"}]}i.prototype={convertACSContactsV1toContactList:function(e,t){var i=[];if(e&&e.contacts&&e.contacts.length>0)for(var a=0;a<e.contacts.length;a++)i.push(this.convertACSContactV1toContact(e.contacts[a],t));return i},convertACSContactV1toContact:function(t,i){var a=new e.Services.Contacts.Contact,n=e.Services.Contacts.ProviderSourceType.PROVIDER_SOURCE_ACS;if(t){var r,s=new e.Base.Capability(i?e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED:e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED);if(a.getGivenName().setWriteCapability(s),a.getSurname().setWriteCapability(s),a.getDisplayName().setWriteCapability(s),a.getASCIIGivenName().setWriteCapability(s),a.getASCIISurname().setWriteCapability(s),a.getASCIIDisplayName().setWriteCapability(s),a.getAlias().setWriteCapability(s),a.getASCIIAlias().setWriteCapability(s),a.getLocation().setWriteCapability(s),a.getWorkRoomNo().setWriteCapability(s),a.getStreetAddress().setWriteCapability(s),a.getCity().setWriteCapability(s),a.getState().setWriteCapability(s),a.getCountry().setWriteCapability(s),a.getPostalCode().setWriteCapability(s),a.getCompany().setWriteCapability(s),a.getManager().setWriteCapability(s),a.getDepartment().setWriteCapability(s),a.getLanguage().setWriteCapability(s),a.getNotes().setWriteCapability(s),a.getRank().setWriteCapability(s),a.isBuddy().setWriteCapability(s),a.isFavorite().setWriteCapability(s),t.contactIdentifier&&t.contactIdentifier.value&&(a._uniqueAddressForMatching=t.contactIdentifier.value),t.surName&&t.surName.value&&(a.getSurname().setValue(t.surName.value),a.getSurname().setSource(n)),t.givenName&&t.givenName.value&&(a.getGivenName().setValue(t.givenName.value),a.getGivenName().setSource(n)),t.displayName&&t.displayName.value&&(a.getDisplayName().setValue(t.displayName.value),a.getDisplayName().setSource(n)),t.asciiSurName&&t.asciiSurName.value&&(a.getASCIISurname().setValue(t.asciiSurName.value),a.getASCIISurname().setSource(n)),t.asciiGivenName&&t.asciiGivenName.value&&(a.getASCIIGivenName().setValue(t.asciiGivenName.value),a.getASCIIGivenName().setSource(n)),t.asciiDisplayName&&t.asciiDisplayName.value&&(a.getASCIIDisplayName().setValue(t.asciiDisplayName.value),a.getASCIIDisplayName().setSource(n)),t.aliasGivenName&&t.aliasGivenName.value&&(a.getAlias().setValue(t.aliasGivenName.value),a.getAlias().setSource(n)),t.aliasSurName&&t.aliasSurName.value&&(a.getASCIIAlias().setValue(t.aliasSurName.value),a.getASCIIAlias().setSource(n)),t.location&&t.location.value&&(a.getLocation().setValue(t.location.value),a.getLocation().setSource(n)),t.workRoomNo&&t.workRoomNo.value&&(a.getWorkRoomNo().setValue(t.workRoomNo.value),a.getWorkRoomNo().setSource(n)),t.streetAddress&&t.streetAddress.value&&(a.getStreetAddress().setValue(t.streetAddress.value),a.getStreetAddress().setSource(n)),t.city&&t.city.value&&(a.getCity().setValue(t.city.value),a.getCity().setSource(n)),t.state&&t.state.value&&(a.getState().setValue(t.state.value),a.getState().setSource(n)),t.country&&t.country.value&&(a.getCountry().setValue(t.country.value),a.getCountry().setSource(n)),t.postalCode&&t.postalCode.value&&(a.getPostalCode().setValue(t.postalCode.value),a.getPostalCode().setSource(n)),t.company&&t.company.value&&(a.getCompany().setValue(t.company.value),a.getCompany().setSource(n)),t.manager&&t.manager.value&&(a.getManager().setValue(t.manager.value),a.getManager().setSource(n)),t.department&&t.department.value&&(a.getDepartment().setValue(t.department.value),a.getDepartment().setSource(n)),t.preferredLanguage&&t.preferredLanguage.value&&(a.getLanguage().setValue(t.preferredLanguage.value),a.getLanguage().setSource(n)),t.notes&&t.notes.value&&(a.getNotes().setValue(t.notes.value),a.getNotes().setSource(n)),t.rank&&t.rank.value&&(a.getRank().setValue(parseFloat(t.rank.value)),a.getRank().setSource(n)),t.isBuddy&&t.isBuddy.value&&(a.isBuddy().setValue("true"===t.isBuddy.value),a.isBuddy().setSource(n)),t.favourite&&t.favourite.value&&(a.isFavorite().setValue("true"===t.favourite.value),a.isFavorite().setSource(n)),t.videoCapable&&t.videoCapable.value&&(a.isVideoCapable().setValue("true"===t.videoCapable.value),a.isVideoCapable().setSource(n)),t.pictureUrl&&t.pictureUrl.value)for(var o in e.Services.Contacts.ContactPictureSize)e.Services.Contacts.ContactPictureSize.hasOwnProperty(o)&&a.addPictureUrl(o,t.pictureUrl.value+"?size="+e.Services.Contacts.ContactPictureSize[o].toLowerCase());if(t.emailAddresses){var c=t.emailAddresses.length;for(r=0;c>r;r++){var l=new e.Services.Contacts.ContactEmailAddressField;l.setSource(n),l.setWriteCapability(s),t.emailAddresses[r].value&&l.setAddress(t.emailAddresses[r].value),t.emailAddresses[r].type&&l.setEmailAddressType(this._convertACSEmailAddressTypeToContactEmailAddressType(t.emailAddresses[r].type)),a.getEmailAddresses().push(l)}}if(t.phoneNumberList){var d=t.phoneNumberList.length;for(r=0;d>r;r++){var u=new e.Services.Contacts.ContactPhoneField;u.setSource(n),u.setWriteCapability(s),t.phoneNumberList[r].phoneNumber&&u.setPhoneNumber(t.phoneNumberList[r].phoneNumber),t.phoneNumberList[r].label1&&u.setLabel1(t.phoneNumberList[r].label1),t.phoneNumberList[r].label2&&u.setLabel2(t.phoneNumberList[r].label2),t.phoneNumberList[r].type&&u.setPhoneNumberType(this._convertACSPhoneNumberTypeToContactPhoneNumberType(t.phoneNumberList[r].type)),t.phoneNumberList[r].speedDialEnabled&&u.setSpeedDialEnabled("true"===t.phoneNumberList[r].speedDialEnabled),t.phoneNumberList[r].isPrimary&&u.setDefault("true"===t.phoneNumberList[r].isPrimary),a.getPhoneNumbers().push(u)}}if(t.imaddresses){var C=t.imaddresses.length;for(r=0;C>r;r++){var p=new e.Services.Contacts.ContactHandleField;p.setSource(n),p.setWriteCapability(s),t.imaddresses[r].value&&p.setHandle(t.imaddresses[r].value),t.imaddresses[r].type&&p.setHandleType(this._convertACSHandleTypeToContactHandleType(t.imaddresses[r].type)),a.getHandles().push(p)}}if(t.custom1&&t.custom1.value){var h=new e.Services.Contacts.ContactStringField;h.setValue(t.custom1.value),h.setSource(n),a.getCustom1().push(h)}if(t.custom2&&t.custom2.value){var v=new e.Services.Contacts.ContactStringField;v.setValue(t.custom2.value),v.setSource(n),a.getCustom2().push(v)}if(t.custom3&&t.custom3.value){var S=new e.Services.Contacts.ContactStringField;S.setValue(t.custom3.value),S.setSource(n),a.getCustom3().push(S)}}return a},convertContactToACSContactV1:function(t){return this.mergeContactWithACSContactV1(t,new e.Providers.ACS.ContactV1)},mergeContactWithACSContactV1:function(i,a){var n;if(i&&a){n=t.extend(!0,{},a),i.getUniqueAddressForMatching()&&(n.contactIdentifier.value=i.getUniqueAddressForMatching()),n.asciiSurName.value=i.getASCIISurname().getValue(),n.asciiGivenName.value=i.getASCIIGivenName().getValue(),n.asciiDisplayName.value=i.getASCIIDisplayName().getValue(),n.surName.value=i.getSurname().getValue(),n.givenName.value=i.getGivenName().getValue(),n.displayName.value=i.getDisplayName().getValue(),n.aliasGivenName.value=i.getAlias().getValue(),n.aliasSurName.value=i.getASCIIAlias().getValue(),n.location.value=i.getLocation().getValue(),n.workRoomNo.value=i.getWorkRoomNo().getValue(),n.streetAddress.value=i.getStreetAddress().getValue(),n.city.value=i.getCity().getValue(),n.state.value=i.getState().getValue(),n.country.value=i.getCountry().getValue(),n.postalCode.value=i.getPostalCode().getValue(),n.company.value=i.getCompany().getValue(),n.manager.value=i.getManager().getValue(),n.department.value=i.getDepartment().getValue(),n.preferredLanguage.value=i.getLanguage().getValue(),n.notes.value=i.getNotes().getValue(),n.rank.value=i.getRank().getValue().toString(),n.isBuddy.value=i.isBuddy().getValue().toString(),n.favourite.value=i.isFavorite().getValue().toString(),n.videoCapable.value=i.isVideoCapable().getValue().toString();var r,s=[],o=i.getEmailAddresses();for(r=0;r<o.length;r++){var c=new e.Providers.ACS.ContactEmailData;c.value=o[r].getAddress(),c.type=this._convertContactEmailAddressTypeToACSEmailAddressType(o[r].getEmailAddressType()),c.provenance=this._getProvenance(c,n.emailAddresses,"value"),s.push(c)}n.emailAddresses=s;var l=[],d=i.getPhoneNumbers();for(r=0;r<d.length;r++){var u=new e.Providers.ACS.ContactPhoneData;u.phoneNumber=d[r].getPhoneNumber(),u.label1=d[r].getLabel1(),u.label2=d[r].getLabel2(),u.type=this._convertContactPhoneNumberTypeToACSPhoneType(d[r].getPhoneNumberType()),u.speedDialEnabled=d[r].isSpeedDialEnabled().toString(),u.isPrimary=d[r].isDefault().toString(),u.provenance=this._getProvenance(u,n.phoneNumberList,"value"),l.push(u)}n.phoneNumberList=l;var C=[],p=i.getHandles();for(r=0;r<p.length;r++){var h=new e.Providers.ACS.ContactHandleData;h.value=p[r].getHandle(),h.type=this._convertContactHandleTypeToACSHandleType(p[r].getHandleType()),h.provenance=this._getProvenance(h,n.imaddresses,"value"),C.push(h)}n.imaddresses=C}return n},_convertACSPhoneNumberTypeToContactPhoneNumberType:function(t){if(!t)return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_OTHER;switch(t){case e.Providers.ACS.ACSPhoneNumberType.WORK:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_WORK;case e.Providers.ACS.ACSPhoneNumberType.HOME:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_HOME;case e.Providers.ACS.ACSPhoneNumberType.MOBILE:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_MOBILE;case e.Providers.ACS.ACSPhoneNumberType.FAX:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_FAX;case e.Providers.ACS.ACSPhoneNumberType.PAGER:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_PAGER;case e.Providers.ACS.ACSPhoneNumberType.OTHER:default:return e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_OTHER}},_convertContactPhoneNumberTypeToACSPhoneType:function(t){if(!t)return e.Providers.ACS.ACSPhoneNumberType.OTHER;switch(t){case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_WORK:return e.Providers.ACS.ACSPhoneNumberType.WORK;case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_HOME:return e.Providers.ACS.ACSPhoneNumberType.HOME;case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_MOBILE:return e.Providers.ACS.ACSPhoneNumberType.MOBILE;case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_FAX:return e.Providers.ACS.ACSPhoneNumberType.FAX;case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_PAGER:return e.Providers.ACS.ACSPhoneNumberType.PAGER;case e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_OTHER:default:return e.Providers.ACS.ACSPhoneNumberType.OTHER}},_convertACSEmailAddressTypeToContactEmailAddressType:function(t){if(!t)return e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_OTHER;switch(t){case e.Providers.ACS.ACSEmailAddressType.WORK:return e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_WORK;case e.Providers.ACS.ACSEmailAddressType.OTHER:default:return e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_OTHER}},_convertContactEmailAddressTypeToACSEmailAddressType:function(t){if(!t)return e.Providers.ACS.ACSEmailAddressType.OTHER;switch(t){case e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_WORK:return e.Providers.ACS.ACSEmailAddressType.WORK;case e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_OTHER:default:return e.Providers.ACS.ACSEmailAddressType.OTHER}},_convertACSHandleTypeToContactHandleType:function(t){if(!t)return e.Services.Contacts.ContactHandleType.HANDLE_OTHER;switch(t){case e.Providers.ACS.ACSHandleType.WORK:return e.Services.Contacts.ContactHandleType.HANDLE_WORK;case e.Providers.ACS.ACSHandleType.OTHER:default:return e.Services.Contacts.ContactHandleType.HANDLE_OTHER}},_convertContactHandleTypeToACSHandleType:function(t){if(!t)return e.Providers.ACS.ACSHandleType.OTHER;switch(t){case e.Services.Contacts.ContactHandleType.HANDLE_WORK:return e.Providers.ACS.ACSHandleType.WORK;case e.Services.Contacts.ContactHandleType.HANDLE_OTHER:default:return e.Providers.ACS.ACSHandleType.OTHER}},_getProvenance:function(e,t,i){for(var a=0;a<t.length;a++)if(e[i]===t[a][i])return t[a].provenance&&t[a].provenance.length>0?t[a].provenance:this._defaultProvenance;return this._defaultProvenance},extendAcsContact:function(i){var a;if((i=t.extend(!0,new e.Providers.ACS.ContactV1,i)).emailAddresses){var n=i.emailAddresses.length;for(a=0;n>a;a++)i.emailAddresses[a]=t.extend(!0,new e.Providers.ACS.ContactEmailData,i.emailAddresses[a])}if(i.phoneNumberList){var r=i.phoneNumberList.length;for(a=0;r>a;a++)i.phoneNumberList[a]=t.extend(!0,new e.Providers.ACS.ContactPhoneData,i.phoneNumberList[a])}if(i.imaddresses){var s=i.imaddresses.length;for(a=0;s>a;a++)i.imaddresses[a]=t.extend(!0,new e.Providers.ACS.ContactHandleData,i.imaddresses[a])}return i}},e.Providers.ACS.ACSContactsConverter=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e,t){Error.call(this,e),this.displayMessage=e,this.errorMessage=t}t.prototype=Object.create(Error.prototype),e.Providers.ACS.ACSError=t}(AvayaClientServices),function(e,t){"use strict";function i(i,a){e.Base.Observable.call(this),this._requestBuilder=i,this._restProvider=a,this._restProvider._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._started=!1,this._acsAvailable=!1,this._acsConfig={},this._acsResources={},this._eTag=null,this._startPromise=t.Deferred(),this._stopPromise=t.Deferred()}i.prototype=t.extend({},e.Base.Observable.prototype),i.prototype.start=function(e){if(!1===this._started){this._started=!0,this._startPromise=t.Deferred(),this._acsConfig=e,this._restProvider.onMessage=function(e,t){if(this._setAcsAvailable(!0),void 0!==t){var i=t.getResponseHeader("ETag");null!=i&&(this._eTag=i)}}.bind(this),this._restProvider.start(this._acsConfig.serverInfo,this._acsConfig.credentialProvider);var i=function(){this.sendDiscoverResources().then(function(){this._startPromise.resolve()}.bind(this),function(e){this._startPromise.reject(e),this._started=!1}.bind(this))}.bind(this);this.sendInvalidateSession().then(i)}return this._startPromise.promise()},i.prototype.stop=function(){return!0===this._started&&(this._started=!1,this._stopPromise=t.Deferred(),this._restProvider.onClose=function(){this._setAcsAvailable(!1),this._acsResources={},this._eTag=null,this._stopPromise.resolve()}.bind(this),this._restProvider.close()),this._stopPromise.promise()},i.prototype.sendDiscoverResources=function(){return this.send(null,this._requestBuilder.buildResourcesOptions()).then(function(e){this.parseResources(e)}.bind(this))},i.prototype.sendInvalidateSession=function(){return this.send(null,this._requestBuilder.buildInvalidateSessionOptions())},i.prototype.send=function(e,t){return this._restProvider.send(e,t).then(function(e){return e},function(e){return this._handleError(e)}.bind(this))},i.prototype._handleError=function(t){var i,a;return t&&e.Base.Utils.isDefined(t.readyState)?t.readyState<4?(this._setAcsAvailable(!1),a=i="Connection to ACS failed",e.Base.Logger.warn("Connection to ACS failed")):4===t.readyState&&e.Base.Utils.isDefined(t.status)&&(this._setAcsAvailable(!0),t.responseJSON&&(t.responseJSON.errorMsg&&(i=t.responseJSON.errorMsg),t.responseJSON.displayMsg&&(i=t.responseJSON.displayMsg)),t.status<600&&t.status>=500?(this._setAcsAvailable(!1),i=i||"Unknown ACS Server Error",a=a||i):t.status<500&&t.status>=400&&(i=i||"Unknown Client Error",a=a||i),e.Base.Logger.warn("Request to ACS has failed",[i,a])):(a=i="Unknown Error",e.Base.Logger.warn("Unable to handle unknown error",JSON.stringify(t))),new e.Providers.ACS.ACSError(a,i)},i.prototype.onCredentialsRequired=function(e){this._acsConfig.credentialProvider.onAuthenticationChallenge(void 0,function(t){this.onCredentialsRetrieved(t,e)}.bind(this))},i.prototype.onCredentialsRetrieved=function(t,i){var a=btoa(t.username+":"+t.password);e.Base.Utils.isDefined(i.options)&&(i.options.headers.Authorization="Basic "+a)},i.prototype.parseResources=function(i){this._acsResources=t.extend({},new e.Providers.ACS.ResourcesV1,i),this._requestBuilder.setResources(this._acsResources)},i.prototype.getETag=function(){return this._eTag},i.prototype.getResources=function(){return this._acsResources},i.prototype.isAcsAvailable=function(){return this._acsAvailable},i.prototype.isStarted=function(){return this._started},i.prototype._setAcsAvailable=function(e){this._acsAvailable!==e&&(this._acsAvailable=e,this.trigger("acs_availability_changed"))},e.Providers.ACS.ACSNetworkProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this._acsRequestBuilder=null,this._acsContactsConverter=null,this._acsNetworkProvider=null,this._acsContactsProvider=null,this._acsDirectorySearchProvider=null}i.prototype={getACSContactsProvider:function(){if(!this._acsContactsProvider){var t=this._createACSContactsProviderV1();this._acsContactsProvider=new e.Providers.ACS.ACSContactsProvider,this._acsContactsProvider.registerACSContactsProvider(1,t)}return this._acsContactsProvider},getACSDirectorySearchProvider:function(){if(!this._acsDirectorySearchProvider){var t=this._createACSDirectorySearchProviderV1();this._acsDirectorySearchProvider=new e.Providers.ACS.ACSDirectorySearchProvider,this._acsDirectorySearchProvider.registerACSDirectorySearchProvider(1,t)}return this._acsDirectorySearchProvider},_createACSContactsProviderV1:function(){return new e.Providers.ACS.ACSContactsProviderV1(this._getACSNetworkProvider(),this._getACSContactsConverter(),this._getACSRequestBuilder())},_createACSDirectorySearchProviderV1:function(){return new e.Providers.ACS.ACSDirectorySearchProviderV1(this._getACSNetworkProvider(),this._getACSContactsConverter(),this._getACSRequestBuilder())},_getACSContactsConverter:function(){return this._acsContactsConverter||(this._acsContactsConverter=new e.Providers.ACS.ACSContactsConverter),this._acsContactsConverter},_getACSRequestBuilder:function(){return this._acsRequestBuilder||(this._acsRequestBuilder=new e.Providers.ACS.ACSRequestBuilder),this._acsRequestBuilder},_getACSNetworkProvider:function(){if(!this._acsNetworkProvider){var t=new e.Base.RESTProvider,i=new e.Base.NetworkProvider(t);this._acsNetworkProvider=new e.Providers.ACS.ACSNetworkProvider(this._getACSRequestBuilder(),i)}return this._acsNetworkProvider}},e.Providers.ACS.ACSProviderFactory=i}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Providers.ACS.ACSProviderStates={STARTING:"STARTING",STARTED:"STARTED",STOPPING:"STOPPING",STOPPED:"STOPPED"}}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this._acsResources={},this._endpoints={},this._contentTypes={resourcesV1:"application/vnd.avaya.acs.resources.v1+json",errorV1:"application/vnd.avaya.acs.error.v1+json",contactsV1:"application/vnd.avaya.acs.contacts.v1+json",contactV1:"application/vnd.avaya.acs.contact.v1+json"}}i.prototype={},i.prototype.setResources=function(e){this._acsResources=e,this._endpoints.getContacts=this._acsResources.resources.contacts.GET.getContacts.href,this._endpoints.addUpdateContact=this._acsResources.resources.contacts.POST.addUpdateContact.href},i.prototype.buildResourcesOptions=function(){return{urlSuffix:"/acs/resources",sendType:"GET",dataType:"JSON",headers:{Accept:[this._contentTypes.resourcesV1,this._contentTypes.errorV1].join(", ")}}},i.prototype.buildInvalidateSessionOptions=function(){return{urlSuffix:"/acs/resources/sessions?action=logout",sendType:"POST",headers:{Accept:this._contentTypes.errorV1}}},i.prototype.buildGetContactsOptions=function(e,t,i){var a={headers:{}};if(a.url=this._endpoints.getContacts,t&&(a.url+="?after="+t),a.sendType="GET",a.dataType="JSON",a.headers.Accept=[this._contentTypes.contactsV1,this._contentTypes.errorV1].join(", "),e){var n=120;this._acsResources.avayaRequestTimeout&&this._acsResources.avayaRequestTimeout.recommended&&(n=this._acsResources.avayaRequestTimeout.recommended),i&&(a.headers["If-None-Match"]=i),a.headers["Avaya-Request-Timeout"]=n}return a},i.prototype.buildAddContactOptions=function(){return{url:this._endpoints.addUpdateContact,sendType:"POST",dataType:"JSON",headers:{Accept:[this._contentTypes.contactsV1,this._contentTypes.errorV1].join(", "),"Content-Type":this._contentTypes.contactsV1}}},i.prototype.buildUpdateContactOptions=function(){return{url:this._endpoints.addUpdateContact,sendType:"PUT",dataType:"JSON",headers:{Accept:[this._contentTypes.contactsV1,this._contentTypes.errorV1].join(", "),"Content-Type":this._contentTypes.contactsV1}}},i.prototype.buildAddUpdateContactData=function(e){return JSON.stringify({userEmail:this._acsResources.self,contacts:[e]},this._stringifyReplacer)},i.prototype.buildDeleteContactOptions=function(e){return{url:e,sendType:"DELETE",headers:{Accept:this._contentTypes.errorV1}}},i.prototype.buildSearchContactsOptions=function(t,i){var a={headers:{}};a.url=this._endpoints.getContacts+"?searchDirectory=true";var n=t.getMaxChunkSize();n&&(a.url+="&count="+n);var r=t.getSearchString(),s=t.getSearchScope();return s===e.Services.Contacts.SearchScopeType.GIVEN_NAME?a.url+='&searchCriteria=["FirstName","'+r+'"]':s===e.Services.Contacts.SearchScopeType.SURNAME?a.url+='&searchCriteria=["LastName","'+r+'"]':s===e.Services.Contacts.SearchScopeType.PHONE_NUMBER?a.url+='&searchCriteria=["PhoneNumber","'+r+'"]':s===e.Services.Contacts.SearchScopeType.EMAIL_ADDRESS?a.url+='&searchCriteria=["EmailAddress","'+r+'"]':s===e.Services.Contacts.SearchScopeType.IM_HANDLE?a.url+='&searchCriteria=["IMHandle","'+r+'"]':s===e.Services.Contacts.SearchScopeType.ALL&&(a.url+='&searchCriteria=["ALL","'+r+'"]'),i&&(a.url+="&after="+i),a.sendType="GET",a.dataType="JSON",a.headers.Accept=[this._contentTypes.contactsV1,this._contentTypes.errorV1].join(", "),a},i.prototype._stringifyReplacer=function(e,t){return t&&t.hasOwnProperty("value")&&void 0===t.value?void 0:t},e.Providers.ACS.ACSRequestBuilder=i}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Providers.ACS.ACSEmailAddressType={WORK:"work",OTHER:"other"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Providers.ACS.ACSHandleType={WORK:"work",OTHER:"other"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Providers.ACS.ACSPhoneNumberType={WORK:"work",MOBILE:"mobile",HOME:"home",FAX:"fax",PAGER:"pager",OTHER:"other"}}(AvayaClientServices,jQuery),function(e){"use strict";function t(){this.value=void 0}t.prototype={equals:function(e){return this.value===e.value}},e.Providers.ACS.ContactAttribute=t}(AvayaClientServices),function(e,t){"use strict";function i(){this.value=void 0,this.type=e.Providers.ACS.ACSEmailAddressType.OTHER}i.prototype={equals:function(e){return this.value===e.value&&this.type===e.type}},e.Providers.ACS.ContactEmailData=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this.value=void 0,this.type=e.Providers.ACS.ACSHandleType.OTHER}i.prototype={equals:function(e){return this.value===e.value&&this.type===e.type}},e.Providers.ACS.ContactHandleData=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this.phoneNumber=void 0,this.label1=void 0,this.label2=void 0,this.type=e.Providers.ACS.ACSPhoneNumberType.OTHER,this.speedDialEnabled=!1,this.isPrimary=!1}i.prototype={equals:function(e){return this.phoneNumber===e.phoneNumber&&this.label1===e.label1&&this.label2===e.label2&&this.type===e.type&&this.speedDialEnabled===e.speedDialEnabled&&this.isPrimary===e.isPrimary}},e.Providers.ACS.ContactPhoneData=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){this.id=new e.Providers.ACS.ContactAttribute,this.contactIdentifier=new e.Providers.ACS.ContactAttribute,this.contactUrl=new e.Providers.ACS.ContactAttribute,this.surName=new e.Providers.ACS.ContactAttribute,this.givenName=new e.Providers.ACS.ContactAttribute,this.displayName=new e.Providers.ACS.ContactAttribute,this.aliasGivenName=new e.Providers.ACS.ContactAttribute,this.aliasSurName=new e.Providers.ACS.ContactAttribute,this.company=new e.Providers.ACS.ContactAttribute,this.location=new e.Providers.ACS.ContactAttribute,this.workRoomNo=new e.Providers.ACS.ContactAttribute,this.streetAddress=new e.Providers.ACS.ContactAttribute,this.city=new e.Providers.ACS.ContactAttribute,this.state=new e.Providers.ACS.ContactAttribute,this.country=new e.Providers.ACS.ContactAttribute,this.postalCode=new e.Providers.ACS.ContactAttribute,this.manager=new e.Providers.ACS.ContactAttribute,this.department=new e.Providers.ACS.ContactAttribute,this.asciiGivenName=new e.Providers.ACS.ContactAttribute,this.asciiSurName=new e.Providers.ACS.ContactAttribute,this.asciiDisplayName=new e.Providers.ACS.ContactAttribute,this.pictureUrl=new e.Providers.ACS.ContactAttribute,this.isBuddy=new e.Providers.ACS.ContactAttribute,this.favourite=new e.Providers.ACS.ContactAttribute,this.videoCapable=new e.Providers.ACS.ContactAttribute,this.preferredLanguage=new e.Providers.ACS.ContactAttribute,this.notes=new e.Providers.ACS.ContactAttribute,this.rank=new e.Providers.ACS.ContactAttribute,this.custom1=new e.Providers.ACS.ContactAttribute,this.custom2=new e.Providers.ACS.ContactAttribute,this.custom3=new e.Providers.ACS.ContactAttribute,this.phoneNumberList=[],this.emailAddresses=[],this.imaddresses=[]}t.prototype={equals:function(e){if(!(this.id.equals(e.id)&&this.contactIdentifier.equals(e.contactIdentifier)&&this.contactUrl.equals(e.contactUrl)&&this.surName.equals(e.surName)&&this.givenName.equals(e.givenName)&&this.displayName.equals(e.displayName)&&this.aliasGivenName.equals(e.aliasGivenName)&&this.aliasSurName.equals(e.aliasSurName)&&this.company.equals(e.company)&&this.location.equals(e.location)&&this.workRoomNo.equals(e.workRoomNo)&&this.streetAddress.equals(e.streetAddress)&&this.city.equals(e.city)&&this.state.equals(e.state)&&this.country.equals(e.country)&&this.postalCode.equals(e.postalCode)&&this.manager.equals(e.manager)&&this.department.equals(e.department)&&this.asciiGivenName.equals(e.asciiGivenName)&&this.asciiSurName.equals(e.asciiSurName)&&this.asciiDisplayName.equals(e.asciiDisplayName)&&this.pictureUrl.equals(e.pictureUrl)&&this.isBuddy.equals(e.isBuddy)&&this.favourite.equals(e.favourite)&&this.videoCapable.equals(e.videoCapable)&&this.preferredLanguage.equals(e.preferredLanguage)&&this.notes.equals(e.notes)&&this.rank.equals(e.rank)&&this.custom1.equals(e.custom1)&&this.custom2.equals(e.custom2)&&this.custom3.equals(e.custom3))||this.phoneNumberList.length!==e.phoneNumberList.length||this.emailAddresses.length!==e.emailAddresses.length||this.imaddresses.length!==e.imaddresses.length)return!1;for(var t=0;t<this.phoneNumberList.length;t++)if(!this.phoneNumberList[t].equals(e.phoneNumberList[t]))return!1;for(t=0;t<this.emailAddresses.length;t++)if(!this.emailAddresses[t].equals(e.emailAddresses[t]))return!1;for(t=0;t<this.imaddresses.length;t++)if(!this.imaddresses[t].equals(e.imaddresses[t]))return!1;return!0}},e.Providers.ACS.ContactV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.userEmail="",this.contacts=[],this.hasMoreResults=!1}t.prototype={},e.Providers.ACS.ContactsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.displayMsg="",this.errorMsg=""}t.prototype={},e.Providers.ACS.ErrorV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.version=1,this.resources={avayaRequestTimeout:{maximum:void 0,minimum:void 0,recommended:void 0},capabilities:[],resources:{notification:{websocket:{href:void 0},sse:{href:void 0}},contacts:{POST:{addUpdateContact:{href:void 0}},GET:{getContacts:{href:void 0,limits:{maxSearchResultsPerPage:void 0,maxSearchResultsTotal:void 0}}}},pictures:{GET:{getUserPicture:{href:void 0}}}},self:void 0}}t.prototype={},e.Providers.ACS.ResourcesV1=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.AMM.ChatStateActions={TYPING:"typing",RECORDING_AUDIO:"recordingAudio",RECORDING_VIDEO:"recordingVideo",ATTACHING_FILE:"attachingFile",TAKING_PICTURE:"takingPicture",OTHER:"other"}}(),function(e){"use strict";AvayaClientServices.Providers.AMM.ChatStates={COMPOSING:"composing",PAUSED:"paused"}}(),function(e){"use strict";function t(e,t){Error.call(this,e,t),this.message=e,this.code=t}t.prototype=Object.create(Error.prototype),e.Providers.AMM.AMMError=t}(AvayaClientServices),function(e,t){"use strict";function i(){this._ammProvider={}}i.prototype={getAMMProvider:function(i){if(e.Base.Utils.isDefined(i)&&i.enabled){if(t.isEmptyObject(this._ammProvider)){var a=this._createAMM2Provider(),n=this._createAMM3Provider();this._ammProvider=new e.Providers.AMM.AMMProvider,this._ammProvider.registerAMMProvider(2.1,a),this._ammProvider.registerAMMProvider(3,n)}return this._ammProvider}},_createAMM2Provider:function(){var t=new e.Base.RESTProvider,i=new e.Base.NetworkProvider(t);return new e.Providers.AMM.AMM2Provider(i)},_createAMM3Provider:function(){var t=new e.Base.RESTProvider,i=new e.Base.NetworkProvider(t),a=new e.Base.WebSocketProvider,n=new e.Base.NetworkProvider(a);return new e.Providers.AMM.AMM3Provider(i,n)}},e.Providers.AMM.AMMProviderFactory=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){this.active=!1,this.closed=!1,this.href="",this.sensitivity=""}t.prototype={},e.Providers.AMM.ConversationFlagsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.href="",this.id="",this.lastAccessedTime="",this.lastUpdated=""}t.prototype={},e.Providers.AMM.ConversationIdV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.conversationIds=[],this.href="",this.lastUpdated=""}t.prototype={},e.Providers.AMM.ConversationIdsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.attachmentCount=0,this.href="",this.id="",this.flags=new e.Providers.AMM.ConversationFlagsV1,this.lastAccessedTime="",this.lastUpdated="",this.latestEntryTimestamp="",this.messages=[],this.name="",this.owner="",this.participants={href:""},this.totalCount=0,this.type="",this.unreadAttachmentCount=0,this.unreadCount=0,this.counts={eventCount:0,eventUnreadMessage:0,messageAttachment:0,messageCount:0,messageUnreadAttachment:0,messageUnreadMessage:0}}t.prototype={},e.Providers.AMM.ConversationV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.conversations=[],this.href="",this.lastUpdated="",this.moreSearchResults=!1}t.prototype={},e.Providers.AMM.ConversationsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.address="",this.givenName="",this.language="",this.modalities=[],this.nativeGivenName="",this.nativeSurname="",this.picture="",this.surname="",this.subType="",this.type=""}t.prototype={},e.Providers.AMM.EntityV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.displayMsg="",this.errorMsg="",this.errorCode=0}t.prototype={},e.Providers.AMM.ErrorV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.participants=[],this.reason="",this.type="",this.units="",this.value=0}t.prototype={},e.Providers.AMM.EventV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.doNotForward=!1,this.href="",this.importance="",this.read=!1,this.sensitivity=""}t.prototype={},e.Providers.AMM.MessageFlagsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.body="",this.event=new e.Providers.AMM.EventV1,this.flags=new e.Providers.AMM.MessageFlagsV1,this.from=new e.Providers.AMM.EntityV1,this.href="",this.id="",this.inReplyTo="",this.lastModifiedDate="",this.parts=[],this.receivedDate="",this.subject="",this.threadId="",this.to=[]}t.prototype={},e.Providers.AMM.MessageV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.action="",this.address="",this.state="",this.timestamp=""}t.prototype={},e.Providers.AMM.NotificationContentsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.disposition="",this.duration=0,this.media="",this.mimeType="",this.partId="",this.size=0}t.prototype={},e.Providers.AMM.PartV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.participants=[]}t.prototype={},e.Providers.AMM.ParticipantsV1=t}(AvayaClientServices),function(e){"use strict";function t(){this.version=2,this.addresses="",this.avayaRequestTimeout={recommended:0,maximum:0,minimum:0},this.capabilities={richContent:!1},this.conversationsResource={href:"",maxMessageCount:0},this.limits={maxAudioSize:0,maxGenericAttachmentSize:0,maxImageSize:0,maxTextLength:0,maxVideoSize:0},this.messages="",this.outbox="",this.self="",this.services={markAsReadIf:"",validateAddress:""}}t.prototype={},e.Providers.AMM.ResourcesV2=t}(AvayaClientServices),function(e){"use strict";function t(){this.version=3,this.avayaRequestTimeout={recommended:0,maximum:0,minimum:0},this.capabilities={richContent:!1},this.conversationsResource={href:"",maxMessageCount:0},this.limits={maxAudioSize:0,maxGenericAttachmentSize:0,maxImageSize:0,maxTextLength:0,maxVideoSize:0},this.messages="",this.outbox="",this.self="",this.services={markAsReadIf:"",validateAddress:""}}t.prototype={},e.Providers.AMM.ResourcesV3=t}(AvayaClientServices),function(e){"use strict";function t(){this.version=4,this.avayaRequestTimeout={recommended:0,maximum:0,minimum:0},this.capabilities={richContent:!1},this.contacts={href:""},this.conversationsResource={href:"",capabilities:{automaticLastAccessedDate:!1,postSessionEvent:!1,subjectChange:!1},limits:{maxMessageCount:0,maxIdsLimit:0}},this.domains=[],this.messages={href:""},this.notifications={href:""},this.outbox={href:"",capabilities:{richContent:!1},limits:{maxAudioSize:0,maxGenericAttachmentSize:0,maxImageSize:0,maxTextLength:0,maxVideoSize:0}},this.picture={href:""},this.self="",this.services={markAsReadIf:{href:""},validateAddress:{href:""},markAsReadBatch:{href:"",limits:{maxBatchSize:0}}}}t.prototype={},e.Providers.AMM.ResourcesV4=t}(AvayaClientServices),function(e){"use strict";function t(){this.query="",this.addresses=[]}t.prototype={},e.Providers.AMM.ValidatedAddressesV1=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i){e.Base.Logger.debug("Initializing CallProvider"),e.Base.Observable.call(this),this._config=t,this._callGatewayProvider=i,this._conferenceProvider=void 0,this._cpCalls={},this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.PROCESS_MEDIA_REQUEST,this._processMediaRequestHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CALL_RINGING,this._callRingingHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CALL_ESTABLISHED,this._callEstablishedHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CREATE_MEDIA_REQUEST,this._createMediaRequestHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CALL_ENDED,this._callEndedHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CALL_INCOMING,this._incomingCallHandler.bind(this)),this._callGatewayProvider.on(e.Providers.CallServiceGateway.ObservableEvents.CALL_FAILURE,this._callFailureHandler.bind(this)),e.Base.Logger.debug("Initialized CallProvider")}e.Providers.Call={};var a=e.Providers.Call;i.prototype=Object.create(e.Base.Observable.prototype),i.prototype.start=function(e){return this._callGatewayProvider.start(this._config,e)},i.prototype.stop=function(){return this._terminateCalls(),this._callGatewayProvider.stop()},i.prototype.startCall=function(e,i,n){var r=t.Deferred(),s=this._createCPCall(e),o={video:i,webCollab:n};o.remoteAddress=e.getRemoteAddress();var c=new a.StartCallEvent(o);return s.handleEvent(c),r.resolve()},i.prototype._createCPCall=function(t){return new e.Providers.Call.CPCall(t,this,this._callGatewayProvider)},i.prototype.stopCall=function(e){var i=t.Deferred(),a=this._cpCalls[e.getCallId()];return a&&a.end("normal"),i.resolve()},i.prototype.accept=function(e){var i=t.Deferred(),n=this._cpCalls[e.getCallId()];n.call=e,this.registerCall(e.getCallId(),e,n);var r=new a.AcceptCallEvent;return n.handleEvent(r),i.resolve()},i.prototype.getCalls=function(){return this._callGatewayProvider.getCalls()},i.prototype.getClients=function(){return this._callGatewayProvider.getClients()},i.prototype.getCall=function(e){return this._callGatewayProvider.getCall(e)},i.prototype.getClient=function(e){return this._callGatewayProvider.getClient(e)},i.prototype.muteAudio=function(e){var i=t.Deferred(),a=this._cpCalls[e.getCallId()];return a?(a.muteAudio(),i.resolve()):i.reject("Unable to find CpCall")},i.prototype.unmuteAudio=function(e){var i=t.Deferred(),a=this._cpCalls[e.getCallId()];return a?(a.unmuteAudio(),i.resolve()):i.reject("Unable to find CpCall")},i.prototype.hold=function(e){var t=this._cpCalls[e.getCallId()];return this._callGatewayProvider.holdCall(t.callId)},i.prototype.unhold=function(e){var t=this._cpCalls[e.getCallId()];return this._callGatewayProvider.unholdCall(t.callId)},i.prototype._terminateCalls=function(){for(;this._cpCalls.length;){var t=this._cpCalls.pop();t?t.end():e.Base.Logger.log("Call not found: "+callId)}},i.prototype.getOfferSDP=function(e){var t=this._cpCalls[e];t?t.getOfferSDP():this._retryGetOfferSDP(0,e)},i.prototype._retryGetOfferSDP=function(t,i){setTimeout(function(){var a=this._cpCalls[i];!a&&3>t?this._retryGetOfferSDP(t+1,i):a?a.getOfferSDP():t>=3&&e.Base.Logger.log("Failed to find call to send getOfferSDP")}.bind(this),500)},i.prototype.offerSDP=function(t,i,a,n,r){var s=this._cpCalls[t];s?s.offerSDP(a,i,n,r):e.Base.Logger.log("Call not found: "+t)},i.prototype.callRinging=function(t,i,a){var n=this._cpCalls[t];n?n.callRinging(i,a):e.Base.Logger.log("Call not found: "+t)},i.prototype.answerSDP=function(t,i,a,n,r){var s=this._cpCalls[t];s?s.answerSDP(a,i,n,r):e.Base.Logger.log("Call not found: "+t)},i.prototype.callEstablished=function(t,i,a,n,r,s){var o=this._cpCalls[t];o?o.callEstablished(i,a,n,r,s):e.Base.Logger.log("Call not found: "+t)},i.prototype.callEndedRemotely=function(t){var i=this._cpCalls[t];i?i.callEndedRemotely():e.Base.Logger.log("Call not found: "+t)},i.prototype.callFailed=function(t,i,a){var n=this._cpCalls[t];n?n.end(a):e.Base.Logger.log("Call not found: "+t)},i.prototype.triggerCallStarted=function(t){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CALL_STARTED,[t])},i.prototype.triggerCallRinging=function(t){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CALL_RINGING,[t])},i.prototype.triggerCallEstablished=function(t,i,a,n){i&&this.triggerConferenceEscalation(t,a,n),this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CALL_ESTABLISHED,[t,i])},i.prototype.triggerRemoteStreamAdded=function(t,i){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.REMOTE_STREAM_ADDED,[t,i])},i.prototype.triggerLocalStreamAdded=function(t,i){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.LOCAL_STREAM_ADDED,[t,i])},i.prototype.triggerCallEnded=function(t,i){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CALL_ENDED,[t,i])},i.prototype.triggerIncomingCall=function(t,i,a){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.INCOMING_CALL,[t,i,a])},i.prototype.triggerConferenceEscalation=function(t,i,a){this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CONFERENCE_ESCALATION,[t,i,a])},i.prototype.registerCall=function(t,i,a){e.Base.Logger.log("callProvider registerCall: "+t),i.setCallId(t),this._cpCalls[t]=a},i.prototype.unRegisterCall=function(t){t&&(e.Base.Logger.log("callProvider unregisterCall: "+t.getCallId()),delete this._cpCalls[t.getCallId()])},i.prototype.setConferenceProvider=function(e){this._conferenceProvider=e},i.prototype._processMediaRequestHandler=function(t,i,a,n,r,s){e.Base.Logger.debug("Received Process Media Request: "+a),"answer"===a?this.answerSDP(t,i,n,r,s):this.offerSDP(t,i,n,r,s)},i.prototype._callRingingHandler=function(t,i,a,n,r){e.Base.Logger.debug("Received Call Ringing"),this.callRinging(t,i,a,n,r)},i.prototype._callEstablishedHandler=function(t,i,a,n,r,s){e.Base.Logger.debug("Received Call Established"),this.callEstablished(t,i,a,n,r,s)},i.prototype._createMediaRequestHandler=function(t){e.Base.Logger.debug("Received Create Media Request"),this.getOfferSDP(t)},i.prototype._callEndedHandler=function(t){e.Base.Logger.log("Received Call Ended"),this.callEndedRemotely(t)},i.prototype._incomingCallHandler=function(t,i,a,n,r,s,o){e.Base.Logger.debug("Received Incoming Call");var c=new e.Providers.Call.CPCall(null,this,this._callGatewayProvider);c.callId=t,c.incomingCallInfo={remoteAddress:i,remoteDisplayName:a,sdp:r,audioChannel:s,videoChannels:o},this._cpCalls[t]=c,this.triggerIncomingCall(t,i,a)},i.prototype._callFailureHandler=function(t,i,a){e.Base.Logger.log("Received Call Failure: ["+i+":"+a+"]"),this.callFailed(t,i,a)},e.Providers.Call.CallProvider=i}(window.AvayaClientServices=window.AvayaClientServices||{},window.jQuery=window.jQuery||{}),function(e){"use strict";var t=e.Providers.Call;t.StartCallEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.StartCallEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.StartCallEvent.stringValue="START_CALL",t.StartCallResponseEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.StartCallResponseEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.StartCallResponseEvent.stringValue="START_CALL_RESPONSE",t.GetOfferSDPEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.GetOfferSDPEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.GetOfferSDPEvent.stringValue="GET_OFFER_SDP",t.OfferSDPEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.OfferSDPEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.OfferSDPEvent.stringValue="OFFER_SDP",t.CallRingingEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.CallRingingEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.CallRingingEvent.stringValue="CALL_RINGING",t.AnswerSDPEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.AnswerSDPEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.AnswerSDPEvent.stringValue="ANSWER_SDP",t.CallEstablishedEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.CallEstablishedEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.CallEstablishedEvent.stringValue="CALL_ESTABLISHED",t.EndCallEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.EndCallEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.EndCallEvent.stringValue="END_CALL",t.EndCallResponseEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.EndCallResponseEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.EndCallResponseEvent.stringValue="END_CALL_RESPONSE",t.OnAddStreamEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.OnAddStreamEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.OnAddStreamEvent.stringValue="ON_ADD_STREAM",t.IncomingCallEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.IncomingCallEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.IncomingCallEvent.stringValue="INCOMING_CALL",t.AcceptCallEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.AcceptCallEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.AcceptCallEvent.stringValue="ACCEPT_CALL",t.MuteAudioEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.MuteAudioEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.MuteAudioEvent.stringValue="MUTE_AUDIO",t.UnmuteAudioEvent=function t(i){e.Base.SimpleFsm.SimpleFsmEvent.call(this,t.stringValue,i)},t.UnmuteAudioEvent.prototype=Object.create(e.Base.SimpleFsm.SimpleFsmEvent.prototype),t.UnmuteAudioEvent.stringValue="UNMUTE_AUDIO"}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";var t=e.Providers.Call.States={};t.INITIAL=new e.Base.SimpleFsm.SimpleFsmState("INITIAL"),t.STARTING=new e.Base.SimpleFsm.SimpleFsmState("STARTING"),t.STARTING_SLOW_START=new e.Base.SimpleFsm.SimpleFsmState("STARTING_SLOW_START"),t.ALERTING=new e.Base.SimpleFsm.SimpleFsmState("ALERTING"),t.ACTIVE=new e.Base.SimpleFsm.SimpleFsmState("ACTIVE"),t.FAILED=new e.Base.SimpleFsm.SimpleFsmState("FAILED"),t.ENDING=new e.Base.SimpleFsm.SimpleFsmState("ENDING"),t.ENDED=new e.Base.SimpleFsm.SimpleFsmState("ENDED")}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";var t="m=audio",i="m=video",a="a=recvonly",n="a=sendonly",r="a=sendrecv ",s="a=inactive";e.Providers.Call.Utils={updateAudioSdpInactive:function(i){return e.Providers.Call.Utils.updateSdp(i,t,s)},updateAudioSdpRecvOnly:function(i){return e.Providers.Call.Utils.updateSdp(i,t,a)},updateAudioSdpSendOnly:function(i){return e.Providers.Call.Utils.updateSdp(i,t,n)},updateAudioSdpSendRecv:function(i){return e.Providers.Call.Utils.updateSdp(i,t,r)},updateVideoSdpInactive:function(t){return e.Providers.Call.Utils.updateSdp(t,i,s)},updateVideoSdpRecvOnly:function(t){return e.Providers.Call.Utils.updateSdp(t,i,a)},updateVideoSdpSendOnly:function(t){return e.Providers.Call.Utils.updateSdp(t,i,n)},updateVideoSdpSendRecv:function(t){return e.Providers.Call.Utils.updateSdp(t,i,r)},updateSdp:function(e,a,n){if(-1===e.indexOf(a))return e;var r=e.indexOf(t),s=e.indexOf(i);return a===t?s>r?e.substring(0,r)+e.substring(r,s).replace(/a=inactive|a=sendrecv|a=recvonly|a=sendonly/,n)+e.substring(s):e.substring(0,r)+e.substring(r).replace(/a=inactive|a=sendrecv|a=recvonly|a=sendonly/,n):r>s?e.substring(0,s)+e.substring(s,r).replace(/a=inactive|a=sendrecv|a=recvonly|a=sendonly/,n)+e.substring(r):e.substring(0,s)+e.substring(s).replace(/a=inactive|a=sendrecv|a=recvonly|a=sendonly/,n)}},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){var t=this;return function(){var i=Array.prototype.slice.call(arguments);return t.apply(e||null,i)}})}(AvayaClientServices),function(e){"use strict";function t(t,a,n){console.debug("Initializing CallProvider"),this._config={},this._callGatewayProvider=n,this._callProvider=a,this._userMedia=new e.Base.UserMedia,this.call=t,this.localStream=null,this.remoteStream=null,this.callId=null,this.incomingCallInfo={remoteAddress:void 0,remoteDisplayName:void 0,sdp:""},this.audioChannel=null,this.videoChannels=[],this._rtConnection=new e.Base.RTCConnectionProvider,this._fsm=new e.Base.SimpleFsm.SimpleFsm,this._fsm.registerHandler(i.States.INITIAL,i.StartCallEvent,i.StartCallEventInInitialHandler),this._fsm.registerHandler(i.States.INITIAL,i.AcceptCallEvent,i.AcceptCallEventInInitialHandler),this._fsm.registerHandler(i.States.INITIAL,i.EndCallEvent,i.EndCallEventInMultipleHandler),this._fsm.registerHandler(i.States.STARTING,i.StartCallResponseEvent,i.StartCallResponseEventInStartingHandler),this._fsm.registerHandler(i.States.STARTING,i.GetOfferSDPEvent,i.GetOfferSDPEventInStartingHandler),this._fsm.registerHandler(i.States.STARTING,i.OfferSDPEvent,i.OfferSDPEventInStartingHandler),this._fsm.registerHandler(i.States.STARTING,i.CallRingingEvent,i.CallRingingEventInStartingHandler),this._fsm.registerHandler(i.States.STARTING,i.AnswerSDPEvent,i.AnswerSDPEventInMultipleHandler),this._fsm.registerHandler(i.States.STARTING,i.MuteAudioEvent,i.MuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.STARTING,i.UnmuteAudioEvent,i.UnmuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.STARTING,i.CallEstablishedEvent,i.CallEstablishedEventInMultipleHandler),this._fsm.registerHandler(i.States.STARTING,i.EndCallEvent,i.EndCallEventInMultipleHandler),this._fsm.registerHandler(i.States.ALERTING,i.AnswerSDPEvent,i.AnswerSDPEventInMultipleHandler),this._fsm.registerHandler(i.States.ALERTING,i.MuteAudioEvent,i.MuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.ALERTING,i.UnmuteAudioEvent,i.UnmuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.ALERTING,i.CallEstablishedEvent,i.CallEstablishedEventInMultipleHandler),this._fsm.registerHandler(i.States.ALERTING,i.EndCallEvent,i.EndCallEventInMultipleHandler),this._fsm.registerHandler(i.States.ACTIVE,i.OfferSDPEvent,i.OfferSDPEventInActiveHandler),this._fsm.registerHandler(i.States.ACTIVE,i.MuteAudioEvent,i.MuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.ACTIVE,i.UnmuteAudioEvent,i.UnmuteAudioEventInMultipleHandler),this._fsm.registerHandler(i.States.ACTIVE,i.EndCallEvent,i.EndCallEventInActiveHandler),this._fsm.registerNoOpHandler(i.States.ENDING,i.EndCallEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.StartCallResponseEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.GetOfferSDPEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.CallRingingEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.AnswerSDPEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.MuteAudioEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.UnmuteAudioEvent),this._fsm.registerNoOpHandler(i.States.ENDING,i.CallEstablishedEvent),this._fsm.registerHandler(i.States.ENDING,i.EndCallResponseEvent,i.EndCallResponseEventInEndingHandler),this._fsm.registerNoOpHandler(i.States.ENDED,i.EndCallEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.StartCallResponseEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.GetOfferSDPEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.CallRingingEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.AnswerSDPEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.MuteAudioEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.UnmuteAudioEvent),this._fsm.registerNoOpHandler(i.States.ENDED,i.CallEstablishedEvent),this._fsm.start(i.States.INITIAL),console.debug("Initialized CPCall")}var i=e.Providers.Call;t.prototype={},t.prototype.prepareEvent=function(e){return e.data||(e.data={}),e.data.cpCall=this,e.data.callProvider=this._callProvider,e},t.prototype.handleEvent=function(e){this.prepareEvent(e),this._fsm.handleEvent(e)},t.prototype.start=function(){var e=new i.StartCallEvent;e.data={},e.data.remoteAddress=this.call.getRemoteAddress(),this.handleEvent(e)},t.prototype.getOfferSDP=function(){var e=new i.GetOfferSDPEvent;this.handleEvent(e)},t.prototype.offerSDP=function(e,t,a,n){var r=new i.OfferSDPEvent;r.data={offer:e,action:t,audioChannel:a,videoChannels:n},this.handleEvent(r)},t.prototype.callRinging=function(e,t){var a=new i.CallRingingEvent;a.data={address:e,displayName:t},this.handleEvent(a)},t.prototype.answerSDP=function(e,t,a,n){var r=new i.AnswerSDPEvent;r.data={answer:e,action:t,audioChannel:a,videoChannels:n},this.handleEvent(r)},t.prototype.callEstablished=function(e,t,a,n,r){var s=new i.CallEstablishedEvent;s.data={address:e,displayName:t,isConf:a},a&&(s.data.uccpUrl=n,s.data.webCollabUrl=r),this.handleEvent(s)},t.prototype.muteAudio=function(){var e=new i.MuteAudioEvent;this.handleEvent(e)},t.prototype.unmuteAudio=function(){var e=new i.UnmuteAudioEvent;this.handleEvent(e)},t.prototype.end=function(e){var t=new i.EndCallEvent;t.data={remote:!1,reason:e},this.handleEvent(t)},t.prototype.callEndedRemotely=function(){var e=new i.EndCallEvent;e.data={remote:!0},this.handleEvent(e)},t.prototype.incomingCall=function(){var e=new i.IncomingCallEvent;this.handleEvent(e)},t.prototype.callFailed=function(e,t,a){var n=new i.EndCallEvent;n.data={remote:!1,reason:a},this.handleEvent(n)},t.prototype.setAVChannels=function(t){if(e.Base.Utils.isDefined(t)){var i=0;t.forEach(function(e){var t=this._getStreamDirection(e.direction);"audio"===e.type?this.audioChannel={channelId:e.id,state:"ENABLE",direction:t}:"video"===e.type&&(this.videoChannels[i]={channelId:e.id,state:"ENABLE",direction:t},i++)}.bind(this))}},t.prototype._getStreamDirection=function(t){return t===e.Providers.Interfaces.StreamDirection.SENDRECV?e.Providers.CallServiceGateway.Constants.SEND_RECV:t===e.Providers.Interfaces.StreamDirection.RECVONLY?e.Providers.CallServiceGateway.Constants.RECV_ONLY:t===e.Providers.Interfaces.StreamDirection.SEND_ONLY?e.Providers.CallServiceGateway.Constants.SEND_ONLY:e.Providers.CallServiceGateway.Constants.INACTIVE},t.prototype.getAudioChannel=function(){return this.audioChannel},t.prototype.getVideoChannels=function(){return this.videoChannels},t.prototype.updateAudioChannel=function(t){if(e.Base.Utils.isDefined(t))switch(t.direction){case"SEND_ONLY":this.audioChannel.direction="RECEIVE_ONLY";break;case"RECEIVE_ONLY":this.audioChannel.direction="SEND_ONLY"}},t.prototype.updateVideoChannels=function(t){if(e.Base.Utils.isDefined(t))for(var i=0;i<t.length;i++)if(t[i])switch(t[i].direction){case"SEND_ONLY":this.videoChannels[i].direction="RECEIVE_ONLY";break;case"RECEIVE_ONLY":this.videoChannels[i].direction="SEND_ONLY"}},e.Providers.Call.CPCall=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.AcceptCallEventInInitialHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider,n=i._callGatewayProvider;return i._userMedia.getUserMedia(null,function(t){console.debug("getUserMedia success");var r=[];i._rtConnection.disableStream(t),t.getTracks().forEach(function(t){"audio"===t.kind?r.push(new e.Providers.Interfaces.AudioStream(t.id,e.Providers.Interfaces.StreamDirection.SENDRECV)):"video"===t.kind&&r.push(new e.Providers.Interfaces.VideoStream(t.id,e.Providers.Interfaces.StreamDirection.SENDRECV))}),i.localStream=t,a.triggerLocalStreamAdded(i.call,t),i.incomingCallInfo.sdp.indexOf("a=fingerprint:")>0||i._rtConnection.createPeerConnection({optional:[{DtlsSrtpKeyAgreement:!1}]});var s=i._rtConnection;s.addStream(i.localStream),s.onAddStream=function(e){e.getTracks().forEach(function(e){e.enabled=!1}),i.remoteStream=e,a.triggerRemoteStreamAdded(i.call,e)},s.createAnswer(i.incomingCallInfo.sdp,function(e){n.acceptCall(i.callId,e.type,e.sdp)},function(t){var a="Error while creating answer: "+t;e.Base.Logger.error(a),i.end(a)})},function(t){var a="Error while retrieving local stream: "+t;e.Base.Logger.error(a),i.end(a)}),{nextState:e.Providers.Call.States.ALERTING}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.AnswerSDPEventInMultipleHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider,n=i._callGatewayProvider,r=i._rtConnection;r.onAddStream=function(t){e.Base.Logger.debug("Added REMOTE stream"),t.getTracks().forEach(function(e){e.enabled=!1}),i.remoteStream=t,a.triggerRemoteStreamAdded(i.call,t)},i.updateAudioChannel(t.data.audioChannel),i.updateVideoChannels(t.data.videoChannels),r.receiveAnswer(t.data.answer,function(){n.answerSDPResponse(i.callId,i.getAudioChannel(),i.getVideoChannels())},function(t){e.Base.Logger.error("Error receiving answer SDP: "+t)})}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.CallEstablishedEventInMultipleHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider;return i._callGatewayProvider,i._userMedia,i._rtConnection.enableAllStreams(),e.Base.Utils.isDefined(t.data.displayName)?i.call.setRemoteDisplayName(t.data.displayName):i.call.setRemoteDisplayName(t.data.remoteAddress),a.triggerCallEstablished(i.call,t.data.isConf,t.data.uccpUrl,t.data.webCollabUrl),{nextState:e.Providers.Call.States.ACTIVE}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.CallRingingEventInStartingHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider;return i._callGatewayProvider,i._userMedia,e.Base.Utils.isDefined(t.data.displayName)?i.call.setRemoteDisplayName(t.data.displayName):i.call.setRemoteDisplayName(t.data.remoteAddress),a.triggerCallRinging(i.call),{nextState:e.Providers.Call.States.ALERTING}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.EndCallEventInActiveHandler=function(t){var i=t.data.cpCall,a=i._callGatewayProvider,n=new e.Providers.Call.EndCallResponseEvent;return n.data={},i._rtConnection.stopAllStreams(),t.data.remote?(n.data.reason="remote",{nextState:e.Providers.Call.States.ENDING,nextEvent:i.prepareEvent(n)}):(n.data.reason=t.data.reason,a.endCall(i.callId).then(function(){i.handleEvent(n)},function(e){i.handleEvent(n)}),{nextState:e.Providers.Call.States.ENDING})}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.EndCallEventInMultipleHandler=function(t){var i=t.data.cpCall,a=i._callGatewayProvider,n=new e.Providers.Call.EndCallResponseEvent;return n.data={},t.data.reason?n.data.reason=t.data.reason:n.data.reason="normal",i._rtConnection.stopAllStreams(),a.endCall(i.callId).then(function(){i.handleEvent(n)},function(e){i.handleEvent(n)}),{nextState:e.Providers.Call.States.ENDING}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.EndCallResponseEventInEndingHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider;return i._callGatewayProvider,i.localStream=null,i.remoteStream=null,i._rtConnection.close(),i._rtConnection=null,a.triggerCallEnded(i.call,t.data.reason),a.unRegisterCall(i.call),{nextState:e.Providers.Call.States.ENDED}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.GetOfferSDPEventInStartingHandler=function(t){var i=t.data.cpCall,a=i._callGatewayProvider,n=i.call.getConferenceEntryOptions();e.Base.Utils.isDefined(n)&&n.getToken()&&!n.isDtlsSrtpKeyAgreement()&&i._rtConnection.createPeerConnection({optional:[{DtlsSrtpKeyAgreement:!1}]});var r=i._rtConnection;r.addStream(i.localStream),r.onAddStream=function(t){i.handleEvent(new e.Base.CallProvider.OnAddStreamEvent(t))},r.createOffer(function(e){a.getOfferSDPResponse(i.callId,e)},function(t){var a="Error while creating offer: "+t;e.Base.Logger.error(a),i.end(a)})}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Call.MuteAudioEventInMultipleHandler=function(e){var t=e.data.cpCall;e.data.callProvider,t.localStream&&t._rtConnection.disableAudioStream(t.localStream)}}(),function(e){"use strict";e.Providers.Call.OfferSDPEventInActiveHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider,n=i._callGatewayProvider,r=i._rtConnection;r.addStream(i.localStream),r.onAddStream=function(e){e.getTracks().forEach(function(e){e.enabled=!1}),i.remoteStream=e,a.triggerRemoteStreamAdded(i.call,e)},r.createAnswer(t.data.offer,function(e){n.offerSDPResponse(i.callId,e)},function(t){var a="Error while creating answer: "+t;e.Base.Logger.error(a),i.end(a)})}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";e.Providers.Call.OfferSDPEventInStartingHandler=function(t){var i=t.data.cpCall,a=t.data.callProvider,n=i._callGatewayProvider,r=i._rtConnection;r.addStream(i.localStream),r.onAddStream=function(e){e.getTracks().forEach(function(e){e.enabled=!1}),i.remoteStream=e,a.triggerRemoteStreamAdded(i.call,e)},i.updateAudioChannel(t.data.audioChannel),i.updateVideoChannels(t.data.videoChannels),r.createAnswer(t.data.offer,function(e){n.offerSDPResponse(i.callId,e,t.data.action,i.getAudioChannel(),i.getVideoChannels())},function(t){var a="Error while creating offer: "+t;e.Base.Logger.error(a),i.end(a)})}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t){if(e.Base.Utils.isDefined(t))switch(t){case e.Services.Call.MediaDirection.RECV_ONLY:return e.Providers.Interfaces.StreamDirection.RECVONLY;case e.Services.Call.MediaDirection.SEND_ONLY:return e.Providers.Interfaces.StreamDirection.SENDONLY;case e.Services.Call.MediaDirection.INACTIVE:return e.Providers.Interfaces.StreamDirection.INACTIVE;case e.Services.Call.MediaDirection.SEND_RECV:default:return e.Providers.Interfaces.StreamDirection.SENDRECV}return e.Providers.Interfaces.StreamDirection.SENDRECV}e.Providers.Call.StartCallEventInInitialHandler=function(i){var a=i.data.cpCall,n=i.data.callProvider,r=a._callGatewayProvider,s=a._userMedia,o=a.call.getVideoChannels(),c={audio:!0};if(e.Base.Utils.isDefined(o))for(var l=0;l<o.length;l++)if(o[l].getRequestedDirection()===e.Services.Call.MediaDirection.SEND_RECV){c.video=!0;break}return s.getUserMedia(c,function(s){e.Base.Logger.debug("getUserMedia success");var c=[];a._rtConnection.disableStream(s);var l=0;if(s.getTracks().forEach(function(i){if("audio"===i.kind)c.push(new e.Providers.Interfaces.AudioStream(i.id,e.Providers.Interfaces.StreamDirection.SENDRECV));else if("video"===i.kind){var a=e.Providers.Interfaces.StreamDirection.SENDRECV;e.Base.Utils.isDefined(o)&&l<o.length&&(a=t(o[l].getRequestedDirection()),l++),c.push(new e.Providers.Interfaces.VideoStream(i.id,a))}}),0===l&&e.Base.Utils.isDefined(o))for(var d=0;d<o.length;d++){var u=t(o[d].getRequestedDirection());c.push(new e.Providers.Interfaces.VideoStream(d+1,u))}a.setAVChannels(c),a.localStream=s,n.triggerLocalStreamAdded(a.call,s),r.startCall(i.data.remoteAddress,a.call.getConferenceEntryOptions(),i.data.video,i.data.webCollab,a.getAudioChannel(),a.getVideoChannels()).then(function(t){e.Base.Logger.debug("callGateway startCallResponse: "+JSON.stringify(t));var i=new e.Providers.Call.StartCallResponseEvent;i.data={},i.data.callId=t.callId,a.handleEvent(i)},function(e){a.end("Error while staring call: "+e)}),n.triggerCallStarted(a.call)},function(){e.Base.Logger.error("Failed to get local media streams for call."),a.end("Failed to get local media streams")}),{nextState:e.Providers.Call.States.STARTING}}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Call.StartCallResponseEventInStartingHandler=function(e){var t=e.data.cpCall,i=e.data.callProvider,a=(t._callGatewayProvider,e.data.callId);t.callId=a,i.registerCall(a,t.call,t)}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Call.UnmuteAudioEventInMultipleHandler=function(e){var t=e.data.cpCall;e.data.callProvider,t.localStream&&t._rtConnection.enableAudioStream(t.localStream)}}(),function(e){"use strict";function t(t,i,a){e.Base.Observable.call(this),this._networkProvider=t,this._config={},this._notificationProvider=i,this._notificationParser=a}t.prototype=Object.create(e.Base.Observable.prototype),t.prototype.init=function(t){return this._config=t,this._networkProvider.onMessage=function(e){},this._networkProvider.onError=function(t){e.Base.Logger.error(t)},this._networkProvider.init(this._config),this._notificationProvider.onMessage=function(e){var t,i,a=JSON.parse(e.data);try{t=JSON.parse(a.message),i=(i=this._notificationParser.parse(t))||t}catch(e){i=a}i.type?this.trigger("call."+i.type,[i]):this.trigger("call.message",[i])}.bind(this),this._notificationProvider.onError=function(t){e.Base.Logger.error(t)},this._notificationProvider.init(this._config),this},t.prototype.startCall=function(t){var i=JSON.stringify({remoteAddress:t});return this._networkProvider.send(i,{sendType:"POST",urlSuffix:"/restgateway/calls",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return new e.Providers.CallGateway.StartCallData(t.callHref,t.callId)})},t.prototype.endCall=function(e){var t={sendType:"DELETE",urlSuffix:"/restgateway/calls/"+e,dataType:"text",headers:{Accept:"application/json","Content-Type":"application/json"}};return this._networkProvider.send(null,t)},t.prototype.acceptCall=function(e,t){var i={sendType:"POST",urlSuffix:"/restgateway/calls/"+e+"/connections/"+t,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json;"}};return this._networkProvider.send(null,i)},t.prototype.holdCall=function(e,t){var i={sendType:"POST",urlSuffix:"/restgateway/calls/"+e+"/connections/"+t+"/hold",dataType:"text",headers:{Accept:"application/json","Content-Type":"application/json;"}};return this._networkProvider.send(null,i)},t.prototype.unholdCall=function(e,t){var i={sendType:"POST",urlSuffix:"/restgateway/calls/"+e+"/connections/"+t+"/unhold",dataType:"text",headers:{Accept:"application/json","Content-Type":"application/json;"}};return this._networkProvider.send(null,i)},e.Providers.CallGateway.CallGatewayProvider=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.ActiveCallMessage=function(e,t,i,a,n,r,s,o,c,l){this.type="active",this.callEvent="ACTIVE",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.connectionId=s,this.connectionHref=o,this.address=c,this.operations=l}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.AlertingCallMessage=function(e,t,i,a,n,r,s,o,c,l,d){this.type="alerting",this.callEvent="ALERTING",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.connectionId=s,this.connectionHref=o,this.address=c,this.operations=l,this.alertingParticipant=d}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.AnsweredCallMessage=function(e,t,i,a,n,r,s,o,c,l,d){this.type="answered",this.callEvent="ANSWERED",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.connectionId=s,this.connectionHref=o,this.address=c,this.operations=l,this.answeringParticipant=d}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.FailedCallMessage=function(e,t,i,a,n,r,s,o){this.type="failed",this.callEvent="FAILED",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.address=s,this.reason=o}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.HeldCallMessage=function(e,t,i,a,n,r,s,o,c,l){this.type="held",this.callEvent="HELD",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.connectionId=s,this.connectionHref=o,this.address=c,this.operations=l}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.ParticipantDroppedCallMessage=function(e,t,i,a,n){this.type="participantDropped",this.callEvent="PARTICIPANTDROPPED",this.participants=e,this.callId=t,this.callHref=i,this.address=a,this.droppingParticipant=n}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.StartCallData=function(e,t){this.callId=t,this.callHref=e}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.SubscriptionCallMessage=function(e,t,i){this.type="subscription",this.callEvent="SUBSCRIPTION",this.status=e,this.subscriptionId=t,this.additionalProperties=i}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.CallGateway.UnheldCallMessage=function(e,t,i,a,n,r,s,o,c,l){this.type="unheld",this.callEvent="UNHELD",this.originalCallingParticipant=e,this.originalCalledParticipant=t,this.participants=i,this.callId=a,this.ucId=n,this.callHref=r,this.connectionId=s,this.connectionHref=o,this.address=c,this.operations=l}}(),function(e){"use strict";function t(){}t.prototype={parse:function(e){throw new Error("Method not implemented!")}},e.Providers.CallGateway.AbstractParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.ActiveCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.connectionId,t.connectionHref,t.address,t.operations)},e.Providers.CallGateway.ActiveCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.AlertingCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.connectionId,t.connectionHref,t.address,t.operations,t.alertingParticipant)},e.Providers.CallGateway.AlertingCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.AnsweredCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.connectionId,t.connectionHref,t.address,t.operations,t.answeringParticipant)},e.Providers.CallGateway.AnsweredCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){this._parsers=[]}t.prototype={register:function(e,t){this._parsers[e]=t},unregister:function(e){this._parsers[e]=void 0},parse:function(e){return e.callEvent?this._delegateParser(e.callEvent,e):e.subscriptionId?this._delegateParser("subscription",e):e},_delegateParser:function(t,i){return void 0!==this._parsers[t]?this._parsers[t].parse(i):void e.Base.Logger.error("No parser specified!",t)}},e.Providers.CallGateway.CallNotificationParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.FailedCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.address,t.reason)},e.Providers.CallGateway.FailedCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.HeldCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.connectionId,t.connectionHref,t.address,t.operations)},e.Providers.CallGateway.HeldCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.ParticipantDroppedCallMessage(t.participants,t.callId,t.callHref,t.address,t.droppingParticipant)},e.Providers.CallGateway.ParticipantDroppedCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.SubscriptionCallMessage(t.status,t.subscriptionId,t.additionalProperties)},e.Providers.CallGateway.SubscriptionCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.CallGateway.AbstractParser.prototype),t.prototype.parse=function(t){return new e.Providers.CallGateway.UnheldCallMessage(t.originalCallingParticipant,t.originalCalledParticipant,t.participants,t.callId,t.ucId,t.callHref,t.connectionId,t.connectionHref,t.address,t.operations)},e.Providers.CallGateway.UnheldCallMessageParser=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(e){this._credentials=e,this._requestId=Date.now()}var i={CSA_RESOURCE:"application/vnd.avaya.csa.resources.v1+json",CSA_ERROR:"application/vnd.avaya.csa.error.v1+json",CSA_CALL:"application/vnd.avaya.csa.call.v1+json",CSA_CALLS:"application/vnd.avaya.csa.calls.v1+json",CSA_CLIENT:"application/vnd.avaya.csa.client.v1+json",CSA_CLIENTS:"application/vnd.avaya.csa.clients.v1+json",CSA_SERVICES:"application/vnd.avaya.csa.services.v1+json",CSA_CALL_ACTION:"application/vnd.avaya.csa.callaction+v1.json"},a="application/vnd.avaya.csa.callpreferences.v1+json",n="application/vnd.avaya.csa.callaction.v1+json",r="application/vnd.avaya.csa.services.v1+json";t.prototype={buildStartCallOptions:function(t){return{urlSuffix:"",url:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_POST,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:i.CSA_CALL,"Content-Type":a,Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildActivateServiceOptions:function(t){return{urlSuffix:"",url:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_POST,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:i.CSA_SERVICES,"Content-Type":r,Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildDeactivateServiceOptions:function(t){return{urlSuffix:"",url:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_DELETE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:i.CSA_SERVICES,"Content-Type":r,Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildResourceDiscoveryOptions:function(){var t=e.Providers.CallServiceGateway.Constants.CSA_RESOURCE_PATH;return this._credentials.isGuest&&(t+="?"+this._credentials.displayName),{urlSuffix:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:[i.CSA_RESOURCE,i.CSA_ERROR].join(", "),Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildUpdateCallOptions:function(t,i){return $.Deferred(),{urlSuffix:"",url:t+"/"+i,sendType:e.Providers.CallServiceGateway.Constants.HTTP_POST,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{"Content-Type":n,Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildGetCallsOptions:function(t){return $.Deferred(),{urlSuffix:"",url:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:[i.CSA_CALLS,i.CSA_ERROR].join(", "),Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildGetCallOptions:function(t,a){return $.Deferred(),{urlSuffix:"",url:t+"/"+a,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:[i.CSA_CALL,i.CSA_ERROR].join(", "),Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildGetClientsOptions:function(t){return $.Deferred(),{urlSuffix:"",url:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:[i.CSA_CLIENTS,i.CSA_ERROR].join(", "),Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildGetClientOptions:function(t,a){return $.Deferred(),{urlSuffix:"",url:t+"/"+a,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,dataType:e.Providers.CallServiceGateway.Constants.JSON_DATA_TYPE,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Accept:[i.CSA_CLIENT,i.CSA_ERROR].join(", "),Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildKeepAliveOptions:function(t){return{urlSuffix:t,sendType:e.Providers.CallServiceGateway.Constants.HTTP_GET,crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password},headers:{Authorization:e.Providers.CallServiceGateway.Constants.BASIC_AUTHORIZATION_WITH_SPACE+this._getBasicCredentials()}}},buildSubscription:function(t){return{subscribe:{requestId:this.requestId++,resources:[{application:e.Providers.CallServiceGateway.Constants.CSA_APPLICATION,service:e.Providers.CallServiceGateway.Constants.TELEPHONY_SERVICE,resource:t}],version:e.Providers.CallServiceGateway.Constants.CSA_VERSION_1}}},buildProcessMediaOfferResponseNotification:function(t,i,a,r,s,o,c){var l={action:a,actionDetails:{targetCallId:null,participants:null,sdpType:r,sdp:s,audioChannel:e.Base.Utils.isDefined(o)?o:null,videoChannels:e.Base.Utils.isDefined(c)?c:null,conferenceData:null}};return{notify:{requestId:this._requestId++,notifications:[{application:e.Providers.CallServiceGateway.Constants.CSA_APPLICATION,service:e.Providers.CallServiceGateway.Constants.TELEPHONY_SERVICE,version:e.Providers.CallServiceGateway.Constants.CSA_VERSION_1,resource:t,contents:{callId:i,messageType:e.Providers.CallServiceGateway.Constants.PROCESS_MEDIA_RESPONSE,messageDataType:n,messageData:JSON.stringify(l)}}]}}},buildProcessMediaAnswerResponseNotification:function(t,i,a,n){return{notify:{requestId:this._requestId++,notifications:[{application:e.Providers.CallServiceGateway.Constants.CSA_APPLICATION,service:e.Providers.CallServiceGateway.Constants.TELEPHONY_SERVICE,version:e.Providers.CallServiceGateway.Constants.CSA_VERSION_1,resource:t,contents:{callId:i,messageType:e.Providers.CallServiceGateway.Constants.PROCESS_MEDIA_RESPONSE,messageDataType:null,messageData:null}}]}}},buildCreateMediaResponseNotification:function(t,i,a,r,s,o){var c={action:null,actionDetails:{targetCallId:null,participants:null,sdpType:a,sdp:r,audioChannel:e.Base.Utils.isDefined(s)?s:null,videoChannels:e.Base.Utils.isDefined(o)?o:null,conferenceData:null}};return{notify:{requestId:this._requestId++,notifications:[{application:e.Providers.CallServiceGateway.Constants.CSA_APPLICATION,service:e.Providers.CallServiceGateway.Constants.TELEPHONY_SERVICE,version:e.Providers.CallServiceGateway.Constants.CSA_VERSION_1,resource:t,contents:{callId:i,messageType:e.Providers.CallServiceGateway.Constants.CREATE_MEDIA_RESPONSE,messageDataType:n,messageData:JSON.stringify(c)}}]}}},updateCredentials:function(e){this._credentials=e},_getBasicCredentials:function(){return btoa(decodeURI(this._credentials.username+":"+this._credentials.password))}},e.Providers.CallServiceGateway.CallServiceGatewayProviderMessageBuilder=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";function i(t,i){e.Base.Observable.call(this),this._networkProvider=t,this._webSocketProvider=i,this._eTag=void 0,this._credentials=void 0,this._isServiceActivated=!1,this._resourceHrefs=[],this._parsers=[],this._registerParsers(),this._registerUser=!1,this._resourceKeepAliveProvider=new e.Base.PollingRESTProvider,this._notificationKeepAliveProvider=new e.Base.PollingRESTProvider,this._optionsBuilder=new e.Providers.CallServiceGateway.CallServiceGatewayProviderMessageBuilder(this._credentials)}var a="0",n="1",r="2",s="3",o="4";i.prototype=Object.create(e.Base.Observable.prototype),i.prototype.start=function(i,a){var n=t.Deferred();return this._config=i,this._registerUser=a,this._networkProvider._onCredentialsRequired=this._onCredentialsRequired.bind(this),this._networkProvider.onOpen=function(){this._discoverResources().then(function(){this.activateService().then(function(){n.resolve()}.bind(this),function(e){n.reject(e)}.bind(this))}.bind(this),function(e){n.reject(e)}.bind(this))}.bind(this),this._networkProvider.onMessage=function(e,t){if(void 0!==t){var i=t.getResponseHeader("ETag");null!=i&&(this._eTag=i)}}.bind(this),this._networkProvider.onConnectionUnavailable=function(t){this._handleError("Unable to communicate with REST server"),this.trigger(e.Providers.CallServiceGateway.ObservableEvents.NETWORK_PROVIDER_IS_UNAVAILABLE,["REST",t])}.bind(this),this._networkProvider.start(this._config.serverInfo,this._config.credentialProvider),n.promise()},i.prototype.stop=function(){var e=t.Deferred();this.deactivateService();try{this._networkProvider.close(),this._webSocketProvider.close(),e.resolve()}catch(t){e.reject(t)}return e.promise()},i.prototype.getCalls=function(){var i=t.Deferred(),a=this._optionsBuilder.buildGetCallsOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls]);return this._networkProvider.send(null,a).then(function(t){e.Base.Logger.debug("CSGWProvider: Received get calls response");var a=this._parsers[n].parse(t);i.resolve(a)}.bind(this),function(e){this._handleError("getCalls() network provider failed - "+e.statusText),i.reject(e)}.bind(this)),i.promise()},i.prototype.getCall=function(i){var n=t.Deferred(),r=this._optionsBuilder.buildGetCallOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls],i);return this._networkProvider.send(null,r).then(function(t){e.Base.Logger.debug("CSGWProvider: Received get call response");var i=this._parsers[a].parse(t);n.resolve(i)}.bind(this),function(e){this._handleError("getCall() network provider failed - "+e.statusText),n.reject(e)}.bind(this)),n.promise()},i.prototype.getClients=function(){var i=t.Deferred(),a=this._optionsBuilder.buildGetClientsOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Clients]);return this._networkProvider.send(null,a).then(function(t){e.Base.Logger.debug("CSGWProvider: Received get clients response");var a=this._parsers[o].parse(t);i.resolve(a)}.bind(this),function(e){this._handleError("getClients() network provider failed - "+e.statusText),i.reject(e)}.bind(this)),i.promise()},i.prototype.getClient=function(i){var a=t.Deferred(),n=this._optionsBuilder.buildGetClientOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Clients],i);return this._networkProvider.send(null,n).then(function(t){e.Base.Logger.debug("CSGWProvider: Received get client response");var i=this._parsers[o].parseClient(t);a.resolve(i)}.bind(this),function(e){this._handleError("getClient() network provider failed - "+e.statusText),a.reject(e)}.bind(this)),a.promise()},i.prototype.startCall=function(i,n,r,s,o,c){var l=t.Deferred(),d=this._optionsBuilder.buildStartCallOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls]),u="";this._credentials.isGuest&&(u=this._credentials.displayName);var C={subject:"JS-CSDK Call",priority:null,privacy:null,participants:[{participantId:null,remoteDisplayName:u,remoteAddress:i}],conferenceData:{uccp:!0,userAgentCalling:null,video:r,webCollaboration:s}};return n?(C.conferenceData.meetingToken=n.getToken(),C.conferenceData.meetingId=n.getMeetingId(),C.conferenceData.meetingPasscode=n.getPasscode(),C.conferenceData.ott=n.isOTT(),C.conferenceData.ott&&(C.conferenceData.webRTCAbleRemote=n.isWebRTCAbleConference())):(C.conferenceData.meetingToken=null,C.conferenceData.meetingId=null,C.conferenceData.meetingPasscode=null,C.conferenceData.ott=null,C.conferenceData.webRTCAbleRemote=null),C=t.extend({},C,{audiochannel:o},{videoChannels:c}),e.Base.Logger.debug("StartCall sending: "+JSON.stringify(C)),this._networkProvider.send(JSON.stringify(C),d).then(function(t){e.Base.Logger.debug("CSGWProvider: Received make call response");var i=this._parsers[a].parse(t);l.resolve(i)}.bind(this),function(e){this._handleError("startCall() network provider failed - "+e.statusText),l.reject(e)}.bind(this)),l.promise()},i.prototype.offerSDPResponse=function(i,a,n,r,s){var o=t.Deferred(),c=this._optionsBuilder.buildProcessMediaOfferResponseNotification(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls],i,n,a.type,a.sdp,r,s);e.Base.Logger.debug("CSGWProvider: Sending offer notification");try{this._webSocketProvider.send(JSON.stringify(c)),o.resolve()}catch(e){o.reject(e)}return o.promise()},i.prototype.answerSDPResponse=function(i,a,n){var r=t.Deferred(),s=this._optionsBuilder.buildProcessMediaAnswerResponseNotification(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls],i,a,n);e.Base.Logger.debug("CSGWProvider: Sending answer notification");try{this._webSocketProvider.send(JSON.stringify(s)),r.resolve()}catch(e){r.reject(e)}return r.promise()},i.prototype.getOfferSDPResponse=function(i,a){var n=t.Deferred(),r=this._optionsBuilder.buildCreateMediaResponseNotification(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls],i,a.type,a.sdp);e.Base.Logger.debug("CSGWProvider: Sending getOffer notification:\n"+a.sdp),e.Base.Logger.debug(JSON.stringify(r));try{this._webSocketProvider.send(JSON.stringify(r)),n.resolve()}catch(e){n.reject(e)}return n.promise()},i.prototype.endCall=function(t){return this._updateCall(t,e.Providers.CallServiceGateway.CallActionType.END)},i.prototype.acceptCall=function(t,i,a,n,r){var s={actionDetails:{targetCallId:null,participants:null,conferenceData:null,sdpType:i,sdp:a,audioChannel:n,videoChannels:e.Base.Utils.isDefined(r)?r:[]}};return this._updateCall(t,e.Providers.CallServiceGateway.CallActionType.ANSWER,s)},i.prototype.holdCall=function(t){return this._updateCall(t,e.Providers.CallServiceGateway.CallActionType.HOLD)},i.prototype.unholdCall=function(t){return this._updateCall(t,e.Providers.CallServiceGateway.CallActionType.UNHOLD)},i.prototype.startRinging=function(t){return this._updateCall(t,e.Providers.CallServiceGateway.CallActionType.RINGING)},i.prototype.activateService=function(){var e=t.Deferred();return this._performServiceActivation(e,this._registerUser),e.promise()},i.prototype._performServiceActivation=function(t){this._sendServiceActivation().then(function(){e.Base.Logger.debug("CSGWProvider: Service activated"),this._isServiceActivated=!0,t.resolve()}.bind(this),function(e){this._handleError("Retry activateService() due network provider failed: "+e.statusText),this._resendActivationRequest(this._sendServiceActivation.bind(this),function(){this._isServiceActivated=!0,t.resolve()}.bind(this))}.bind(this))},i.prototype._sendServiceActivation=function(){var t=this._optionsBuilder.buildActivateServiceOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Services]),i={action:e.Providers.CallServiceGateway.CallActionType.ACTIVATE,service:e.Providers.CallServiceGateway.Constants.CALLS,extendedData:{mode:e.Providers.CallServiceGateway.Constants.COMPUTER,mediaServiceType:e.Providers.CallServiceGateway.Constants.WEBRTC,recoveryToken:null,register:this._registerUser}};return this._networkProvider.send(JSON.stringify(i),t)},i.prototype._resendActivationRequest=function(e,t){var i=0,a=function(n){if(0>n)i=500;else{var r=3200*Math.pow(2,n);i=r>6e4?6e4:Math.min(6e4,r),i*=500+~~(1e3*Math.random())}this._sendRegistrationTimer=setTimeout(function(){e().then(function(){t()},function(e){a(i,n+1)})}.bind(this),i)}.bind(this);a(-1)},i.prototype.deactivateService=function(){var i=t.Deferred();return this._isServiceActivated?this._sendDeactiveServices().then(function(t){e.Base.Logger.debug("CSGWProvider: Service deactivated"),this._isServiceActivated=!1,i.resolve()}.bind(this),function(e){this._handleError("Retry deactiveService() network provider failed - "+e.statusText),this._resendDeactivationRequest(this._sendDeactiveServices.bind(this),function(){this._isServiceActivated=!1,i.resolve()}.bind(this),function(e){i.reject("Failed to deactivate service: "+e)}.bind(this))}.bind(this)):i.reject("Service resource not available"),i.promise()},i.prototype._sendDeactiveServices=function(){var t={action:e.Providers.CallServiceGateway.CallActionType.DEACTIVATE,service:e.Providers.CallServiceGateway.Constants.CALLS,extendedData:{mode:e.Providers.CallServiceGateway.Constants.COMPUTER,mediaServiceType:e.Providers.CallServiceGateway.Constants.WEBRTC,recoveryToken:null,register:!1}},i=this._optionsBuilder.buildDeactivateServiceOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Services]);return this._networkProvider.send(JSON.stringify(t),i)},i.prototype._resendDeactivationRequest=function(e,t,i){var a=function(n){5>n?setTimeout(function(){e().then(function(){t()},function(e){a(n+1)})}.bind(this),500):i("Max retry reached")};a(0)},i.prototype._handleError=function(t){e.Base.Logger.log("CSGWProvider: Error detected: "+t)},i.prototype._discoverResources=function(){var i=t.Deferred(),a=this._optionsBuilder.buildResourceDiscoveryOptions();return this._networkProvider.send(null,a).then(function(t){if(null!==t){if(t.resources){for(var a=0;a<t.resources.length;a++)this._resourceHrefs[t.resources[a].name]=t.resources[a].serviceReference.href,"calls"===t.resources[a].name&&console.debug("Calls Href: "+this._resourceHrefs[t.resources[a].name]);var n={crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password}};this._resourceKeepAliveProvider.startPolling(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.KeepAlive],.8*t.resourceKeepaliveTimeout,{},n)}t.notificationService?(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Websocket]=t.notificationService.websocket.href,this._subscribeForNotifications().then(function(){this._isServiceReady=!0,i.resolve()}.bind(this),function(e){i.reject(e)})):i.reject("Notification service is undefined")}}.bind(this),function(e){this._handleError("_discoverResources() network provider failed - "+e.statusText),i.reject(e)}.bind(this)),i.promise()},i.prototype._subscribeForNotifications=function(){var i=t.Deferred(),a=this._addCrendentialsToWebsocketUrl(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Websocket]);return this._startWebsocket(a).then(function(){i.resolve()}.bind(this),function(e){i.reject(e)}.bind(this)),i.promise()},i.prototype._startWebsocket=function(i){var a=t.Deferred();return e.Base.Utils.isDefined(i)&&!this._webSocketProvider.isOpened()?(this._webSocketProvider.onOpen=function(){e.Base.Logger.log("CSGWProvider: Notification service websocket connected"),this._webSocketProvider.onMessage=function(e){this._processNotification(e)}.bind(this),a.resolve()}.bind(this),this._webSocketProvider.onError=function(t){e.Base.Logger.log("CSGWProvider: Notification service websocket connection failed: "+t)}.bind(this),this._webSocketProvider.onClose=function(){e.Base.Logger.log("CSGWProvider: Notification service websocket connection is closed"),this._subscribeForNotifications().then(function(){e.Base.Logger.log("CSGWProvider: Successfully resubscribed for notification service")}.bind(this),function(t){this.trigger(e.Providers.CallServiceGateway.ObservableEvents.NETWORK_PROVIDER_IS_UNAVAILABLE,["Websocket",t])}.bind(this))}.bind(this),this._webSocketProvider.onConnectionUnavailable=function(t){e.Base.Logger.log("CSGWProvider: Notification service websocket connection unavailable: "+t),this._subscribeForNotifications().then(function(){e.Base.Logger.log("CSGWProvider: Successfully resubscribed for notification service")}.bind(this),function(t){this.trigger(e.Providers.CallServiceGateway.ObservableEvents.NETWORK_PROVIDER_IS_UNAVAILABLE,["Websocket",t])}.bind(this))}.bind(this),this._webSocketProvider.start({webSocketURL:i,maxConnectionErrorCount:5})):a.reject("WebSocket URL is undefined"),a.promise()},i.prototype._resubscribeForNotificationsc=function(){},i.prototype._processNotification=function(t){var i=JSON.parse(t.data);if(null!==i)if(i.discovery){var a={crossDomain:!0,authentication:{type:e.Providers.CallServiceGateway.Constants.BASIC_AUTHENTICATION,username:this._credentials.username,password:this._credentials.password}};this._notificationKeepAliveProvider.startPolling(i.discovery.keepalive.href,.8*i.discovery.keepalive.timeout,{},a),e.Base.Logger.debug("CSGWProvider: Subscribing to telephony service notifications...");var n=this._optionsBuilder.buildSubscription(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls]);try{this._webSocketProvider.send(JSON.stringify(n))}catch(t){e.Base.Logger.log("CSGWProvider: ERROR while sending subscription: "+t),this.trigger(e.Providers.CallServiceGateway.ObservableEvents.SUBSCRIPTION_FAILED,[t])}}else if(i.subscribed){e.Base.Logger.debug("CSGWProvider: Received subscription notification");var o=this._parsers[s].parse(i.subscribed);this.trigger(e.Providers.CallServiceGateway.ObservableEvents.SUBSCRIBED,[o])}else i.notification&&(e.Base.Logger.debug("CSGWProvider: Received notification: "+i.notification.contents.messageType),this._parsers[r].parse(i.notification))},i.prototype._onCredentialsRequired=function(e,t){this._config.credentialProvider.onAuthenticationChallenge(void 0,function(e){this._onCredentialsRetrieved(e,t)}.bind(this))},i.prototype._onCredentialsRetrieved=function(t,i){(e.Base.Utils.isUndefined(this._credentials)||this._credentials.username!==t.username||this._credentials.password!==t.password)&&(this._credentials=t,this._optionsBuilder.updateCredentials(this._credentials))},i.prototype._updateCall=function(i,a,n){var r=t.Deferred(),s=this._optionsBuilder.buildUpdateCallOptions(this._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls],i),o={action:a};return n&&(o=t.extend(o,n)),this._networkProvider.send(JSON.stringify(o),s).then(function(t){e.Base.Logger.debug("CSGWProvider: Sent call action: "+a),r.resolve()}.bind(this),function(t){t.status>=200&&t.status<300?(e.Base.Logger.debug("CSGWProvider: Sent call action: "+a),r.resolve()):(this._handleError(a+" call action network provider failed - "+t.statusText),r.reject(t))}.bind(this)),r.promise()},i.prototype._addCrendentialsToWebsocketUrl=function(e){var t=e.split("://");return t[0]+"://"+this._credentials.username.replace(/\//g,"%2F")+":"+this._credentials.password+"@"+t[1]},i.prototype._registerParsers=function(){this._parsers[s]=new e.Providers.CallServiceGateway.SubscriptionParser,this._parsers[a]=new e.Providers.CallServiceGateway.CallInfoParser,this._parsers[r]=new e.Providers.CallServiceGateway.NotificationParser(this),this._parsers[n]=new e.Providers.CallServiceGateway.ClientCallsParser(this._parsers[a]),this._parsers[o]=new e.Providers.CallServiceGateway.UserClientsParser},i.prototype._startResourceKeepAliveTimer=function(e,t){this._resourceKeepAliveProvider.startPolling(e,t,{})},e.Providers.CallServiceGateway.CallServiceGatewayProvider=i}(AvayaClientServices=window.AvayaClientServices||{},jQuery),function(e){"use strict";function t(){}t.prototype={createCallServiceGatewayProvider:function(){var t=new e.Base.RESTProvider,i=new e.Base.NetworkProvider(t),a=new e.Base.WebSocketProvider,n=new e.Base.NetworkProvider(a);return new e.Providers.CallServiceGateway.CallServiceGatewayProvider(i,n)}},e.Providers.CallServiceGateway.CallServiceGatewayProviderFactory=t}(AvayaClientServices),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.CallActionType={ACCEPT_AUDIO:"ACCEPT_AUDIO",ACCEPT_VIDEO:"ACCEPT_VIDEO",ACTIVATE:"ACTIVATE",ADD_PARTICIPANT:"ADD_PARTICIPANT",ADD_VIDEO:"ADD_VIDEO",ANSWER:"ANSWER",DEACTIVATE:"DEACTIVATE",DENY_AUDIO:"DENY_AUDIO",DENY_VIDEO:"DENY_VIDEO",END:"END",HOLD:"HOLD",REMOVE_VIDEO:"REMOVE_VIDEO",REMOTE_VIDEO_REMOVED_ACK:"REMOTE_VIDEO_REMOVED_ACK",RINGING:"RINGING",TRANSFER:"TRANSFER",UNHOLD:"UNHOLD",UPDATE_VIDEO:"UPDATE_VIDEO"}}(),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.Constants={TELEPHONY_SERVICE:"telephony",CSA_APPLICATION:"CSA",CREATE_MEDIA_RESPONSE:"createMediaResponse",PROCESS_MEDIA_RESPONSE:"processMediaResponse",BASIC_AUTHENTICATION:"Basic",BASIC_AUTHORIZATION_WITH_SPACE:"Basic ",HTTP_POST:"POST",HTTP_GET:"GET",JSON_DATA_TYPE:"json",CSA_RESOURCE_PATH:"/csa/resources/tenants/default",CSA_VERSION_1:"1",COMPUTER:"COMPUTER",CALLS:"CALLS",WEBRTC:"WEBRTC",SEND_ONLY:"SEND_ONLY",RECV_ONLY:"RECEIVE_ONLY",SEND_RECV:"SEND_RECEIVE",INACTIVE:"INACTIVE"}}(),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.ResourceType={Users:"users",Clients:"clients",Calls:"calls",Services:"services",KeepAlive:"keepalive",PresenceSubscription:"presencesubscriptions",PresencePublish:"presencepublish",Websocket:"websocket"}}(),function(e){"use strict";e.Providers.CallServiceGateway.AbstractCallMessage=function(){this.type=e.Providers.CallServiceGateway.CallMessageTypes.UNDEFINED}}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.CALLINFO,this.callId=t,this.isAudioMuted=!1,this.isCallerIdentityPrivate=!1,this.isCallIgnored=!1,this.isConference=!1,this.isIncoming=!1,this.isMissed=!1,this.isRemote=!1,this.isServiceAvailable=!1,this.state="IDLE",this.useAMSAsMediaGateway=!1,this.callHeldTimeStamp=0,this.participants=[]}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),e.Providers.CallServiceGateway.CallInfoMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.CallMessageTypes={UNDEFINED:"Undefined",SUBSCRIPTION:"Subscription",CALLINFO:"CallInfo",CLIENT_CALLS:"ClientCalls",USER_CLIENTS:"UserClients",PROCESS_MEDIA_REQUEST:"ProcessMediaRequest"}}(),function(e){"use strict";function t(){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.CLIENT_CALLS,this._callInfoMsgs=[]}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),t.prototype.add=function(e){this._callInfoMsgs.push(e)},t.prototype.getCalls=function(){return _callInfoMsgs},e.Providers.CallServiceGateway.ClientCallsMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t,i){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.PROCESS_MEDIA_REQUEST,this.callId=t,this.sdp=i}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),e.Providers.CallServiceGateway.ProcessMediaRequestMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.CALLINFO,this.registrationId=t,this.href=void 0,this.mode="Computer"}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),e.Providers.CallServiceGateway.RegistrationInfoMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.SUBSCRIPTION,this.isSubscribed=!1,this.subscriptionId=t,this.application=void 0,this.service=void 0,this.resource=void 0}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),e.Providers.CallServiceGateway.SubscriptionCallMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.UserClient=function(e){this.clientId=e,this.version=void 0,this.endpointLabel=void 0,this.productName=void 0}}(),function(e){"use strict";function t(){e.Providers.CallServiceGateway.AbstractCallMessage.call(this),this.type=e.Providers.CallServiceGateway.CallMessageTypes.USER_CLIENTS,this._clients=[]}t.prototype=Object.create(e.Providers.CallServiceGateway.AbstractCallMessage.prototype),t.prototype.add=function(e){this._clients.push(e)},t.prototype.getClients=function(){return _clients},e.Providers.CallServiceGateway.UserClientsMessage=t}(AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.ObservableEvents={CREATE_MEDIA_REQUEST:"csgwprovider.createMediaRequest",PROCESS_MEDIA_REQUEST:"csgwprovider.processMediaRequest",PROCESS_ANSWER_REQUEST:"csgwprovider.processAnswerRequest",CALL_ENDED:"csgwprovider.call.ended",CALL_ESTABLISHED:"csgwprovider.call.established",CALL_HELD:"csgwprovider.call.held",CALL_INCOMING:"csgwprovider.call.incoming",CALL_RINGING:"csgwprovider.call.ringing",CALL_UNHELD:"csgwprovider.call.unheld",SUBSCRIBED:"csgwprovider.subscribed",SUBSCRIPTION_FAILED:"csgwprovider.subscription.failed",NETWORK_PROVIDER_IS_UNAVAILABLE:"csgwprovider.network.unavailable"}}(),function(e,t){"use strict";function i(){}i.prototype={parse:function(i){var a=new e.Providers.CallServiceGateway.CallInfoMessage(i.callId);return a.isAudioMuted=i.audioMuted,a.isCallIgnored=i.callIgnored,a.isCallerIdentityPrivate=i.callerIdentityPrivate,a.isConference=i.conference,a.isIncoming=i.incoming,a.isMissed=i.missed,a.isRemote=i.remote,a.isServiceAvailable=i.serviceAvailable,a.callHeldTimeStamp=i.callHeldTimeStamp,a.useAMSAsMediaGateway=i.useAMSAsMediaGateway,a.participants=t.extend(!0,[],i.participants),a}},e.Providers.CallServiceGateway.CallInfoParser=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e){this._callInfoParser=e}t.prototype={parse:function(t){for(var i=new e.Providers.CallServiceGateway.ClientCallsMessage,a=0;a<t.calls.length;a++){var n=this._callInfoParser.parse(t.calls[a]);i.add(n)}return i}},e.Providers.CallServiceGateway.ClientCallsParser=t}(AvayaClientServices),function(e,t){"use strict";function i(e){this._provider=e}i.prototype={parse:function(t){if(t.service===e.Providers.CallServiceGateway.Constants.TELEPHONY_SERVICE&&t.application===e.Providers.CallServiceGateway.Constants.CSA_APPLICATION&&t.resource===this._provider._resourceHrefs[e.Providers.CallServiceGateway.ResourceType.Calls]&&t.contents){var i=t.contents,a=e.Base.Utils.isDefined(i.messageData)?JSON.parse(i.messageData):void 0;i.messageType===e.Providers.CallServiceGateway.NotificationType.CallFailure?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_FAILURE,[i.callId,i.protocolErrorCode,i.failure,i.failureReason]):i.messageType===e.Providers.CallServiceGateway.NotificationType.IncomingCall?(this._provider.startRinging(i.callId),this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_INCOMING,[i.callId,a.actionDetails.participants[0].remoteAddress,a.actionDetails.participants[0].remoteDisplayName,a.actionDetails.sdpType,a.actionDetails.sdp,a.actionDetails.audioChannel,a.actionDetails.videoChannels])):i.messageType===e.Providers.CallServiceGateway.NotificationType.CallRinging?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_RINGING,[i.callId,a.actionDetails.participants[0].remoteAddress,a.actionDetails.participants[0].remoteDisplayName,a.actionDetails.audioChannel,a.actionDetails.videoChannels]):i.messageType===e.Providers.CallServiceGateway.NotificationType.CallEstablished?a.actionDetails.conferenceData?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_ESTABLISHED,[i.callId,a.actionDetails.participants[0].remoteAddress,a.actionDetails.participants[0].remoteDisplayName,!0,a.actionDetails.conferenceData.uccpUrl,a.actionDetails.conferenceData.webCollaborationUrl]):this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_ESTABLISHED,[i.callId,a.actionDetails.participants[0].remoteAddress,a.actionDetails.participants[0].remoteDisplayName,!1]):i.messageType===e.Providers.CallServiceGateway.NotificationType.CallHeld?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_HELD,[i.callId]):i.messageType===e.Providers.CallServiceGateway.NotificationType.CallUnheld?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_UNHELD,[i.callId]):i.messageType===e.Providers.CallServiceGateway.NotificationType.CallEnded?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CALL_ENDED,[i.callId]):i.messageType===e.Providers.CallServiceGateway.NotificationType.CreateMediaRequest?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.CREATE_MEDIA_REQUEST,[i.callId]):i.messageType===e.Providers.CallServiceGateway.NotificationType.ProcessMediaRequest?this._provider.trigger(e.Providers.CallServiceGateway.ObservableEvents.PROCESS_MEDIA_REQUEST,[i.callId,a.action,a.actionDetails.sdpType,a.actionDetails.sdp,a.actionDetails.audioChannel,a.actionDetails.videoChannels]):e.Base.Logger.info("Ignoring telephony notification: [Id:"+i.callId+",Type:"+i.messageType+"]")}}},e.Providers.CallServiceGateway.NotificationParser=i}(AvayaClientServices,jQuery),function(e){"use strict";(AvayaClientServices=window.AvayaClientServices||{}).Providers.CallServiceGateway.NotificationType={CreateMediaRequest:"createMediaRequest",ProcessMediaRequest:"processMediaRequest",ProcessMediaResponse:"processMediaResponse",IncomingCall:"callIncoming",CallRinging:"callRinging",CallEstablished:"callEstablished",CallEnded:"callEnded",CallFailure:"callFailure",CallHeld:"onCallRemoteHeld",CallUnheld:"onCallRemoteUnheld"}}(),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i=new e.Providers.CallServiceGateway.SubscriptionCallMessage(t.requestId);return t&&t.results&&t.results.successful?(i.isSubscribed=!0,i.service=t.results.successful[0].service,i.application=t.results.successful[0].application,i.resource=t.results.successful[0].resource):i.isSubscribed=!1,i}},e.Providers.CallServiceGateway.SubscriptionParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){for(var i=new e.Providers.CallServiceGateway.UserClientsMessage,a=0;a<t.clients.length;a++){var n=this.parseClient(t.clients[a]);i.add(n)}return i},parseClient:function(t){var i=new e.Providers.CallServiceGateway.UserClient(t.clientId);return i.version=t.version,i.endpointLabel=t.endpointLabel,i.productName=t.productName,i}},e.Providers.CallServiceGateway.UserClientsParser=t}(AvayaClientServices),function(e){"use strict";e.Providers.ContentSharing.BandwidthManager=function(e){this._serverManager=e,this._queue=[],this._intervals=[],this._run=!1,this._minimalInterval=100,this._lastIntervalsToConsiderCount=10,this._maxBytesPerSecond=38400,this._bytesSentLastSecond=0},e.Providers.ContentSharing.BandwidthManager.prototype={start:function(e){this._interval=e.captureInterval,this._maxBytesPerSecond=e.maxBytesPerSecond;for(var t=0;t<this._lastIntervalsToConsiderCount;t++)this._intervals.push(e.captureInterval);this._serverManager.onBandwidthAvailable=function(){this._process()}.bind(this),this._serverManager.start(e)},addToQueue:function(e){if(e._keyFrame){this._lostSize=0,this._queue.forEach(function(e){this._lostSize+=e.byteLength}.bind(this));var t=(this._bytesSentLastSecond+this._lostSize)/this._maxBytesPerSecond;this._intervals.push(Math.floor(this._interval*t)),this._determineInterval(),this._queue=[],this._queue.push(e)}else this._queue.push(e);this._run||(this._run=!0,this._process())},onIntervalChanged:function(e){},_determineInterval:function(){for(var e=0,t=this._intervals.length-this._lastIntervalsToConsiderCount;t<this._intervals.length;t++)e+=this._intervals[t];var i=e/this._lastIntervalsToConsiderCount;i<this._minimalInterval&&(i=this._minimalInterval),this._interval=Math.floor(i),this.onIntervalChanged(this._interval)},_process:function(){var e=this._queue.shift();return e?void(this._serverManager.canSend(e.byteLength)?(this._send(e),this._process()):this._queue.unshift(e)):void(this._run=!1)},_send:function(e){this._serverManager.send(e),this._bytesSentLastSecond+=e.getByteLength(),setTimeout(function(){this._bytesSentLastSecond-=e.getByteLength()}.bind(this),1e3)}}}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={createStartTag:function(t,i,a){var n=new e.Providers.WCS.ScreenSharingStartTag;return n.isKeyFrame=t,n.width=i,n.height=a,n.creationTime=Date.now(),n},createBlockTag:function(t){var i=new e.Providers.WCS.ScreenSharingBlockTag;i.x=t._x,i.y=t._y,i.width=t._width,i.height=t._height,i.imageType=t._type||e.Providers.WCS.ScreenSharingImageTypes.JPEG;var a=this._getImageData(t._imgData,t._type);return i.length=a.length,i.data=a,i},createEndTag:function(){return new e.Providers.WCS.ScreenSharingEndTag},_getImageData:function(t,i){var a=document.createElement("canvas");a.width=t.width,a.height=t.height,a.getContext("2d").putImageData(t,0,0);var n=i===e.Providers.WCS.ScreenSharingImageTypes.JPEG?"jpeg":"png",r=a.toDataURL("image/"+n,.3);return this._getImageBuffer(r)},_getImageBuffer:function(e){for(var t=e.split(","),i=atob(t[1]),a=i.length,n=new Uint8Array(a);a--;)n[a]=i.charCodeAt(a);return n}},e.Providers.ContentSharing.ContentSharingTagBuilder=t}(AvayaClientServices),function(e,t,i){"use strict";var a="SCREEN_SHARING",n="PONG",r="START",s="Chrome",o="Firefox",c="message",l="CANCELED",d=2e3;e.Providers.ContentSharing.ExtensionNetworkProvider=function(t){this._pingTimer=void 0,this._pingTime=0,this._pongTime=0,this._pingInterval=500,this._requestBuilder=t,this._installedExtensionType=e.Providers.ContentSharing.InstalledExtensionType.INVALID,this._onMediaAvailableCallbacks=i.Callbacks(),this._onCapabilityChangeCallbacks=i.Callbacks(),this._onMediaCancelledCallbacks=i.Callbacks()},e.Providers.ContentSharing.ExtensionNetworkProvider.prototype={start:function(){this._startWindowEventListener(),this._startPingTask()},send:function(e){t.postMessage(e,"*")},stop:function(){this._stopPingTimer(),this._removeWindowEventListener()},addOnMediaAvailableCallback:function(e){this._onMediaAvailableCallbacks.add(e)},removeOnMediaAvailableCallback:function(e){this._onMediaAvailableCallbacks.remove(e)},addOnMediaCancelledCallback:function(e){this._onMediaCancelledCallbacks.add(e)},removeOnMediaCancelledCallback:function(e){this._onMediaCancelledCallbacks.remove(e)},addOnCapabilityChange:function(e){this._onCapabilityChangeCallbacks.add(e)},removeOnCapabilityChange:function(e){this._onCapabilityChangeCallbacks.remove(e)},getInstalledExtensionType:function(){return this._installedExtensionType},_stopPingTimer:function(){this._pingTimer&&t.clearTimeout(this._pingTimer)},_startWindowEventListener:function(){t.addEventListener(c,function(i){if(i.source===t&&i.data.type)if(i.data.type===r)this._onMediaAvailableCallbacks.fire(i);else if(i.data.type===l)this._onMediaCancelledCallbacks.fire(i);else if(i.data.type===n&&i.data.app===a){this._pongTime=Date.now();var c=this._installedExtensionType;i.data.extension===s?this._installedExtensionType=e.Providers.ContentSharing.InstalledExtensionType.CHROME:i.data.extension===o&&(this._installedExtensionType=e.Providers.ContentSharing.InstalledExtensionType.FIREFOX),c!==e.Providers.ContentSharing.InstalledExtensionType.CHROME&&c!==e.Providers.ContentSharing.InstalledExtensionType.FIREFOX&&(this._onCapabilityChangeCallbacks.fire(this._installedExtensionType,!0),this._pingInterval=d)}}.bind(this),!1),this._pingTime=Date.now(),this.send(this._requestBuilder.createPingRequest())},_removeWindowEventListener:function(){t.removeEventListener(c,function(){console.debug("Removed message event listener")},!1)},_startPingTask:function(){this._pingTimer=t.setTimeout(function(){if(0===this._pongTime&&this._installedExtensionType===e.Providers.ContentSharing.InstalledExtensionType.INVALID)this._installedExtensionType=e.Providers.ContentSharing.InstalledExtensionType.NOT_INSTALLED,this._onCapabilityChangeCallbacks.fire(this._installedExtensionType,!1),this._pingInterval=this._pingInterval>=d?d:Math.max(d,2*this._pingInterval);else if(this._pingTime-this._pongTime>this._pingInterval&&(this._installedExtensionType===e.Providers.ContentSharing.InstalledExtensionType.CHROME||this._installedExtensionType===e.Providers.ContentSharing.InstalledExtensionType.FIREFOX)){var t=this._installedExtensionType;this._installedExtensionType=e.Providers.ContentSharing.InstalledExtensionType.NOT_INSTALLED,this._onCapabilityChangeCallbacks.fire(t,!1)}this._pingTime=Date.now(),this.send(this._requestBuilder.createPingRequest()),this._startPingTask()}.bind(this),this._pingInterval)}}}(AvayaClientServices,window,jQuery),function(e){"use strict";function t(){}var i="SCREEN_SHARING_PAGE",a="STOP",n="START",r="PING";t.prototype={createStartSharingRequest:function(e){return{type:i,text:n,capture:e}},createStopSharingRequest:function(e){return{type:i,text:a,mediaSourceId:e}},createPingRequest:function(){return{type:i,text:r}}},e.Providers.ContentSharing.ExtensionRequestBuilder=t}(AvayaClientServices),function(e){"use strict";function t(e){this._blocks=[],this.byteLength=0,this._keyFrame=e}t.prototype={addBlock:function(e){this._blocks.push(e),this.byteLength+=e.byteLength},getBlocks:function(){return this._blocks},getByteLength:function(){return this.byteLength}},e.Providers.ContentSharing.FrameBlocks=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.ContentSharing.InstalledExtensionType={CHROME:"Chrome",FIREFOX:"Firefox",NOT_INSTALLED:"Not Installed",INVALID:"Invalid"}}(),function(e){"use strict";e.Providers.ContentSharing.ScreenBlock=function(t,i,a,n,r,s,o,c){this._x=t,this._y=i,this._row=a,this._column=n,this._height=s,this._width=r,this._imgData=o,this._previousBase64=void 0,this._blocks=c||[],this._type=e.Providers.WCS.ScreenSharingImageTypes.JPEG}}(AvayaClientServices),function(e){"use strict";function t(t){e.Base.Observable.call(this),this._config=void 0,this._video=void 0,this._videoTrack=void 0,this._screenScraper=t,this._capturingTimeout=void 0,this._captureKeyFrameTimeout=void 0,this._isCapturingKeyFrame=!1,this._width=-1,this._height=-1}t.prototype=Object.create(e.Base.Observable.prototype),e.Providers.ContentSharing.ScreenCapturer=t,t.prototype.start=function(t,i){var a=$.Deferred();return this._manuallyStopped=!1,this._config=i,this._videoTrack=t.getVideoTracks()[0],this._videoTrack.onended=function(){this._manuallyStopped||this.trigger(e.Providers.ContentSharing.ScreenCapturerEvents.WINDOW_CLOSED,[])}.bind(this),this._video=window.document.createElement("video"),this._video.setAttribute("hidden","true"),void 0!==this._video.mozSrcObject?this._video.mozSrcObject=t:this._video.src=window.URL&&window.URL.createObjectURL(t)||t,this._video.play(),this._width=this._video.videoWidth,this._height=this._video.videoHeight,this._captureKeyFrame(),this._capture(),a.resolve(),a.promise()},t.prototype.stop=function(){var e=$.Deferred();return this._video&&this._video.srcObject&&this._video.srcObject.stop(),this._video=void 0,this._videoTrack&&(this._manuallyStopped=!0,this._videoTrack.stop(),this._videoTrack=void 0),clearTimeout(this._capturingTimeout),clearTimeout(this._captureKeyFrameTimeout),e.resolve(),e.promise()},t.prototype.pause=function(){var e=$.Deferred(),t=!0;return this._video.paused||(t=!1,this._video.pause()),clearTimeout(this._capturingTimeout),clearTimeout(this._captureKeyFrameTimeout),e.resolve(t),e.promise()},t.prototype.getWidth=function(){return this._video.videoWidth},t.prototype.getHeight=function(){return this._video.videoHeight},t.prototype.resume=function(){var e=$.Deferred(),t=!1;return this._video.paused&&(t=!0,this._video.play(),this._captureKeyFrame(),this._capture()),e.resolve(t),e.promise()},t.prototype._capture=function(){if(this._videoTrack&&"ended"!==this._videoTrack.readyState&&!this._video.paused){this._checkSize();var t=this._screenScraper.getChangedBlocks(this._video,this._config.blockSize,this._config.losslessColorLimit);t.length>0&&(1===t.length&&t[0]._width===this.getWidth()&&t[0]._height===this.getHeight()?this.trigger(e.Providers.ContentSharing.ScreenCapturerEvents.KEY_FRAME,[t[0]]):this.trigger(e.Providers.ContentSharing.ScreenCapturerEvents.BLOCKS_CHANGED,[t])),this._capturingTimeout=setTimeout(function(){this._capturingTimeout=void 0,this._capture()}.bind(this),this._config.captureInterval)}},t.prototype._captureKeyFrame=function(){this._captureKeyFrameTimeout=setTimeout(function(){this._isCapturingKeyFrame=!0,this._captureKeyFrameTimeout=void 0,this._captureKeyFrame()}.bind(this),this._config.keyFrameInterval)},t.prototype._checkSize=function(){(this._isCapturingKeyFrame||this._video.videoWidth!==this._width||this._video.videoHeight!==this._height)&&(this._width=this._video.videoWidth,this._height=this._video.videoHeight,this._screenScraper._previousBlocks=[],this._screenScraper._captureKeyFrame=!0,this._isCapturingKeyFrame=!1)}}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.ContentSharing.ScreenCapturerConfig=function(){this.captureInterval=100,this.keyFrameInterval=3e4,this.losslessColorLimit=128,this.blockSize=64,this.maxBytesPerSecond=38400}}(),function(e){"use strict";AvayaClientServices.Providers.ContentSharing.ScreenCapturerEvents={BLOCKS_CHANGED:"blocks_changed",KEY_FRAME:"key_frame",WINDOW_CLOSED:"window_changed"}}(),function(e){"use strict";e.Providers.ContentSharing.ScreenScraper=function(){this._previousBlocks=[],this._blockWidth=64,this._blockHeight=64,this._previousBase64=void 0,this._captureKeyFrame=!1},e.Providers.ContentSharing.ScreenScraper.prototype={getChangedBlocks:function(e,t,i){if(!e.videoWidth)return[];this._blockWidth=t,this._blockHeight=t;var a=window.document.createElement("canvas");a.width=e.videoWidth,a.height=e.videoHeight;var n=a.getContext("2d");n.drawImage(e,0,0);var r=this._determineChangedBlocks(e,n);return r.length>0&&(r=this._mergeBlocks(r),r=this._determineTypes(r,i)),r},_determineTypes:function(t,i){return t.forEach(function(t){var a=this._getColorsCount(t._imgData);t._type=a>i?e.Providers.WCS.ScreenSharingImageTypes.JPEG:e.Providers.WCS.ScreenSharingImageTypes.PNG}.bind(this)),t},_mergeBlocks:function(e){return e=this._sortByColumn(e),e=this._mergeByColumn(e),e=this._sortByRow(e),(e=this._mergeByRow(e)).map(this._createMergedBlock)},_createMergedBlock:function(t){var i=document.createElement("canvas");i.width=t._width,i.height=t._height;var a=i.getContext("2d");t._blocks.forEach(function(e){a.putImageData(e._imgData,e._x-t._x,e._y-t._y)});var n=a.getImageData(0,0,t._width,t._height);return new e.Providers.ContentSharing.ScreenBlock(t._x,t._y,t._row,t._column,t._width,t._height,n)},_determineChangedBlocks:function(t,i){var a=[],n=[],r=Math.ceil(t.videoHeight/this._blockHeight);if(!this._imageChanged(t,i))return a;for(var s=0;s<t.videoWidth;s+=this._blockWidth)for(var o=s/this._blockWidth,c=s+this._blockWidth>t.videoWidth?t.videoWidth-s:this._blockWidth,l=0;l<t.videoHeight;l+=this._blockHeight){var d=l+this._blockHeight>t.videoHeight?t.videoHeight-l:this._blockHeight,u=i.getImageData(s,l,c,d),C=new e.Providers.ContentSharing.ScreenBlock(s,l,l/this._blockHeight,o,c,d,u);if(C._previousBase64=this._getBase64Image(C._imgData),this._previousBlocks.length>0&&!this._captureKeyFrame){var p=C._column*r+C._row,h=this._previousBlocks[p];h&&h._previousBase64===C._previousBase64||n.push(C)}else n.push(C);a.push(C)}return this._captureKeyFrame&&(this._captureKeyFrame=!1),this._previousBlocks=a,n},_imageChanged:function(e,t){var i=!0,a=t.getImageData(0,0,e.videoWidth,e.videoHeight),n=this._getBase64Image(a);return n!==this._previousBase64||this._captureKeyFrame?this._previousBase64=n:i=!1,i},_getColorsCount:function(e){var t,i={},a=new Uint32Array(e.data.buffer),n=0,r=a.length;for(t=0;r>t;t++){var s=""+(16777215&a[t]);i[s]||(i[s]=0,n++),i[s]++}return n},_getBase64Image:function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"")},_mergeByColumn:function(e){return this._merge(e,this._compareBlocksByColumn,function(e,t){e._height+=t._height})},_mergeByRow:function(e){return this._merge(e,this._compareBlocksByRow,function(e,t){e._width+=t._width})},_merge:function(e,t,i){for(var a=[],n=this._copyBlock(e[0]),r=1;r<e.length;r++)t(n,e[r])?(e[r]._blocks.length>0?this._copyBlocks(e,r,n):n._blocks.push(e[r]),i(n,e[r])):(a.push(n),n=this._copyBlock(e[r]));return a.push(n),a},_copyBlocks:function(e,t,i){e[t]._blocks.forEach(function(e){i._blocks.push(e)})},_copyBlock:function(t){var i;return 0===t._blocks.length?(i=new e.Providers.ContentSharing.ScreenBlock(t._x,t._y,t._row,t._column,t._width,t._height))._blocks.push(t):i=t,i},_sortByColumn:function(e){return e.sort(function(e,t){return e._column===t._column?e._row-t._row:e._column-t._column})},_sortByRow:function(e){return e.sort(function(e,t){return e._row===t._row?e._column-t._column:e._row-t._row})},_compareBlocksByColumn:function(e,t){return e._x===t._x&&e._width===t._width&&(e._y+e._height===t._y||t._y+t._height===e._y)},_compareBlocksByRow:function(e,t){return e._y===t._y&&e._height===t._height&&(e._x+e._width===t._x||t._x+t._width===e._x)}}}(AvayaClientServices),function(e){"use strict";function t(t){this._collaborationProvider=t,this._extensionNetworkProvider=new e.Providers.ContentSharing.ExtensionNetworkProvider(new e.Providers.ContentSharing.ExtensionRequestBuilder),this._screenCapturer=new e.Providers.ContentSharing.ScreenCapturer(new e.Providers.ContentSharing.ScreenScraper),this._extensionRequestBuilder=new e.Providers.ContentSharing.ExtensionRequestBuilder,this._contentSharingTagBuilder=new e.Providers.ContentSharing.ContentSharingTagBuilder;var i=new e.Providers.ContentSharing.ServerManager(t.sendMessage.bind(t));this._bandwidthManager=new e.Providers.ContentSharing.BandwidthManager(i),this._screenSharingTagEncoder=new e.Providers.WCS.ScreenSharingTagEncoder}t.prototype={getScreenSharingProvider:function(){return navigator.webkitGetUserMedia&&window.chrome?new e.Providers.ContentSharing.ChromeScreenSharingProvider(this._collaborationProvider,this._extensionNetworkProvider,this._screenCapturer,this._extensionRequestBuilder,this._contentSharingTagBuilder,this._bandwidthManager,this._screenSharingTagEncoder):new e.Providers.ContentSharing.FirefoxScreenSharingProvider(this._collaborationProvider,this._extensionNetworkProvider,this._screenCapturer,this._extensionRequestBuilder,this._contentSharingTagBuilder,this._bandwidthManager,this._screenSharingTagEncoder)}},e.Providers.ContentSharing.ScreenSharingProviderFactory=t}(AvayaClientServices),function(e){"use strict";function t(e){this._sentData=0,this._maxBytesPerSecond=38400,this._sendingFunction=e}t.prototype={start:function(e){this._maxBytesPerSecond=e.maxBytesPerSecond},send:function(e){this._sentData+=e.getByteLength();var t=e.getByteLength()/this._maxBytesPerSecond*1e3;e.getBlocks().forEach(function(e){this._sendingFunction(e)}.bind(this)),setTimeout(function(){this._sentData-=e.getByteLength(),this.onBandwidthAvailable()}.bind(this),t)},canSend:function(e){return 0===this._sentData||e+this._sentData<=this._maxBytesPerSecond},onBandwidthAvailable:function(){}},e.Providers.ContentSharing.ServerManager=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Base.Observable.call(this),this._networkProvider=t}t.prototype=Object.create(e.Base.Observable.prototype),t.prototype.init=function(e){this._networkProvider.init(e)},t.prototype.login=function(e){return this._networkProvider.send({loginId:e.username,password:e.password},{sendType:"GET"}).then(function(e){return this.trigger("focus.login.success",[e]),e}.bind(this),function(e){this.trigger("focus.login.error",[e])}.bind(this))},e.Providers.Focus.FocusProvider=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){e.Base.Observable.call(this)}t.prototype=Object.create(e.Base.Observable.prototype),t.prototype.start=function(){},t.prototype.stop=function(){},e.Providers.Interfaces.AbstractProvider=t}(AvayaClientServices),function(e){"use strict";e.Providers.Interfaces.AbstractStream=function(t,i,a){this.type=t,this.id=i,this.enabled=a!==e.Providers.Interfaces.StreamDirection.INACTIVE,this.direction=a}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(t,i){e.Providers.Interfaces.AbstractStream.call(this,"audio",t,i)}t.prototype=Object.create(e.Providers.Interfaces.AbstractStream.prototype),e.Providers.Interfaces.AudioStream=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.accept=function(){},t.prototype.ignore=function(){},t.prototype.deny=function(){},t.prototype.hold=function(){},t.prototype.unhold=function(){},t.prototype.sendDigits=function(){},t.prototype.getRemoteAddress=function(){},t.prototype.getAccessCode=function(){},t.prototype.getRemoteName=function(){},t.prototype.getSessionDetails=function(){},t.prototype.isConference=function(){},t.prototype.isIncoming=function(){},t.prototype.canAutoAnswer=function(){},t.prototype.isRemote=function(){},t.prototype.isServiceAvailable=function(){},t.prototype.isCallerIdentityPrivate=function(){},t.prototype.getAlertType=function(){},t.prototype.setRemoteAddress=function(e){},t.prototype.setSubject=function(e){},t.prototype.getSubject=function(){},t.prototype.getState=function(){},t.prototype.join=function(){},t.prototype.addCall=function(e){},t.prototype.addParticipant=function(e){},t.prototype.isAudioMuted=function(){},t.prototype.muteAudio=function(e,t){},e.Providers.Interfaces.CallProvider=t}(AvayaClientServices),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Interfaces.CallProviderCallbackIds={CALL_STARTED:"callStarted",CALL_RINGING:"callRinging",CALL_ESTABLISHED:"callEstablished",REMOTE_STREAM_ADDED:"remoteStreamAdded",LOCAL_STREAM_ADDED:"localStreamAdded",CALL_ENDED:"callEnded",CONFERENCE_ESCALATION:"conferenceEscalation",INCOMING_CALL:"incomingCall"}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Interfaces.CallServiceCallbackIds={INCOMING_CALL:"incomingCall"}}(),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.sendSDP=function(e,t,i,a){},e.Providers.Interfaces.CallSignalingProvider=t}(AvayaClientServices),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Providers.Interfaces.StreamDirection={RECVONLY:"recvonly",SENDONLY:"sendonly",SENDRECV:"sendrecv",INACTIVE:"inactive"}}(),function(e){"use strict";function t(t,i){e.Providers.Interfaces.AbstractStream.call(this,"video",t,i)}t.prototype=Object.create(e.Providers.Interfaces.AbstractStream.prototype),e.Providers.Interfaces.VideoStream=t}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";function t(){e.Base.Observable.call(this)}t.prototype=Object.create(e.Base.Observable.prototype),t.prototype.start=function(){},t.prototype.stop=function(){},t.prototype.startWhiteboard=function(e){},t.prototype.endWhiteboard=function(e){},t.prototype.addWhiteboardSurface=function(){},t.prototype.removeWhiteboardSurface=function(e){},t.prototype.observeCollaboration=function(){},t.prototype.addCircle=function(){},t.prototype.addShape=function(){},t.prototype.startDrawShape=function(){},t.prototype.liveDrawShape=function(){},t.prototype.endDrawShape=function(){},t.prototype.addText=function(){},t.prototype.getReceivingBitrate=function(){},t.prototype.sendStartScreenSharing=function(){},t.prototype.sendMessage=function(e){},t.prototype.sendLiveEvent=function(e){},t.prototype.removeShape=function(e,t){},t.prototype.clearContent=function(e){},t.prototype.getParticipants=function(){},t.prototype.isOpened=function(){},t.prototype.isFeatureAvailable=function(e){},e.Providers.Interfaces.CollaborationProvider=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.sendHandshake=function(e){},t.prototype.subscribeMeetingInfo=function(e){},t.prototype.subscribeRoster=function(e){},t.prototype.subscribeActiveTalker=function(e){},t.prototype.subscribePermissions=function(e){},t.prototype.subscribeSlider=function(e){},t.prototype.subscribeMeetingNote=function(e){},t.prototype.subscribeWebCollab=function(e){},t.prototype.subscribeAvailableLayouts=function(e){},t.prototype.getCurrentVideoLayout=function(e){},t.prototype.setAsLecturer=function(e,t){},t.prototype.disconnectParticipant=function(e,t){},t.prototype.terminateConference=function(e){},t.prototype.requestToBecomeModerator=function(e,t){},t.prototype.unsetAsLecturer=function(e){},t.prototype.muteUnmute=function(e,t,i,a){},t.prototype.sendChatMessage=function(e,t,i){},t.prototype.muteUnmuteAll=function(e,t){},t.prototype.setContinuation=function(e,t){},t.prototype.raiseLowerHand=function(e,t){},t.prototype.moderatorLowerHand=function(e,t,i){},t.prototype.sendModeratorAdmissionRequest=function(e){},t.prototype.sendAdmissionRequest=function(e,t){},e.Providers.Interfaces.ConferenceDataProvider=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.start=function(e){},t.prototype.observeConference=function(e){},t.prototype.disconnectParticipant=function(e){},t.prototype.setAsLecturer=function(e){},t.prototype.setLocked=function(e){},t.prototype.setVideoLayoutTextOverlay=function(e){},t.prototype.setVideoLayoutSelfSee=function(e){},t.prototype.setVideoLayout=function(e){},t.prototype.terminateConference=function(){},t.prototype.requestToBecomeModerator=function(e){},t.prototype.startRecording=function(e,t,i){},t.prototype.stopRecording=function(e){},t.prototype.pauseRecording=function(e){},t.prototype.resumeRecording=function(e){},t.prototype.unsetAsLecturer=function(){},t.prototype.muteUnmute=function(e,t,i){},t.prototype.sendChatMessage=function(e,t){},t.prototype.muteUnmuteAll=function(e){},t.prototype.setContinuation=function(e){},t.prototype.raiseLowerHand=function(e){},t.prototype.moderatorLowerHand=function(e,t){},e.Providers.Interfaces.ConferenceProvider=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.start=function(e){},t.prototype.stop=function(){},t.prototype.getProviderType=function(){},t.prototype.createContactForAdd=function(){},t.prototype.addContact=function(e){},t.prototype.updateContact=function(e){},t.prototype.deleteContact=function(e){},t.prototype.retrieveAllContacts=function(){},t.prototype.getContactsChanges=function(){},t.prototype.getAddContactCapability=function(){},t.prototype.getUpdateContactCapability=function(){},t.prototype.getDeleteContactCapability=function(){},e.Providers.Interfaces.ContactsProvider=t}(AvayaClientServices),function(e,t){"use strict";e.Providers.Interfaces.ContactsProviderCallbackIds={CONTACT_ADDED:"contact_added",CONTACT_UPDATED:"contact_updated",CONTACT_DELETED:"contact_deleted",CAPABILITIES_CHANGED:"capabilities_changed"}}(AvayaClientServices,jQuery),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.start=function(e){},t.prototype.stop=function(){},t.prototype.getProviderType=function(){},t.prototype.startDirectorySearch=function(e){},t.prototype.stopDirectorySearch=function(e){},t.prototype.getSearchContactCapability=function(){},e.Providers.Interfaces.DirectorySearchProvider=t}(AvayaClientServices),function(e,t){"use strict";e.Providers.Interfaces.DirectorySearchProviderCallbackIds={CAPABILITIES_CHANGED:"capabilities_changed"}}(AvayaClientServices,jQuery),function(e){"use strict";function t(){e.Providers.Interfaces.AbstractProvider.call(this)}t.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),t.prototype.start=function(e){},t.prototype.getRoutableDomains=function(){},t.prototype.getConversations=function(e){},t.prototype.getConversationIds=function(e){},t.prototype.getConversationsByQuery=function(e){},t.prototype.discoverResources=function(){},t.prototype.getResources=function(){},t.prototype.validateUsers=function(e){},t.prototype.getParticipants=function(e,t){},t.prototype.sendMessage=function(e,t){},t.prototype.sendMessageWithAttachments=function(e,t,i){},t.prototype.leaveConversation=function(e){},t.prototype.markAllAsRead=function(e){},t.prototype.changeSubject=function(e){},t.prototype.markAsReadBatch=function(e){},t.prototype.getMessages=function(e,t,i,a){},t.prototype.reportTyping=function(){},t.prototype.observeConversations=function(){},t.prototype.callEscalationEvent=function(e,t){},t.prototype.setLastAccessTime=function(e,t){},t.prototype.addParticipantsToConversation=function(e,t){},t.prototype.close=function(e){},e.Providers.Interfaces.MessagingProvider=t}(AvayaClientServices),function(e){"use strict";function t(e){this._sdpParser=e}t.prototype={getConnection:function(e){var t=null;e&&(t={iceServers:e});return new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)(t,{optional:[{DtlsSrtpKeyAgreement:!1}]})},getLocalSDP:function(t){var i=$.Deferred();return t.onicecandidate=function(a){a.candidate?e.Base.Logger.debug(a.candidate.sdpMid,a.candidate.sdpMLineIndex,a.candidate.candidate):i.resolve(t.localDescription.sdp)},t.createOffer(function(e){e.sdp=this._sdpParser.process(e.sdp),t.setLocalDescription(e,function(){},function(e){i.reject(e)})}.bind(this),function(e){i.reject(e)}),i.promise()},createAnswer:function(e){var t=$.Deferred();return e.createAnswer(function(i){i.sdp=this._sdpParser.process(i.sdp),e.setLocalDescription(i,function(){t.resolve(e.localDescription.sdp)},function(e){t.reject(e)})}.bind(this),function(e){t.reject(e)}),t.promise()},setRemoteDescription:function(e,t,i){var a=window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription||window.msRTCSessionDescription,n=$.Deferred(),r=new a({type:t,sdp:i});return e.setRemoteDescription(r,function(){n.resolve()},function(e){n.reject(e)}),n.promise()},stopAllStreams:function(e){e.getLocalStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.stop()}),e.getVideoTracks().forEach(function(e){e.stop()})}),e.getRemoteStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.stop()}),e.getVideoTracks().forEach(function(e){e.stop()})})}},e.Providers.RTC.RTCPeerConnectionProvider=t}(AvayaClientServices),function(e){"use strict";function t(){this._items=[],this._sdpParserValuesForDelete=["extmap:","group:BUNDLE","ice-options:","mid:","msid-semantic:","rtcp-mux","rtcp:9 IN IP4 0.0.0.0"],this._sdpParserValuesForUpdate=[{oldValue:"maxptime:60",newValue:"maxptime:20"}]}t.prototype={process:function(e){return this._parse(e),this._validate(),this._join()},_join:function(){for(var e=0;e<this._items.length;e++){var t=this._items[e];t.key&&(this._items[e]=t.key+"="+t.value)}return this._items.join("\n")},_parse:function(e){this._items=e.split("\n");for(var t=0;t<this._items.length;t++){var i=this._items[t];if(i){var a=i.split("="),n={};n.key=a[0],a.shift(),n.value=a.join("="),this._items[t]=n}}},_validate:function(){this._deleteProcess(),this._updatedProcess()},_deleteProcess:function(){for(var t=0;t<this._sdpParserValuesForDelete.length;t++){for(var i=this._sdpParserValuesForDelete[t],a=!1,n=0;n<this._items.length;){var r=this._items[n];r.key&&-1!==r.value.indexOf(i)?(this._items.splice(n,1),a=!0,e.Base.Logger.debug("deleted",i)):n++}a||e.Base.Logger.warn("not deleted",i)}},_updatedProcess:function(){for(var t=0;t<this._sdpParserValuesForUpdate.length;t++){for(var i=this._sdpParserValuesForUpdate[t],a=!1,n=0;n<this._items.length;n++){var r=this._items[n];if(r.key&&-1!==r.value.indexOf(i.oldValue)){var s=r.value;r.value=r.value.replace(i.oldValue,i.newValue),a=!0,e.Base.Logger.debug("updated",s+" -> "+r.value)}}a||e.Base.Logger.warn("not updated",i)}}},e.Providers.RTC.SDPParser=t}(AvayaClientServices),function(e,t){"use strict";function i(){}i.prototype={getStream:function(e){var i=$.Deferred(),a=navigator.getUserMedia?"getUserMedia":navigator.mozGetUserMedia?"mozGetUserMedia":navigator.webkitGetUserMedia?"webkitGetUserMedia":"getUserMedia";return t.navigator[a]?t.navigator[a](e,function(e){i.resolve(e)},function(e){i.reject(e)}):i.reject({message:"Browser do not support getUserMedia function."}),i.promise()}},e.Providers.RTC.UserMediaProvider=i}(AvayaClientServices,window),function(e){"use strict";function t(t,i,a,n,r){e.Providers.Interfaces.CallProvider.call(this),this._signalingProvider=t,this._userMediaProvider=i,this._rtcPeerConnectionProvider=a,this._conferenceProvider=n,this._rtcPeerConnection=void 0,this._transaction={id:1},this._isClosed=!0,this._config=r}t.prototype=Object.create(e.Providers.Interfaces.CallProvider.prototype),t.prototype.startCall=function(t){return this._signalingProvider.start(this._config).then(function(){this._signalingProvider.on(e.Providers.WSP.WSPMessageTypes.SERVER_SDP_REQUEST,this._handleServerSDPRequest.bind(this)),this._signalingProvider.on(e.Providers.WSP.WSPMessageTypes.DISCONNECT_REQUEST,function(e){this._handleDisconnectRequest(t,e)}.bind(this)),this.trigger(e.Providers.Interfaces.CallProviderCallbackIds.CONFERENCE_ESCALATION,[t])}.bind(this)).then(function(){return this._rtcPeerConnection=this._rtcPeerConnectionProvider.getConnection(),this._rtcPeerConnection.onaddstream=function(e){t._remoteVideoAddedCallbacks.fire(t,e.stream)}.bind(this),this._userMediaProvider.getStream(this._config.conferenceConfiguration.supportedMedia)}.bind(this)).then(function(e){return this._rtcPeerConnection.addStream(e),t._localVideoAddedCallbacks.fire(t,e),this._rtcPeerConnectionProvider.getLocalSDP(this._rtcPeerConnection)}.bind(this)).then(function(e){return this._signalingProvider.sendSDP(e,this._config.conferenceConfiguration.displayName,this._config.conferenceConfiguration.meetingId,this._transaction.id++)}.bind(this)).then(function(e){return this._rtcPeerConnectionProvider.setRemoteDescription(this._rtcPeerConnection,"answer",e.params.sdp)}.bind(this)).then(function(){return this._conferenceProvider._transaction=this._transaction,t._conference.start(this._config).then(function(e){return this._isClosed=!1,e}.bind(this))}.bind(this))},t.prototype.stopCall=function(e){var t=$.Deferred();return this._removeListeners(),this._rtcPeerConnection.oniceconnectionstatechange=function(i){"closed"===i.target.iceConnectionState&&(this._rtcPeerConnectionProvider.stopAllStreams(this._rtcPeerConnection),this._isClosed?(this._rtcPeerConnection=void 0,this._transaction.id=0,t.resolve()):this._signalingProvider.stop(this._transaction.id++).then(function(){return this._rtcPeerConnection=void 0,this._transaction.id=0,e.getConference().stop()}.bind(this)).then(function(){t.resolve()}.bind(this),function(e){t.reject(e)}))}.bind(this),"closed"!==this._rtcPeerConnection.signalingState&&this._rtcPeerConnection.close(),t.promise()},t.prototype.muteAudio=function(e,t){var i=$.Deferred();return this._rtcPeerConnection.getLocalStreams().forEach(function(e){e.getAudioTracks().forEach(function(e){e.enabled=!t})}),this._conferenceProvider.sendLocalMuteEvent(e.getConference()._selfParticipantId,t),i.resolve(),i.promise()},t.prototype._handleServerSDPRequest=function(e){this._transaction.id=parseFloat(e.params.transId),this._rtcPeerConnectionProvider.setRemoteDescription(this._rtcPeerConnection,"offer",e.params.sdp).then(function(){return this._rtcPeerConnectionProvider.createAnswer(this._rtcPeerConnection)}.bind(this)).then(function(t){this._signalingProvider.answerSDP(t,e.params.transId)}.bind(this))},t.prototype._handleDisconnectRequest=function(t,i){this._transaction.id=parseFloat(i.params.transId);try{this._signalingProvider.sendDisconnectResponse(i.params.transId)}catch(t){e.Base.Logger.error(t)}this._isClosed=!0,t.end().then(function(e){return t._onCallEndedCallbacks.fire(t),e})},e.Providers.Scopia.ScopiaCallProvider=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype.updateMeetingInfo=function(t,i){if(i.meetingName&&i.meetingName!==t._subject&&(t._subject=i.meetingName,t._onConferenceSubjectChangedCallbacks.fire(t,i.meetingName)),i.lecturerId&&"none"!==i.lecturerId!==t._isLectureModeActive&&(t._isLectureModeActive="none"!==i.lecturerId,t._onConferenceLectureModeStatusChangedCallbacks.fire(t,t._isLectureModeActive)),i.lecturerId&&i.lecturerId!==t._lecturerId){var a=t._activeParticipants.filter(function(e){return e._participantId===t._lecturerId})[0];a&&(a._lecturer=!1,a._onParticipantUnsetAsLecturerCallbacks.fire(a)),t._lecturerId=i.lecturerId;var n=t._activeParticipants.filter(function(e){return e._participantId===t._lecturerId})[0];n&&(n._lecturer=!0,n._onParticipantSetAsLecturerCallbacks.fire(n))}switch(i.recorderAvailable&&i.recorderAvailable!==t._recorderStatus&&(t._recorderStatus=i.recorderAvailable),i.recording){case"true":i.recording=e.Services.Conference.RecordingStatus.ON;break;case"false":i.recording=e.Services.Conference.RecordingStatus.OFF}i.recording&&i.recording!==t._recordingStatus&&(t._recordingStatus=i.recording,t._onConferenceRecordingStatusChangedCallbacks.fire(t,t._recordingStatus)),!i.locked&&!1!==i.locked||i.locked===t._isLocked||(t._isLocked=i.locked,t._onConferenceLockStatusChangedCallbacks.fire(t,t._isLocked)),i.media&&"video"===i.media!==t._isVideoAllowed&&(t._isVideoAllowed="video"===i.media,t._onConferenceVideoStatusChangedCallbacks.fire(t,t._isVideoAllowed)),i.presenterId&&"none"!==i.presenterId!==t._isPresentationModeActive&&(t._isPresentationModeActive="none"!==i.presenterId,t._onConferencePresentationModeStatusChangedCallbacks.fire(t,t._isPresentationModeActive)),i.encrypted&&i.encrypted!==t._encryptionStatus&&(t._encryptionStatus=i.encrypted,t._onConferenceEncryptionStatusChangedCallbacks.fire(t,t._encryptionStatus)),void 0!==i.streaming&&i.streaming!==t._isStreamingActive&&(t._isStreamingActive=i.streaming,t._onConferenceStreamingStatusChangedCallbacks.fire(t,t._isStreamingActive)),i.terminationTime&&i.terminationTime!==t._terminationTime&&(t._terminationTime=i.terminationTime,t._onConferenceMeetingTerminationTimeChangedCallbacks.fire(t,t._terminationTime)),void 0!==i.moderatorPinNeeded&&i.moderatorPinNeeded!==t._isPinRequiredToBecomeModerator&&(t._isPinRequiredToBecomeModerator=i.moderatorPinNeeded)},t.prototype.updateRoster=function(t,i){var a=[],n={};i.participants.forEach(function(i){i.status===e.Services.Conference.ParticipantAuthorizationStatus.ACTIVE?(n=this._buildActiveParticipant(i,t),t._activeParticipants.filter(function(e){return e._participantId===n._participantId}).length>0||(n._participantId===t._selfParticipantId&&(n._isLocalUser=!0),a.push(n),t._activeParticipants.push(n)),n._participantId===t._selfParticipantId&&(t._selfParticipant=n,t.getInConferenceChat()._setSelfParticipant(n),n._isSelfParticipant=!0,n._audioFromParticipant===e.Services.Conference.MediaFromParticipantStatus.MODERATOR_MUTED&&call.muteAudio())):(n=this._buildPendingParticipant(i,t),t._pendingParticipants.filter(function(e){return e._participantId===n._participantId}).length>0||(t._pendingParticipants.push(n),t._onConferencePendingParticipantCallbacks.fire(t,n)))}.bind(this)),t._activeParticipants.forEach(function(e){e._recalculateAllCapabilities()}),a.length>0&&t._onConferenceParticipantsAddedCallbacks.fire(t,a)},t.prototype.updateSlider=function(e,t){},t.prototype.addParticipant=function(e,t){if(!(e._activeParticipants.filter(function(e){return e._participantId===t.participantId}).length>0)){var i=this._buildActiveParticipant(t,e);e._activeParticipants.push(i),e._onConferenceParticipantsAddedCallbacks.fire(e,[i]),i._recalculateAllCapabilities()}},t.prototype.addPendingParticipant=function(e,t){if(!(e._pendingParticipants.filter(function(e){return e._participantId===t.participantId}).length>0)){console.log("addPendingParticipant",e,t);var i=this._buildPendingParticipant(t,e);e._pendingParticipants.push(i),e._onConferencePendingParticipantCallbacks.fire(e,i)}},t.prototype.removePendingParticipant=function(t,i){var a=t._pendingParticipants.filter(function(e){return e._participantId===i.participantId})[0];if(e.Base.Utils.isDefined(a)){var n=t._pendingParticipants.indexOf(a);t._pendingParticipants.splice(n,1),t._onConferencePendingParticipantRemovedCallbacks.fire(t,a)}},t.prototype.pendingParticipantAccepted=function(e,t){e._onPendingParticipantAcceptedCallbacks.fire(e,t.anotherModerator)},t.prototype.pendingParticipantCancelled=function(t,i){var a=t._pendingParticipants.filter(function(e){return e._participantId===i.participantId})[0];e.Base.Utils.isDefined(a)&&a._onPendingParticipantCancelledCallbacks.fire(a,i.reason,i.anotherModerator)},t.prototype.pendingParticipantDenied=function(e,t){e._onPendingParticipantDeniedCallbacks.fire(e,t.anotherModerator)},t.prototype.dropParticipant=function(t,i){var a=t._activeParticipants.filter(function(e){return e._participantId===i.participantId})[0],n=t._pendingParticipants.filter(function(e){return e._participantId===i.participantId})[0];if(e.Base.Utils.isDefined(a)){t._activeParticipants.splice(t._activeParticipants.indexOf(a),1);var r=this._buildDroppedParticipant(a,t);t._droppedParticipants.push(r),t._onConferenceParticipantsRemovedCallbacks.fire(t,[a]),t._onConferenceDroppedParticipantAddedCallbacks.fire(t,r)}else e.Base.Utils.isDefined(n)&&(t._pendingParticipants.splice(t._pendingParticipants.indexOf(n),1),t._onConferencePendingParticipantRemovedCallbacks.fire(t,n))},t.prototype.updateMeetingNote=function(e,t){},t.prototype.updateActiveTalker=function(t,i){if(i.participantId!==t._activeTalkerId){var a=t._activeParticipants.filter(function(e){return e._participantId===t._activeTalkerId})[0];e.Base.Utils.isDefined(a)&&a._onParticipantActiveTalkerStatusChangedCallbacks.fire(a,!1);var n=t._activeParticipants.filter(function(e){return e._participantId===i.participantId})[0];e.Base.Utils.isDefined(n)&&(t._activeTalkerId=i.participantId,t._onConferenceActiveTalkersChangedCallbacks.fire(t,n),n._onParticipantActiveTalkerStatusChangedCallbacks.fire(n,!0))}},t.prototype.updateWebCollab=function(e,t){e._collaborationURI=t.webCollabUrl,e._onConferenceCollaborationURIChangedCallbacks.fire(e,e._collaborationURI)},t.prototype.updatePermissions=function(t,i){e.Base.Utils.isDefined(i.dialout)&&i.dialout!==t._dialoutPermissions&&(t._dialoutPermissions=i.dialout),e.Base.Utils.isDefined(i.recording)&&i.recording!==t._recordingPermissions&&(t._recordingPermissions=i.recording),t._recalculateAllCapabilities()},t.prototype.updateAvailableLayouts=function(t,i){if(e.Base.Utils.isDefined(i.textOverlay)&&i.textOverlay!==t._isVideoParticipantNameDisplayChangeAllowed&&(t._isVideoParticipantNameDisplayChangeAllowed=i.textOverlay,t._onConferenceDisplayParticipantNameOnVideoAllowedCallbacks.fire(t,t._isVideoParticipantNameDisplayChangeAllowed)),e.Base.Utils.isDefined(i.noSelfSee)&&i.noSelfSee!==t._isVideoSelfSeeChangeAllowed&&(t._isVideoSelfSeeChangeAllowed=i.noSelfSee,t._onConferenceVideoSelfSeeAllowedCallbacks.fire(t,t._isVideoSelfSeeChangeAllowed)),e.Base.Utils.isDefined(i.geometries)){var a=t._supportedVideoLayouts.slice(0);t._supportedVideoLayouts=i.geometries.slice(0);var n=!1;if(a.length===t._supportedVideoLayouts.length){for(var r=0;r<a.length;r++)if(a[r]!==t._supportedVideoLayouts[r]){n=!0;break}}else n=!0;n&&t._onConferenceSupportedVideoLayoutsChangedCallbacks.fire(t,t._supportedVideoLayouts)}},t.prototype.updateCurrentLayout=function(t,i){if(e.Base.Utils.isDefined(i.textOverlay)&&i.textOverlay!==t._isVideoParticipantNameDisplayActive&&(t._isVideoParticipantNameDisplayActive=i.textOverlay,t._onConferenceDisplayParticipantNameOnVideoChangedCallbacks.fire(t,t._isVideoParticipantNameDisplayActive)),e.Base.Utils.isDefined(i.noSelfSee)){var a=t._isVideoSelfSeeActive;t._isVideoSelfSeeActive=!i.noSelfSee,t._isVideoSelfSeeActive!==a&&t._onConferenceVideoSelfSeeChangedCallbacks.fire(t,t._isVideoSelfSeeActive)}e.Base.Utils.isDefined(i.geometry)&&i.geometry!==t._currentVideoLayout&&(t._currentVideoLayout=i.geometry,t._onConferenceVideoLayoutChangedCallbacks.fire(t,t._currentVideoLayout))},t.prototype.addChatMessage=function(t,i){var a=t.getInConferenceChat(),n=t._activeParticipants.filter(function(e){return e._participantId===i.participantId})[0];if(i.participantId!==t._selfParticipantId){var r=new e.Services.Conference.ChatMessage(i.text,n,a._selfParticipant,i.type===e.Services.Conference.ChatType.PRIVATE);a._addMessage(r)}},t.prototype._buildActiveParticipant=function(t,i){var a=new e.Services.Conference.ActiveParticipant(i._participantService,i);return a._participantId=t.participantId,a._participantName=t.participantName,a._userId=t.userId,a._joinTime=t.joinTime,a._sourceID=t.sourceID,a._status=t.status,a._handRaised=t.handRaised,a._role=t.role,a._feccRecvSupport=t.feccRecvSupport,a._audioFromParticipant=t.audioFromParticipant,a._audioToParticipant=t.audioToParticipant,a._videoFromParticipant=t.videoFromParticipant,a._videoToParticipant=t.videoToParticipant,a._contentFromParticipant=t.contentFromParticipant,a._contentToParticipant=t.contentToParticipant,a},t.prototype._buildDroppedParticipant=function(t,i){var a=new e.Services.Conference.DroppedParticipant(i._participantService,i);return a._participantId=t._participantId,a._userId=t._userId,a._participantName=t._participantName,a._isLocalUser=!1,a._conference=t._conference,a._recalculateAllCapabilities(),a},t.prototype._buildPendingParticipant=function(t,i){var a=new e.Services.Conference.PendingParticipant(i._participantService,i);return a._participantId=t.participantId,a._userId=t.userId,a._participantName=t.participantName,a._status=t.status,a._isLocalUser=!1,a._conference=i,a._recalculateAllCapabilities(),a},t.prototype.updateParticipant=function(t,i){var a=t._activeParticipants.filter(function(e){return e._participantId===i.participantId});if(e.Base.Utils.isDefined(a[0]))this._updateParticipantsData(a[0],i);else{var n=t._pendingParticipants.filter(function(e){return e._participantId===i.participantId});e.Base.Utils.isDefined(n[0])&&e.Base.Utils.isDefined(i.status)&&n[0]._status!==i.status&&i.status===e.Services.Conference.ParticipantAuthorizationStatus.ACTIVE&&(this.removePendingParticipant(t,i),this.addParticipant(t,i))}},t.prototype._updateParticipantsData=function(t,i){if(e.Base.Utils.isDefined(i.audioFromParticipant)&&t._audioFromParticipant!==i.audioFromParticipant&&(t._audioFromParticipant=i.audioFromParticipant,t._onParticipantAudioStatusChangedCallbacks.fire(t,t._audioFromParticipant),t._isLocalUser&&t._audioFromParticipant===e.Services.Conference.MediaFromParticipantStatus.MODERATOR_MUTED&&call.muteAudio()),e.Base.Utils.isDefined(i.videoFromParticipant)&&t._videoFromParticipant!==i.videoFromParticipant&&(t._videoFromParticipant=i.videoFromParticipant,t._onParticipantVideoStatusChangedCallbacks.fire(t,t._videoFromParticipant)),e.Base.Utils.isDefined(i.status)&&t._status!==i.status&&(t._status=i.status,t._onParticipantStatusChangedCallbacks.fire(t,t._status)),e.Base.Utils.isDefined(i.handRaised)&&t._handRaised!==i.handRaised&&(t._handRaised=i.handRaised,t._handRaised?t._onParticipantHandRaisedCallbacks.fire(t):t._onParticipantHandLoweredCallbacks.fire(t)),e.Base.Utils.isDefined(i.role)&&t._role!==i.role){var a=t._role;t._role=i.role,t._moderator=t._role===e.Services.Conference.ParticipantRole.MODERATOR,t._role===e.Services.Conference.ParticipantRole.MODERATOR?t._onParticipantSetAsModeratorCallbacks.fire(t):a===e.Services.Conference.ParticipantRole.MODERATOR&&t._role!==e.Services.Conference.ParticipantRole.MODERATOR&&t._onParticipantUnsetAsModeratorCallbacks.fire(t)}e.Base.Utils.isDefined(i.feccRecvSupport)&&t._feccRecvSupport!==i.feccRecvSupport&&(t._feccRecvSupport=i.feccRecvSupport),e.Base.Utils.isDefined(i.audioToParticipant)&&t._audioToParticipant!==i.audioToParticipant&&(t._audioToParticipant=i.audioToParticipant),e.Base.Utils.isDefined(i.videoToParticipant)&&t._videoToParticipant!==i.videoToParticipant&&(t._videoToParticipant=i.videoToParticipant),e.Base.Utils.isDefined(i.contentFromParticipant)&&t._contentFromParticipant!==i.contentFromParticipant&&(t._contentFromParticipant=i.contentFromParticipant),e.Base.Utils.isDefined(i.contentToParticipant)&&t._contentToParticipant!==i.contentToParticipant&&(t._contentToParticipant=i.contentToParticipant)},t.prototype.recordingFailed=function(e,t){e._onConferenceRecordingFailedCallbacks.fire(e)},t.prototype.meetingTerminationInProgress=function(e,t){e._onConferenceMeetingTerminationInProgressCallbacks.fire(e,t.reason,t.userName),e.stop()},e.Providers.Scopia.ScopiaConferenceBuilder=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.Interfaces.ConferenceProvider.call(this),this._dataProvider=t,this._conferenceBuilder=i,this._transaction={id:1}}t.prototype=Object.create(e.Providers.Interfaces.ConferenceProvider.prototype),t.prototype.start=function(e,t){return this._dataProvider.start(t).then(function(){return this._dataProvider.sendHandshake(this._transaction.id++)}.bind(this)).then(function(i){return e._selfParticipantId=i.participantId,i.admissionPermissionNeeded||i.admissionPasscodeNeeded?this._processAdmission(e,t,i):void 0}.bind(this))},t.prototype.observeConference=function(e){this._dataProvider.subscribeMeetingInfo(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateMeetingInfo(e,t),e._recalculateAllCapabilities(),t}.bind(this)),this._dataProvider.subscribeRoster(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateRoster(e,t),e._recalculateAllCapabilities(),t}.bind(this)),this._dataProvider.subscribeActiveTalker(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateActiveTalker(e,t),t}.bind(this)),this._dataProvider.subscribeSlider(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateSlider(e,t),t}.bind(this)),this._dataProvider.subscribeMeetingNote(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateMeetingNote(e,t),t}.bind(this)),this._dataProvider.subscribeWebCollab(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateWebCollab(e,t),t}.bind(this)),this._dataProvider.subscribeAvailableLayouts(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateAvailableLayouts(e,t),e._recalculateAllCapabilities(),t}.bind(this)),this._dataProvider.getCurrentVideoLayout(this._transaction.id++).then(function(t){return this._conferenceBuilder.updateCurrentLayout(e,t),e._recalculateAllCapabilities(),t}.bind(this)),this._dataProvider.subscribePermissions(this._transaction.id++).then(function(t){return this._conferenceBuilder.updatePermissions(e,t),t}.bind(this))},t.prototype._requestAdmission=function(t,i,a,n){return this._dataProvider.sendAdmissionRequest(this._transaction.id++,n).then(function(n){return n.responseCode===e.Services.Conference.AdmissionResponseCode.INCORRECT_PASSCODE_TRY_AGAIN?this._processAdmission(t,i,a):void 0}.bind(this))},t.prototype._processAdmission=function(e,t,i){return i.admissionPasscodeNeeded?t.promptAdmissionPasscodeHandler(i).then(function(a){return this._requestAdmission(e,t,i,a)}.bind(this)):t.confirmAdmissionHandler(i).then(function(){return this._requestAdmission(e,t,i)}.bind(this))},t.prototype.addConferenceEventListeners=function(t){var i=this._dataProvider.getSelectedProvider();i.on(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_JOINED_EVENT,function(i){var a=t._pendingParticipants.filter(function(e){return e._participantId===i.participantId}).length>0;i.status===e.Services.Conference.ParticipantAuthorizationStatus.ACTIVE?(a&&this._conferenceBuilder.removePendingParticipant(t,i),this._conferenceBuilder.addParticipant(t,i)):this._conferenceBuilder.addPendingParticipant(t,i)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_LEFT_EVENT,function(e){this._conferenceBuilder.dropParticipant(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.ACTIVE_TALKER_CHANGED_EVENT,function(e){this._conferenceBuilder.updateActiveTalker(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.PERMISSIONS_CHANGED_EVENT,function(e){this._conferenceBuilder.updatePermissions(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_INFO_CHANGED_EVENT,function(e){this._conferenceBuilder.updateParticipant(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.MEETING_INFO_CHANGED_EVENT,function(e){this._conferenceBuilder.updateMeetingInfo(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.AVAILABLE_LAYOUTS_CHANGED_EVENT,function(e){this._conferenceBuilder.updateAvailableLayouts(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_CHANGED_EVENT,function(e){this._conferenceBuilder.updateCurrentLayout(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.MEETING_TERMINATION_IN_PROGRESS_EVENT,function(e){this._conferenceBuilder.meetingTerminationInProgress(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_EVENT,function(e){this._conferenceBuilder.addPendingParticipant(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_CANCELED_EVENT,function(e){this._conferenceBuilder.pendingParticipantCancelled(t,e),this._conferenceBuilder.removePendingParticipant(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.CHAT_EVENT,function(e){this._conferenceBuilder.addChatMessage(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.RECORDING_FAILED_EVENT,function(e){this._conferenceBuilder.recordingFailed(t,e)}.bind(this)),i.on(e.Providers.UCCP.UCCPMessageTypes.WEB_COLLAB_CHANGED_EVENT,function(e){this._conferenceBuilder.updateWebCollab(t,e)}.bind(this))},t.prototype.stop=function(){return this._dataProvider.stop()},t.prototype.setAsLecturer=function(e){return this._dataProvider.setAsLecturer(this._transaction.id++,e)},t.prototype.setLocked=function(e){return this._dataProvider.setLocked(this._transaction.id++,e)},t.prototype.unsetAsLecturer=function(){return this._dataProvider.unsetAsLecturer(this._transaction.id++)},t.prototype.disconnectParticipant=function(e){return this._dataProvider.disconnectParticipant(this._transaction.id++,e)},t.prototype.startRecording=function(e,t,i){return this._dataProvider.startRecording(this._transaction.id++,t,i)},t.prototype.stopRecording=function(e){return this._dataProvider.stopRecording(this._transaction.id++)},t.prototype.pauseRecording=function(e){return this._dataProvider.pauseRecording(this._transaction.id++)},t.prototype.resumeRecording=function(e){return this._dataProvider.resumeRecording(this._transaction.id++)},t.prototype.muteUnmute=function(e,t,i){return this._dataProvider.muteUnmute(this._transaction.id++,e,t,i)},t.prototype.muteUnmuteAll=function(e){return this._dataProvider.muteUnmuteAll(this._transaction.id++,e)},t.prototype.setContinuation=function(e){return this._dataProvider.setContinuation(this._transaction.id++,e)},t.prototype.sendLocalMuteEvent=function(e,t){return this._dataProvider.sendLocalMuteEvent(this._transaction.id++,e,t)},t.prototype.setVideoLayout=function(e){return this._dataProvider.setVideoLayout(this._transaction.id++,e)},t.prototype.setVideoLayoutSelfSee=function(e){return this._dataProvider.setVideoLayoutSelfSee(this._transaction.id++,e)},t.prototype.setVideoLayoutTextOverlay=function(e){return this._dataProvider.setVideoLayoutTextOverlay(this._transaction.id++,e)},t.prototype.getCurrentVideoLayout=function(){return this._dataProvider.getCurrentVideoLayout(this._transaction.id++)},t.prototype.terminateConference=function(){return this._dataProvider.terminateConference(this._transaction.id++)},t.prototype.requestToBecomeModerator=function(e){return this._dataProvider.requestToBecomeModerator(this._transaction.id++,e)},t.prototype.sendChatMessage=function(e,t){return this._dataProvider.sendChatMessage(this._transaction.id++,e,t)},t.prototype.moderatorAdmission=function(t,i){return this._dataProvider.moderatorAdmission(this._transaction.id++,t.getParticipantId(),i).then(function(a){switch(i){case e.Services.Conference.ModeratorAdmissionActions.ADMIT:this._conferenceBuilder.pendingParticipantAccepted(t,a);break;case e.Services.Conference.ModeratorAdmissionActions.REJECT:this._conferenceBuilder.pendingParticipantDenied(t,a)}return a}.bind(this))},t.prototype.raiseLowerHand=function(e){return this._dataProvider.raiseLowerHand(this._transaction.id++,e)},t.prototype.moderatorLowerHand=function(e,t){return this._dataProvider.moderatorLowerHand(this._transaction.id++,e,t)},e.Providers.Scopia.ScopiaConferenceProvider=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={getScopiaConferenceProvider:function(t,i){if(e.Base.Utils.isDefined(t)&&t.enabled){var a=new e.Providers.UCCP.UCCPMessageBuilder,n=new e.Providers.UCCP.UCCPMessageParser;n.register(e.Providers.UCCP.UCCPMessageTypes.HANDSHAKE_RESPONSE,new e.Providers.UCCP.UCCPHandshakeResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_ROSTER_RESPONSE,new e.Providers.UCCP.UCCPSubscribeRosterResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_ACTIVE_TALKER_RESPONSE,new e.Providers.UCCP.UCCPSubscribeActiveTalkerResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_PERMISSIONS_RESPONSE,new e.Providers.UCCP.UCCPSubscribePermissionsResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_SLIDER_RESPONSE,new e.Providers.UCCP.UCCPSubscribeSliderResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_MEETING_NOTE_RESPONSE,new e.Providers.UCCP.UCCPSubscribeMeetingNoteResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_MEETING_INFO_RESPONSE,new e.Providers.UCCP.UCCPSubscribeMeetingInfoResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_WEB_COLLAB_RESPONSE,new e.Providers.UCCP.UCCPSubscribeWebCollabResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_AVAILABLE_LAYOUTS_RESPONSE,new e.Providers.UCCP.UCCPSubscribeAvailableLayoutsResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_JOINED_EVENT,new e.Providers.UCCP.UCCPParticipantJoinedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_LEFT_EVENT,new e.Providers.UCCP.UCCPParticipantLeftEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.ACTIVE_TALKER_CHANGED_EVENT,new e.Providers.UCCP.UCCPActiveTalkerChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.PERMISSIONS_CHANGED_EVENT,new e.Providers.UCCP.UCCPPermissionsChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MEETING_INFO_CHANGED_EVENT,new e.Providers.UCCP.UCCPMeetingInfoChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.PARTICIPANT_INFO_CHANGED_EVENT,new e.Providers.UCCP.UCCPParticipantInfoChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_START_RESPONSE,new e.Providers.UCCP.UCCPLectureModeStartResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_STOP_RESPONSE,new e.Providers.UCCP.UCCPLectureModeStopResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_MUTE_RESPONSE,new e.Providers.UCCP.UCCPModeratorMuteResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MUTE_ALL_RESPONSE,new e.Providers.UCCP.UCCPMuteAllResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.DISCONNECT_PARTICIPANT_RESPONSE,new e.Providers.UCCP.UCCPDisconnectParticipantResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_MUTE_RESPONSE,new e.Providers.UCCP.UCCPModeratorMuteResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MEETING_TERMINATION_IN_PROGRESS_EVENT,new e.Providers.UCCP.UCCPMeetingTerminationInProgressEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.TERMINATE_MEETING_RESPONSE,new e.Providers.UCCP.UCCPTerminateMeetingResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.START_MODERATION_RESPONSE,new e.Providers.UCCP.UCCPStartModerationResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CHAT_RESPONSE,new e.Providers.UCCP.UCCPChatResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CHAT_EVENT,new e.Providers.UCCP.UCCPChatEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.LOCK_MEETING_RESPONSE,new e.Providers.UCCP.UCCPLockMeetingResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.RECORDING_RESPONSE,new e.Providers.UCCP.UCCPRecordingResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.EXTEND_MEETING_RESPONSE,new e.Providers.UCCP.UCCPExtendMeetingResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.RECORDING_REQUEST,new e.Providers.UCCP.UCCPRecordingResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_RESPONSE,new e.Providers.UCCP.UCCPCurrentLayoutResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_GEOMETRY_RESPONSE,new e.Providers.UCCP.UCCPChangeLayoutGeometryResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_OVERLAY_RESPONSE,new e.Providers.UCCP.UCCPChangeLayoutTextOverlayResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_SELF_SEE_RESPONSE,new e.Providers.UCCP.UCCPChangeLayoutSelfSeeResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.AVAILABLE_LAYOUTS_CHANGED_EVENT,new e.Providers.UCCP.UCCPAvailableLayoutsChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_CHANGED_EVENT,new e.Providers.UCCP.UCCPCurrentLayoutChangedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.VIDEO_PIN_RESPONSE,new e.Providers.UCCP.UCCPVideoPinResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.RAISE_HAND_RESPONSE,new e.Providers.UCCP.UCCPRaiseHandResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_LOWER_HAND_RESPONSE,new e.Providers.UCCP.UCCPModeratorLowerHandResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.ADMISSION_RESPONSE,new e.Providers.UCCP.UCCPAdmissionResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_RESPONSE,new e.Providers.UCCP.UCCPModeratorAdmissionResponseParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_EVENT,new e.Providers.UCCP.UCCPModeratorAdmissionEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_CANCELED_EVENT,new e.Providers.UCCP.UCCPModeratorAdmissionCanceledEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.RECORDING_FAILED_EVENT,new e.Providers.UCCP.UCCPRecordingFailedEventParser),n.register(e.Providers.UCCP.UCCPMessageTypes.WEB_COLLAB_CHANGED_EVENT,new e.Providers.UCCP.UCCPWebCollabChangedEventParser);var r;r=e.Base.Utils.isDefined(i)?i.getUCCPProvider():this._createUccpNetworkProvider();var s=new e.Providers.UCCP.UCCPProviderFactory(r,a,n).getUCCPProvider(),o=new e.Providers.Scopia.ScopiaConferenceBuilder;return new e.Providers.Scopia.ScopiaConferenceProvider(s,o)}},getScopiaCallProvider:function(t){if(e.Base.Utils.isDefined(t)&&t.enabled){var i=new e.Providers.RTC.UserMediaProvider,a=new e.Providers.RTC.SDPParser,n=new e.Providers.RTC.RTCPeerConnectionProvider(a),r=this._initializeIntegrationProvider(),s=this.getScopiaConferenceProvider(t,r),o=new e.Providers.WSP.WSPMessageBuilder,c=new e.Providers.WSP.WSPProvider(r.getWSPProvider(),o);return new e.Providers.Scopia.ScopiaCallProvider(c,i,n,s,t)}},_initializeIntegrationProvider:function(){var t=new e.Base.TransactionalWebSocketProvider,i=new e.Base.NetworkProvider(t),a=new e.Providers.Scopia.UCCPWSPIntegrationProvider(i);return a.initialize(),a},_createUccpNetworkProvider:function(){var t=new e.Base.TransactionalWebSocketProvider;return new e.Base.NetworkProvider(t)}},e.Providers.Scopia.ScopiaConferenceProviderFactory=t}(AvayaClientServices),function(e){"use strict";function t(e){this._networkProvider=e,this._dummyUCCPProvider=void 0,this._dummyWSPProvider=void 0}t.prototype={initialize:function(){this._dummyUCCPProvider=new e.Base.AbstractNetworkProvider,this._dummyWSPProvider=new e.Base.AbstractNetworkProvider,this._setupPassThrough(),this._setupCallbacks()},_setupPassThrough:function(){this._dummyUCCPProvider.send=function(e,t){return this._networkProvider.send(e,t)}.bind(this),this._dummyWSPProvider.send=function(e,t){return this._networkProvider.send(e,t)}.bind(this),this._dummyUCCPProvider.start=function(e,t,i){return this._networkProvider.start(e,t,i)}.bind(this),this._dummyWSPProvider.start=function(e,t,i){return this._networkProvider.start(e,t,i)}.bind(this),this._dummyUCCPProvider.close=function(){return this._networkProvider.close()}.bind(this),this._dummyWSPProvider.close=function(){return this._networkProvider.close()}.bind(this)},_setupCallbacks:function(){this._networkProvider.onMessage=function(e){var t=JSON.parse(e.data);"UCCP"===t.protocolType?this._dummyUCCPProvider.onMessage(t):"WSP"===t.protocolType&&this._dummyWSPProvider.onMessage(t)}.bind(this),this._networkProvider.onOpen=function(){this._dummyWSPProvider.onOpen(),this._dummyUCCPProvider.onOpen()}.bind(this),this._networkProvider.onClose=function(){this._dummyWSPProvider.onClose(),this._dummyUCCPProvider.onClose()}.bind(this),this._networkProvider._onCredentialsRequired=function(e){if(e.message){var t=JSON.parse(e.message);"UCCP"===t.protocolType?this._dummyUCCPProvider._onCredentialsRequired(e):"WSP"===t.protocolType&&this._dummyWSPProvider._onCredentialsRequired(e)}else this._dummyWSPProvider._onCredentialsRequired(e),this._dummyUCCPProvider._onCredentialsRequired(e)}.bind(this),this._networkProvider.onError=function(e){this._dummyWSPProvider.onError(e),this._dummyUCCPProvider.onError(e)}.bind(this)},getUCCPProvider:function(){return this._dummyUCCPProvider},getWSPProvider:function(){return this._dummyWSPProvider}},e.Providers.Scopia.UCCPWSPIntegrationProvider=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i,a){e.Providers.Interfaces.ConferenceDataProvider.call(this),this._networkProvider=t,this._config=void 0,this._messageBuilder=i,this._messageParser=a,this._isStarted=!1}i.prototype=Object.create(e.Providers.Interfaces.ConferenceDataProvider.prototype),i.prototype.start=function(e){var i=t.Deferred();return this._config=e,this._isStarted=!0,i.resolve(),i.promise()},i.prototype.onCredentialsRequired=function(e){this._config.credentialProvider.onAuthenticationChallenge(void 0,function(t){this.onCredentialsRetrieved(t,e)}.bind(this))},i.prototype.onCredentialsRetrieved=function(e,t){if(t.options=t.options||{},!t.options.alreadyApplied){if(t.message){var i=JSON.parse(t.message);void 0!==i.params.token&&(i.params.token=e.token),t.message=JSON.stringify(i)}else{var a=t.options.urlSuffix.indexOf("?ticket=");a>0?t.options.urlSuffix=t.options.urlSuffix.slice(0,a):0===a&&(t.options.urlSuffix=""),t.options.urlSuffix+="?ticket="+e.token}t.options.alreadyApplied=!0}},i.prototype.sendHandshake=function(e){var t=this._messageBuilder.buildHandshakeRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeMeetingInfo=function(e){var t=this._messageBuilder.buildSubscribeMeetingInfoRequest(e);return this._sendMessage(t,"success")},i.prototype.startRecording=function(t,i,a){var n=this._messageBuilder.buildSetRecordingRequest(t,e.Services.Conference.RecordingOperation.START,i,a);return this._sendMessage(n,"success")},i.prototype.stopRecording=function(t){var i=this._messageBuilder.buildSetRecordingRequest(t,e.Services.Conference.RecordingOperation.STOP);return this._sendMessage(i,"success")},i.prototype.pauseRecording=function(t){var i=this._messageBuilder.buildSetRecordingRequest(t,e.Services.Conference.RecordingOperation.PAUSE);return this._sendMessage(i,"success")},i.prototype.resumeRecording=function(t){var i=this._messageBuilder.buildSetRecordingRequest(t,e.Services.Conference.RecordingOperation.RESUME);return this._sendMessage(i,"success")},i.prototype.subscribeRoster=function(e){var t=this._messageBuilder.buildSubscribeRosterRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeActiveTalker=function(e){var t=this._messageBuilder.buildSubscribeActiveTalkerRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribePermissions=function(e){var t=this._messageBuilder.buildSubscribePermissionsRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeSlider=function(e){var t=this._messageBuilder.buildSubscribeSliderRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeMeetingNote=function(e){var t=this._messageBuilder.buildSubscribeMeetingNoteRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeWebCollab=function(e){var t=this._messageBuilder.buildSubscribeWebCollabRequest(e);return this._sendMessage(t,"success")},i.prototype.subscribeAvailableLayouts=function(e){var t=this._messageBuilder.buildSubscribeAvailableLayoutsRequest(e);return this._sendMessage(t,"success")},i.prototype.setAsLecturer=function(e,t){var i=this._messageBuilder.buildSetAsLecturerRequest(e,t);return this._sendMessage(i,"success")},i.prototype.unsetAsLecturer=function(e){var t=this._messageBuilder.buildUnsetAsLecturerRequest(e);return this._sendMessage(t,"success")},i.prototype.disconnectParticipant=function(e,t){var i=this._messageBuilder.buildDisconnectParticipantRequest(e,t._participantId);return this._sendMessage(i,"success")},i.prototype.setLocked=function(e,t){var i=this._messageBuilder.buildLockMeetingRequest(e,t);return this._sendMessage(i,"success")},i.prototype.muteUnmute=function(e,t,i,a){var n=this._messageBuilder.buildModeratorMuteRequest(e,t,i,a);return this._sendMessage(n,"success")},i.prototype.muteUnmuteAll=function(e,t){var i=this._messageBuilder.buildMuteAllRequest(e,t);return this._sendMessage(i,"success")},i.prototype.sendLocalMuteEvent=function(e,t,i){var a=this._messageBuilder.buildLocalMuteEvent(e,t,i);return this._networkProvider.send(JSON.stringify(a))},i.prototype.terminateConference=function(e){var t=this._messageBuilder.buildTerminateMeetingRequest(e);return this._sendMessage(t,"success")},i.prototype.requestToBecomeModerator=function(e,t){var i=this._messageBuilder.buildStartModerationRequest(e,t);return this._sendMessage(i,"success")},i.prototype.sendChatMessage=function(e,t,i){var a=this._messageBuilder.buildSendChatMessage(e,t,i);return this._sendMessage(a,"success")},i.prototype.setContinuation=function(e,t){var i=this._messageBuilder.buildExtendMeetingRequest(e,t);return this._sendMessage(i,"success")},i.prototype.setVideoLayout=function(e,t){var i=this._messageBuilder.buildChangeLayoutGeometryRequest(e,t);return this._sendMessage(i,"success")},i.prototype.setVideoLayoutSelfSee=function(e,t){var i=this._messageBuilder.buildChangeLayoutSelfSeeRequest(e,t);return this._sendMessage(i,"success")},i.prototype.setVideoLayoutTextOverlay=function(e,t){var i=this._messageBuilder.buildChangeLayoutTextOverlayRequest(e,t);return this._sendMessage(i,"success")},i.prototype.getCurrentVideoLayout=function(e){var t=this._messageBuilder.buildCurrentLayoutRequest(e);return this._sendMessage(t,"success")},i.prototype.raiseLowerHand=function(e,t){var i=this._messageBuilder.buildRaiseHandRequest(e,t);return this._sendMessage(i,"success")},i.prototype.moderatorLowerHand=function(e,t,i){var a=this._messageBuilder.buildModeratorLowerHandRequest(e,t,i);return this._sendMessage(a,"success")},i.prototype.moderatorAdmission=function(e,t,i){var a=this._messageBuilder.buildModeratorAdmissionRequest(e,t,i);return this._sendMessage(a,"success")},i.prototype.sendAdmissionRequest=function(i,a){var n=t.Deferred(),r=this._messageBuilder.buildAdmissionRequest(i,a);return this._sendMessage(r,[e.Services.Conference.AdmissionResponseCode.SUCCESS,e.Services.Conference.AdmissionResponseCode.INCORRECT_PASSCODE_TRY_AGAIN,e.Services.Conference.AdmissionResponseCode.PENDING_APPROVAL,e.Services.Conference.AdmissionResponseCode.INCORRECT_PASSCODE_DISCONNECTING,e.Services.Conference.AdmissionResponseCode.REJECTED]).then(function(e){this._resolveAdmissionResponse(n,e)}.bind(this),function(e){n.reject(e)}),this.on(e.Providers.UCCP.UCCPMessageTypes.ADMISSION_RESPONSE,function(e){this._resolveAdmissionResponse(n,e)}.bind(this)),n.promise()},i.prototype._resolveAdmissionResponse=function(t,i){switch(i.responseCode){case e.Services.Conference.AdmissionResponseCode.SUCCESS:case e.Services.Conference.AdmissionResponseCode.INCORRECT_PASSCODE_TRY_AGAIN:t.resolve(i);break;case e.Services.Conference.AdmissionResponseCode.INCORRECT_PASSCODE_DISCONNECTING:case e.Services.Conference.AdmissionResponseCode.REJECTED:t.reject({name:"UCCPServerError",code:i.responseCode,message:"UCCP server responded with "+i.responseCode});break;case e.Services.Conference.AdmissionResponseCode.PENDING_APPROVAL:}},i.prototype._sendMessage=function(e,i){var a=t.Deferred();return this._networkProvider.send(JSON.stringify(e)).then(function(e){this._resolveResponse(a,e,i)}.bind(this),function(e){a.reject(e)}),a.promise()},i.prototype._resolveResponse=function(e,t,i){var a;try{a=this._messageParser.parse(t)}catch(t){return void e.reject(t)}if(a&&a.responseCode&&(i.indexOf?i.indexOf(a.responseCode)>-1:a.responseCode===i))e.resolve(a);else{var n=400;t&&t.params&&t.params.responseCode&&(n=t.params.responseCode),e.reject({name:"UCCPServerError",code:n,message:"UCCP server responded with "+n})}},e.Providers.UCCP.AbstractUCCPProvider=i}(AvayaClientServices,jQuery),function(e){"use strict";AvayaClientServices.Providers.UCCP.UCCPMessage=function(e){this.protocolType="UCCP",this.name=e}}(),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_CANCELED_EVENT),this.participantId=t,this.reason=i,this.anotherModerator=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPModeratorAdmissionCanceledEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_EVENT),this.participantId=t,this.participantName=i,this.userId=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPModeratorAdmissionEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_RESPONSE),this.transId=t,this.responseCode=i,this.anotherModerator=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPModeratorAdmissionResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MODERATOR_LOWER_HAND_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPModeratorLowerHandResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MODERATOR_MUTE_RESPONSE),this.transId=t,this.responseCode=i,this.audioMute=a,this.videoMute=n}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPModeratorMuteResponse=t}(AvayaClientServices),function(e){"use strict";e.Providers.UCCP.UCCPMuteAllResponse=function(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.MUTE_ALL_RESPONSE),this.transId=t,this.responseCode=i}}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o,c,l,d,u,C){e.Providers.UCCP.UCCPMessage.call(this,"participantInfoChangedEvent"),this.participantId=i,this.participantName=t,this.status=a,this.handRaised=n,this.role=r,this.feccRecvSupport=s,this.audioFromParticipant=o,this.audioToParticipant=c,this.videoFromParticipant=l,this.videoToParticipant=d,this.contentFromParticipant=u,this.contentToParticipant=C}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPParticipantInfoChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o,c,l,d,u,C,p,h,v){e.Providers.UCCP.UCCPMessage.call(this,"participantJoinedEvent"),this.participantId=t,this.participantName=i,this.userId=a,this.sourceID=n,this.status=r,this.handRaised=s,this.role=o,this.feccRecvSupport=c,this.audioFromParticipant=l,this.audioToParticipant=d,this.videoFromParticipant=u,this.videoToParticipant=C,this.contentFromParticipant=p,this.contentToParticipant=h,this.joinTime=v}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPParticipantJoinedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.UCCP.UCCPMessage.call(this,"participantLeftEvent"),this.participantId=t}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPParticipantLeftEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.PERMISSIONS_CHANGED_EVENT),this.dialout=t,this.recording=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPPermissionsChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.RAISE_HAND_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPRaiseHandResponse=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.UCCP.UCCPMessage.call(this,"recordingFailedEvent")}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPRecordingFailedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,"recordingResponse"),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPRecordingResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.START_MODERATION_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPStartModerationResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,"subscribeActiveTalkerResponse"),this.transId=t,this.responseCode=i,this.participantId=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeActiveTalkerResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_AVAILABLE_LAYOUTS_RESPONSE),this.transId=t,this.responseCode=i,this.textOverlay=a,this.noSelfSee=n,this.geometries=r}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeAvailableLayoutsResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o,c,l,d,u,C,p,h,v,S,f,g,_,y){e.Providers.UCCP.UCCPMessage.call(this,"subscribeMeetingInfoResponse"),this.transId=t,this.responseCode=i,this.meetingId=a,this.meetingName=n,this.virtualRoomName=r,this.virtualRoomOwnerId=s,this.media=o,this.locked=c,this.mediaStatus=l,this.lecturerId=d,this.lecturerName=u,this.presenterId=C,this.presenterName=p,this.recording=h,this.streaming=v,this.encrypted=S,this.moderatorPinNeeded=f,this.slidesAvailable=g,this.recorderAvailable=_,this.terminationTime=y}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeMeetingInfoResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,"subscribeMeetingNoteResponse"),this.transId=t,this.responseCode=i,this.notes=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeMeetingNoteResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_PERMISSIONS_RESPONSE),this.transId=t,this.responseCode=i,this.dialout=a,this.recording=n}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribePermissionsResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n){e.Providers.UCCP.UCCPMessage.call(this,"subscribeRosterResponse"),this.transId=t,this.responseCode=i,this.fragmentation=a,this.participants=n}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeRosterResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,"subscribeSliderResponse"),this.transId=t,this.responseCode=i,this.slides=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeSliderResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,"subscribeWebCollabResponse"),this.transId=t,this.responseCode=i,this.webCollabUrl=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPSubscribeWebCollabResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,"terminateMeetingResponse"),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPTerminateMeetingResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.VIDEO_PIN_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPVideoPinResponse=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.WEB_COLLAB_CHANGED_EVENT),this.webCollabUrl=t}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPWebCollabChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPActiveTalkerChangedEvent(t.params.participantId)}},e.Providers.UCCP.UCCPActiveTalkerChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPAdmissionResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPAdmissionResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPAvailableLayoutsChangedEvent(t.params.textOverlay?"true"===t.params.textOverlay:void 0,t.params.noSelfSee?"true"===t.params.noSelfSee:void 0,t.params.geometries)}},e.Providers.UCCP.UCCPAvailableLayoutsChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPChangeLayoutGeometryResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPChangeLayoutGeometryResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPChangeLayoutSelfSeeResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPChangeLayoutSelfSeeResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPChangeLayoutTextOverlayResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPChangeLayoutTextOverlayResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPChatEvent(t.params.participantId,t.params.type,t.params.text)}},e.Providers.UCCP.UCCPChatEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPChatResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPChatResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPCurrentLayoutChangedEvent(t.params.textOverlay?"true"===t.params.textOverlay:void 0,t.params.noSelfSee?"true"===t.params.noSelfSee:void 0,t.params.geometry)}},e.Providers.UCCP.UCCPCurrentLayoutChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPCurrentLayoutResponse(t.params.transId,t.params.responseCode,"true"===t.params.textOverlay,"true"===t.params.noSelfSee,t.params.geometry)}},e.Providers.UCCP.UCCPCurrentLayoutResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPDisconnectParticipantResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPDisconnectParticipantResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(e){return new AvayaClientServices.Providers.UCCP.UCCPExtendMeetingResponse(e.params.transId,e.params.responseCode)}},e.Providers.UCCP.UCCPExtendMeetingResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPHandshakeResponse(t.params.transId,t.params.responseCode,t.params.version,t.params.participantId,"true"===t.params.admissionPasscodeNeeded,"true"===t.params.admissionPermissionNeeded,t.params.commands)}},e.Providers.UCCP.UCCPHandshakeResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPLectureModeStartResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPLectureModeStartResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPLectureModeStopResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPLectureModeStopResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPLockMeetingResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPLockMeetingResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i=t.params.terminationTime?new Date(Date.parse(t.params.terminationTime)):void 0,a=t.params.locked?"true"===t.params.locked:void 0;return new e.Providers.UCCP.UCCPMeetingInfoChangedEvent(t.params.media,a,t.params.mediaStatus,t.params.lecturerId,t.params.lecturerName,t.params.presenterId,t.params.presenterName,t.params.recording,t.params.streaming?"enabled"===t.params.streaming:void 0,t.params.encrypted,"true"===t.params.slidesAvailable,i)}},e.Providers.UCCP.UCCPMeetingInfoChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPMeetingTerminationInProgressEvent(t.params.reason,t.params.userName)}},e.Providers.UCCP.UCCPMeetingTerminationInProgressEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPModeratorAdmissionCanceledEvent(t.params.participantId,t.params.reason,t.params.anotherModerator)}},e.Providers.UCCP.UCCPModeratorAdmissionCanceledEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPModeratorAdmissionEvent(t.params.participantId,t.params.name,t.params.userId)}},e.Providers.UCCP.UCCPModeratorAdmissionEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPModeratorAdmissionResponse(t.params.transId,t.params.responseCode,t.params.anotherModerator)}},e.Providers.UCCP.UCCPModeratorAdmissionResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPModeratorLowerHandResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPModeratorLowerHandResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPModeratorMuteResponse(t.params.transId,t.params.responseCode,"true"===t.params.audioMute,"true"===t.params.videoMute)}},e.Providers.UCCP.UCCPModeratorMuteResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPMuteAllResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPMuteAllResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i,a;return e.Base.Utils.isDefined(t.params.handRaised)&&(i="true"===t.params.handRaised),e.Base.Utils.isDefined(t.params.feccRecvSupport)&&(a="true"===t.params.feccRecvSupport),new e.Providers.UCCP.UCCPParticipantInfoChangedEvent(t.params.name,t.params.participantId,t.params.status,i,t.params.role,a,t.params.audioFromParticipant,t.params.audioToParticipant,t.params.videoFromParticipant,t.params.videoToParticipant,t.params.contentFromParticipant,t.params.contentToParticipant)}},e.Providers.UCCP.UCCPParticipantInfoChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPParticipantJoinedEvent(t.params.participantId,t.params.name,t.params.userId,t.params.sourceID,t.params.status,"true"===t.params.handRaised,t.params.role,"true"===t.params.feccRecvSupport,t.params.audioFromParticipant,t.params.audioToParticipant,t.params.videoFromParticipant,t.params.videoToParticipant,t.params.contentFromParticipant,t.params.contentToParticipant,new Date(Date.parse(t.params.joinTime)))}},e.Providers.UCCP.UCCPParticipantJoinedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPParticipantLeftEvent(t.params.participantId)}},e.Providers.UCCP.UCCPParticipantLeftEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPPermissionsChangedEvent(t.params.dialout,t.params.recording)}},e.Providers.UCCP.UCCPPermissionsChangedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPRaiseHandResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPRaiseHandResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPRecordingFailedEvent}},e.Providers.UCCP.UCCPRecordingFailedEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPRecordingResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPRecordingResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPStartModerationResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPStartModerationResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPSubscribeActiveTalkerResponse(t.params.transId,t.params.responseCode,t.params.participantId)}},e.Providers.UCCP.UCCPSubscribeActiveTalkerResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPSubscribeAvailableLayoutsResponse(t.params.transId,t.params.responseCode,"true"===t.params.textOverlay,"true"===t.params.noSelfSee,t.params.geometries)}},e.Providers.UCCP.UCCPSubscribeAvailableLayoutsResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i=new Date(Date.parse(t.params.terminationTime));return new e.Providers.UCCP.UCCPSubscribeMeetingInfoResponse(t.params.transId,t.params.responseCode,t.params.meetingId,t.params.meetingName,t.params.virtualRoomName,t.params.virtualRoomOwnerId,t.params.media,"true"===t.params.locked,t.params.mediaStatus,t.params.lecturerId,t.params.lecturerName,t.params.presenterId,t.params.presenterName,t.params.recording,"enabled"===t.params.streaming,t.params.encrypted,"true"===t.params.moderatorPinNeeded,"true"===t.params.slidesAvailable,t.params.recorderAvailable,i)}},e.Providers.UCCP.UCCPSubscribeMeetingInfoResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i=t.params.notes.map(function(e){return{participantId:e.participantId,participantDisplayName:e.participantDisplayName,noteId:e.noteId,text:e.text,time:new Date(Date.parse(e.time))}});return new e.Providers.UCCP.UCCPSubscribeMeetingNoteResponse(t.params.transId,t.params.responseCode,i)}},e.Providers.UCCP.UCCPSubscribeMeetingNoteResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPSubscribePermissionsResponse(t.params.transId,t.params.responseCode,t.params.dialout,t.params.recording)}},e.Providers.UCCP.UCCPSubscribePermissionsResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){var i=t.params.participants.map(function(e){return this._buildActiveParticipant(e)}.bind(this));return new e.Providers.UCCP.UCCPSubscribeRosterResponse(t.params.transId,t.params.responseCode,t.params.fragmentation,i)},_buildActiveParticipant:function(e){var t={};if(t.participantId=e.participantId,t.participantName=e.name,t.userId=e.userId,e.joinTime){var i=new RegExp(/(\d{2}:\d{2}:\d{2})\s(\d{2})-(\d{2})-(\d{4})\s(-?\+?\d{4})/g).exec(e.joinTime),a=i[4]+"-"+i[3]+"-"+i[2]+" "+i[1]+" GMT"+i[5];t.joinTime=new Date(Date.parse(a))}return t.sourceID=e.sourceID,t.status=e.status,t.handRaised="true"===e.handRaised,t.role=e.role,t.feccRecvSupport="true"===e.feccRecvSupport,t.audioFromParticipant=e.audioFromParticipant,t.audioToParticipant=e.audioToParticipant,t.videoFromParticipant=e.videoFromParticipant,t.videoToParticipant=e.videoToParticipant,t.contentFromParticipant=e.contentFromParticipant,t.contentToParticipant=e.contentToParticipant,t}},e.Providers.UCCP.UCCPSubscribeRosterResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPSubscribeSliderResponse(t.params.transId,t.params.responseCode,t.params.slides)}},e.Providers.UCCP.UCCPSubscribeSliderResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPSubscribeWebCollabResponse(t.params.transId,t.params.responseCode,t.params.webCollabUrl)}},e.Providers.UCCP.UCCPSubscribeWebCollabResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPTerminateMeetingResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPTerminateMeetingResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPVideoPinResponse(t.params.transId,t.params.responseCode)}},e.Providers.UCCP.UCCPVideoPinResponseParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(t){return new e.Providers.UCCP.UCCPWebCollabChangedEvent(t.params.webCollabUrl)}},e.Providers.UCCP.UCCPWebCollabChangedEventParser=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i,a){e.Providers.UCCP.AbstractUCCPProvider.call(this),this._networkProvider=t,this._config=void 0,this._messageBuilder=i,this._messageParser=a}i.prototype=Object.create(e.Providers.UCCP.AbstractUCCPProvider.prototype),i.prototype.start=function(i){this._config=i;var a=t.Deferred();return this._networkProvider._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._networkProvider.onOpen=function(){this._networkProvider.onClose=function(){a.reject()},this._networkProvider.isOpened()?a.resolve():this._waitForSocketConnection(this._networkProvider,function(){a.resolve()}.bind(this),function(e){a.reject("Failed to open")}.bind(this))}.bind(this),this._networkProvider.onClose=function(){a.reject()},this._networkProvider.onMessage=function(t){var i=this._messageParser.parse(t);i instanceof e.Providers.UCCP.UCCPMessage&&(e.Base.Logger.debug("UCCP: Received message "+i.name),this.trigger(i.name,[i]))}.bind(this),this._networkProvider.start(i.serverInfo,i.credentialProvider,{urlSuffix:"/uwd/ws",transactionIDLocation:"params.transId"}),a.promise()},i.prototype._waitForSocketConnection=function(e,t,i){var a=function(n){10>n?setTimeout(function(){e.isOpened()?t():a(n+1)}.bind(this),100):i("Max retry reached")};a(0)},i.prototype.stop=function(){this._removeListeners();var e=t.Deferred();return this._networkProvider.onClose=function(){e.resolve()},this._networkProvider.onError=function(t){e.reject(t)},this._networkProvider.close(),e.promise()},e.Providers.UCCP.UCCP1Provider=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){}t.prototype={buildHandshakeRequest:function(t){var i={transId:t.toString(),version:"1.0",features:[{featureName:"passcode",version:"1.0"},{featureName:"knockOnTheDoorParticipant",version:"1.0"},{featureName:"knockOnTheDoorModerator",version:"1.0"}]};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.HANDSHAKE_REQUEST,i)},buildSubscribeMeetingInfoRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_MEETING_INFO_REQUEST,i)},buildSubscribeSliderRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_SLIDER_REQUEST,i)},buildSubscribeActiveTalkerRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_ACTIVE_TALKER_REQUEST,i)},buildSubscribePermissionsRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_PERMISSIONS_REQUEST,i)},buildSubscribeMeetingNoteRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_MEETING_NOTE_REQUEST,i)},buildSubscribeRosterRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_ROSTER_REQUEST,i)},buildSubscribeWebCollabRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_WEB_COLLAB_REQUEST,i)},buildSubscribeAvailableLayoutsRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.SUBSCRIBE_AVAILABLE_LAYOUTS_REQUEST,i)},buildSetAsLecturerRequest:function(t,i){var a={transId:t.toString(),participantId:i};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_START_REQUEST,a)},buildUnsetAsLecturerRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_STOP_REQUEST,i)},buildMuteAllRequest:function(t,i){var a={transId:t.toString(),audioMute:i.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.MUTE_ALL_REQUEST,a)},buildModeratorMuteRequest:function(t,i,a,n){var r={transId:t.toString(),participantId:i,mediaType:a,mute:n.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_MUTE_REQUEST,r)},buildDisconnectParticipantRequest:function(t,i){var a={transId:t.toString(),participantId:i};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.DISCONNECT_PARTICIPANT_REQUEST,a)},buildLocalMuteEvent:function(t,i,a){var n={transId:t.toString(),participantId:i,audioMute:a.toString(),videoMute:"false"};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.LOCAL_MUTE_EVENT,n)},buildTerminateMeetingRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.TERMINATE_MEETING_REQUEST,i)},buildStartModerationRequest:function(t,i){var a={transId:t.toString()};return e.Base.Utils.isDefined(i)&&(a.pin=i),this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.START_MODERATION_REQUEST,a)},buildSendChatMessage:function(t,i,a){var n={transId:t.toString(),text:i.toString(),participantId:a||"public"};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.CHAT_REQUEST,n)},buildExtendMeetingRequest:function(t,i){var a={transId:t.toString(),additionalTimeInMinutes:i.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.EXTEND_MEETING_REQUEST,a)},buildLockMeetingRequest:function(t,i){var a={transId:t.toString(),lock:i.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.LOCK_MEETING_REQUEST,a)},buildCurrentLayoutRequest:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_REQUEST,i)},buildChangeLayoutGeometryRequest:function(t,i){var a={transId:t.toString(),geometry:i};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_GEOMETRY_REQUEST,a)},buildChangeLayoutTextOverlayRequest:function(t,i){var a={transId:t.toString(),textOverlay:i.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_OVERLAY_REQUEST,a)},buildChangeLayoutSelfSeeRequest:function(t,i){var a={transId:t.toString(),enableSelfSee:i.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_SELF_SEE_REQUEST,a)},buildSetRecordingRequest:function(t,i,a,n){var r={transId:t.toString(),recording:i};return e.Base.Utils.isDefined(a)&&(r.name=a),e.Base.Utils.isDefined(n)&&(r.description=n),this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.RECORDING_REQUEST,r)},buildVideoPinRequest:function(t,i,a,n,r,s){var o={transId:t.toString(),destXCord:r.toString(),destYCord:s.toString()};return e.Base.Utils.isDefined(i)?o.sourceParticipantId=i.toString():e.Base.Utils.isDefined(a)&&e.Base.Utils.isDefined(n)&&(o.sourceXCord=a.toString(),o.sourceYCord=n.toString()),this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.VIDEO_PIN_REQUEST,o)},buildRaiseHandRequest:function(t,i){var a={transId:t.toString(),action:i};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.RAISE_HAND_REQUEST,a)},buildModeratorLowerHandRequest:function(t,i,a){var n={transId:t.toString(),participantId:i.toString(),unmuteAudio:a.toString()};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_LOWER_HAND_REQUEST,n)},buildAdmissionRequest:function(t,i){var a={transId:t.toString()};return e.Base.Utils.isDefined(i)&&(a.passcode=i),this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.ADMISSION_REQUEST,a)},buildModeratorAdmissionRequest:function(t,i,a){var n={transId:t.toString(),participantId:i,action:a};return this._wrapParams(e.Providers.UCCP.UCCPMessageTypes.MODERATOR_ADMISSION_REQUEST,n)},_wrapParams:function(e,t){return{protocolType:"UCCP",name:e,params:t}}},e.Providers.UCCP.UCCPMessageBuilder=t}(AvayaClientServices),function(e){"use strict";function t(){this._parsers={}}t.prototype={parse:function(e){return this._parsers[e.name]?this._parsers[e.name].parse(e):e},register:function(e,t){this._parsers[e]=t}},e.Providers.UCCP.UCCPMessageParser=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.UCCP.UCCPMessageTypes={HANDSHAKE_REQUEST:"handshakeRequest",HANDSHAKE_RESPONSE:"handshakeResponse",SUBSCRIBE_MEETING_INFO_REQUEST:"subscribeMeetingInfoRequest",SUBSCRIBE_MEETING_INFO_RESPONSE:"subscribeMeetingInfoResponse",SUBSCRIBE_ROSTER_REQUEST:"subscribeRosterRequest",SUBSCRIBE_ROSTER_RESPONSE:"subscribeRosterResponse",SUBSCRIBE_ACTIVE_TALKER_REQUEST:"subscribeActiveTalkerRequest",SUBSCRIBE_ACTIVE_TALKER_RESPONSE:"subscribeActiveTalkerResponse",SUBSCRIBE_PERMISSIONS_REQUEST:"subscribePermissionsRequest",SUBSCRIBE_PERMISSIONS_RESPONSE:"subscribePermissionsResponse",SUBSCRIBE_SLIDER_REQUEST:"subscribeSliderRequest",SUBSCRIBE_SLIDER_RESPONSE:"subscribeSliderResponse",SUBSCRIBE_MEETING_NOTE_REQUEST:"subscribeMeetingNoteRequest",SUBSCRIBE_MEETING_NOTE_RESPONSE:"subscribeMeetingNoteResponse",SUBSCRIBE_WEB_COLLAB_REQUEST:"subscribeWebCollabRequest",SUBSCRIBE_WEB_COLLAB_RESPONSE:"subscribeWebCollabResponse",SUBSCRIBE_AVAILABLE_LAYOUTS_REQUEST:"subscribeAvailableLayoutsRequest",SUBSCRIBE_AVAILABLE_LAYOUTS_RESPONSE:"subscribeAvailableLayoutsResponse",START_MODERATION_REQUEST:"startModerationRequest",START_MODERATION_RESPONSE:"startModerationResponse",TERMINATE_MEETING_REQUEST:"terminateMeetingRequest",TERMINATE_MEETING_RESPONSE:"terminateMeetingResponse",DIRECTORY_LOOKUP_REQUEST:"directoryLookupRequest",DIRECTORY_LOOKUP_NOTE_RESPONSE:"directoryLookupResponse",DIALOUT_REQUEST:"dialoutRequest",DIALOUT_RESPONSE:"dialoutResponse",DIALOUT_CANCEL_REQUEST:"dialoutCancelRequest",DIALOUT_CANCEL_RESPONSE:"dialoutCancelResponse",DISCONNECT_PARTICIPANT_REQUEST:"disconnectParticipantRequest",DISCONNECT_PARTICIPANT_RESPONSE:"disconnectParticipantResponse",LECTURE_MODE_START_REQUEST:"lectureModeStartRequest",LECTURE_MODE_START_RESPONSE:"lectureModeStartResponse",LECTURE_MODE_STOP_REQUEST:"lectureModeStopRequest",LECTURE_MODE_STOP_RESPONSE:"lectureModeStopResponse",RECORDING_REQUEST:"recordingRequest",RECORDING_RESPONSE:"recordingResponse",LOCK_MEETING_REQUEST:"lockMeetingRequest",LOCK_MEETING_RESPONSE:"lockMeetingResponse",EXTEND_MEETING_REQUEST:"extendMeetingRequest",EXTEND_MEETING_RESPONSE:"extendMeetingResponse",MUTE_ALL_REQUEST:"muteAllRequest",MUTE_ALL_RESPONSE:"muteAllResponse",MODERATOR_MUTE_REQUEST:"moderatorMuteRequest",MODERATOR_MUTE_RESPONSE:"moderatorMuteResponse",RAISE_HAND_REQUEST:"raiseHandRequest",RAISE_HAND_RESPONSE:"raiseHandResponse",MODERATOR_LOWER_HAND_REQUEST:"moderatorLowerHandRequest",MODERATOR_LOWER_HAND_RESPONSE:"moderatorLowerHandResponse",CURRENT_LAYOUT_REQUEST:"currentLayoutRequest",CURRENT_LAYOUT_RESPONSE:"currentLayoutResponse",CHANGE_LAYOUT_GEOMETRY_REQUEST:"changeLayoutGeometryRequest",CHANGE_LAYOUT_GEOMETRY_RESPONSE:"changeLayoutGeometryResponse",CHANGE_LAYOUT_SELF_SEE_REQUEST:"changeLayoutSelfSeeRequest",CHANGE_LAYOUT_SELF_SEE_RESPONSE:"changeLayoutSelfSeeResponse",VIDEO_PIN_REQUEST:"videoPinRequest",VIDEO_PIN_RESPONSE:"videoPinResponse",FECC_REQUEST:"feccRequest",FECC_RESPONSE:"feccResponse",CHANGE_LAYOUT_OVERLAY_REQUEST:"changeLayoutTextOverlayRequest",CHANGE_LAYOUT_OVERLAY_RESPONSE:"changeLayoutTextOverlayResponse",CHAT_REQUEST:"chatRequest",CHAT_RESPONSE:"chatResponse",ADD_MEETING_NOTE_REQUEST:"addMeetingNoteRequest",ADD_MEETING_NOTE_RESPONSE:"addMeetingNoteResponse",UPDATE_MEETING_NOTE_REQUEST:"updateMeetingNoteRequest",UPDATE_MEETING_NOTE_RESPONSE:"updateMeetingNoteResponse",DELETE_MEETING_NOTE_REQUEST:"deleteMeetingNoteRequest",DELETE_MEETING_NOTE_RESPONSE:"deleteMeetingNoteResponse",LOGGING_REQUEST:"loggingRequest",LOGGING_RESPONSE:"loggingResponse",ADMISSION_REQUEST:"admissionRequest",ADMISSION_RESPONSE:"admissionResponse",MODERATOR_ADMISSION_REQUEST:"moderatorAdmissionRequest",MODERATOR_ADMISSION_RESPONSE:"moderatorAdmissionResponse",MOBILE_LINK_ID_REQUEST:"mobileLinkIdRequest",MOBILE_LINK_ID_RESPONSE:"mobileLinkIdResponse",MOBILE_LINK_ROOM_SYSTEM_LIST_REQUEST:"mobileLinkRoomSystemListRequest",MOBILE_LINK_ROOM_SYSTEM_LIST_RESPONSE:"mobileLinkRoomSystemListResponse",MOBILE_LINK_CHOOSE_ROOM_SYSTEM_REQUEST:"mobileLinkChooseRoomSystemRequest",MOBILE_LINK_CHOOSE_ROOM_SYSTEM_RESPONSE:"mobileLinkChooseRoomSystemResponse",MOBILE_LINK_MANUAL_CHOOSE_ROOM_SYSTEM_REQUEST:"mobileLinkManualChooseRoomSystemRequest",MOBILE_LINK_MANUAL_CHOOSE_ROOM_SYSTEM_RESPONSE:"mobileLinkManualChooseRoomSystemResponse",MOBILE_LINK_DISCONNECT_REQUEST:"mobileLinkDisconnectRequest",MOBILE_LINK_DISCONNECT_RESPONSE:"mobileLinkDisconnectResponse",SIGN_IN_REQUEST:"signinRequest",SIGN_IN_RESPONSE:"signinResponse",DIAL_IN_INFO_REQUEST:"dialInInfoRequest",DIAL_IN_INFO_RESPONSE:"dialInInfoResponse",UNSUBSCRIBE_MEETING_INFO_REQUEST:"unsubscribeMeetingInfoRequest",UNSUBSCRIBE_MEETING_INFO_RESPONSE:"unsubscribeMeetingInfoResponse",UNSUBSCRIBE_ROSTER_REQUEST:"unsubscribeRosterRequest",UNSUBSCRIBE_ROSTER_RESPONSE:"unsubscribeRosterResponse",UNSUBSCRIBE_SLIDER_REQUEST:"unsubscribeSliderRequest",UNSUBSCRIBE_SLIDER_RESPONSE:"unsubscribeSliderResponse",UNSUBSCRIBE_ACTIVE_TALKER_REQUEST:"unsubscribeActiveTalkerRequest",UNSUBSCRIBE_ACTIVE_TALKER_RESPONSE:"unsubscribeActiveTalkerResponse",UNSUBSCRIBE_PERMISSIONS_REQUEST:"unsubscribePermissionsRequest",UNSUBSCRIBE_PERMISSIONS_RESPONSE:"unsubscribePermissionsResponse",UNSUBSCRIBE_MEETING_NOTE_REQUEST:"unsubscribeMeetingNoteRequest",UNSUBSCRIBE_MEETING_NOTE_RESPONSE:"unsubscribeMeetingNoteResponse",UNSUBSCRIBE_WEB_COLLAB_REQUEST:"unsubscribeWebCollabRequest",UNSUBSCRIBE_WEB_COLLAB_RESPONSE:"unsubscribeWebCollabResponse",UNSUBSCRIBE_AVAILABLE_LAYOUTS_REQUEST:"unsubscribeAvailableLayoutsRequest",UNSUBSCRIBE_AVAILABLE_LAYOUTS_RESPONSE:"unsubscribeAvailableLayoutsResponse",PARTICIPANT_JOINED_EVENT:"participantJoinedEvent",PARTICIPANT_LEFT_EVENT:"participantLeftEvent",ACTIVE_TALKER_CHANGED_EVENT:"activeTalkerChangedEvent",PERMISSIONS_CHANGED_EVENT:"permissionsChangedEvent",CHAT_EVENT:"chatEvent",MEETING_NOTE_ADDED_EVENT:"meetingNoteAddedEvent",MEETING_NOTE_UPDATED_EVENT:"meetingNoteUpdatedEvent",MEETING_NOTE_DELETED_EVENT:"meetingNoteDeletedEvent",LOGGING_EVENT:"loggingEvent",MEETING_INFO_CHANGED_EVENT:"meetingInfoChangedEvent",MEETING_TERMINATION_IN_PROGRESS_EVENT:"meetingTerminationInProgressEvent",NEW_SLIDE_EVENT:"newSlideEvent",PARTICIPANT_INFO_CHANGED_EVENT:"participantInfoChangedEvent",USER_MOVED_EVENT:"userMovedEvent",DIALOUT_COMPLETED_EVENT:"dialoutCompletedEvent",LOCAL_MUTE_EVENT:"localMuteEvent",AVAILABLE_LAYOUTS_CHANGED_EVENT:"availableLayoutsChangedEvent",CURRENT_LAYOUT_CHANGED_EVENT:"currentLayoutChangedEvent",RECORDING_FAILED_EVENT:"recordingFailedEvent",MODERATOR_ADMISSION_EVENT:"moderatorAdmissionEvent",MODERATOR_ADMISSION_CANCELED_EVENT:"moderatorAdmissionCanceledEvent",WEB_COLLAB_CHANGED_EVENT:"webCollabChangedEvent"}}(),function(e,t){"use strict";function i(){e.Providers.UCCP.AbstractUCCPProvider.call(this),this._config=void 0,this._providers=[],this._selectedProvider=void 0}i.prototype=Object.create(e.Providers.UCCP.AbstractUCCPProvider.prototype),i.prototype.start=function(e){return t.isEmptyObject(e)||this._config===e||(this._config=e),this._selectedProvider=this._determineServerVersion(),this._selectedProvider.start(e)},i.prototype.stop=function(){return this._selectedProvider.stop()},i.prototype._determineServerVersion=function(){return this._providers[0].provider},i.prototype.getSelectedProvider=function(){return this._selectedProvider},i.prototype.registerUCCPProvider=function(e,t){return this._providers.push({version:e,provider:t})},i.prototype.sendHandshake=function(e){return this._selectedProvider.sendHandshake(e)},i.prototype.subscribeMeetingInfo=function(e){return this._selectedProvider.subscribeMeetingInfo(e)},i.prototype.startRecording=function(e,t,i){return this._selectedProvider.startRecording(e,t,i)},i.prototype.stopRecording=function(e){return this._selectedProvider.stopRecording(e)},i.prototype.pauseRecording=function(e){return this._selectedProvider.pauseRecording(e)},i.prototype.resumeRecording=function(e){return this._selectedProvider.resumeRecording(e)},i.prototype.subscribeRoster=function(e){return this._selectedProvider.subscribeRoster(e)},i.prototype.subscribeActiveTalker=function(e){return this._selectedProvider.subscribeActiveTalker(e)},i.prototype.subscribePermissions=function(e){return this._selectedProvider.subscribePermissions(e)},i.prototype.subscribeSlider=function(e){return this._selectedProvider.subscribeSlider(e)},i.prototype.subscribeMeetingNote=function(e){return this._selectedProvider.subscribeMeetingNote(e)},i.prototype.subscribeWebCollab=function(e){return this._selectedProvider.subscribeWebCollab(e)},i.prototype.subscribeAvailableLayouts=function(e){return this._selectedProvider.subscribeAvailableLayouts(e)},i.prototype.raiseHand=function(e){return this._selectedProvider.raiseHand(e)},i.prototype.setAsLecturer=function(e,t){return this._selectedProvider.setAsLecturer(e,t)},i.prototype.unsetAsLecturer=function(e){return this._selectedProvider.unsetAsLecturer(e)},i.prototype.disconnectParticipant=function(e,t){return this._selectedProvider.disconnectParticipant(e,t)},i.prototype.setLocked=function(e,t){return this._selectedProvider.setLocked(e,t)},i.prototype.setVideoLayout=function(e,t){return this._selectedProvider.setVideoLayout(e,t)},i.prototype.setVideoLayoutSelfSee=function(e,t){return this._selectedProvider.setVideoLayoutSelfSee(e,t)},i.prototype.setVideoLayoutTextOverlay=function(e,t){return this._selectedProvider.setVideoLayoutTextOverlay(e,t)},i.prototype.getCurrentVideoLayout=function(e){return this._selectedProvider.getCurrentVideoLayout(e)},i.prototype.muteUnmute=function(e,t,i,a){return this._selectedProvider.muteUnmute(e,t,i,a)},i.prototype.muteUnmuteAll=function(e,t){return this._selectedProvider.muteUnmuteAll(e,t)},i.prototype.sendLocalMuteEvent=function(e,t,i){return this._selectedProvider.sendLocalMuteEvent(e,t,i)},i.prototype.terminateConference=function(e){return this._selectedProvider.terminateConference(e)},i.prototype.requestToBecomeModerator=function(e,t){return this._selectedProvider.requestToBecomeModerator(e,t)},i.prototype.sendChatMessage=function(e,t,i){return this._selectedProvider.sendChatMessage(e,t,i)},i.prototype.setContinuation=function(e,t){return this._selectedProvider.setContinuation(e,t)},i.prototype.raiseLowerHand=function(e,t){return this._selectedProvider.raiseLowerHand(e,t)},i.prototype.moderatorLowerHand=function(e,t,i){return this._selectedProvider.moderatorLowerHand(e,t,i)},i.prototype.sendAdmissionRequest=function(e,t){return this._selectedProvider.sendAdmissionRequest(e,t)},i.prototype.moderatorAdmission=function(e,t,i){return this._selectedProvider.moderatorAdmission(e,t,i)},e.Providers.UCCP.UCCPProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(e,t,i){this._networkProvider=e,this._messageBuilder=t,this._messageParser=i,this._uccpProvider={}}i.prototype={getUCCPProvider:function(){if(t.isEmptyObject(this._uccpProvider)){var i=this._createUCCP1Provider();this._uccpProvider=new e.Providers.UCCP.UCCPProvider,this._uccpProvider.registerUCCPProvider(1,i)}return this._uccpProvider},_createUCCP1Provider:function(){return new e.Providers.UCCP.UCCP1Provider(this._networkProvider,this._messageBuilder,this._messageParser)}},e.Providers.UCCP.UCCPProviderFactory=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(t,i,a,n){e.Providers.Interfaces.CollaborationProvider.call(this),this._networkProvider=t,this._wcsEventsParser=i,this._wcsBinaryParser=a,this._wcsMessageBuilder=n,this._config={}}t.prototype=Object.create(e.Providers.Interfaces.CollaborationProvider.prototype),t.prototype.onCredentialsRequired=function(e){this._config.credentialProvider.onAuthenticationChallenge(void 0,function(t){this.onCredentialsRetrieved(t,e)}.bind(this))},t.prototype.onCredentialsRetrieved=function(e,t){},t.prototype.addShape=function(e){},t.prototype.addCircle=function(e){},t.prototype.getParticipants=function(){},e.Providers.WCS.AbstractWCSProvider=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={_validateTagLength:function(t,i){var a=0;switch(i){case e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG:a=14;break;case e.Providers.WCS.WCSScreenSharingTagTypes.CURSOR_TAG:a=13;break;case e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG:a=14;break;case e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG:a=1}return t>=a||(e.Base.Logger.warn("Byte array size: {0} < Min Tag length: {1} Tag type: {2}",t,a,i),!1)},_get64bitNumber:function(e){var t=e.readBytes(8);return 4294967296*t.readUnsignedInt()+t.readUnsignedInt()}},e.Providers.WCS.AbstractBinaryParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractBinaryParser.prototype),t.prototype.parse=function(t){if(this._validateTagLength(t.length,e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG)){var i=new e.Providers.WCS.ScreenSharingBlockTag;if(i.width=t.readShort(),i.height=t.readShort(),i.x=t.readShort(),i.y=t.readShort(),i.imageType=t.readByte(),i.length=t.readInt(),i.length===t.getBytesAvailable())i.data=t.readBytes(i.length);else{if(i.length+4!==t.getBytesAvailable())return void e.Base.Logger.error("Invalid type "+e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG+". Tried to read: "+i.length+". BytesAvailable "+t.getBytesAvailable());t.readInt(),i.data=t.readBytes(i.length)}return i}},e.Providers.WCS.BlockTagBinaryParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractBinaryParser.prototype),t.prototype.parse=function(t){if(this._validateTagLength(t.length,e.Providers.WCS.WCSScreenSharingTagTypes.CURSOR_TAG)){var i=new e.Providers.WCS.ScreenSharingCursorTag;return i.x=t.readShort(),i.y=t.readShort(),i.creationTime=this._get64bitNumber(t),i}},e.Providers.WCS.CursorTagBinaryParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractBinaryParser.prototype),t.prototype.parse=function(t){return this._validateTagLength(t.length,e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG)?new e.Providers.WCS.ScreenSharingEndTag:void 0},e.Providers.WCS.EndTagBinaryParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractBinaryParser.prototype),t.prototype.parse=function(t){if(this._validateTagLength(t.length,e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG)){var i=new e.Providers.WCS.ScreenSharingStartTag;return i.isKeyFrame=Boolean(t.readByte()),i.width=t.readShort(),i.height=t.readShort(),i.creationTime=this._get64bitNumber(t),e.Base.Logger.debug("Start Tag [keyframe={0}]: {1}x{2}",i.isKeyFrame,i.width,i.height),i}},e.Providers.WCS.StartTagBinaryParser=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.AbstractEvent=function(e){this.type=e}}(),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractEvent.call(this,t),i&&(this.from=i.from,this.fromname=i.fromname,this.eventId=i.eventId,this.senderId=i.senderId,this.senderName=i.senderName,this.time=i.time,this.useragent=i.useragent,this.wsConnectionId=i.wsConnectionId,this.data={})}t.prototype=Object.create(e.Providers.WCS.AbstractEvent),e.Providers.WCS.AbstractLiveEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.ADD_NOTE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.AddNoteEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n){this.noteType=e,this.text=t,this.meetingOwner=i,this.isPersonal=a,n&&(this.targetId=n)}t.prototype={},e.Providers.WCS.AddNoteEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.ADD_WHITEBOARD),this.liveEventCommonData=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.AddWhiteboardEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.ALLOW_PRESENTING),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.AllowPresentingEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this.targetId=e,this.targetName=t}t.prototype={},e.Providers.WCS.AllowPresentingEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.CLEAR_DRAWING),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.ClearDrawingEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this.groupId=e,this.layerType=t}t.prototype={},e.Providers.WCS.ClearDrawingEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DELETE_NOTE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DeleteNoteEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.noteId=e}t.prototype={},e.Providers.WCS.DeleteNoteEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DELETE_SELECTION),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DeleteSelectionEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n){this.groupId=e,this.layerType=t,this.shapeId=i,this.selectionX=a,this.selectionY=n}t.prototype={},e.Providers.WCS.DeleteSelectionEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DELETE_WHITEBOARD),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DeleteWhiteboardEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.id=e}t.prototype={},e.Providers.WCS.DeleteWhiteboardEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.REQUEST_CONTROL),this.liveEventCommonData=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DenyControlEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DENY_PRESENTING),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DenyPresentingEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this.targetId=e,this.targetName=t}t.prototype={},e.Providers.WCS.DenyPresentingEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DRAW_CIRCLE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DrawCircleEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s,o,c,l,d,u){this.alpha=e,t&&(this.fillColor=t),i&&(this.color=i),d&&(this.filled=d),u&&(this.contour=u),this.groupId=a,this.layerType=n,this.width=r,this.x0=s,this.x1=o,this.y0=c,this.y1=l}t.prototype={},e.Providers.WCS.DrawCircleEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DRAW_SHAPE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DrawShapeEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s,o,c,l){e&&(this.alpha=e),t&&(this.fillColor=t),i&&(this.color=i),a&&(this.groupId=a),n&&(this.layerType=n),(r||0===r)&&(this.width=r),(s||0!==s.length)&&(this.l=s),(o||0!==o.length)&&(this.m=o),l&&(this.contour=l),c&&(this.filled=c)}t.prototype={},e.Providers.WCS.DrawShapeEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.DRAW_TEXT),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.DrawTextEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s){this.fillColor=e,this.fontSize=t,this.groupId=i,this.layerType=a,this.text=n||"",this.x=r,this.y=s}t.prototype={},e.Providers.WCS.DrawTextEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.EJECT_PARTICIPANT),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EjectParticipantEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i){this.targetId=e,this.targetName=t,this.targetParticipantId=i}t.prototype={},e.Providers.WCS.EjectParticipantEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.END_CONTROL),this.liveEventCommonData=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EndControlEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.END_DRAW_SHAPE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EndDrawShapeEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this.groupId=e,this.layerType=t}t.prototype={},e.Providers.WCS.EndDrawShapeEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.END_MEETING),this.liveEventCommonData=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EndMeetingEvent=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.END_SCREEN_SHARING,t)}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EndScreenSharingEvent=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.END_WHITEBOARD),this.liveEventCommonData=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.EndWhiteboardEvent=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.ERROR),this.data=t}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.ErrorEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a){this.code=e,this.message=t,this.requestId=i,this.wsConnectionId=a}t.prototype={},e.Providers.WCS.ErrorEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractEvent.call(this,e.Providers.WCS.WCSEventTypes.FRAME_REPORT),this.data=t}t.prototype=Object.create(e.Providers.WCS.AbstractEvent.prototype),e.Providers.WCS.FrameReportEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r){this.droppedFrames=e,this.droppedFramesPercentageRounded=t,this.period=i,this.successfulFrames=a,this.timeEnd=n,this.timeStart=r}t.prototype={},e.Providers.WCS.FrameReportEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.GRANT_CONTROL),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.GrantControlEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.osType=e}t.prototype={},e.Providers.WCS.GrantControlEventData=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s,o){this.attendeeId=e,this.clientVersion=t,this.privateChatSupported=i,this.startTime=a,this.userAgent=n,this.userIp=r,this.userName=s,this.wsConnectionId=o}t.prototype={},e.Providers.WCS.LiveAttendeeEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractEvent.call(this,e.Providers.WCS.WCSEventTypes.LIVE_ATTENDEES),this.data=t}t.prototype=Object.create(e.Providers.WCS.AbstractEvent.prototype),e.Providers.WCS.LiveAttendeesEvent=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.LiveEventCommonData=function(e,t,i,a,n,r,s,o,c){this.from=e,this.fromname=t,this.eventId=i,this.senderId=a,this.senderName=n,this.time=r,this.type=s,this.useragent=o,this.wsConnectionId=c}}(),function(e){"use strict";function t(t){e.Providers.WCS.AbstractEvent.call(this,e.Providers.WCS.WCSEventTypes.LIVE_SESSION),this.data=t}t.prototype=Object.create(e.Providers.WCS.AbstractEvent.prototype),e.Providers.WCS.LiveSessionEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s){this.requestId=e,this.idleTimeout=t,this.serverTimeDiff=i,this.wsConnectionId=a,this.meeting=n,this.liveAttendee=r,this.features=s}t.prototype={},e.Providers.WCS.LiveSessionEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.MOVE_SELECTION),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.MoveSelectionEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s){this.groupId=e,this.layerType=t,this.shapeId=i,this.moveToX=a,this.moveToY=n,this.selectionX=r,this.selectionY=s}t.prototype={},e.Providers.WCS.MoveSelectionEventData=t}(AvayaClientServices),function(e){"use strict";function t(t){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.PAUSE_SCREEN_SHARING,t)}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.PauseScreenSharingEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.SEND_DOCUMENT),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.SendDocumentEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i){this.filename=e,this.filesize=t,this.fileurl=i}t.prototype={},e.Providers.WCS.SendDocumentEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.SEND_MESSAGE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.SendMessageEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a){this.message=e,this.targetName=t,this.isPrivate=i,a&&(this.targetId=a)}t.prototype={},e.Providers.WCS.SendMessageEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.SEND_SLIDE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.SendSlideEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r,s,o){this.count=e,this.index=t,this.title=i,this.presentationId=a,this.slideUrl=n,this.slideBaseUrl=r,this.tocUrl=s,this.includeToc=o}t.prototype={},e.Providers.WCS.SendSlideEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.SET_NOTE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.SetNoteEvent=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a,n,r){this.noteId=e,this.noteType=t,this.text=i,this.attendeeId=a,this.isPersonal=n,r&&(this.targetId=r)}t.prototype={},e.Providers.WCS.SetNoteEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.START_DRAW_SHAPE),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.StartDrawShapeEvent=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.StartDrawShapeEventData=function(e,t,i,a,n){this.alpha=e,this.color=t,this.groupId=i,this.layerType=a,this.width=n}}(),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.START_MEETING),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.StartMeetingEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.userkey=e}t.prototype={},e.Providers.WCS.StartMeetingEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.START_SCREEN_SHARING,t),this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.StartScreenSharingEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.transportVersion=e}t.prototype={},e.Providers.WCS.StartScreenSharingEventData=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.WCS.AbstractLiveEvent.call(this,e.Providers.WCS.WCSEventTypes.START_WHITEBOARD),this.liveEventCommonData=t,this.data=i}t.prototype=Object.create(e.Providers.WCS.AbstractLiveEvent.prototype),e.Providers.WCS.StartWhiteboardEvent=t}(AvayaClientServices),function(e){"use strict";function t(e){this.id=e}t.prototype={},e.Providers.WCS.StartWhiteboardEventData=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={parse:function(e){throw new Error("Method not implemented!")},colorIntToHex:function(e){return"#"+parseInt(e).toString(16).toUpperCase()},colorHexToInt:function(e){return parseInt("0x".concat(e.slice(1))).toString()},stringToCamel:function(e){return e.replace(/(_[a-z])/g,function(e){return e.toUpperCase().replace("_","")})}},e.Providers.WCS.AbstractParser=t}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractParser.prototype),t.prototype.parse=function(t){var i={};i.droppedFrames=e.Base.Utils.queryJSONObject(t,"dropped_frames[0]._text"),i.droppedFramesPercentageRounded=e.Base.Utils.queryJSONObject(t,"dropped_frames_percentage_rounded[0]._text"),i.period=e.Base.Utils.queryJSONObject(t,"period[0]._text"),i.successfulFrames=e.Base.Utils.queryJSONObject(t,"successful_frames[0]._text"),i.timeEnd=e.Base.Utils.queryJSONObject(t,"time_end[0]._text"),i.timeStart=e.Base.Utils.queryJSONObject(t,"time_start[0]._text");var a=new e.Providers.WCS.FrameReportEventData(i.droppedFrames,i.droppedFramesPercentageRounded,i.period,i.successfulFrames,i.timeEnd,i.timeStart);return new e.Providers.WCS.FrameReportEvent(a)},e.Providers.WCS.FrameReportParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractParser.prototype),t.prototype.parse=function(t){for(var i={liveAttendees:[]},a=0;a<t.live_attendee.length;a++){var n=e.Base.Utils.queryJSONObject(t.live_attendee[a],"attendee_id[0]._text"),r=e.Base.Utils.queryJSONObject(t.live_attendee[a],"client_version[0]._text"),s=e.Base.Utils.queryJSONObject(t.live_attendee[a],"private_chat_supported[0]._text"),o=e.Base.Utils.queryJSONObject(t.live_attendee[a],"start_time[0]._text"),c=e.Base.Utils.queryJSONObject(t.live_attendee[a],"user_agent[0]._text"),l=e.Base.Utils.queryJSONObject(t.live_attendee[a],"user_ip[0]._text"),d=e.Base.Utils.queryJSONObject(t.live_attendee[a],"user_name[0]._text"),u=e.Base.Utils.queryJSONObject(t.live_attendee[a],"ws_connection_id[0]._text");i.liveAttendees.push(new e.Providers.WCS.LiveAttendeeEventData(n,r,s,o,c,l,d,u))}return new e.Providers.WCS.LiveAttendeesEvent(i)},e.Providers.WCS.LiveAttendeesParser=t}(AvayaClientServices),function(e){"use strict";function t(){}var i={whiteboard:"whiteboard_",slide:"slide_"};t.prototype=Object.create(e.Providers.WCS.AbstractParser.prototype),t.prototype.stripCommonData=function(t){var i={};return $.each(t._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),new e.Providers.WCS.LiveEventCommonData(i.from,i.fromname,i.id,i.senderId,i.senderName,i.time,i.type,i.useragent,i.wsConnectionId)},t.prototype.convertGroup=function(e){var t;return $.each(i,function(i,a){return 0===e.indexOf(a)?(t={groupId:parseInt(e.split(a)[1]),layerType:i},!1):void 0}.bind(this)),t||void console.error("Unknown group prefix type!")},e.Providers.WCS.LiveEventParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractParser.prototype),t.prototype.parse=function(t){var i={request_id:e.Base.Utils.queryJSONObject(t,"request_id[0]._text"),idle_timeout:e.Base.Utils.queryJSONObject(t,"idle_timeout[0]._text"),ws_connection_id:e.Base.Utils.queryJSONObject(t,"ws_connection_id[0]._text"),server_time_diff:e.Base.Utils.queryJSONObject(t,"server_time_diff[0]._text")},a={attendeeId:e.Base.Utils.queryJSONObject(t,"attendee_id[0]._text"),userName:e.Base.Utils.queryJSONObject(t,"username[0]._text")},n=new e.Providers.WCS.LiveSessionEventData(i.request_id,i.idle_timeout,i.ws_connection_id,i.server_time_diff,{},a,{});return new e.Providers.WCS.LiveSessionEvent(n)},e.Providers.WCS.LiveSessionParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.selection[0]._attr&&$.each(t.selection[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.MoveSelectionEventData(i.groupId,i.layerType,i.id,i.moveToX,i.moveToY,i.selectionX,i.selectionY);return new e.Providers.WCS.MoveSelectionEvent(this.stripCommonData(t),n)},e.Providers.WCS.MoveSelectionParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.PauseScreenSharingEvent(this.stripCommonData(t))},e.Providers.WCS.PauseScreenSharingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};i.filename=e.Base.Utils.queryJSONObject(t,"documentinfo[0]._attr.filename._value"),i.filesize=e.Base.Utils.queryJSONObject(t,"documentinfo[0]._attr.filesize._value"),i.fileurl=e.Base.Utils.queryJSONObject(t,"documentinfo[0]._attr.fileurl._value");var a=new e.Providers.WCS.SendDocumentEventData(i.filename,i.filesize,i.fileurl);return new e.Providers.WCS.SendDocumentEvent(this.stripCommonData(t),a)},e.Providers.WCS.SendDocumentParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};t.message&&(i.message=e.Base.Utils.queryJSONObject(t,"message[0]._text")),i.targetName=e.Base.Utils.queryJSONObject(t,"_attr.target_name._value"),t._attr.target_id?(i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value"),i.private=!0):i.private=!1;var a=new e.Providers.WCS.SendMessageEventData(i.message,i.targetName,i.private,i.targetId);return new e.Providers.WCS.SendMessageEvent(this.stripCommonData(t),a)},e.Providers.WCS.SendMessageParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={},a=e.Base.Utils.queryJSONObject(t,"slide[0]._attr");i.count=a.count._value,i.index=a.index._value,i.title=a.title._value,i.presentationId=a.presentationid._value,i.slideUrl=a.slideurl._value,i.slideBaseUrl=a.slideurl._value,i.tocUrl=a.toc._value,i.includeToc="true"===a.includetoc._value;var n=new e.Providers.WCS.SendSlideEventData(i.count,i.index,i.title,i.presentationId,i.slideUrl,i.slideBaseUrl,i.tocUrl,i.includeToc);return new e.Providers.WCS.SendSlideEvent(this.stripCommonData(t),n)},e.Providers.WCS.SendSlideParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};t.note&&(i.type=e.Base.Utils.queryJSONObject(t,"note[0]._attr.type._value"),i.text=e.Base.Utils.queryJSONObject(t,"note[0]._text"),i.noteId=e.Base.Utils.queryJSONObject(t,"note[0]._attr.event_id._value"),i.attendeeId=e.Base.Utils.queryJSONObject(t,"note[0]._attr.attende_id._value")),t._attr.target_id?(i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value"),i.personal=!0):i.personal=!1;var a=new e.Providers.WCS.SetNoteEventData(i.noteId,i.type,i.text,i.attendeeId,i.personal,i.targetId);return new e.Providers.WCS.SetNoteEvent(this.stripCommonData(t),a)},e.Providers.WCS.SetNoteParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.lines[0]._attr&&$.each(t.lines[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.color&&(i.color=this.colorIntToHex(i.color)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.StartDrawShapeEventData(i.alpha,i.color,i.groupId,i.layerType,i.width);return new e.Providers.WCS.StartDrawShapeEvent(this.stripCommonData(t),n)},e.Providers.WCS.StartDrawShapeParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i=new e.Providers.WCS.StartMeetingEventData("173621");return new e.Providers.WCS.StartMeetingEvent(this.stripCommonData(t),i)},e.Providers.WCS.StartMeetingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i=e.Base.Utils.queryJSONObject(t,"transport_version[0]._text"),a=new e.Providers.WCS.StartScreenSharingEventData(i);return new e.Providers.WCS.StartScreenSharingEvent(this.stripCommonData(t),a)},e.Providers.WCS.StartScreenSharingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i=e.Base.Utils.queryJSONObject(t,"whiteboard[0]._attr.index._value"),a=new e.Providers.WCS.StartWhiteboardEventData(i);return new e.Providers.WCS.StartWhiteboardEvent(this.stripCommonData(t),a)},e.Providers.WCS.StartWhiteboardParser=t}(AvayaClientServices),function(e){"use strict";function t(e){this._position=0,this._buffer=e,this.length=this._buffer.byteLength}t.prototype={getBuffer:function(){return this._buffer},setPosition:function(e){this._position=e},getPosition:function(){return this._position},getBytesAvailable:function(){return this._buffer.byteLength-this._position},readBytes:function(t){var i=new e.Providers.WCS.ByteArray(this._buffer.slice(this._position,this._position+t));return this._position+=t,i},readByte:function(){var e=new Int8Array(this._buffer.slice(this._position,this._position+1));return this._position++,e[0]},readUnsignedInt:function(){var e=new DataView(this._buffer.slice(this._position,this._position+4));return this._position+=4,e.getUint32(0)},readShort:function(){var e=new DataView(this._buffer.slice(this._position,this._position+2));return this._position+=2,e.getInt16(0)},readInt:function(){var e=new DataView(this._buffer.slice(this._position,this._position+4));return this._position+=4,e.getInt32(0)}},e.Providers.WCS.ByteArray=t}(AvayaClientServices),function(e){"use strict";function t(){this._bitmapElements=[],this.width=0,this.height=0,this.isKeyFrame=!1}t.prototype={setStartTag:function(e){return this.width=e.width,this.height=e.height,this.isKeyFrame=e.isKeyFrame,this},addBitmapElement:function(e){return this._bitmapElements.push(e),this}},e.Providers.WCS.Frame=t}(AvayaClientServices),function(e){"use strict";function t(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.bitmapData=e.data.getBuffer(),this.imageType=e.imageType}t.prototype={},e.Providers.WCS.FrameBitmapLoader=t}(AvayaClientServices),function(e){"use strict";function t(){this._frame=void 0}t.prototype={processTag:function(t,i){switch(t.type){case e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG:this._startFrame(t);break;case e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG:this._addBinaryBlock(t);break;case e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG:this._endFrame(i)}},_startFrame:function(t){e.Base.Logger.debug("Add start Tag"),this._frame=new e.Providers.WCS.Frame,this._frame.setStartTag(t)},_addBinaryBlock:function(t){if(t.data.length>0){var i=new e.Providers.WCS.FrameBitmapLoader(t);this._frame.addBitmapElement(i)}},_endFrame:function(t){e.Base.Logger.debug("Add End Tag - end Frame",this._frame._bitmapElements.length),t(this._frame),this._frame=void 0}},e.Providers.WCS.FrameBuilder=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.ScreenSharingImageTypes={JPEG:0,PNG:1}}(),function(e){"use strict";AvayaClientServices.Providers.WCS.ScreenSharingKeyFrameTypes={INTRA_FRAME:0,KEY_FRAME:1}}(),function(e){"use strict";e.Providers.WCS.ScreenSharingTagEncoder=function(){},e.Providers.WCS.ScreenSharingTagEncoder.prototype={encodeTag:function(t){switch(t.type){case e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG:return this._encodeStartFrame(t);case e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG:return this._encodeBinaryBlock(t);case e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG:return this._encodeEndFrame()}},_encodeStartFrame:function(t){var i=new ArrayBuffer(14),a=new DataView(i);a.setInt8(0,e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG),a.setInt8(1,t.isKeyFrame?e.Providers.WCS.ScreenSharingKeyFrameTypes.KEY_FRAME:e.Providers.WCS.ScreenSharingKeyFrameTypes.INTRA_FRAME),a.setInt16(2,t.width),a.setInt16(4,t.height);for(var n=this._getCurrentTimeStamp(t.creationTime),r=0;r<n.length;r++)a.setInt8(6+r,n[r]);return i},_encodeBinaryBlock:function(t){var i=new ArrayBuffer(18+t.data.length),a=new Uint8Array(i),n=new DataView(i);return n.setInt8(0,e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG),n.setInt16(1,t.width),n.setInt16(3,t.height),n.setInt16(5,t.x),n.setInt16(7,t.y),n.setInt8(9,t.imageType),0===t.length?n.setInt32(10,t.data.length):n.setInt32(10,t.length),n.setInt32(14,0),a.set(t.data,18),i},_encodeEndFrame:function(){var t=new ArrayBuffer(1);return new DataView(t).setInt8(0,e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG),t},_getCurrentTimeStamp:function(e){var t=this._longToByteArray(e);return t.reverse(),t},_longToByteArray:function(e){for(var t=[0,0,0,0,0,0,0,0],i=0;i<t.length;i++){var a=255&e;t[i]=a,e=(e-a)/256}return t}}}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.WCSScreenSharingTagTypes={START_TAG:0,BLOCK_TAG:1,CURSOR_TAG:2,END_TAG:3}}(),function(e){"use strict";AvayaClientServices.Providers.WCS.WCSSharingTag=function(e){this.type=e}}(),function(e){"use strict";function t(){this._parsers={}}t.prototype={parse:function(t){var i;if(t.byteLength>0){var a=new e.Providers.WCS.ByteArray(t),n=a.readByte(),r=n>>4,s=15&n;this._parsers[r]&&this._parsers[r][s]&&(i=this._parsers[r][s].parse(a))}else e.Base.Logger.warn("Buffer length = 0. Parse process skipped.");return i},registerParser:function(e,t,i){this._parsers[e]||(this._parsers[e]={}),this._parsers[e][t]=i}},e.Providers.WCS.WCSBinaryParser=t}(AvayaClientServices),function(e){"use strict";function t(e){this._frameBuilder=e,this._lastPoint=void 0,this._timeout=void 0}t.prototype={updateFrame:function(t,i){this._frameBuilder.processTag(i,function(i){var a=i._bitmapElements.map(function(t){return new e.Services.Collaboration.Bitmap(t.x,t.y,t.width,t.height,t.imageType,t.bitmapData)}),n=new e.Services.Collaboration.Frame(i.width,i.height,a,i.isKeyFrame);n.isKeyFrame()?t._contentSharing._onFrameReceivedCallbacks.fire(t._contentSharing,n):t._contentSharing._onFrameChangedCallbacks.fire(t._contentSharing,n)}.bind(this))},updateCursor:function(t,i){this._lastPoint=new e.Services.Collaboration.Point(i.x,i.y),this._timeout||(this._timeout=setTimeout(function(){t._contentSharing._onCursorReceivedCallbacks.fire(t._contentSharing,this._lastPoint),this._timeout=void 0}.bind(this),100))},startScreenSharing:function(e,t){var i=this._getParticipant(e,t);!0===e._contentSharing._isPaused?(e._contentSharing._isPaused=!1,e._contentSharing._onContentSharingResumedCallbacks.fire(e._contentSharing,i)):e._contentSharing._onContentSharingStartedCallbacks.fire(e._contentSharing,i)},pauseScreenSharing:function(e,t){e._contentSharing._isPaused=!0;var i=this._getParticipant(e,t);e._contentSharing._onContentSharingPausedCallbacks.fire(e._contentSharing,i)},endScreenSharing:function(e,t){var i=this._getParticipant(e,t);e._contentSharing._onContentSharingEndedCallbacks.fire(e._contentSharing,i)},frameReport:function(e,t){e._contentSharing._onFrameReportReceivedCallbacks.fire(e._contentSharing,t)},_getParticipant:function(t,i){var a=t._participants.filter(function(e){return e.getId()===i.senderId})[0];return a||((a=new e.Services.Collaboration.Participant)._id=i.senderId,a._name=i.senderName,t._participants.push(a)),a}},e.Providers.WCS.WCSContentSharingHandler=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.WCSEventTypes={START_WHITEBOARD:"StartWhiteboard",ADD_WHITEBOARD:"AddWhiteboard",DELETE_WHITEBOARD:"DeleteWhiteboard",START_DRAW_SHAPE:"StartDrawShape",DRAW_SHAPE:"DrawShape",END_DRAW_SHAPE:"EndDrawShape",DRAW_CIRCLE:"DrawCircle",DRAW_TEXT:"DrawText",MOVE_SELECTION:"MoveSelection",DELETE_SELECTION:"DeleteSelection",CLEAR_DRAWING:"ClearDrawing",END_WHITEBOARD:"EndWhiteboard",SEND_SLIDE:"SendSlide",END_PRESENTATION:"EndPresentation",SEND_MESSAGE:"SendMessage",ADD_NOTE:"AddNote",SET_NOTE:"SetNote",DELETE_NOTE:"DeleteNote",START_SCREEN_SHARING:"StartScreenSharing",PAUSE_SCREEN_SHARING:"PauseScreenSharing",END_SCREEN_SHARING:"EndScreenSharing",REQUEST_CONTROL:"RequestControl",GRANT_CONTROL:"GrantControl",START_CONTROL:"StartControl",DECLINE_CONTROL:"DeclineControl",DENY_CONTROL:"DenyControl",SEND_DOCUMENT:"SendDocument",END_CONTROL:"EndControl",ALLOW_PRESENTING:"AllowPresenting",DENY_PRESENTING:"DenyPresenting",EJECT_PARTICIPANT:"EjectParticipant",START_MEETING:"StartMeeting",END_MEETING:"EndMeeting",DRAW_CURSOR:"DrawCursor",DRAW_FRAME:"DrawFrame",FRAME_REPORT:"FrameReport",ERROR:"Error",LIVE_SESSION:"LiveSession",LIVE_ATTENDEES:"LiveAttendees",LIVE_ATTENDEE:"LiveAttendee"}}(),function(e,t){"use strict";function i(){this.parsers=[]}i.prototype={register:function(e,t){this.parsers[e]=t},unregister:function(e){this.parsers[e]=void 0},parse:function(i){var a;"string"==typeof i?a=t.parseString(i):"object"==typeof i&&(a=i);var n,r=a.response[0],s=[];if(r.error){n=e.Providers.WCS.WCSEventTypes.ERROR;var o=r.error[0];return s.push(this.delegateParser(n,o)),s}if(r.live_events)return $.each(r.live_events[0].event,function(e,t){n=t._attr.type._value;var i=this.delegateParser(n,t);void 0!==i&&s.push(i)}.bind(this)),s;if(r.live_event)return[];if(r.live_session)return n=e.Providers.WCS.WCSEventTypes.LIVE_SESSION,s.push(this.delegateParser(n,r.live_session[0])),s;if(r.frame_report)return n=e.Providers.WCS.WCSEventTypes.FRAME_REPORT,s.push(this.delegateParser(n,r.frame_report[0])),s;if(r.live_attendees)return n=e.Providers.WCS.WCSEventTypes.LIVE_ATTENDEES,s.push(this.delegateParser(n,r.live_attendees[0])),s;throw new Error("No parser specified!")},delegateParser:function(e,t){return console.debug("DATA TO PARSE:",t),void 0!==this.parsers[e]?this.parsers[e].parse(t):void 0}},e.Providers.WCS.WCSEventsParser=i}(AvayaClientServices,xmlToJSON),function(e){"use strict";function t(){this._config=void 0,this._participant=void 0,this._meetingId=void 0}t.prototype={buildDrawCircleMessage:function(t,i,a,n,r){var s=this._buildDrawCircleEventData(t,i);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DRAW_CIRCLE,a,n,r,s)},buildMoveSelectionMessage:function(t,i,a,n,r,s,o){var c=this._buildMoveSelectionEventData(t,i,a,n);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.MOVE_SELECTION,r,s,o,c)},buildDrawShapeMessage:function(t,i,a,n,r){var s=this._buildDrawShapeEventData(t,i);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DRAW_SHAPE,a,n,r,s)},buildLiveDrawShapeMessage:function(t,i,a,n){var r=this._buildLiveDrawShapeEventData(t);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DRAW_SHAPE,i,a,n,r)},buildFirstPointLiveDrawShapeMessage:function(t,i,a,n){var r=this._buildFirstPointLiveDrawShapeEventData(t);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DRAW_SHAPE,i,a,n,r)},buildStartDrawShapeMessage:function(t,i,a,n,r){var s=this._buildStartDrawShapeEventData(t,i);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.START_DRAW_SHAPE,a,n,r,s)},buildEndDrawShapeMessage:function(t,i,a,n,r){var s=this._buildEndDrawShapeEventData(t,i);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.END_DRAW_SHAPE,a,n,r,s)},buildDrawTextMessage:function(t,i,a,n,r){var s=this._buildDrawTextEventData(t,i);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DRAW_TEXT,a,n,r,s)},buildAddWhiteboardMessage:function(t,i,a){return this._decorateRequest(e.Providers.WCS.WCSEventTypes.ADD_WHITEBOARD,t,i,a)},buildEndWhiteboardMessage:function(t,i,a){return this._decorateRequest(e.Providers.WCS.WCSEventTypes.END_WHITEBOARD,t,i,a)},buildRemoveWhiteboardMessage:function(t,i,a,n){var r='<whiteboard index="'+t+'"/>';return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DELETE_WHITEBOARD,i,a,n,r)},buildStartWhiteboardMessage:function(t,i,a,n){var r='<whiteboard index="';return e.Base.Utils.isDefined(n)&&(r+=n),r+='"/>',this._decorateRequest(e.Providers.WCS.WCSEventTypes.START_WHITEBOARD,t,i,a,r)},buildLiveEventMessage:function(e,t,i,a){return this._decorateRequest(e,t,i,a)},buildStartScreenSharingMessage:function(t,i,a){return this._decorateRequest(e.Providers.WCS.WCSEventTypes.START_SCREEN_SHARING,t,i,a,"<transport_version>1</transport_version>")},buildClearContentMessage:function(t,i,a,n){var r='<selection group="whiteboard_'+t+'"/>';return this._decorateRequest(e.Providers.WCS.WCSEventTypes.CLEAR_DRAWING,i,a,n,r)},buildGetParticipantsMessage:function(t){return"live_attendees?rc_only="+!!t+"&request_id="+e.Base.Utils.makeId(32,"abcdefgijklmnopqrstuvwxyz0123456789")},_buildMoveSelectionEventData:function(e,t,i,a){var n=e.getTranslation();return'<selection group="whiteboard_'+t+'" id="'+e.getId()+'" moveToX="'+n.getX()+'" moveToY="'+n.getY()+'" selectionX="'+i+'" selectionY="'+a+'"/>'},buildDeleteSelectionMessage:function(t,i,a,n,r,s,o){var c=this._buildDeleteSelectionEventData(t,i,a,n);return this._decorateRequest(e.Providers.WCS.WCSEventTypes.DELETE_SELECTION,r,s,o,c)},_buildDeleteSelectionEventData:function(e,t,i,a){return'<selection group="whiteboard_'+t+'" id="'+e._id+'" selectionX="'+i+'" selectionY="'+a+'"/>'},_buildDrawCircleEventData:function(e,t){var i='<circle alpha="'+e.getAlpha()+'" group="whiteboard_'+t+'" x0="'+e.getTopLeft().getX()+'" x1="'+e.getBottomRight().getX()+'" y0="'+e.getTopLeft().getY()+'" y1="'+e.getBottomRight().getY()+'"';return(i+=e.isFilled()?' fillColor="'+e.getColor()+'"':' color="'+e.getColor()+'"')+' width="'+e.getWidth()+'" />'},_buildDrawShapeEventData:function(e,t){var i='<lines group="whiteboard_'+t+'" alpha="'+e.getAlpha()+'" width="'+e.getWidth()+'"';i+=e.isFilled()?' fillColor="'+e.getColor()+'"':' color="'+e.getColor()+'"',i+=">";for(var a=0,n=e.getPoints();a<n.length;a++){var r=n[a];i+=r.isMove?'<m x="'+r.point.getX()+'" y="'+r.point.getY()+'"/>':'<l x="'+r.point.getX()+'" y="'+r.point.getY()+'"/>'}return i+"</lines>"},_buildFirstPointLiveDrawShapeEventData:function(e){return'<m x="'+e.getX()+'" y="'+e.getY()+'"/>'},_buildLiveDrawShapeEventData:function(e){var t="",i=0;for(e[0].isMove&&(i=1,t+='<m x="'+e[0].point.getX()+'" y="'+e[0].point.getY()+'"/>'),t+="<lines>";i<e.length;i++){var a=e[i];t+=a.isMove?'<m x="'+a.point.getX()+'" y="'+a.point.getY()+'"/>':'<l x="'+a.point.getX()+'" y="'+a.point.getY()+'"/>'}return t+"</lines>"},_buildStartDrawShapeEventData:function(e,t){var i='<lines group="whiteboard_'+t+'" alpha="'+e.getAlpha()+'" width="'+e.getWidth()+'"';return(i+=e.isFilled()?' fillColor="'+e.getColor()+'"':' color="'+e.getColor()+'"')+"/>"},_buildEndDrawShapeEventData:function(e,t){return'<lines group="whiteboard_'+t+'"/>'},_buildDrawTextEventData:function(e,t){return'<drawText fillColor="'+e.getColor()+'" fontSize="'+e.getFontSize()+'" group="whiteboard_'+t+'" text="'+e.getContent()+'" x="'+e.getPosition().getX()+'" y="'+e.getPosition().getY()+'"/>'},_translateColor:function(e){return parseInt("0x".concat(e.slice(1))).toString()},_decorateRequest:function(t,i,a,n,r){return"live_event"+(r?"?event_data="+encodeURIComponent(r)+"&":"?")+"event_type="+t+"&meeting_id="+i+"&sender_id="+a+"&sender_name="+n+"&request_id="+e.Base.Utils.makeId(32,"0123456789abcdef")}},e.Providers.WCS.WCSMessageBuilder=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.Interfaces.CollaborationProvider.call(this),this._providers=[],this._selectedProvider=void 0,this._config={}}t.prototype=Object.create(e.Providers.Interfaces.CollaborationProvider.prototype),t.prototype.stop=function(){return this._selectedProvider.stop()},t.prototype.registerWCSProvider=function(e,t){this._providers.push({version:e,provider:t})},t.prototype.start=function(e,t){return $.isEmptyObject(e)||this._config===e||(this._config=e.wcsConfiguration),this._selectedProvider=this._providers[0].provider,this._selectedProvider.start(e.wcsConfiguration,t)},t.prototype.on=function(e,t){this._selectedProvider.on(e,t)},t.prototype.getReceivingBitrate=function(){return this._selectedProvider.getReceivingBitrate()},t.prototype.addCircle=function(e,t){return this._selectedProvider.addCircle(e,t)},t.prototype.addText=function(e,t){return this._selectedProvider.addText(e,t)},t.prototype.addShape=function(e,t){return this._selectedProvider.addShape(e,t)},t.prototype.startDrawShape=function(e,t){return this._selectedProvider.startDrawShape(e,t)},t.prototype.liveDrawShape=function(e,t){return this._selectedProvider.liveDrawShape(e,t)},t.prototype.endDrawShape=function(e,t){return this._selectedProvider.endDrawShape(e,t)},t.prototype.moveSelection=function(e,t,i){return this._selectedProvider.moveSelection(e,t,i)},t.prototype.observeCollaboration=function(e){this._selectedProvider.observeCollaboration(e)},t.prototype.startWhiteboard=function(e){return this._selectedProvider.startWhiteboard(e)},t.prototype.endWhiteboard=function(e){return this._selectedProvider.endWhiteboard(e)},t.prototype.addWhiteboardSurface=function(){return this._selectedProvider.addWhiteboardSurface()},t.prototype.removeWhiteboardSurface=function(e){return this._selectedProvider.removeWhiteboardSurface(e)},t.prototype.sendMessage=function(e){return this._selectedProvider.sendMessage(e)},t.prototype.sendStartScreenSharing=function(){return this._selectedProvider.sendStartScreenSharing()},t.prototype.sendLiveEvent=function(e){return this._selectedProvider.sendLiveEvent(e)},t.prototype.removeShape=function(e,t,i){return this._selectedProvider.removeShape(e,t,i)},t.prototype.clearContent=function(e){return this._selectedProvider.clearContent(e)},t.prototype.getParticipants=function(){return this._selectedProvider.getParticipants()},t.prototype.isOpened=function(){return this._selectedProvider.isOpened()},t.prototype.isFeatureAvailable=function(e){return this._selectedProvider.isFeatureAvailable(e)},e.Providers.WCS.WCSProvider=t}(AvayaClientServices),function(e){"use strict";function t(){this._collaborationProvider={}}t.prototype={getWCSProvider:function(t){if(e.Base.Utils.isDefined(t)&&t.enabled){if($.isEmptyObject(this._collaborationProvider)){var i=this._createWCSv1_1Provider();this._collaborationProvider=new e.Providers.WCS.WCSProvider,this._collaborationProvider.registerWCSProvider("1.1",i)}return this._collaborationProvider}},_createWCSv1_1Provider:function(){var t=new e.Providers.WCS.WCSTransactionalWebSocketProvider,i=new e.Base.NetworkProvider(t),a=this._createEventsParser(),n=this._createBinaryParser(),r=new e.Providers.WCS.FrameBuilder,s=new e.Providers.WCS.WCSMessageBuilder,o=new e.Providers.WCS.WCSContentSharingHandler(r),c=new e.Providers.WCS.WCSShapeConverter,l=new e.Providers.WCS.WCSWhiteboardHandler(c);return new e.Providers.WCS.WCSv1_1Provider(i,a,n,s,o,l)},_createEventsParser:function(){var t=new e.Providers.WCS.WCSEventsParser;return t.register(e.Providers.WCS.WCSEventTypes.ERROR,new e.Providers.WCS.ErrorParser),t.register(e.Providers.WCS.WCSEventTypes.LIVE_SESSION,new e.Providers.WCS.LiveSessionParser),t.register(e.Providers.WCS.WCSEventTypes.SEND_MESSAGE,new e.Providers.WCS.SendMessageParser),t.register(e.Providers.WCS.WCSEventTypes.DRAW_SHAPE,new e.Providers.WCS.DrawShapeParser),t.register(e.Providers.WCS.WCSEventTypes.DRAW_CIRCLE,new e.Providers.WCS.DrawCircleParser),t.register(e.Providers.WCS.WCSEventTypes.MOVE_SELECTION,new e.Providers.WCS.MoveSelectionParser),t.register(e.Providers.WCS.WCSEventTypes.DELETE_SELECTION,new e.Providers.WCS.DeleteSelectionParser),t.register(e.Providers.WCS.WCSEventTypes.CLEAR_DRAWING,new e.Providers.WCS.ClearDrawingParser),t.register(e.Providers.WCS.WCSEventTypes.DRAW_TEXT,new e.Providers.WCS.DrawTextParser),t.register(e.Providers.WCS.WCSEventTypes.START_DRAW_SHAPE,new e.Providers.WCS.StartDrawShapeParser),t.register(e.Providers.WCS.WCSEventTypes.END_DRAW_SHAPE,new e.Providers.WCS.EndDrawShapeParser),t.register(e.Providers.WCS.WCSEventTypes.START_WHITEBOARD,new e.Providers.WCS.StartWhiteboardParser),t.register(e.Providers.WCS.WCSEventTypes.ADD_WHITEBOARD,new e.Providers.WCS.AddWhiteboardParser),t.register(e.Providers.WCS.WCSEventTypes.DELETE_WHITEBOARD,new e.Providers.WCS.DeleteWhiteboardParser),t.register(e.Providers.WCS.WCSEventTypes.END_WHITEBOARD,new e.Providers.WCS.EndWhiteboardParser),t.register(e.Providers.WCS.WCSEventTypes.START_MEETING,new e.Providers.WCS.StartMeetingParser),t.register(e.Providers.WCS.WCSEventTypes.START_SCREEN_SHARING,new e.Providers.WCS.StartScreenSharingParser),t.register(e.Providers.WCS.WCSEventTypes.PAUSE_SCREEN_SHARING,new e.Providers.WCS.PauseScreenSharingParser),t.register(e.Providers.WCS.WCSEventTypes.END_SCREEN_SHARING,new e.Providers.WCS.EndScreenSharingParser),t.register(e.Providers.WCS.WCSEventTypes.GRANT_CONTROL,new e.Providers.WCS.GrantControlParser),t.register(e.Providers.WCS.WCSEventTypes.ADD_NOTE,new e.Providers.WCS.AddNoteParser),t.register(e.Providers.WCS.WCSEventTypes.DELETE_NOTE,new e.Providers.WCS.DeleteNoteParser),t.register(e.Providers.WCS.WCSEventTypes.SET_NOTE,new e.Providers.WCS.SetNoteParser),t.register(e.Providers.WCS.WCSEventTypes.DENY_CONTROL,new e.Providers.WCS.DenyControlParser),t.register(e.Providers.WCS.WCSEventTypes.END_CONTROL,new e.Providers.WCS.EndControlParser),t.register(e.Providers.WCS.WCSEventTypes.END_MEETING,new e.Providers.WCS.EndMeetingParser),t.register(e.Providers.WCS.WCSEventTypes.SEND_DOCUMENT,new e.Providers.WCS.SendDocumentParser),t.register(e.Providers.WCS.WCSEventTypes.ALLOW_PRESENTING,new e.Providers.WCS.AllowPresentingParser),t.register(e.Providers.WCS.WCSEventTypes.DENY_PRESENTING,new e.Providers.WCS.DenyPresentingParser),t.register(e.Providers.WCS.WCSEventTypes.EJECT_PARTICIPANT,new e.Providers.WCS.EjectParticipantParser),t.register(e.Providers.WCS.WCSEventTypes.LIVE_ATTENDEES,new e.Providers.WCS.LiveAttendeesParser),t.register(e.Providers.WCS.WCSEventTypes.FRAME_REPORT,new e.Providers.WCS.FrameReportParser),t},_createBinaryParser:function(){var t=new e.Providers.WCS.WCSBinaryParser;return t.registerParser(e.Providers.WCS.WCSTransmissionTypes.SCREEN_SHARING,e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG,new e.Providers.WCS.StartTagBinaryParser),t.registerParser(e.Providers.WCS.WCSTransmissionTypes.SCREEN_SHARING,e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG,new e.Providers.WCS.BlockTagBinaryParser),t.registerParser(e.Providers.WCS.WCSTransmissionTypes.SCREEN_SHARING,e.Providers.WCS.WCSScreenSharingTagTypes.CURSOR_TAG,new e.Providers.WCS.CursorTagBinaryParser),t.registerParser(e.Providers.WCS.WCSTransmissionTypes.SCREEN_SHARING,e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG,new e.Providers.WCS.EndTagBinaryParser),t}},e.Providers.WCS.WCSProviderFactory=t}(AvayaClientServices),function(e,t){"use strict";function i(){e.Base.PollingRESTProvider.call(this),this._connectionId="",this._config={},this._isOpened=!1,this._startLiveSessionURL="/StartLiveSession",this._endLiveSessionURL="/EndLiveSession",this._dataTransportURL="/Data";var t=this,i=function(e){t._connectionId=Date.now().toString(),t.startPolling(t._config.fallbackURL+t._dataTransportURL,t._config.fallbackPollInterval,{ws_id:t._connectionId}),t.onOpen(),t._isOpened=!0},n=function(e){t.onError({status:e.status,statusText:e.statusText})};this.init=function(e){this._config=e,a(this._config.fallbackURL+this._startLiveSessionURL,{},i,n)},this.close=function(){if(!this._isOpened)throw new Error("Socket is not yet opened!");a(this._config.fallbackURL+this._endLiveSessionURL,{},function(){t._isOpened=!1},n),this.stopPolling(),this.onClose()}}function a(e,i,a,n){return t.ajax({type:"POST",url:e,data:i,dataType:"text",contentType:"application/x-www-form-urlencoded; charset=utf-8"}).then(a,n)}i.prototype=Object.create(e.Base.PollingRESTProvider.prototype),i.prototype.send=function(e){if(!this._isOpened)throw new Error("Socket is not yet opened!");var t={ws_id:this._connectionId,message:e},i=this;a(this._config.fallbackURL+this._dataTransportURL,t,function(e){i.onMessage({data:e})},function(e){i.onError({status:e.status,statusText:e.statusText})})},e.Providers.WCS.WCSRestFallbackAdapter=i}(AvayaClientServices=AvayaClientServices||{},jQuery=jQuery||{}),function(e){"use strict";function t(){}t.prototype={convertShape:function(t,i){var a=this._determineColor(t.data),n=t.liveEventCommonData.fromname,r=t.data.filled,s=t.liveEventCommonData.senderName===i,o=t.data.alpha,c=t.data.width,l=new e.Services.Collaboration.Shape(n,r,s,a,o,c);if(l.setId(t.liveEventCommonData.eventId),e.Base.Utils.isDefined(t.data.m))for(var d=0;d<t.data.m.length;d++)l.addMovePoint(new e.Services.Collaboration.Point(t.data.m[d].x,t.data.m[d].y));if(e.Base.Utils.isDefined(t.data.l))for(var u=0;u<t.data.l.length;u++)l.addLinePoint(new e.Services.Collaboration.Point(t.data.l[u].x,t.data.l[u].y));return l},convertLiveShape:function(t,i){var a=t.liveEventCommonData.fromname,n=t.liveEventCommonData.senderName===i,r=this._convertColor(t.data.color),s=t.data.alpha,o=t.data.width,c=new e.Services.Collaboration.Shape(a,!1,n,r,s,o);return c.setId(t.liveEventCommonData.eventId),c},convertText:function(t,i){var a=t.data.text,n=t.liveEventCommonData.fromname,r=t.data.filled,s=t.liveEventCommonData.senderName===i,o=this._convertColor(t.data.fillColor),c=t.data.fontSize,l=new e.Services.Collaboration.WhiteboardText(a,c,n,r,s,o,void 0);return l.setId(t.liveEventCommonData.eventId),l.setPosition(new e.Services.Collaboration.Point(t.data.x,t.data.y)),l},convertCircle:function(t,i){var a=this._determineColor(t.data),n=t.liveEventCommonData.fromname,r=t.data.filled,s=t.liveEventCommonData.senderName===i,o=t.data.width,c=t.data.alpha,l=this._calculatePoints(t.data),d=new e.Services.Collaboration.Circle(l.topLeft,l.bottomRight,n,r,s,a,c,o);return d.setId(t.liveEventCommonData.eventId),d},_determineColor:function(e){return e.filled&&e.fillColor?this._convertColor(e.fillColor):e.contour&&e.color?this._convertColor(e.color):void 0},_convertColor:function(e){return 0===e.indexOf("#")?parseInt(e.slice(1),16):parseInt(e,16)},_calculatePoints:function(t){var i,a;return t.x0<t.x1&&t.y0<t.y1?(i=new e.Services.Collaboration.Point(t.x0,t.y0),a=new e.Services.Collaboration.Point(t.x1,t.y1)):t.x0>=t.x1&&t.y0>=t.y1?(i=new e.Services.Collaboration.Point(t.x1,t.y1),a=new e.Services.Collaboration.Point(t.x0,t.y0)):t.x0<t.x1&&t.y0>=t.y1?(i=new e.Services.Collaboration.Point(t.x0,t.y1),a=new e.Services.Collaboration.Point(t.x1,t.y0)):(i=new e.Services.Collaboration.Point(t.x1,t.y0),a=new e.Services.Collaboration.Point(t.x0,t.y1)),{topLeft:i,bottomRight:a}}},e.Providers.WCS.WCSShapeConverter=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WCS.WCSTransmissionTypes={SCREEN_SHARING:0,SLIDE_SHARING:2}}(),function(e){"use strict";function t(e){this._shapeConverter=e}t.prototype={addWhiteboard:function(t,i){console.debug("WCSWhiteboardHandler: addWhiteboard",t,i);var a=t.getWhiteboard(),n=this._createNewSurface(a,i.liveEventCommonData.eventId),r=a.getActiveSurface();e.Base.Utils.isDefined(r)&&(r._active=!1),n._active=!0,a._activeSurface=n,a._onWhiteboardSurfaceAddedCallbacks.fire(i,n),a._onWhiteboardSurfaceSetActiveCallbacks.fire(a,n),a._recalculateRemoveWhiteboardCapability()},startWhiteboard:function(t,i){console.debug("WCSWhiteboardHandler: startWhiteboard",t,i);var a=t.getWhiteboard(),n=a.getSurfaceById(i.data.id),r=a.getActiveSurface(),s=this._getParticipant(t,i);if(e.Base.Utils.isDefined(r)&&(r._active=!1),e.Base.Utils.isDefined(n))n._active=!0,a._activeSurface=n,a._onWhiteboardSurfaceSetActiveCallbacks.fire(a,n,s);else{var o=this._createNewSurface(a,i.liveEventCommonData.eventId);o._active=!0,a._activeSurface=o,a._onWhiteboardStartedCallbacks.fire(a,o,s),a._onWhiteboardSurfaceAddedCallbacks.fire(a,o),a._onWhiteboardSurfaceSetActiveCallbacks.fire(a,o)}a._recalculateRemoveWhiteboardCapability()},endWhiteboard:function(e,t){console.debug("WCSWhiteboardHandler: endWhiteboard",e,t);var i=e.getWhiteboard(),a=this._getParticipant(e,t);i._onWhiteboardEndedCallbacks.fire(i,a),i._recalculateRemoveWhiteboardCapability()},deleteWhiteboard:function(e,t){console.debug("WCSWhiteboardHandler: deleteWhiteboard",e,t);var i,a=e.getWhiteboard(),n=a.getSurfaceById(t.data.id);if(n){i=n;var r=this._chooseNewActiveSurface(a,t.data.id);a._activeSurface=r;var s=a.getSurfaces().indexOf(n);s>-1&&a.getSurfaces().splice(s,1),a._onWhiteboardSurfaceRemovedCallbacks.fire(a,i),a._onWhiteboardSurfaceSetActiveCallbacks.fire(a,a.getActiveSurface())}a._recalculateRemoveWhiteboardCapability()},startDrawShape:function(e,t){console.debug("WCSWhiteboardHandler: startDrawShape",e,t);var i=e.getWhiteboard(),a=i.getSurfaceById(t.data.groupId);if(a){var n=this._shapeConverter.convertLiveShape(t,e._selfParticipant.getId());n._tempId=t.liveEventCommonData.eventId,a._appendShape(t.liveEventCommonData.eventId,n),i._currentLiveDrawingWhiteboardId=t.data.groupId,i._currentLiveDrawingShape=n,a._onShapeAddedCallbacks.fire(a,n)}},drawShape:function(t,i){console.debug("WCSWhiteboardHandler: drawShape",t,i);var a=t.getWhiteboard(),n=a.getSurfaceById(i.data.groupId);if(n){var r=this._shapeConverter.convertShape(i,t._selfParticipant.getId());n._appendShape(i.liveEventCommonData.eventId,r),n._onShapeAddedCallbacks.fire(n,r)}else if(e.Base.Utils.isDefined(a._currentLiveDrawingShape)&&(!(n=a.getSurfaceById(a._currentLiveDrawingWhiteboardId))._getShapeById(a._currentLiveDrawingShape.getId())||!a._currentLiveDrawingShape.isMine())){if(i.data.m.length>0&&a._currentLiveDrawingShape.addMovePoint(new e.Services.Collaboration.Point(i.data.m[0].x,i.data.m[0].y)),i.data.l.length>0)for(var s=0;s<i.data.l.length;s++)a._currentLiveDrawingShape.addLinePoint(new e.Services.Collaboration.Point(i.data.l[s].x,i.data.l[s].y));n._onShapeUpdatedCallbacks.fire(n,a._currentLiveDrawingShape)}},endDrawShape:function(e,t){console.debug("WCSWhiteboardHandler: endDrawShape",t);var i=e.getWhiteboard(),a=i.getSurfaceById(t.data.groupId);if(a){var n=a._getShapeById(i._currentLiveDrawingShape.getId());a._removeShapeById(i._currentLiveDrawingShape.getId()),n.setId(t.liveEventCommonData.eventId),a._appendShape(t.liveEventCommonData.eventId,n),a._onShapeUpdatedCallbacks.fire(a,n),n._tempId=t.liveEventCommonData.eventId,i._currentLiveDrawingWhiteboardId=void 0,i._currentLiveDrawingShape.finishDrawing(),i._currentLiveDrawingShape=void 0}},drawCircle:function(e,t){console.debug("WCSWhiteboardHandler: drawCircle",e,t);var i=e.getWhiteboard().getSurfaceById(t.data.groupId);if(i){var a=this._shapeConverter.convertCircle(t,e._selfParticipant.getId());i._appendShape(t.liveEventCommonData.eventId,a),i._onShapeAddedCallbacks.fire(i,a)}},drawText:function(e,t){console.debug("WCSWhiteboardHandler: drawText",e,t);var i=e.getWhiteboard().getSurfaceById(t.data.groupId);if(i){var a=this._shapeConverter.convertText(t,e._selfParticipant.getId());i._appendShape(t.liveEventCommonData.eventId,a),i._onShapeAddedCallbacks.fire(i,a)}},clearDrawing:function(e,t){console.debug("WCSWhiteboardHandler: clearDrawing",e,t);var i=e.getWhiteboard().getSurfaceById(t.data.groupId);i&&(i._clearShapes(),i._onSurfaceClearedCallbacks.fire(i))},moveSelection:function(t,i){var a=t.getWhiteboard().getSurfaceById(i.data.groupId);if(a){var n=a._getShapeById(i.data.shapeId);n.setTranslation(new e.Services.Collaboration.Point(i.data.moveToX,i.data.moveToY)),a._onShapeUpdatedCallbacks.fire(a,n)}},deleteSelection:function(e,t){console.debug("WCSWhiteboardHandler: deleteSelection",e,t);var i=e.getWhiteboard().getSurfaceById(t.data.groupId);if(i){var a=i._getShapeById(t.data.shapeId);a&&(i._onShapeDeletedCallbacks.fire(i,a),i._removeShapeById(a.getId()))}},_createNewSurface:function(t,i){var a=new e.Services.Collaboration.WhiteboardSurface(t,t._whiteboardService);return t.getSurfaces().push(a),a._surfaceId=i,a},_chooseNewActiveSurface:function(e,t){var i=e.getSurfaces(),a=e.getSurfaceById(t),n=i.indexOf(a);return e.getActiveSurface()._active=!1,0===n?i.length>1?(i[1]._active=!0,i[1]):(i[0]._active=!0,i[0]):(i[n-1]._active=!0,i[n-1])},_getParticipant:function(t,i){var a=t._participants.filter(function(e){return e.getId()===i.liveEventCommonData.senderId})[0];return a||((a=new e.Services.Collaboration.Participant)._id=i.liveEventCommonData.senderId,a._name=i.liveEventCommonData.senderName,t._participants.push(a)),a}},e.Providers.WCS.WCSWhiteboardHandler=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s){e.Providers.WCS.AbstractWCSProvider.call(this,t,i,a,n),this._meetingId=void 0,this._wcsContentSharingHandler=r,this._wcsWhiteboardHandler=s,this._version="1.1",this._bytesReceivedLastSecond=0}t.prototype=Object.create(e.Providers.WCS.AbstractWCSProvider.prototype),t.prototype.start=function(t,i){var a=$.Deferred();return this._config=t,this._meetingId=i,this._credentials=void 0,this._participant=void 0,this._networkProvider.onOpen=function(){console.log("Socket opened"),this._sendLiveSession().then(function(t){var i=e.Base.Utils.queryJSONObject(t,"response[0].live_session[0].live_attendee[0].attendee_id[0]._text");if(i){var n=e.Base.Utils.queryJSONObject(t,"response[0].live_session[0].live_attendee[0].user_name[0]._text");this._participant=new e.Services.Collaboration.Participant(i,n)}a.resolve(this._participant)}.bind(this),a.reject)}.bind(this),this._networkProvider._onCredentialsRequired=this._onCredentialsRequired.bind(this),this._networkProvider.onClose=function(){console.log("Socket was closed")},this._networkProvider.onError=function(e){console.log("Error on socket: ",e)},this._networkProvider.start(t.serverInfo,t.credentialProvider,{urlSuffix:"/wcsws/WebSocket"}),a.promise()},t.prototype.stop=function(){var e=$.Deferred();return this._networkProvider.onClose=function(){e.resolve()},this._networkProvider.onError=function(t){e.reject(t)},this._networkProvider.close(),e.promise()},t.prototype._sendLiveSession=function(){var t=Date.now(),i=e.Base.Utils.makeId(10,"abcdefgijklmnopqrstuvwxyz0123456789"),a="live_session?token="+this._credentials.token+"&brand=Avaya&meeting_id="+this._meetingId+"&participant_id="+this._credentials.participantId+"&username="+this._credentials.username+"&local_time="+t+"&session_id="+this._credentials.sessionId+"&remote_control_enabled=true&webserver_id=1000&private_chat_enabled=true&user_agent="+navigator.userAgent+"&client_version=PC;WebCollab;local_version&request_id="+i;return this._networkProvider.send(a)},t.prototype._onCredentialsRequired=function(t,i){e.Base.Utils.isUndefined(this._credentials)&&this._config.credentialProvider.onAuthenticationChallenge(void 0,function(e){this._onCredentialsRetrieved(e,i)}.bind(this))},t.prototype._onCredentialsRetrieved=function(e,t){this._credentials=e},t.prototype.observeCollaboration=function(e){this._networkProvider.onMessage=function(t){var i=[];if(t.data instanceof ArrayBuffer)this._updateReceivingBitrate(t.data.byteLength),i.push(this._wcsBinaryParser.parse(t.data));else{var a=this._wcsEventsParser.parse(t.data);$.each(a,function(e,t){i.push(t)}.bind(this))}i.forEach(function(t){this._delegateEvent(t,e)}.bind(this))}.bind(this)},t.prototype.startDrawShape=function(e,t){var i=this._wcsMessageBuilder.buildStartDrawShapeMessage(e,t,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(i).then(this._getEventIdFromResponse)},t.prototype.liveDrawShape=function(e){var t,i=e.getPointsToSend();return i&&i[0]&&i[0].isMove?(t=this._wcsMessageBuilder.buildFirstPointLiveDrawShapeMessage(i[0].point,this._meetingId,this._credentials.participantId,this._credentials.username),e.markPointsAsSent(1)):(t=this._wcsMessageBuilder.buildLiveDrawShapeMessage(i,this._meetingId,this._credentials.participantId,this._credentials.username),e.markPointsAsSent(e.getPoints().length)),this._networkProvider.send(t).then(this._getEventIdFromResponse)},t.prototype.endDrawShape=function(e,t){var i=this._wcsMessageBuilder.buildEndDrawShapeMessage(e,t,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(i).then(this._getEventIdFromResponse)},t.prototype.addShape=function(e,t){var i=this._wcsMessageBuilder.buildDrawShapeMessage(e,t,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(i).then(this._getEventIdFromResponse)},t.prototype.moveSelection=function(e,t,i){var a=this._wcsMessageBuilder.buildMoveSelectionMessage(e,t,i.getX(),i.getY(),this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(a).then(this._getEventIdFromResponse)},t.prototype._updateReceivingBitrate=function(e){this._bytesReceivedLastSecond+=e,setTimeout(function(){this._bytesReceivedLastSecond-=e}.bind(this),1e3)},t.prototype.getReceivingBitrate=function(){return 8*this._bytesReceivedLastSecond},t.prototype.addCircle=function(e,t){var i=this._wcsMessageBuilder.buildDrawCircleMessage(e,t,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(i).then(this._getEventIdFromResponse)},t.prototype.addText=function(e,t){var i=this._wcsMessageBuilder.buildDrawTextMessage(e,t,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(i).then(this._getEventIdFromResponse)},t.prototype.sendStartScreenSharing=function(){var e=this._wcsMessageBuilder.buildStartScreenSharingMessage(this._meetingId,this._participant._id,this._participant._name);return this._networkProvider.send(e)},t.prototype.sendLiveEvent=function(e){var t=this._wcsMessageBuilder.buildLiveEventMessage(e,this._meetingId,this._participant._id,this._participant._name);return this._networkProvider.send(t)},t.prototype.sendMessage=function(e){return this._networkProvider.send(e)},t.prototype.startWhiteboard=function(e){var t=this._wcsMessageBuilder.buildStartWhiteboardMessage(this._meetingId,this._participant._id,this._participant._name,e);return this._networkProvider.send(t)},t.prototype.endWhiteboard=function(e){var t=this._wcsMessageBuilder.buildEndWhiteboardMessage(this._meetingId,this._participant._id,this._participant._name);return this._networkProvider.send(t)},t.prototype.addWhiteboardSurface=function(){var e=this._wcsMessageBuilder.buildAddWhiteboardMessage(this._meetingId,this._participant._id,this._participant._name);return this._networkProvider.send(e)},t.prototype.removeWhiteboardSurface=function(e){var t=this._wcsMessageBuilder.buildRemoveWhiteboardMessage(e,this._meetingId,this._participant._id,this._participant._name);return this._networkProvider.send(t)},t.prototype.removeShape=function(e,t,i){var a=this._wcsMessageBuilder.buildDeleteSelectionMessage(e,t,i.getX(),i.getY(),this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(a)},t.prototype.clearContent=function(e){var t=this._wcsMessageBuilder.buildClearContentMessage(e,this._meetingId,this._credentials.participantId,this._credentials.username);return this._networkProvider.send(t)},t.prototype.getParticipants=function(){var t=this._wcsMessageBuilder.buildGetParticipantsMessage(!1);return this._networkProvider.send(t).then(function(t){for(var i=[],a=this._wcsEventsParser.parse(t),n=0;n<a[0].data.liveAttendees.length;n++){var r=e.Base.Utils.queryJSONObject(a[0],"data.liveAttendees["+n+"].attendeeId"),s=e.Base.Utils.queryJSONObject(a[0],"data.liveAttendees["+n+"].userIp"),o=e.Base.Utils.queryJSONObject(a[0],"data.liveAttendees["+n+"].userName");i.push(new e.Services.Collaboration.Participant(r,o,s))}return i}.bind(this))},t.prototype.isOpened=function(){return this._networkProvider.isOpened()},t.prototype.isFeatureAvailable=function(t){switch(t){case e.Services.Collaboration.FeaturesAvailable.LIBRARY:case e.Services.Collaboration.FeaturesAvailable.POLLING:case e.Services.Collaboration.FeaturesAvailable.MINUTES:case e.Services.Collaboration.FeaturesAvailable.WHITEBOARD:case e.Services.Collaboration.FeaturesAvailable.MESSAGES:case e.Services.Collaboration.FeaturesAvailable.REPORTS:case e.Services.Collaboration.FeaturesAvailable.SCREEN_SHARING:case e.Services.Collaboration.FeaturesAvailable.SLIDER:case e.Services.Collaboration.FeaturesAvailable.REMOTE_CONTROL:return!0}return!1},t.prototype._delegateEvent=function(t,i){if(!e.Base.Utils.isUndefined(t)&&!e.Base.Utils.isUndefined(t.type))switch(t.type){case e.Providers.WCS.WCSScreenSharingTagTypes.CURSOR_TAG:this._wcsContentSharingHandler.updateCursor(i,t);break;case e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG:case e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG:case e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG:this._wcsContentSharingHandler.updateFrame(i,t);break;case e.Providers.WCS.WCSEventTypes.START_SCREEN_SHARING:this._wcsContentSharingHandler.startScreenSharing(i,t);break;case e.Providers.WCS.WCSEventTypes.PAUSE_SCREEN_SHARING:this._wcsContentSharingHandler.pauseScreenSharing(i,t);break;case e.Providers.WCS.WCSEventTypes.END_SCREEN_SHARING:this._wcsContentSharingHandler.endScreenSharing(i,t);break;case e.Providers.WCS.WCSEventTypes.FRAME_REPORT:this._wcsContentSharingHandler.frameReport(i,t);break;case e.Providers.WCS.WCSEventTypes.START_WHITEBOARD:this._wcsWhiteboardHandler.startWhiteboard(i,t);break;case e.Providers.WCS.WCSEventTypes.ADD_WHITEBOARD:this._wcsWhiteboardHandler.addWhiteboard(i,t);break;case e.Providers.WCS.WCSEventTypes.END_WHITEBOARD:this._wcsWhiteboardHandler.endWhiteboard(i,t);break;case e.Providers.WCS.WCSEventTypes.DELETE_WHITEBOARD:this._wcsWhiteboardHandler.deleteWhiteboard(i,t);break;case e.Providers.WCS.WCSEventTypes.START_DRAW_SHAPE:this._wcsWhiteboardHandler.startDrawShape(i,t);break;case e.Providers.WCS.WCSEventTypes.DRAW_SHAPE:this._wcsWhiteboardHandler.drawShape(i,t);break;case e.Providers.WCS.WCSEventTypes.END_DRAW_SHAPE:this._wcsWhiteboardHandler.endDrawShape(i,t);break;case e.Providers.WCS.WCSEventTypes.DRAW_CIRCLE:this._wcsWhiteboardHandler.drawCircle(i,t);break;case e.Providers.WCS.WCSEventTypes.MOVE_SELECTION:this._wcsWhiteboardHandler.moveSelection(i,t);break;case e.Providers.WCS.WCSEventTypes.DRAW_TEXT:this._wcsWhiteboardHandler.drawText(i,t);break;case e.Providers.WCS.WCSEventTypes.DELETE_SELECTION:this._wcsWhiteboardHandler.deleteSelection(i,t);break;case e.Providers.WCS.WCSEventTypes.CLEAR_DRAWING:this._wcsWhiteboardHandler.clearDrawing(i,t)}},t.prototype._getEventIdFromResponse=function(t){return e.Base.Utils.queryJSONObject(t,"response[0].live_event[0].event_id[0]._text")},e.Providers.WCS.WCSv1_1Provider=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={buildClientSDPRequest:function(t,i,a,n){var r={transId:n.toString(),version:"1.0",token:"",displayName:i,destinationAddress:a+"@scopia.avaya.com",sdp:t};return this._wrapParams(e.Providers.WSP.WSPMessageTypes.CLIENT_SDP_REQUEST,r)},buildDisconnectRequest:function(t){var i={transId:t.toString(),reasonCode:"closed",displayText:"Closed connection"};return this._wrapParams(e.Providers.WSP.WSPMessageTypes.DISCONNECT_REQUEST,i)},buildServerSDPResponse:function(t,i){var a={transId:i.toString(),sdp:t};return this._wrapParams(e.Providers.WSP.WSPMessageTypes.SERVER_SDP_RESPONSE,a)},buildDisconnectResponse:function(t){var i={transId:t.toString()};return this._wrapParams(e.Providers.WSP.WSPMessageTypes.DISCONNECT_RESPONSE,i)},_wrapParams:function(e,t){return{protocolType:"WSP",name:e,params:t}}},e.Providers.WSP.WSPMessageBuilder=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Providers.WSP.WSPMessageTypes={CLIENT_SDP_REQUEST:"clientSdpRequest",CLIENT_SDP_RESPONSE:"clientSdpResponse",SERVER_SDP_REQUEST:"serverSdpRequest",SERVER_SDP_RESPONSE:"serverSdpResponse",DISCONNECT_REQUEST:"disconnectRequest",DISCONNECT_RESPONSE:"disconnectResponse"}}(),function(e,t){"use strict";function i(t,i){e.Providers.Interfaces.CallSignalingProvider.call(this),this._networkProvider=t,this._wspMessageBuilder=i,this._config=void 0}i.prototype=Object.create(e.Providers.Interfaces.CallSignalingProvider.prototype),i.prototype.start=function(e){this._config=e;var i=t.Deferred();return this._networkProvider._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._networkProvider.onOpen=function(){this._networkProvider.onClose=function(){},i.resolve()}.bind(this),this._networkProvider.onClose=function(){i.reject()},this._networkProvider.onMessage=function(e){"serverSdpRequest"===e.name&&this.trigger("serverSdpRequest",[e]),"disconnectRequest"===e.name&&this.trigger("disconnectRequest",[e])}.bind(this),this._networkProvider.start(e.serverInfo,e.credentialProvider,{urlSuffix:"/uwd/ws",transactionIDLocation:"params.transId"}),i.promise()},i.prototype.onCredentialsRequired=function(e){this._config.credentialProvider.onAuthenticationChallenge(void 0,function(t){this.onCredentialsRetrieved(t,e)}.bind(this))},i.prototype.onCredentialsRetrieved=function(e,t){if(t.options=t.options||{},!t.options.alreadyApplied){if(t.message){var i=JSON.parse(t.message);void 0!==i.params.token&&(i.params.token=e.token),t.message=JSON.stringify(i)}else{var a=t.options.urlSuffix.indexOf("?ticket=");a>-1&&(t.options.urlSuffix=t.options.urlSuffix.slice(a)),t.options.urlSuffix+="?ticket="+e.token}t.options.alreadyApplied=!0}},i.prototype.sendSDP=function(e,i,a,n){var r=t.Deferred(),s=this._wspMessageBuilder.buildClientSDPRequest(e,i,a,n);return this._networkProvider.send(JSON.stringify(s)).then(function(e){"200"===e.params.responseCode?r.resolve(e):r.reject({name:"WSPServerError",code:e.params.responseCode,message:"WSP server responded with "+e.params.responseCode})},function(e){r.reject(e)}),r.promise()},i.prototype.disconnect=function(e){var t=this._wspMessageBuilder.buildDisconnectRequest(e);return this._networkProvider.send(JSON.stringify(t))},i.prototype.answerSDP=function(e,t){var i=this._wspMessageBuilder.buildServerSDPResponse(e,t);return this._networkProvider.send(JSON.stringify(i))},i.prototype.sendDisconnectResponse=function(e){var t=this._wspMessageBuilder.buildDisconnectResponse(e);return this._networkProvider.send(JSON.stringify(t))},i.prototype.stop=function(e){this._removeListeners();var i=t.Deferred();this._networkProvider.onClose=function(){i.resolve()},this._networkProvider.onError=function(e){this._networkProvider.close(),i.reject(e)}.bind(this);try{this.disconnect(e).then(function(){this._networkProvider.close()}.bind(this))}catch(e){this._networkProvider.close(),i.resolve()}return i.promise()},e.Providers.WSP.WSPProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Services.Call.CallDenialReason={BUSY:"BUSY ",FORBIDDEN:"NONE",TEMPORARILY_UNAVAILABLE:"REMOTE_CALL_ESTABLISHED"}}(),function(){"use strict";AvayaClientServices.Services.Call.CallDetails=function(e,t,i,a,n,r){this.callId=e,this.callingParticipant=t,this.calledParticipant=i,this.participants=a,this.connectionId=n,this.status=r}}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";function i(t,i){this._providerFactory=i,this._callService={},this._callManager=new e.Services.Call.CallManager,this.calls=void 0,this._callProvider={},this._participantService=void 0,this._chatService=void 0,this._conferenceService=void 0}i.prototype={init:function(t){this._callProvider=this._providerFactory.getCallProviders(t)[0],this._chatService=new e.Services.Conference.ChatService(this._callProvider._conferenceProvider),this._conferenceService=new e.Services.Conference.ConferenceService(this._callProvider._conferenceProvider),this._participantService=new e.Services.Conference.ParticipantService(this._callProvider._conferenceProvider),this._callService=new e.Services.Call.CallService(t,this._callProvider,this._callManager,this._conferenceService,this._participantService,this._chatService),this.calls=new e.Services.Call.Calls(this._callManager,this._callService)}},e.Services.Call.CallFactory=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this._incomingCallCallbacks=t.Callbacks(),this._calls=[]}i.prototype={createCall:function(t){var i=new e.Services.Call.Call(t);return this._calls.push(i),t.isVideoEnabled()?i._videoChannelsCapability._updateIfChanged(!0,"Application supports video"):i._videoChannelsCapability._updateIfChanged(!1,"Application does not support video"),i},deleteCall:function(e){var t=this._calls.indexOf(e);t>-1&&this._calls.splice(t,1)},getCallCount:function(){return this._calls.length},hasActiveCall:function(){for(var t in this._calls)if(t.getState()===e.Services.Call.CallStates.ESTABLISHED||t.getState()===e.Services.Call.CallStates.ACTIVE)return!0;return!1},hasHeldCall:function(){for(var t in this._calls)if(t.getState()===e.Services.Call.CallStates.HELD)return!0;return!1},hasInitiatingCall:function(){for(var t in this._calls)if(t.getState()===e.Services.Call.CallStates.STARTING||t.getState()===e.Services.Call.CallStates.INCOMING)return!0;return!1}},e.Services.Call.CallManager=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t,i,a,n,r,s){e.Base.Observable.call(this),this._config=t,this._callProvider=i,this._callManager=a,this._conferenceService=n,this._participantService=r,this._chatService=s,this._callProvider.on(e.Providers.Interfaces.CallProviderCallbackIds.INCOMING_CALL,function(t,i,a){var n=this._callManager.createCall(this);n.setCallId(t),n.setRemoteAddress(i),n.setRemoteDisplayName(a),n._setState(e.Services.Call.CallStates.INCOMING),this.trigger(e.Providers.Interfaces.CallServiceCallbackIds.INCOMING_CALL,[n])}.bind(this))}i.prototype=Object.create(e.Base.Observable.prototype),i.prototype.startCall=function(t){return e.Base.Logger.info("Call Service is starting..."),this._registerCallbacks(),this._callProvider.startCall(t,this.isVideoEnabled(),this.isWebCollaborationEnabled())},i.prototype.endCall=function(e){return this._callProvider.stopCall(e).then(function(t){return e._localVideoRemovedCallbacks.fire(e),e._remoteVideoRemovedCallbacks.fire(e),t})},i.prototype.mute=function(e){var t=this._callProvider.muteAudio(e,!0);return t.then(function(){e._isAudioMuted=!0,e._onCallAudioMuteStatusChangedCallbacks.fire(e,!0)}),t},i.prototype.unmute=function(e){var t=this._callProvider.muteAudio(e,!1);return t.then(function(){e._isAudioMuted=!1,e._onCallAudioMuteStatusChangedCallbacks.fire(e,!1)}),t},i.prototype.hold=function(t){var i=this._callProvider.hold(t);return i.then(function(){t._setState(e.Services.Call.CallStates.HELD),t._onCallHeldCallbacks.fire(t)}),i},i.prototype.unhold=function(t){var i=this._callProvider.unhold(t);return i.then(function(){t._setState(e.Services.Call.CallStates.ACTIVE),t._onCallUnheldCallbacks.fire(t)}),i},i.prototype.accept=function(e){return this._registerCallbacks(),this._callProvider.accept(e)},i.prototype.setRemoteParticipant=function(e){},i.prototype.start=function(e){return this._callProvider.start(e)},i.prototype.stop=function(){return this._callProvider.stop()},i.prototype.isVideoEnabled=function(){return!e.Base.Utils.isDefined(this._config.callUserConfiguration)||!e.Base.Utils.isDefined(this._config.callUserConfiguration.videoEnabled)||this._config.callUserConfiguration.videoEnabled},i.prototype.isWebCollaborationEnabled=function(){return!e.Base.Utils.isDefined(this._config.wcsConfiguration)||!e.Base.Utils.isDefined(this._config.wcsConfiguration.enabled)||this._config.wcsConfiguration.enabled},i.prototype._registerCallbacks=function(){var t=e.Providers.Interfaces.CallProviderCallbackIds;this._callProvider.on(t.CONFERENCE_ESCALATION,function(t,i,a){var n=new e.Services.Conference.Chat(this._chatService);t._conference=new e.Services.Conference.Conference(this._conferenceService,this._participantService,n),e.Base.Utils.isDefined(a)&&(t._conference._collaborationURI=a),t._onCallConferenceStatusChangedCallbacks.fire(t,!0,i,a)}.bind(this)),this._callProvider.on(t.CALL_STARTED,function(e){e._onCallStartedCallbacks.fire(e)}.bind(this)),this._callProvider.on(t.CALL_RINGING,function(t){t._setState(e.Services.Call.CallStates.ALERTING),t._onCallRemoteAlertingCallbacks.fire(t)}.bind(this)),this._callProvider.on(t.CALL_ESTABLISHED,function(t,i){t._setState(e.Services.Call.CallStates.ESTABLISHED),t._onCallEstablishedCallbacks.fire(t)}.bind(this)),this._callProvider.on(t.LOCAL_STREAM_ADDED,function(e,t){t.getVideoTracks()[0]&&e._localVideoAddedCallbacks.fire(e,t)}.bind(this)),this._callProvider.on(t.REMOTE_STREAM_ADDED,function(e,t){t.getVideoTracks()[0]&&e._remoteVideoAddedCallbacks.fire(e,t)}.bind(this)),this._callProvider.on(t.CALL_ENDED,function(t,i){t._setState(e.Services.Call.CallStates.ENDED),t._onCallEndedCallbacks.fire(t,i),this._callManager.deleteCall(t)}.bind(this))},i.prototype._buildUccpConfig=function(e){var t=this._config.uccpConfiguration;return t.serverInfo.webSocketURL=e,t},e.Services.Call.CallService=i}(window.AvayaClientServices=window.AvayaClientServices||{},window.jQuery=window.jQuery||{}),function(e,t){"use strict";e.Services.Call.CallStates={ACTIVE:"active",FAILED:"failed",ANSWERED:"answered",INCOMING:"incoming",ALERTING:"alerting",HELD:"held",ENDED:"ended",REMOTELY_ENDED:"remotely ended",STARTING:"starting",ENDING:"ending",ACCEPTING:"accepting",HOLDING:"holding",UNHOLDING:"unholding",REMOTELY_HELD:"remotely held",ESTABLISHED:"established"}}(window.AvayaClientServices=window.AvayaClientServices||{},window.jQuery=window.jQuery||{}),function(e,t){"use strict";function i(i){this._callService=i,this._conference="",this._remoteAddress="",this._remoteDisplayName="",this._callId=void 0,this._incoming=!1,this._startTime=void 0,this._holdTime=void 0,this._calledParticipant=void 0,this._callingParticipant=void 0,this._activeParticipants=[],this._scopiaToken=void 0,this._callState="",this._isOTTCall=!1,this._isWebRTCConf=!1,this._confEntryOptions=void 0,this._videoChannels=void 0,this._participantDroppedCallbacks=t.Callbacks(),this._onCallStartedCallbacks=t.Callbacks(),this._onCallRemoteAlertingCallbacks=t.Callbacks(),this._onCallRedirectedCallbacks=t.Callbacks(),this._onCallQueuedCallbacks=t.Callbacks(),this._onCallIgnoredCallbacks=t.Callbacks(),this._onCallEstablishedCallbacks=t.Callbacks(),this._onCallRemoteAddressChangedCallbacks=t.Callbacks(),this._onCallHeldCallbacks=t.Callbacks(),this._onCallUnheldCallbacks=t.Callbacks(),this._onCallHeldRemotelyCallbacks=t.Callbacks(),this._onCallUnheldRemotelyCallbacks=t.Callbacks(),this._onCallJoinedCallbacks=t.Callbacks(),this._onCallEndedCallbacks=t.Callbacks(),this._onCallAudioMuteStatusChangedCallbacks=t.Callbacks(),this._onCallIncomingVideoAddRequestReceivedCallbacks=t.Callbacks(),this._onCallIncomingVideoAddRequestAcceptedCallbacks=t.Callbacks(),this._onCallIncomingVideoAddRequestDeniedCallbacks=t.Callbacks(),this._onCallIncomingVideoAddRequestTimedoutCallbacks=t.Callbacks(),this._onCallDeniedCallbacks=t.Callbacks(),this._onCallConferenceStatusChangedCallbacks=t.Callbacks(),this._localVideoAddedCallbacks=t.Callbacks(),this._remoteVideoAddedCallbacks=t.Callbacks(),this._localVideoRemovedCallbacks=t.Callbacks(),this._remoteVideoRemovedCallbacks=t.Callbacks(),this._callFailedCallbacks=t.Callbacks(),this._callServiceAvailableCallbacks=t.Callbacks(),this._callServiceUnavailableCallbacks=t.Callbacks(),this._isAudioMuted=!1,this._muteCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._videoChannelsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={setRemoteAddress:function(e){this._remoteAddress=e,this._callService.setRemoteParticipant(this)},getRemoteAddress:function(){return this._remoteAddress},getRemoteDisplayName:function(){return this._remoteDisplayName},isIncoming:function(){return this._incoming},getStartTime:function(){return this._startTime},getHoldTime:function(){return this._holdTime},setRemoteDisplayName:function(e){this._remoteDisplayName=e},getRemoteParticipant:function(){return this._calledParticipant.isSelf()?this._callingParticipant:this._calledParticipant},start:function(){return this._callState=e.Services.Call.CallStates.STARTING,this._callService.startCall(this)},end:function(){return this._callState=e.Services.Call.CallStates.ENDING,this._callService.endCall(this)},getConference:function(){return this._conference},hold:function(){this._callState=e.Services.Call.CallStates.HOLDING},unhold:function(){this._callState=e.Services.Call.CallStates.UNHOLDING},ignore:function(){},accept:function(){this._callState=e.Services.Call.CallStates.ACCEPTING,this._callService.accept(this)},deny:function(){return this.end(this)},denyWithReason:function(e){},sendDTMF:function(e){},getState:function(){return this._callState},getRemoteName:function(){return this._remoteDisplayName},getRemoteNumber:function(){return this._remoteAddress},isConference:function(){return void 0!==this._conference},canAutoAnswer:function(){},isIgnored:function(){},isRemote:function(){},isHeldRemotely:function(){},isMissed:function(){},isCallerIdentityPrivate:function(){},isServiceAvailable:function(){},getAlertType:function(){},getSubject:function(){},getCallEstablishedTimeStamp:function(){},getCallHeldTimeStamp:function(){},setSubject:function(e){},join:function(){},acceptVideo:function(e){},denyVideo:function(){},getVideoChannels:function(){return this._videoChannels},setVideoChannels:function(e){this._videoChannels=e},removeAllVideoChannels:function(){},getIncomingVideoOffered:function(){},getAudioOnlyChannelId:function(){return this._videoChannels?1:void 0},getCallId:function(){return this._callId},setCallId:function(e){this._callId=e},isAudioMuted:function(){return this._isAudioMuted},muteAudio:function(){var e=t.Deferred();return!1===this._isAudioMuted?this._callService.mute(this).then(function(){this._isAudioMuted=!0,this._muteCapability._updateIfChanged(!1,"Muted"),e.resolve()}.bind(this),function(t){e.reject("Failed to mute audio: "+t)}.bind(this)):e.reject("Audio already muted"),e},unmuteAudio:function(){var e=t.Deferred();return!0===this._isAudioMuted?this._callService.unmute(this).then(function(){this._isAudioMuted=!1,this._muteCapability._updateIfChanged(!0,"Unmuted"),e.resolve()}.bind(this),function(t){e.reject("Failed to unmute audio: "+t)}.bind(this)):e.reject("Audio is already unmuted"),e},transfer:function(e){},attendedTransfer:function(e){},setConferenceEntryOptions:function(e){this._confEntryOptions=e},getConferenceEntryOptions:function(){return this._confEntryOptions},_setState:function(e){this._callState=e}},e.Services.Call.Call=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(i,a){this._callManager=i,this._callService=a,this._callCreatedCallbacks=t.Callbacks(),this._callRemovedCallbacks=t.Callbacks(),this._incomingCallCallbacks=t.Callbacks(),this._undeliveredCallCallbacks=t.Callbacks(),this._callService.on(e.Providers.Interfaces.CallServiceCallbackIds.INCOMING_CALL,function(e){this._incomingCallCallbacks.fire(e)}.bind(this))}i.prototype={createCall:function(){return this._callManager.createCall(this._callService)},getCallCount:function(){return this._callManager.getCallCount()},getVideoCapability:function(){},hasActiveCall:function(){return this._callManager.hasActiveCall()},hasActiveLocalCall:function(){},hasHeldCall:function(){return this._callManager.hasHeldCall()},hasInitiatingCall:function(){return this._callManager.hasInitiatingCall()},isAutoAnswerAdministered:function(){},_start:function(e){return this._callService.start(e)},_stop:function(){return this._callService.stop()}},e.Services.Call.Calls=i}(window.AvayaClientServices=window.AvayaClientServices||{},window.jQuery=window.jQuery||{}),function(e){"use strict";function t(t,i,a,n){this._token=t,this._isOTT=!!e.Base.Utils.isDefined(i)&&i,this._meetingId=e.Base.Utils.isDefined(a)?a:null,this._passcode=e.Base.Utils.isDefined(n)?n:null,this._isWebRTCAbleConf=this._isOTT,this._useDTLS=!1}t.prototype={getToken:function(){return this._token},setToken:function(e){this._token=e},isOTT:function(){return this._isOTT},enableOTT:function(e){this._isOTT=e,this._isWebRTCAbleConf=this._isOTT},getMeetingId:function(){return this._meetingId},setMeetingId:function(e){this._meetingId=e},getPasscode:function(){return this._passcode},setPasscode:function(e){this._passcode=e},enableDtlsSrtpKeyAgreement:function(e){this._useDTLS=e},isDtlsSrtpKeyAgreement:function(){return this._useDTLS},setWebRTCAbleConference:function(e){this._isWebRTCAbleConf=e},isWebRTCAbleConference:function(){return this._isWebRTCAbleConf}},e.Services.Call.ConferenceEntryOptions=t}(AvayaClientServices),function(e,t){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Services.Call.DTMFType={A:"A",B:"B",C:"C",D:"D",STAR:"*",POUND:"#",ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,SIX:6,SEVEN:7,EIGHT:8,NINE:9,ZERO:0}}(),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Services.Call.MediaDirection={RECV_ONLY:"recvonly",SEND_ONLY:"sendonly",SEND_RECV:"sendrecv",INACTIVE:"inactive",UNDEFINED:"undefined"}}(),function(e){"use strict";function t(e,t){this._remoteAddress=e.address,this._number=e.number,this._contact=void 0,this._self=t,this._audioMuted=!1,this._handRaised=!1,this._lecturer=!1,this._moderator=!1,this._presenter=!1}t.prototype={getRemoteAddress:function(){return this._remoteAddress},getRemoteDisplayName:function(){},isAudioMuted:function(){return this._audioMuted},isHandRaised:function(){return this._handRaised},isLecturer:function(){return this._lecturer},isModerator:function(){return this._moderator},isPresenter:function(){return this._presenter},hasContact:function(){return void 0!==this._contact},isSelf:function(){return this._self},getContact:function(){return this._contact}},e.Services.Call.Participant=t}(AvayaClientServices),function(e){"use strict";function t(){this._activeParticipants=[],this._selfParticipant=void 0}t.prototype={getOrCreateParticipant:function(t){var i=t.address,a=this._getParticipant(i);if(!a){var n=!!this._selfParticipant&&this._selfParticipant.getRemoteAddress()===i;a=new e.Services.Messaging.Participant(t,n),this._activeParticipants.push(a)}return a},_getParticipant:function(e){return this._activeParticipants.filter(function(t){return t.getAddress()===e})[0]},setSelfParticipant:function(e){this._selfParticipant=e,this._selfParticipant.self=!0},getSelfParticipant:function(){return this._selfParticipant}},e.Services.Call.ParticipantService=t}(AvayaClientServices),function(e,t){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Services.Call.TransferProgressCode={ACCEPTED:"ACCEPTED",NONE:"NONE",REMOTE_CALL_ESTABLISHED:"REMOTE_CALL_ESTABLISHED",REMOTE_CALL_IN_PROGRESS:"REMOTE_CALL_IN_PROGRESS",REMOTE_CALL_STARTED:"REMOTE_CALL_STARTED",STARTED:"STARTED"}}(),function(e,t){"use strict";function i(e){this._channelId=e,this._requestedDirection=void 0,this._negotiatedDirection=void 0}i.prototype={getNegotiatedDirection:function(e){return this._negotiatedDirection},getRequestedDirection:function(){return this._requestedDirection},setRequestedDirection:function(e){this._requestedDirection=e},_setNegotiatedDirection:function(e){this._negotiatedDirection=e}},e.Services.Call.VideoChannel=i}(AvayaClientServices,jQuery),function(e){"use strict";(window.AvayaClientServices=window.AvayaClientServices||{}).Services.Call.VideoNetworkSignalingType={INDEFINITE:"indefinite",OFF:"off",SUPPORTED:"supported"}}(),function(e){"use strict";function t(e,t){var i=t.getCollaborationProviders(e);this._whiteboardService=this._createWhiteboardService(i[0]),this._collaborationService=this._createCollaborationService(i[0]),this._contentSharingService=this._createContentSharingService(i[0])}t.prototype={create:function(){var t=this._createWhiteboard(),i=this._createContentSharing();return new e.Services.Collaboration.Collaboration(this._collaborationService,t,i)},_createCollaborationService:function(t){return this._identity=void 0,this._collaborationProviderInitialized=!1,new e.Services.Collaboration.CollaborationService(t)},_createWhiteboardService:function(t){return new e.Services.Collaboration.WhiteboardService(t)},_createContentSharingService:function(t){var i=new e.Providers.ContentSharing.ScreenSharingProviderFactory(t);return new e.Services.Collaboration.ContentSharingService(t,i.getScreenSharingProvider())},_createWhiteboard:function(){return new e.Services.Collaboration.Whiteboard(this._whiteboardService)},_createContentSharing:function(){return new e.Services.Collaboration.ContentSharing(this._contentSharingService)}},e.Services.Collaboration.CollaborationFactory=t}(AvayaClientServices),function(e){"use strict";function t(e){this._collaborationProvider=e,this._collaborationProviderInitialized=!1,this._whiteboards={},this._nextCollaborationId=1}t.prototype={start:function(t,i,a){return e.Base.Logger.debug("CollaborationService start"),this._collaborationProvider.start(i,a).then(function(e){t._selfParticipant=e,t._participants.push(e),t._participants.onDataSetChanged(),this._collaborationProvider.observeCollaboration(t),t.getContentSharing()._recalculateShareApplicationWindowCapability(),t.getContentSharing()._recalculateShareFullScreenCapability(),this._recalculateAllCollaborationCapabilities(t)}.bind(this))},stop:function(t){return e.Base.Logger.debug("CollaborationService start"),t._selfParticipant=void 0,t._participants.length=0,t._participants.onDataSetChanged(),t._onCollaborationStartedCallbacks.empty(),t._onCollaborationEndedCallbacks.empty(),t._onCollaborationServiceAvailableCallbacks.empty(),t._onCollaborationServiceUnavailableCallbacks.empty(),t._onCollaborationNearEndByEjectCallbacks.empty(),t._onCollaborationPresenterPrivilegeChangedCallbacks.empty(),t._onCollaborationModeratorPrivilegeChangedCallbacks.empty(),t._onCollaborationInitializedCallbacks.empty(),t._onCollaborationGetParticipantsResultCallbacks.empty(),t._isPaused=!1,t._callId=void 0,this._collaborationProvider.stop()},getNextCollaborationId:function(){return this._nextCollaborationId++},getParticipants:function(t){e.Base.Logger.debug("getParticipants"),this._collaborationProvider.getParticipants(t).then(function(e){this.updateParticipantList(t,e),t._onCollaborationGetParticipantsResultCallbacks.fire(t._participants)}.bind(this))},updateParticipantList:function(e,t){function i(e,i){return i.getId()===t[e].getId()}for(var a=!1,n=0;n<t.length;n++){0===e._participants.filter(i.bind(this,n)).length&&(e._participants.push(t[n]),a=!0)}a&&e._participants.onDataSetChanged()},_recalculateAllCollaborationCapabilities:function(e){e._recalculateContentSharingCapability()}},e.Services.Collaboration.CollaborationService=t}(AvayaClientServices),function(e,t){"use strict";function i(i,a,n){this._collaborationService=i,this._whiteboard=a,this._contentSharing=n,this._collaborationId=i?i.getNextCollaborationId():void 0,this._callId=void 0,this._participants=new e.Base.DataSet,this._selfParticipant=void 0,this._onCollaborationStartedCallbacks=t.Callbacks("unique"),this._onCollaborationEndedCallbacks=t.Callbacks("unique"),this._onCollaborationServiceAvailableCallbacks=t.Callbacks("unique"),this._onCollaborationServiceUnavailableCallbacks=t.Callbacks("unique"),this._onCollaborationNearEndByEjectCallbacks=t.Callbacks("unique"),this._onCollaborationPresenterPrivilegeChangedCallbacks=t.Callbacks("unique"),this._onCollaborationModeratorPrivilegeChangedCallbacks=t.Callbacks("unique"),this._onCollaborationInitializedCallbacks=t.Callbacks("unique"),this._onCollaborationGetParticipantsResultCallbacks=t.Callbacks("unique"),this._isPaused=!1,this._contentSharingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={start:function(e,t){return this._collaborationService.start(this,e,t)},stop:function(){return this._contentSharing.end(),this._whiteboard.stop(),this._collaborationService.stop(this)},getContentSharing:function(){return this._contentSharing},getLibraryManager:function(){},getLibrarySharing:function(){},getWhiteboard:function(){return this._whiteboard},getParticipants:function(){return this._collaborationService.getParticipants(this),this._participants},getCallId:function(){return this._callId},getCollaborationId:function(){return this._collaborationId},hasPresenterPrivilege:function(){},isEjected:function(){},hasModeratorPrivilege:function(){}},e.Services.Collaboration.Collaboration=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e,t,i,a,n,r){this._x=e,this._y=t,this._width=i,this._height=a,this._bitmapData=r,this._imageType=n}t.prototype={getXOffset:function(){return this._x},getYOffset:function(){return this._y},getRawBitmapData:function(){return this._bitmapData},getBlobData:function(){var e=new Blob([this._bitmapData],{type:"image/"+(0===this._imageType?"jpeg":"png")});return window.URL.createObjectURL(e)},getBase64BitmapData:function(){return"data:image/"+(0===this._imageType?"jpeg":"png")+";base64,"+this._toBase64(this._bitmapData)},getWidth:function(){return this._width},getHeight:function(){return this._height},_toBase64:function(e){for(var t,i="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(e),r=n.byteLength,s=r%3,o=r-s,c=0;o>c;c+=3)i+=a[(16515072&(t=n[c]<<16|n[c+1]<<8|n[c+2]))>>18]+a[(258048&t)>>12]+a[(4032&t)>>6]+a[63&t];return 1===s?i+=a[(252&(t=n[o]))>>2]+a[(3&t)<<4]+"==":2===s&&(i+=a[(64512&(t=n[o]<<8|n[o+1]))>>10]+a[(1008&t)>>4]+a[(15&t)<<2]+"="),i}},e.Services.Collaboration.Bitmap=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Services.Collaboration.FeaturesAvailable={LIBRARY:"LIBRARY",POLLING:"POLLING",MINUTES:"MINUTES",WHITEBOARD:"WHITEBOARD",MESSAGES:"MESSAGES",REPORTS:"REPORTS",SCREEN_SHARING:"SCREEN_SHARING",SLIDER:"SLIDER",REMOTE_CONTROL:"REMOTE_CONTROL"}}(),function(e){"use strict";function t(e,t,i,a){this._keyFrame=a,this._height=t,this._width=e,this._bitmaps=i}t.prototype={getBitmaps:function(){return this._bitmaps},getWidth:function(){return this._width},getHeight:function(){return this._height},isKeyFrame:function(){return this._keyFrame}},e.Services.Collaboration.Frame=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Services.Collaboration.LibraryDocumentType={PRESENTATION:"PRESENTATION",DOCUMENT:"DOCUMENT",PICTURE:"PICTURE",UNKNOWN:"UNKNOWN"}}(),function(e){"use strict";function t(){}t.prototype={getPage:function(e){},getPagePreview:function(e){},getPageFileName:function(e){},getPagePreviewFileName:function(e){},getPageBaseUrl:function(e){}},e.Services.Collaboration.LibraryDocument=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this._x=e,this._y=t}t.prototype={getX:function(){return this._x},getY:function(){return this._y},setX:function(e){this._x=e},setY:function(e){this._y=e}},e.Services.Collaboration.Point=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Services.Collaboration.SelectionStatus={PENDING:"PENDING",CONFIRMED:"CONFIRMED",ERROR:"ERROR"}}(),function(e){"use strict";AvayaClientServices.Services.Collaboration.WhiteboardLineWidths={SMALL:"4",MEDIUM:"8",LARGE:"12"}}(),function(e){"use strict";AvayaClientServices.Services.Collaboration.WhiteboardTextSizes={SMALL:"19",MEDIUM:"23",LARGE:"27"}}(),function(e){"use strict";AvayaClientServices.Services.Collaboration.WhiteboardToolModes={STROKE:"STROKE",FILLED:"FILLED"}}(),function(e){"use strict";AvayaClientServices.Services.Collaboration.WhiteboardToolTypes={SELECTION:"SELECTION",RECTANGLE:"RECTANGLE",CIRCLE:"CIRCLE",MARKER:"MARKER",PEN:"PEN",LINE:"LINE",STAMP:"STAMP",TEXT:"TEXT",DELETE:"DELETE",CLEAR:"CLEAR"}}(),function(e){"use strict";function t(){this._contentSharing=void 0}t.prototype={init:function(e){this._contentSharing=e,e.addOnCursorReceivedCallback(function(e,t){this.showCursor(t)}.bind(this)),e.addOnContentSharingStartedCallback(function(e,t){this.start()}.bind(this)),e.addOnContentSharingEndedCallback(function(e,t){this.stop()}.bind(this)),e.addOnContentSharingPausedCallback(function(e,t){this.pause()}.bind(this)),e.addOnContentSharingResumedCallback(function(e,t){this.unpause()}.bind(this)),e.addOnFrameReceivedCallback(function(e,t){this.drawFrame(t)}.bind(this)),e.addOnFrameChangedCallback(function(e,t){this.drawFrame(t)}.bind(this))},showCursor:function(e){},start:function(){},stop:function(){},pause:function(){},unpause:function(){},drawFrame:function(e){}},e.Services.Collaboration.ContentSharingRenderer=t}(AvayaClientServices),function(e){"use strict";function t(t,a){this._collaborationProvider=t,this._contentSharingType=i.NONE,this._sharingState=e.Services.Collaboration.ContentSharingState.NOT_SHARING,this._contentSharing=void 0,this._screenSharingProvider=a}var i={NONE:"none",FULL_SCREEN_SHARING:"full screen",APPL_WINDOW_SHARING:"application window"};t.prototype={startScreenSharingFullScreen:function(t){return console.log("Content Screen Sharing Service: Start full screen sharing..."),this._contentSharing=t,this._contentSharingType=i.FULL_SCREEN_SHARING,this._initSharingEventHandler(t),this._screenSharingProvider.startFullScreen().then(function(t){return this._sharingState=e.Services.Collaboration.ContentSharingState.SHARING,t}.bind(this))},isSharingFullScreen:function(){return this._sharingState!==e.Services.Collaboration.ContentSharingState.NOT_SHARING&&this._contentSharingType===i.FULL_SCREEN_SHARING},startSharingApplicationWindow:function(t){return console.log("Content Screen Sharing Service: Start appl window sharing..."),this._contentSharing=t,this._contentSharingType=i.APPL_WINDOW_SHARING,this._initSharingEventHandler(t),this._screenSharingProvider.startApplicationWindow().then(function(t){return this._sharingState=e.Services.Collaboration.ContentSharingState.SHARING,t}.bind(this))},isSharingApplicationWindow:function(){return this._sharingState!==e.Services.Collaboration.ContentSharingState.NOT_SHARING&&this._contentSharingType===i.APPL_WINDOW_SHARING},end:function(){if(this._sharingState!==e.Services.Collaboration.ContentSharingState.NOT_SHARING)return console.log("Content Screen Sharing Service: Stop sharing..."),this._sharingState=e.Services.Collaboration.ContentSharingState.NOT_SHARING,this._removeSharingEventHandler(),this._screenSharingProvider.stop();var t=$.Deferred();return t.resolve(),t.promise()},isPresenting:function(){return this._sharingState!==e.Services.Collaboration.ContentSharingState.NOT_SHARING},pause:function(){if(this._sharingState===e.Services.Collaboration.ContentSharingState.SHARING)return console.log("Content Screen Sharing Service: Pause sharing..."),this._sharingState=e.Services.Collaboration.ContentSharingState.PAUSED,this._screenSharingProvider.pause();var t=$.Deferred();return t.resolve(),t.promise()},resume:function(){if(this._sharingState===e.Services.Collaboration.ContentSharingState.PAUSED)return console.log("Content Screen Sharing Service: Resume sharing..."),this._sharingState=e.Services.Collaboration.ContentSharingState.SHARING,this._screenSharingProvider.resume();var t=$.Deferred();return t.resolve(),t.promise()},getShareApplicationWindowCapability:function(){return this._screenSharingProvider.getShareApplicationWindowCapability()},getReceivingBitrate:function(){return this._collaborationProvider.getReceivingBitrate()},getShareFullScreenCapability:function(){return this._screenSharingProvider.getShareFullScreenCapability()},isOpened:function(){return this._screenSharingProvider.isOpened()},isFeatureAvailable:function(e){return this._collaborationProvider.isFeatureAvailable(e)},_initSharingEventHandler:function(e){this._startScreenSharingEventHandler=this._startScreenSharingHandler(),this._endScreenSharingEventHandler=this._endScreenSharingHandler(),e.addOnContentSharingStartedCallback(this._startScreenSharingEventHandler),e.addOnContentSharingEndedCallback(this._endScreenSharingEventHandler)},_removeSharingEventHandler:function(){this._contentSharing.removeOnContentSharingStartedCallback(this._startScreenSharingEventHandler),this._contentSharing.removeOnContentSharingEndedCallback(this._endScreenSharingEventHandler)},_startScreenSharingHandler:function(){return function(e){}.bind(this)},_endScreenSharingHandler:function(){return function(t){this._sharingState!==e.Services.Collaboration.ContentSharingState.NOT_SHARING&&this.end()}.bind(this)},_pauseScreenSharingHandler:function(e){return function(t){e._onContentSharingPausedCallbacks.fire(t)}},_recalculateAllContentSharingCapabilities:function(e){e._recalculateShareApplicationWindowCapability(),e._recalculateShareFullScreenCapability()}},e.Services.Collaboration.ContentSharingService=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Services.Collaboration.ContentSharingState={NOT_SHARING:"not sharing",SHARING:"sharing",PAUSED:"paused"}}(),function(e,t){"use strict";function i(i){this._contentSharingService=i,this._onContentSharingStartedCallbacks=t.Callbacks(),this._onContentSharingEndedCallbacks=t.Callbacks(),this._onContentSharingPausedCallbacks=t.Callbacks(),this._onContentSharingResumedCallbacks=t.Callbacks(),this._onCursorReceivedCallbacks=t.Callbacks(),this._onFrameStartReceivedCallbacks=t.Callbacks(),this._onFrameEndReceivedCallbacks=t.Callbacks(),this._onFrameReceivedCallbacks=t.Callbacks(),this._onFrameChangedCallbacks=t.Callbacks(),this._onBlockReceivedCallbacks=t.Callbacks(),this._onContentSharingRemoteControlEndCallbacks=t.Callbacks(),this._onContentSharingRemoteControlStartCallbacks=t.Callbacks(),this._onContentSharingRemoteControlOutgoingRequestDenyCallbacks=t.Callbacks(),this._onContentSharingRemoteControlOutgoingRequestGrantCallbacks=t.Callbacks(),this._onContentSharingRemoteControlIncomingOfferCallbacks=t.Callbacks(),this._onContentSharingRemoteControlIncomingDeclineCallbacks=t.Callbacks(),this._onContentSharingRemoteControlIncomingRequestCallbacks=t.Callbacks(),this._onFrameReportReceivedCallbacks=t.Callbacks(),this._shareApplicationWindowCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._shareFullScreenCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={startScreenSharingFullScreen:function(){return this._contentSharingService.startScreenSharingFullScreen(this)},isSharingFullScreen:function(){return this._contentSharingService.isSharingFullScreen()},getReceivingBitrate:function(){return this._contentSharingService.getReceivingBitrate()},startSharingApplicationWindow:function(){return this._contentSharingService.startSharingApplicationWindow(this)},isSharingApplicationWindow:function(){return this._contentSharingService.isSharingApplicationWindow()},end:function(){return this._contentSharingService.end()},isPresenting:function(){return this._contentSharingService.isPresenting()},pause:function(){return this._contentSharingService.pause()},resume:function(){return this._contentSharingService.resume()}},e.Services.Collaboration.ContentSharing=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){}t.prototype={getLibraryContent:function(){},deleteDocument:function(e,t){},renameDocument:function(e,t,i){},uploadDocument:function(e,t,i,a){}},e.Services.Collaboration.LibraryManager=t}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype={getContent:function(){},getDocument:function(e){},deleteDocument:function(e){},renameDocument:function(e,t){},uploadDocument:function(e){},getUploadDocumentProgress:function(){},cancelUploadDocument:function(){}},e.Services.Collaboration.LibraryManager=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={isPresenting:function(){},startSharing:function(e){},sharePage:function(e,t,i){},stopSharing:function(e){},addShape:function(e,t){},moveShape:function(e,t){},updateShape:function(e,t){},deleteShape:function(e,t){},getShapes:function(){},clearContent:function(){},onLibrarySharingStarted:function(e,t){},onLibrarySharingEnded:function(e){},onLibrarySharingDocumentPageContentReceived:function(e,t,i,a){}},e.Services.Collaboration.LibrarySharing=t}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";function t(){this._onLibrarySlideSharedCallback=$.Callbacks(),this._onLibrarySharingEndedCallback=$.Callbacks()}t.prototype={sharePage:function(e,t){},stopSharing:function(){},getSlides:function(){},getActiveSlide:function(){}},e.Services.Collaboration.LibrarySharing=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i){this._id=e,this._name=t,this._userIp=i}t.prototype={getId:function(){return this._id},getName:function(){return this._name},getUserIp:function(){return this._userIp}},e.Services.Collaboration.Participant=t}(AvayaClientServices),function(e){"use strict";function t(){this.possibleColors=["#cd2029","#f58521","#f3e913","#652d90","#3659a7","#2a8b45","#211e1e","#ffffff","#959595"],this._whiteboard=void 0,this._ended=!1}t.prototype={init:function(e,t){this._whiteboard=e,e.addOnWhiteboardStartedCallback(function(e,i){this._ended=!1,this.start(t)}.bind(this)),e.addOnWhiteboardEndedCallback(function(e){this._ended=!0,this.end()}.bind(this)),e.addOnWhiteboardSurfaceAddedCallback(function(e,t){t.addOnShapeAddedCallback(function(e,t){this.drawShape(t)}.bind(this)),t.addOnShapeDeletedCallback(function(e,t){this.removeShape(t)}.bind(this)),t.addOnShapeUpdatedCallback(function(e,t){this.updateShape(t)}.bind(this)),t.addOnSurfaceClearedCallback(function(){this.clearContent()}.bind(this))}.bind(this)),e.addOnWhiteboardSurfaceRemovedCallback(function(e,t){}.bind(this)),e.addOnWhiteboardSurfaceSetActiveCallback(function(e,i){if(this._ended&&this.start(t),this.clearContent(),i){var a=i.getShapes();for(var n in a)i.getShapes().hasOwnProperty(n)&&this.drawShape(i.getShapes()[n])}}.bind(this))},start:function(){},end:function(){},drawShape:function(e){},removeShape:function(e){},updateShape:function(e){},clearContent:function(){}},e.Services.Collaboration.WhiteboardRenderer=t}(AvayaClientServices),function(e){"use strict";function t(e){this._collaborationProvider=e,this._checkOnNewPoints=void 0,this._throttlingInterval=100}t.prototype={start:function(t,i){var a=jQuery.Deferred();if(!e.Base.Utils.isDefined(i)){var n=t.getSurfaces();return 0===n.length?this._collaborationProvider.startWhiteboard():this._collaborationProvider.startWhiteboard(n[0].getSurfaceId())}return i.isActive()?(a.reject(),a.promise()):this._collaborationProvider.startWhiteboard(i.getSurfaceId())},end:function(e){return this._collaborationProvider.endWhiteboard(e)},stop:function(t){var i=$.Deferred();return t._currentLiveDrawingWhiteboardId=void 0,t._activeSurface=void 0,t._surfaces.length=0,t._onWhiteboardStartedCallbacks.empty(),t._onWhiteboardEndedCallbacks.empty(),t._onWhiteboardSurfaceAddedCallbacks.empty(),t._onWhiteboardSurfaceRemovedCallbacks.empty(),t._onWhiteboardSurfaceSetActiveCallbacks.empty(),t._removeWhiteboardCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),i.resolve(),i.promise()},requestNewSurface:function(){return this._collaborationProvider.addWhiteboardSurface()},removeSurface:function(e,t){var i=jQuery.Deferred();return e.getSurfaces().length>1?this._collaborationProvider.removeWhiteboardSurface(t.getSurfaceId()).then(function(e){i.resolve(e)},function(e){i.reject(e)}):i.reject(),i.promise()},addCircle:function(e,t){return this._collaborationProvider.addCircle(t,e.getSurfaceId()).then(function(i){var a=t.getId();return t.setId(i),delete e.getShapes()[a],e.getShapes()[i]=t,i})},addShape:function(e,t){return t.isFinished()?this._collaborationProvider.addShape(t,e.getSurfaceId()).then(function(i){var a=t.getId();return t.setId(i),delete e.getShapes()[a],e.getShapes()[i]=t,i}):(t._readyToSendCallbacks.add(this._throttleLiveDrawing.bind(this,t,e)),this._collaborationProvider.startDrawShape(t,e.getSurfaceId()).then(function(i){var a=t.getId();return t.setId(i),e.getShapes()[a]=void 0,e.getShapes()[i]=t,i}))},addText:function(e,t){return this._collaborationProvider.addText(t,e.getSurfaceId()).then(function(i){var a=t.getId();return t.setId(i),delete e.getShapes()[a],e.getShapes()[i]=t,i})},moveSelection:function(t,i){return i instanceof e.Services.Collaboration.Shape?this._collaborationProvider.moveSelection(i,t.getSurfaceId(),i.getPoints()[0].point):i instanceof e.Services.Collaboration.Circle?this._collaborationProvider.moveSelection(i,t.getSurfaceId(),i.getTopLeft()):i instanceof e.Services.Collaboration.WhiteboardText?this._collaborationProvider.moveSelection(i,t.getSurfaceId(),i.getPosition()):this._collaborationProvider.moveSelection(i,t.getSurfaceId())},removeShape:function(t,i){var a;if(i.isMine())return i instanceof e.Services.Collaboration.Shape?a=i.getPoints()[0].point:i instanceof e.Services.Collaboration.Circle?a=i.getTopLeft():i instanceof e.Services.Collaboration.WhiteboardText&&(a=i.getPosition()),this._collaborationProvider.removeShape(i,t.getSurfaceId(),a);var n=$.Deferred();return n.reject(),n.promise()},clearContent:function(e){return this._collaborationProvider.clearContent(e.getSurfaceId())},endDrawShape:function(e,t){return t.hasPointsToSend()?this._collaborationProvider.liveDrawShape(t,e.getSurfaceId()).then(function(){return this._collaborationProvider.endDrawShape(t,e.getSurfaceId())}.bind(this)):this._collaborationProvider.endDrawShape(t,e.getSurfaceId())},_throttleLiveDrawing:function(e,t){return e.hasPointsToSend()?this._collaborationProvider.liveDrawShape(e,t.getSurfaceId()):void 0}},e.Services.Collaboration.WhiteboardService=t}(AvayaClientServices),function(e){"use strict";function t(e,t){this._whiteboard=e,this._whiteboardService=t,this._shapes={},this._surfaceId=void 0,this._isDrawing=!1,this._active=!1,this._onShapeAddedCallbacks=$.Callbacks(),this._onShapeDeletedCallbacks=$.Callbacks(),this._onShapeUpdatedCallbacks=$.Callbacks(),this._onSurfaceClearedCallbacks=$.Callbacks(),this._onSurfaceStartedCallbacks=$.Callbacks()}t.prototype={getSurfaceId:function(){return this._surfaceId},setAsCurrent:function(){return this._whiteboardService.start(this._whiteboard,this)},addCircle:function(e){return this._appendShape(e._id,e),this._whiteboardService.addCircle(this,e)},addShape:function(e){return this._appendShape(e._id,e),e._onShapeFinished=function(){return this._whiteboardService.endDrawShape(this,e)}.bind(this),this._whiteboardService.addShape(this,e)},addText:function(e){return this._appendShape(e._id,e),this._whiteboardService.addText(this,e)},getShapes:function(){return this._shapes},isActive:function(){return this._active},clearContent:function(){return this._whiteboardService.clearContent(this)},updateShape:function(e){return this._whiteboardService.moveSelection(this,e)},removeShape:function(e){return this._removeShapeById(e._id),this._whiteboardService.removeShape(this,e)},_appendShape:function(e,t){this._shapes[e]||(this._shapes[e]=t)},_getShapeById:function(t){return e.Base.Utils.isDefined(this._shapes[t])?this._shapes[t]:void 0},_removeShapeById:function(e){delete this._shapes[e]},_clearShapes:function(){this._shapes={}}},e.Services.Collaboration.WhiteboardSurface=t}(AvayaClientServices),function(){"use strict";AvayaClientServices.Services.Collaboration.WhiteboardTools=function(){this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.SELECTION]={name:"Selection",type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.SELECTION},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.PEN]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.PEN,name:"Pen",drag:!1,live:!0},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.MARKER]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.MARKER,name:"Marker",drag:!1,live:!0},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.LINE]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.LINE,name:"Line",drag:!0,live:!1,modes:AvayaClientServices.Services.Collaboration.WhiteboardLineWidths,startFunction:function(){},endFunction:function(){}},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.RECTANGLE]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.RECTANGLE,name:"Rect",drag:!0,live:!1,modes:AvayaClientServices.Services.Collaboration.WhiteboardToolModes,startFunction:function(){},endFunction:function(){}},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.CIRCLE]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.CIRCLE,name:"Circle",drag:!0,live:!1,modes:AvayaClientServices.Services.Collaboration.WhiteboardToolModes,startFunction:function(){},endFunction:function(){}},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.STAMP]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.STAMP,name:"Stamp",drag:!1,live:!1,drawFunction:function(){}},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.TEXT]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.TEXT,name:"Text",drag:!1,live:!1,modes:AvayaClientServices.Services.Collaboration.WhiteboardTextSizes},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.DELETE]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.DELETE,name:"Delete"},this[AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.CLEAR]={type:AvayaClientServices.Services.Collaboration.WhiteboardToolTypes.CLEAR,name:"Clear All"}}}(),function(e){"use strict";function t(t){this._whiteboardService=t,this._activeSurface=void 0,this._currentLiveDrawingWhiteboardId=void 0,this._onWhiteboardStartedCallbacks=$.Callbacks(),this._onWhiteboardEndedCallbacks=$.Callbacks(),this._onWhiteboardSurfaceAddedCallbacks=$.Callbacks(),this._onWhiteboardSurfaceRemovedCallbacks=$.Callbacks(),this._onWhiteboardSurfaceSetActiveCallbacks=$.Callbacks(),this._surfaces=[],this._removeWhiteboardCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}t.prototype={start:function(){return this._whiteboardService.start(this)},end:function(){return this._whiteboardService.end(this)},stop:function(){return this._whiteboardService.stop(this)},requestNewSurface:function(){return this._whiteboardService.requestNewSurface()},removeSurface:function(e){return this._whiteboardService.removeSurface(this,e)},getSurfaces:function(){return this._surfaces},getSurfaceById:function(e){return this._surfaces.filter(function(t){return t.getSurfaceId()===e})[0]},getActiveSurface:function(){return this._activeSurface},finishShape:function(e){return e.finishDrawing()}},e.Services.Collaboration.Whiteboard=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a){this.messageContent=e,this.sender=t,this.recipient=i,this.isPrivate=a,this.status=void 0}t.prototype={setStatus:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.status=t}},e.Services.Conference.ChatMessage=t}(AvayaClientServices),function(e){"use strict";function t(e){this._conferenceProvider=e}t.prototype={sendMessage:function(t,i,a){var n=a?a._participantId:void 0,r=!!a,s=new e.Services.Conference.ChatMessage(i,t._selfParticipant,a,r);return s.setStatus(e.Services.Conference.ChatMessageStatus.PENDING),this.addMessage(t,s),this._conferenceProvider.sendChatMessage(i,n).then(function(){s.setStatus(e.Services.Conference.ChatMessageStatus.CONFIRMED)}.bind(this),function(){s.setStatus(e.Services.Conference.ChatMessageStatus.ERROR)}.bind(this))},addMessage:function(e,t){t.isPrivate?e._privateMessages.push(t):e._publicMessages.push(t),e._allMessages.push(t),e._onChatMessageReceivedCallbacks.fire(e,t)}},e.Services.Conference.ChatService=t}(AvayaClientServices),function(e){"use strict";function t(t){this._chatService=t,this._selfParticipant=void 0,this._privateMessages=new e.Base.DataSet,this._publicMessages=new e.Base.DataSet,this._allMessages=new e.Base.DataSet,this._onChatMessageReceivedCallbacks=$.Callbacks(),this._onChatServiceAvailableCallbacks=$.Callbacks(),this._onChatServiceUnavailableCallbacks=$.Callbacks()}t.prototype={sendPrivateMessage:function(t,i){return e.Base.Utils.validate(i,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Conference.Participant}]}),this._chatService.sendMessage(this,i,t)},sendPublicMessage:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this._chatService.sendMessage(this,t)},getAllPrivateMessages:function(){return this._privateMessages},getAllPublicMessages:function(){return this._publicMessages},getAllMessages:function(){return this._allMessages},_setSelfParticipant:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Conference.Participant}]}),this._selfParticipant=t},_addMessage:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Conference.ChatMessage}]}),this._chatService.addMessage(this,t)}},e.Services.Conference.Chat=t}(AvayaClientServices),function(e){"use strict";function t(e){this._conferenceProvider=e}t.prototype={start:function(t,i){return e.Base.Utils.isDefined(this._conferenceProvider)?(e.Base.Logger.info("Conference Service is starting..."),this._conferenceProvider.start(t,i).then(function(){return this._conferenceProvider.addConferenceEventListeners(t),this._conferenceProvider.observeConference(t),e.Base.Logger.info("Conference Service is started."),t}.bind(this),function(t){e.Base.Logger.error("Failed to start conference service: "+t.message)}.bind(this))):void e.Base.Logger.info("Conference Service is not enabled")},stop:function(t){return this._conferenceProvider.stop().then(function(i){return t._selfParticipantId="",t._activeTalkerId="",t._lecturerId="",t._activeParticipants=[],t._droppedParticipants=[],t._pendingParticipants=[],t._isLectureModeActive=!1,t._isContinuationActive=!1,t._recordingStatus=e.Services.Conference.RecordingStatus.OFF,t._isVideoAllowed=!1,t._isEntryExitToneActive=!1,t._areMultiplePresentersAllowed=!1,t._isWebCollaborationActive=!1,t._isLocked=!1,t._isPinRequiredToBecomeModerator=!1,t._isVideoParticipantNameDisplayActive=!1,t._isVideoSelfSeeActive=!1,t._isVideoSelfSeeChangeAllowed=!1,t._isVideoParticipantNameDisplayChangeAllowed=!1,t._currentVideoLayout="",t._supportedVideoLayouts=[],t._subject="",t._webURI="",t._sipURI="",t._isPresentationModeActive=!1,t._brandName="",t._collaborationURI="",i})},terminateConference:function(e){return this._conferenceProvider.terminateConference()},requestToBecomeModerator:function(e,t){return this._conferenceProvider.requestToBecomeModerator(t)},setAsLecturer:function(e){return this._conferenceProvider.setAsLecturer(e._participantId)},setLocked:function(e,t){return this._conferenceProvider.setLocked(t)},startRecording:function(e,t,i){return this._conferenceProvider.startRecording(e,t,i)},stopRecording:function(e){return this._conferenceProvider.stopRecording(e)},pauseRecording:function(e){return this._conferenceProvider.pauseRecording(e)},resumeRecording:function(e){return this._conferenceProvider.resumeRecording(e)},setVideoLayout:function(e,t){return this._conferenceProvider.setVideoLayout(t)},setVideoLayoutSelfSee:function(e,t){return this._conferenceProvider.setVideoLayoutSelfSee(t)},setVideoLayoutTextOverlay:function(e,t){return this._conferenceProvider.setVideoLayoutTextOverlay(t)},getCurrentVideoLayout:function(e){return this._conferenceProvider.getCurrentVideoLayout()},muteAllParticipants:function(e){return this._conferenceProvider.muteUnmuteAll(!0)},unmuteAllParticipants:function(e){return this._conferenceProvider.muteUnmuteAll(!1)},setContinuation:function(e,t){return this._conferenceProvider.setContinuation(t)},raiseLowerHand:function(t){return t?this._conferenceProvider.raiseLowerHand(e.Services.Conference.ParticipantHandState.RAISE):this._conferenceProvider.raiseLowerHand(e.Services.Conference.ParticipantHandState.LOWER)},disconnectParticipant:function(e){return this._conferenceProvider.disconnectParticipant(e)},_recalculateAllCapabilities:function(e){e._recalculateSetLockCapability(),e._recalculateDisplayVideoParticipantNameCapability(),e._recalculateVideoSelfSeeCapability(),e._recalculateSetVideoLayoutCapability(),e._recalculateStartStopRecordingCapability(),e._recalculatePauseResumeRecordingCapability(),e._recalculateMuteUnmuteAllCapability(),e._recalculateSetContinuationStatusCapability(),e._recalculateRaiseHandSupportCapability(),e._recalculateLowerHandSupportCapability(),e._recalculateRequestToBecomeModeratorCapability(),e._recalculateRemoveSelectParticipantCapability()}},e.Services.Conference.ConferenceService=t}(AvayaClientServices),function(e,t){"use strict";function i(i,a,n){this._conferenceService=i,this._participantService=a,this._chat=n,this._selfParticipantId="",this._selfParticipant=void 0,this._activeTalkerId="",this._dialoutPermissions=void 0,this._recordingPermissions=void 0,this._lecturerId="",this._activeParticipants=[],this._droppedParticipants=[],this._pendingParticipants=[],this._isLectureModeActive=!1,this._isContinuationActive=!1,this._recordingStatus=e.Services.Conference.RecordingStatus.OFF,this._recorderStatus="none",this._isVideoAllowed=!1,this._encryptionStatus=e.Services.Conference.MeetingEncryptionStatus.NO,this._isEntryExitToneActive=!1,this._areMultiplePresentersAllowed=!1,this._isWebCollaborationActive=!1,this._isLocked=!1,this._isPinRequiredToBecomeModerator=!1,this._isVideoParticipantNameDisplayActive=!1,this._isVideoSelfSeeActive=!1,this._currentVideoLayout=void 0,this._supportedVideoLayouts=[],this._isVideoSelfSeeChangeAllowed=!1,this._isVideoParticipantNameDisplayChangeAllowed=!1,this._isStreamingActive=!1,this._terminationTime=void 0,this._subject="",this._webURI="",this._sipURI="",this._isPresentationModeActive=!1,this._brandName="",this._collaborationURI="",this._onConferenceCapabilitiesChangedCallbacks=t.Callbacks(),this._onConferenceLockStatusChangedCallbacks=t.Callbacks(),this._onConferenceDisplayParticipantNameOnVideoChangedCallbacks=t.Callbacks(),this._onConferenceVideoSelfSeeChangedCallbacks=t.Callbacks(),this._onConferenceVideoLayoutChangedCallbacks=t.Callbacks(),this._onConferenceDisplayParticipantNameOnVideoAllowedCallbacks=t.Callbacks(),this._onConferenceVideoSelfSeeAllowedCallbacks=t.Callbacks(),this._onConferenceSupportedVideoLayoutsChangedCallbacks=t.Callbacks(),this._onConferenceSubjectChangedCallbacks=t.Callbacks(),this._onConferenceContinuationStatusChangedCallbacks=t.Callbacks(),this._onConferenceRecordingStatusChangedCallbacks=t.Callbacks(),this._onConferenceRecordingFailedCallbacks=t.Callbacks(),this._onConferenceVideoStatusChangedCallbacks=t.Callbacks(),this._onConferenceLectureModeStatusChangedCallbacks=t.Callbacks(),this._onConferenceEntryExitToneChangedCallbacks=t.Callbacks(),this._onConferencePresentationModeStatusChangedCallbacks=t.Callbacks(),this._onConferenceActiveTalkersChangedCallbacks=t.Callbacks(),this._onConferenceActiveVideoParticipantsChangedCallbacks=t.Callbacks(),this._onConferenceParticipantRoleChangedCallbacks=t.Callbacks(),this._onConferenceParticipantAudioMuteStatusChangedCallbacks=t.Callbacks(),this._onConferenceParticipantVideoBlockStatusChangedCallbacks=t.Callbacks(),this._onConferenceAllParticipantsMutedCallbacks=t.Callbacks(),this._onConferenceAllParticipantsUnmutedCallbacks=t.Callbacks(),this._onConferenceEncryptionStatusChangedCallbacks=t.Callbacks(),this._onConferenceStreamingStatusChangedCallbacks=t.Callbacks(),this._onConferenceParticipantRaiseHandStatusChangedCallbacks=t.Callbacks(),this._onConferencePendingParticipantCallbacks=t.Callbacks(),this._onConferencePendingParticipantRemovedCallbacks=t.Callbacks(),this._onConferenceDroppedParticipantAddedCallbacks=t.Callbacks(),this._onConferenceDroppedParticipantRemovedCallbacks=t.Callbacks(),this._onConferenceServiceAvailableCallbacks=t.Callbacks(),this._onConferenceServiceUnavailableCallbacks=t.Callbacks(),this._onConferenceParticipantsAddedCallbacks=t.Callbacks(),this._onConferenceParticipantsRemovedCallbacks=t.Callbacks(),this._onConferenceMeetingTerminationTimeChangedCallbacks=t.Callbacks(),this._onConferenceMeetingTerminationInProgressCallbacks=t.Callbacks(),this._onConferenceCollaborationURIChangedCallbacks=t.Callbacks(),this._setAsLecturerCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setLectureModeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._muteUnmuteParticipantCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._blockUnblockParticipantVideoCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setLockCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._startRecordingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._stopRecordingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._pauseRecordingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._resumeRecordingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._muteUnmuteAllCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setContinuationStatusCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._raiseHandSupportCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._lowerHandSupportCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setDisplayVideoParticipantNameCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setVideoSelfSeeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setVideoLayoutCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setRequestToBecomeModeratorCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeSelectParticipantCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={start:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"}]}),this._conferenceService.start(this,t)},stop:function(){return this._conferenceService.stop(this)},getInConferenceChat:function(){return this._chat},getMeetingMinutes:function(){},getCollaborationURI:function(){return this._collaborationURI},isLocked:function(){return this._isLocked},setLocked:function(e){return this._conferenceService.setLocked(this,e)},isVideoSelfSeeActive:function(){return this._isVideoSelfSeeActive},setVideoSelfSee:function(e){return this._conferenceService.setVideoLayoutSelfSee(this,e)},isVideoParticipantNameDisplayActive:function(){return this._isVideoParticipantNameDisplayActive},setDisplayVideoParticipantName:function(e){return this._conferenceService.setVideoLayoutTextOverlay(this,e)},getSupportedVideoLayoutList:function(){return this._supportedVideoLayouts},isLectureModeActive:function(){return this._isLectureModeActive},setLectureMode:function(e){},isContinuationActive:function(){return this._isContinuationActive},setContinuation:function(e){return this._conferenceService.setContinuation(this,e)},startRecording:function(e,t){return this._conferenceService.startRecording(this,e,t)},stopRecording:function(){return this._conferenceService.stopRecording(this)},pauseRecording:function(){return this._conferenceService.pauseRecording(this)},resumeRecording:function(){return this._conferenceService.resumeRecording(this)},isVideoAllowed:function(){return this._isVideoAllowed},setVideoAllowed:function(e){},isEntryExitToneActive:function(){return this._isEntryExitToneActive},setEntryExitTone:function(e){},areMultiplePresentersAllowed:function(){return this._areMultiplePresentersAllowed},setMultiplePresentersAllowed:function(e){},getCurrentVideoLayout:function(){return this._currentVideoLayout},setVideoLayout:function(e){return this._conferenceService.setVideoLayout(this,e)},getActiveParticipants:function(){return this._activeParticipants},getDroppedParticipants:function(){return this._droppedParticipants},getPendingParticipants:function(){return this._pendingParticipants},muteAllParticipants:function(){return this._conferenceService.muteAllParticipants(this)},unmuteAllParticipants:function(){return this._conferenceService.unmuteAllParticipants(this)},addParticipant:function(e){},addParticipantFromExistingCall:function(e){},removeParticipant:function(e){return this._conferenceService.disconnectParticipant(e)},removeLastParticipant:function(){},terminateConference:function(){return this._conferenceService.terminateConference(this)},isPinRequiredToBecomeModerator:function(){return this._isPinRequiredToBecomeModerator},requestToBecomeModerator:function(e){return this._conferenceService.requestToBecomeModerator(this,e)},raiseHand:function(){return this._conferenceService.raiseLowerHand(!0)},lowerHand:function(){return this._conferenceService.raiseLowerHand(!1)},_recalculateAllCapabilities:function(){this._conferenceService._recalculateAllCapabilities(this)},getSelfParticipant:function(){return this._selfParticipant},isRecordingActive:function(){return this._recordingStatus===e.Services.Conference.RecordingStatus.ON||this._recordingStatus===e.Services.Conference.RecordingStatus.PAUSE},isRecordingPaused:function(){return this._recordingStatus===e.Services.Conference.RecordingStatus.PAUSE},getEncryptionStatus:function(){return this._encryptionStatus},getSubject:function(){return this._subject},isStreamingActive:function(){return this._isStreamingActive}},e.Services.Conference.Conference=i}(AvayaClientServices,jQuery),function(e){"use strict";AvayaClientServices.Services.Conference.AdmissionResponseCode={SUCCESS:"success",INCORRECT_PASSCODE_TRY_AGAIN:"incorrectPasscodeTryAgain",INCORRECT_PASSCODE_DISCONNECTING:"incorrectPasscodeDisconnecting",PENDING_APPROVAL:"pendingApproval",REJECTED:"rejected"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ChatMessageStatus={PENDING:"pending",CONFIRMED:"confirmed",ERROR:"error"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ChatType={PRIVATE:"private",PUBLIC:"public"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ContentFromParticipantStatus={ACTIVE:"active",ALLOWED:"allowed",NOT_ALLOWED:"notAllowed"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.MediaFromParticipantStatus={ACTIVE:"active",NA:"na",SELF_MUTED:"selfMuted",MODERATOR_MUTED:"moderatorMuted",BOTH_MUTED:"bothMuted"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.MediaToParticipantStatus={AVAILABLE:"available",NA:"na"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.MediaType={AUDIO:"audio",VIDEO:"video"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.MeetingEncryptionStatus={YES:"yes",NO:"no",PARTIAL:"partial"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ModeratorAdmissionActions={ADMIT:"admit",REJECT:"reject"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantAuthorizationStatus={ACTIVE:"active",AUTHORIZING:"authorizing"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantConnectionStatus={CONNECTION_STATUS_UNKNOWN:"CONNECTION_STATUS_UNKNOWN",CONNECTION_STATUS_CONNECTING:"CONNECTION_STATUS_CONNECTING",CONNECTION_STATUS_CONNECTED:"CONNECTION_STATUS_CONNECTED",CONNECTION_STATUS_DISCONNECTING:"CONNECTION_STATUS_DISCONNECTING",CONNECTION_STATUS_DISCONNECTED:"CONNECTION_STATUS_DISCONNECTED"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantDisconnectionReason={DISCONNECT_REASON_UNKNOWN:"DISCONNECT_REASON_UNKNOWN",DISCONNECT_REASON_DEPARTED:"DISCONNECT_REASON_DEPARTED",DISCONNECT_REASON_DISCONNECTED_BY_MODERATOR:"DISCONNECT_REASON_DISCONNECTED_BY_MODERATOR"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantHandState={RAISE:"raise",LOWER:"lower"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantMediaState={MEDIA_STATUS_NO_MEDIA:"MEDIA_STATUS_NO_MEDIA",MEDIA_STATUS_INACTIVE:"MEDIA_STATUS_INACTIVE",MEDIA_STATUS_RECEIVE_ONLY:"MEDIA_STATUS_RECEIVE_ONLY",MEDIA_STATUS_SEND_ONLY:"MEDIA_STATUS_SEND_ONLY",MEDIA_STATUS_SEND_RECEIVE:"MEDIA_STATUS_SEND_RECEIVE"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.ParticipantRole={MODERATOR:"moderator",PARTICIPANT:"participant",GUEST:"guest",OPERATOR:"operator"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.PermissionStatus={ALLOWED:"allowed",NOT_ALLOWED:"notAllowed",NEED_SIGNIN:"needSignin",NEED_MODERATOR:"needModerator",NEED_SIGNIN_OR_MODERATOR:"needSigninOrModerator"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.RecorderStatus={NONE:"none",START_STOP:"start/stop",WITH_PAUSE:"withPause"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.RecordingOperation={START:"start",STOP:"stop",PAUSE:"pause",RESUME:"resume"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.RecordingStatus={ON:"on",OFF:"off",PAUSE:"pause"}}(),function(e){"use strict";AvayaClientServices.Services.Conference.VideoLayout={LAYOUT_AUTOMATIC:"0",LAYOUT_SINGLE_SCREEN:"10",LAYOUT_DOUBLE_SCREEN_LANDSCAPE:"20",LAYOUT_DOUBLE_SCREEN_HORIZONTAL:"21",LAYOUT_DOUBLE_SCREEN_VERTICAL:"22",LAYOUT_OVER_1:"23",LAYOUT_OVER_2:"24",LAYOUT_OVER_3:"25",LAYOUT_OVER_4:"26",LAYOUT_DOUBLE_SCREEN_4_TO_1:"27",LAYOUT_1_HOST_1_PIP:"28",LAYOUT_PYRAMID_3:"32",LAYOUT_LANDSCAPE_PLUS_2_ASYM:"33",LAYOUT_1_HOST_2_PIP:"34",LAYOUT_2x2:"40",LAYOUT_4_PYRAMID:"41",LAYOUT_3_PLUS_1:"42",LAYOUT_1_HOST_3_PIP:"43",LAYOUT_5_PYRAMID:"51",LAYOUT_1_HOST_4_PIP:"52",LAYOUT_5_PLUS_1:"60",LAYOUT_3x2:"61",LAYOUT_3_PLUS_4_2:"72",LAYOUT_3_PLUS_4_4:"74",LAYOUT_6_PLUS_1_1:"75",LAYOUT_7_PLUS_1_NEW:"81",LAYOUT_4x2:"82",LAYOUT_3x3:"90",LAYOUT_9_PYRAMID:"91",LAYOUT_8_PLUS_2_1_2:"101",LAYOUT_8_PLUS_2_3_4:"103",LAYOUT_4x3:"120",LAYOUT_12_PLUS_1_1:"131",LAYOUT_12_PLUS_1_2:"132",LAYOUT_12_PLUS_1_3:"133",LAYOUT_12_PLUS_1_4:"134",LAYOUT_12_PLUS_1_5:"135",LAYOUT_4x4:"160",LAYOUT_20_PLUS_1:"210",LAYOUT_20_PLUS_1_LEFT:"211",LAYOUT_1_PLUS_27:"280"}}(),function(e){"use strict";function t(){this.id="",this.time=void 0,this.content="",this.type=void 0,this.sender=void 0,this.personal=!1,this.mine=!1,this.status=void 0}t.prototype={getId:function(){return this.id},getTime:function(){return this.time},getContent:function(){return this.content},getType:function(){return this.type},getSender:function(){return this.sender},isPersonal:function(){return this.personal},isMine:function(){return this.mine},getStatus:function(){return this.status}},e.Services.Conference.MeetingMinute=t}(AvayaClientServices),function(e){"use strict";function t(){this._onMeetingMinutesServiceAvailableCallbacks=$.Callbacks(),this._onMeetingMinutesServiceUnavailableCallbacks=$.Callbacks()}t.prototype={addMinute:function(e){},updateMinute:function(e){},removeMinute:function(e){},getMinutes:function(){},addOnMeetingMinutesServiceAvailableCallback:function(e){this._onMeetingMinutesServiceAvailableCallbacks.add(e)},removeOnMeetingMinutesServiceAvailableCallback:function(e){this._onMeetingMinutesServiceAvailableCallbacks.remove(e)},addOnMeetingMinutesServiceUnavailableCallback:function(e){this._onMeetingMinutesServiceUnavailableCallbacks.add(e)},removeOnMeetingMinutesServiceUnavailableCallback:function(e){this._onMeetingMinutesServiceUnavailableCallbacks.remove(e)}},e.Services.Conference.MeetingMinutes=t}(AvayaClientServices),function(e){"use strict";function t(e){this._conferenceProvider=e}t.prototype={setAsLecturer:function(e){return this._conferenceProvider.setAsLecturer(e.getParticipantId())},unsetAsLecturer:function(){return this._conferenceProvider.unsetAsLecturer()},mute:function(t){return this._conferenceProvider.muteUnmute(t.getParticipantId(),e.Services.Conference.MediaType.AUDIO,!0)},unmute:function(t){return this._conferenceProvider.muteUnmute(t.getParticipantId(),e.Services.Conference.MediaType.AUDIO,!1)},accept:function(t){return this._conferenceProvider.moderatorAdmission(t,e.Services.Conference.ModeratorAdmissionActions.ADMIT)},deny:function(t){return this._conferenceProvider.moderatorAdmission(t,e.Services.Conference.ModeratorAdmissionActions.REJECT)},blockVideo:function(t){return this._conferenceProvider.muteUnmute(t.getParticipantId(),e.Services.Conference.MediaType.VIDEO,!0)},unblockVideo:function(t){return this._conferenceProvider.muteUnmute(t.getParticipantId(),e.Services.Conference.MediaType.VIDEO,!1)},lowerHand:function(e,t){return this._conferenceProvider.moderatorLowerHand(e.getParticipantId(),t)},recalculateAllCapabilities:function(e){e._recalculateBlockUnblockVideoCapability(),e._recalculateMuteUnmuteCapability(),e._recalculateLowerHandCapability(),e._recalculateSetAsLecturerCapability()}},e.Services.Conference.ParticipantService=t}(AvayaClientServices),function(e){"use strict";function t(t,i){this._participantService=t,this._conference=i,this._address="",this._participantId=void 0,this._participantName="",this._status="",this._isLocalUser=!1,this._onParticipantStatusChangedCallbacks=$.Callbacks(),this._setUnsetAsLecturerCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._muteUnmuteCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._blockUnblockVideoCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._lowerHandCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}t.prototype={getAddress:function(){return this._address},getDisplayName:function(){return this._participantName},getParticipantId:function(){return this._participantId},getParticipantAuthorizationStatus:function(){return this._status},isPendingParticipant:function(){return this._status===e.Services.Conference.ParticipantAuthorizationStatus.AUTHORIZING},isActiveParticipant:function(){return this._status===e.Services.Conference.ParticipantAuthorizationStatus.ACTIVE},isLocalUser:function(){return this._isLocalUser},getBestContactMatch:function(){},getAllPossibleContactMatches:function(){},setMatchedContacts:function(){},_recalculateAllCapabilities:function(){this._participantService.recalculateAllCapabilities(this)}},e.Services.Conference.Participant=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Services.Conference.Participant.call(this,t,i),this._onPendingParticipantAcceptedCallbacks=$.Callbacks(),this._onPendingParticipantCancelledCallbacks=$.Callbacks(),this._onPendingParticipantDeniedCallbacks=$.Callbacks()}t.prototype=Object.create(e.Services.Conference.Participant.prototype),t.prototype.accept=function(){return this._participantService.accept(this)},t.prototype.deny=function(){return this._participantService.deny(this)},e.Services.Conference.PendingParticipant=t}(AvayaClientServices),function(e,t){"use strict";function i(){this._source="",this._writeCapability=new e.Base.Capability}i.prototype={getSource:function(){return this._source},setSource:function(e){this._source=e},getWriteCapability:function(){return this._writeCapability},setWriteCapability:function(e){this._writeCapability=e}},e.Services.Contacts.ContactField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._handle=void 0,this._handleType=e.Services.Contacts.ContactHandleType.HANDLE_WORK}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getHandle=function(){return this._phoneNumber},i.prototype.setHandle=function(e){this._phoneNumber=e},i.prototype.getHandleType=function(){return this._handleType},i.prototype.setHandleType=function(e){this._handleType=e},e.Services.Contacts.ContactHandleField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._value=0}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getValue=function(){return this._value},i.prototype.setValue=function(e){this._value=e},e.Services.Contacts.ContactNumberField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._phoneNumber=void 0,this._label1=void 0,this._label2=void 0,this._phoneNumberType=e.Services.Contacts.ContactPhoneNumberType.PHONE_NUMBER_WORK,this._speedDialEnabled=!1,this._default=!1}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getPhoneNumber=function(){return this._phoneNumber},i.prototype.setPhoneNumber=function(e){this._phoneNumber=e},i.prototype.getLabel1=function(){return this._label1},i.prototype.setLabel1=function(e){this._label1=e},i.prototype.getLabel2=function(){return this._label2},i.prototype.setLabel2=function(e){this._label2=e},i.prototype.getPhoneNumberType=function(){return this._phoneNumberType},i.prototype.setPhoneNumberType=function(e){this._phoneNumberType=e},i.prototype.isSpeedDialEnabled=function(){return this._speedDialEnabled},i.prototype.setSpeedDialEnabled=function(e){this._speedDialEnabled=e},i.prototype.isDefault=function(){return this._default},i.prototype.setDefault=function(e){this._default=e},e.Services.Contacts.ContactPhoneField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._value=void 0}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getValue=function(){return this._value},i.prototype.setValue=function(e){this._value=e},e.Services.Contacts.ContactStringField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t,i,a,n,r){this._uniqueSearchId=e.Base.Utils.makeId(16),this._searchString=t,this._searchScope=i,this._searchSource=a,this._maxResults=n,this._maxChunkSize=r}i.prototype={getUniqueSearchId:function(){return this._uniqueSearchId},getSearchString:function(){return this._searchString},getSearchScope:function(){return this._searchScope},getSearchSource:function(){return this._searchSource},getMaxResults:function(){return this._maxResults},getMaxChunkSize:function(){return this._maxChunkSize}},e.Services.Contacts.ContactSearchRequest=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){this._uniqueAddressForMatching="",this._givenName=new e.Services.Contacts.ContactStringField,this._surname=new e.Services.Contacts.ContactStringField,this._displayName=new e.Services.Contacts.ContactStringField,this._asciiGivenName=new e.Services.Contacts.ContactStringField,this._asciiSurname=new e.Services.Contacts.ContactStringField,this._asciiDisplayName=new e.Services.Contacts.ContactStringField,this._asciiAlias=new e.Services.Contacts.ContactStringField,this._alias=new e.Services.Contacts.ContactStringField,this._company=new e.Services.Contacts.ContactStringField,this._location=new e.Services.Contacts.ContactStringField,this._workRoomNo=new e.Services.Contacts.ContactStringField,this._streetAddress=new e.Services.Contacts.ContactStringField,this._city=new e.Services.Contacts.ContactStringField,this._state=new e.Services.Contacts.ContactStringField,this._country=new e.Services.Contacts.ContactStringField,this._postalCode=new e.Services.Contacts.ContactStringField,this._manager=new e.Services.Contacts.ContactStringField,this._department=new e.Services.Contacts.ContactStringField,this._language=new e.Services.Contacts.ContactStringField,this._emailAddresses=[],this._phoneNumbers=[],this._handles=[],this._buddy=new e.Services.Contacts.ContactBooleanField,this._favorite=new e.Services.Contacts.ContactBooleanField,this._videoCapable=new e.Services.Contacts.ContactBooleanField,this._rank=new e.Services.Contacts.ContactNumberField,this._notes=new e.Services.Contacts.ContactStringField,this._custom1=[],this._custom2=[],this._custom3=[],this._pictureUrlMap={}}i.prototype={getUniqueAddressForMatching:function(){return this._uniqueAddressForMatching},setUniqueAddressForMatching:function(e){this._uniqueAddressForMatching=e},getGivenName:function(){return this._givenName},getSurname:function(){return this._surname},getDisplayName:function(){return this._displayName},getASCIIGivenName:function(){return this._asciiGivenName},getASCIISurname:function(){return this._asciiSurname},getASCIIDisplayName:function(){return this._asciiDisplayName},getASCIIAlias:function(){return this._asciiAlias},getAlias:function(){return this._alias},getLocation:function(){return this._location},getWorkRoomNo:function(){return this._workRoomNo},getStreetAddress:function(){return this._streetAddress},getCity:function(){return this._city},getState:function(){return this._state},getCountry:function(){return this._country},getPostalCode:function(){return this._postalCode},getCompany:function(){return this._company},getManager:function(){return this._manager},getDepartment:function(){return this._department},getPictureUrl:function(t){return t&&e.Services.Contacts.ContactPictureSize[t]||(t=e.Services.Contacts.ContactPictureSize.MEDIUM),this._pictureUrlMap[t]},addPictureUrl:function(t,i){t&&e.Services.Contacts.ContactPictureSize[t]&&i&&(this._pictureUrlMap[t]=i)},getLanguage:function(){return this._language},getEmailAddresses:function(){return this._emailAddresses},getPhoneNumbers:function(){return this._phoneNumbers},getHandles:function(){return this._handles},isBuddy:function(){return this._buddy},isFavorite:function(){return this._favorite},isVideoCapable:function(){return this._videoCapable},getNotes:function(){return this._notes},getRank:function(){return this._rank},getCustom1:function(){return this._custom1},getCustom2:function(){return this._custom2},getCustom3:function(){return this._custom3},startPresence:function(){},stopPresence:function(){},getPresence:function(){},addOnPresenceChangedCallback:function(e){},removeOnPresenceChangedCallback:function(e){}},e.Services.Contacts.Contact=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e,t){Error.call(this,t),this._reason=e,this._message=t}t.prototype=Object.create(Error.prototype),t.prototype.getReason=function(){return this._reason},t.prototype.getMessage=function(){return this._message},e.Services.Contacts.ContactsError=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i){this._started=!1,this._contactsModule=void 0,this._contactsProvider=t,this._directorySearchProvider=i,this._addContactCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._updateContactCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._deleteContactCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._searchContactCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED)}i.prototype={start:function(e,i){var a=t.Deferred();this._started=!0,this._contactsModule=e;var n=function(e){this._started=!1,a.reject(e)}.bind(this),r=function(){return this._contactsProvider.start(i).fail(n.bind(this))}.bind(this),s=function(){return this._directorySearchProvider.start(i).fail(n.bind(this))}.bind(this);return r().then(s).then(function(){this._registerContactChangesCallbacks(),this._recalculateCapabilities(),a.resolve()}.bind(this)),a.promise()},stop:function(e){var i=t.Deferred();this._started||i.reject({code:401,message:"Contacts service is not running"}),this._started=!1;var a=function(e){this._started=!0,i.reject(e)}.bind(this),n=function(){return this._contactsProvider.stop().fail(a)}.bind(this),r=function(){return this._directorySearchProvider.stop().fail(a)}.bind(this);return n().then(r).then(function(){i.resolve()}),i.promise()},createEditableContact:function(){return this._contactsProvider.createContactForAdd()},createEditableContactFromContact:function(i){var a=this._contactsProvider.createContactForAdd(),n=t.extend(!0,new e.Services.Contacts.EditableContact,i);n.getGivenName().setWriteCapability(a.getGivenName().getWriteCapability()),n.getSurname().setWriteCapability(a.getSurname().getWriteCapability()),n.getDisplayName().setWriteCapability(a.getDisplayName().getWriteCapability()),n.getASCIIGivenName().setWriteCapability(a.getASCIIGivenName().getWriteCapability()),n.getASCIISurname().setWriteCapability(a.getASCIISurname().getWriteCapability()),n.getASCIIDisplayName().setWriteCapability(a.getASCIIDisplayName().getWriteCapability()),n.getAlias().setWriteCapability(a.getAlias().getWriteCapability()),n.getASCIIAlias().setWriteCapability(a.getASCIIAlias().getWriteCapability()),n.getLocation().setWriteCapability(a.getLocation().getWriteCapability()),n.getWorkRoomNo().setWriteCapability(a.getWorkRoomNo().getWriteCapability()),n.getStreetAddress().setWriteCapability(a.getStreetAddress().getWriteCapability()),n.getCity().setWriteCapability(a.getCity().getWriteCapability()),n.getState().setWriteCapability(a.getState().getWriteCapability()),n.getCountry().setWriteCapability(a.getCountry().getWriteCapability()),n.getPostalCode().setWriteCapability(a.getPostalCode().getWriteCapability()),n.getCompany().setWriteCapability(a.getCompany().getWriteCapability()),n.getManager().setWriteCapability(a.getManager().getWriteCapability()),n.getDepartment().setWriteCapability(a.getDepartment().getWriteCapability()),n.getLanguage().setWriteCapability(a.getLanguage().getWriteCapability()),n.getNotes().setWriteCapability(a.getNotes().getWriteCapability()),n.getRank().setWriteCapability(a.getRank().getWriteCapability()),n.isBuddy().setWriteCapability(a.isBuddy().getWriteCapability()),n.isFavorite().setWriteCapability(a.isFavorite().getWriteCapability());for(var r=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),s=n.getEmailAddresses(),o=0;o<s.length;o++)s[o].setWriteCapability(r);var c=n.getPhoneNumbers();for(o=0;o<c.length;o++)c[o].setWriteCapability(r);var l=n.getHandles();for(o=0;o<l.length;o++)l[o].setWriteCapability(r);var d=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),u=n.getCustom1();for(o=0;o<u.length;o++)u[o].setWriteCapability(d);var C=n.getCustom2();for(o=0;o<C.length;o++)C[o].setWriteCapability(d);var p=n.getCustom3();for(o=0;o<p.length;o++)p[o].setWriteCapability(d);return n},addContact:function(e){return this._contactsProvider.addContact(e)},editContact:function(e,t){return this._contactsProvider.updateContact(e)},deleteContact:function(e){return this._contactsProvider.deleteContact(e)},getContacts:function(t){var i=new e.Base.DataSet,a=new e.Base.DataRetrieval(i),n=function(e){for(var t=e.length,a=0;t>a;a++)i.push(e[a]);i.onDataSetChanged()}.bind(this),r=function(e){n(e)}.bind(this),s=function(e){n(e),a.onDataRetrievalDone()}.bind(this);return this._contactsProvider.retrieveAllContacts().then(s,a.onDataRetrievalFailed.bind(a),r),a},searchContacts:function(t){var i=new e.Base.DataSet,a=new e.Base.DataRetrieval(i),n=function(e){for(var t=e.length,a=0;t>a;a++)i.push(e[a]);i.onDataSetChanged()}.bind(this),r=function(e){n(e)}.bind(this),s=function(e){n(e),a.onDataRetrievalDone()}.bind(this);return this._directorySearchProvider.startDirectorySearch(t).then(s,a.onDataRetrievalFailed.bind(a),r),a},cancelSearchContacts:function(e){return this._directorySearchProvider.stopDirectorySearch(e)},getContactsChanges:function(){this._contactsProvider.getContactsChanges()},getAddContactCapability:function(){return this._addContactCapability},getUpdateContactCapability:function(){return this._updateContactCapability},getDeleteContactCapability:function(){return this._deleteContactCapability},getSearchContactCapability:function(){return this._searchContactCapability},_recalculateCapabilities:function(){var e=!1,t=this._contactsProvider.getAddContactCapability();this._addContactCapability!==t&&(this._addContactCapability=t,e=!0);var i=this._contactsProvider.getUpdateContactCapability();this._updateContactCapability!==i&&(this._updateContactCapability=i,e=!0);var a=this._contactsProvider.getDeleteContactCapability();this._deleteContactCapability!==a&&(this._deleteContactCapability=a,e=!0);var n=this._directorySearchProvider.getSearchContactCapability();this._searchContactCapability!==n&&(this._searchContactCapability=n,e=!0),e&&this._contactsModule._onCapabilitiesChangedCallbacks.fire(this)},_registerContactChangesCallbacks:function(){var t=e.Providers.Interfaces.ContactsProviderCallbackIds;this._contactsProvider.on(t.CONTACT_ADDED,function(e,t){this._contactsModule._onContactAddedCallbacks.fire(this._contactsModule,e)}.bind(this)),this._contactsProvider.on(t.CONTACT_UPDATED,function(e,t){this._contactsModule._onContactUpdatedCallbacks.fire(this._contactsModule,e)}.bind(this)),this._contactsProvider.on(t.CONTACT_DELETED,function(e,t){this._contactsModule._onContactDeletedCallbacks.fire(this._contactsModule,e)}.bind(this)),this._contactsProvider.on(t.CAPABILITIES_CHANGED,this._recalculateCapabilities.bind(this)),this._directorySearchProvider.on(t.CAPABILITIES_CHANGED,this._recalculateCapabilities.bind(this))}},e.Services.Contacts.ContactsService=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(e){this._contactsService=e,this._onContactAddedCallbacks=t.Callbacks(),this._onContactUpdatedCallbacks=t.Callbacks(),this._onContactDeletedCallbacks=t.Callbacks(),this._onContactLoadingCompleteCallbacks=t.Callbacks(),this._onCapabilitiesChangedCallbacks=t.Callbacks()}i.prototype={createEditableContact:function(){return this._contactsService.createEditableContact()},createEditableContactFromContact:function(e){return this._contactsService.createEditableContactFromContact(e)},addContact:function(e){return this._contactsService.addContact(e)},editContact:function(e,t){return this._contactsService.editContact(e,t)},deleteContact:function(e){return this._contactsService.deleteContact(e)},getContacts:function(){return this._contactsService.getContacts()},searchContacts:function(t,i,a,n,r){var s=new e.Services.Contacts.ContactSearchRequest(t,i,a,n,r);return this._contactsService.searchContacts(s)},cancelSearchContacts:function(e){},refineSearchContacts:function(e,t){},start:function(e){return this._contactsService.start(this,e)},stop:function(){return this._contactsService.stop(this).then(function(){this._onContactAddedCallbacks.empty(),this._onContactUpdatedCallbacks.empty(),this._onContactDeletedCallbacks.empty(),this._onContactLoadingCompleteCallbacks.empty(),this._onCapabilitiesChangedCallbacks.empty()}.bind(this))}},e.Services.Contacts.Contacts=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e,t){Error.call(this,t),this._reason=e,this._message=t}t.prototype=Object.create(Error.prototype),t.prototype.getReason=function(){return this._reason},t.prototype.getMessage=function(){return this._message},e.Services.Contacts.DirectorySearchError=t}(AvayaClientServices),function(e,t){"use strict";function i(){e.Services.Contacts.Contact.call(this)}i.prototype=Object.create(e.Services.Contacts.Contact.prototype),i.prototype.setGivenName=function(e){this._givenName=e},i.prototype.setSurname=function(e){this._surname=e},i.prototype.setDisplayName=function(e){this._displayName=e},i.prototype.setASCIIGivenName=function(e){this._asciiGivenName=e},i.prototype.setASCIISurname=function(e){this._asciiSurName=e},i.prototype.setASCIIDisplayName=function(e){this._asciiDisplayName=e},i.prototype.setAlias=function(e){this._alias=e},i.prototype.setASCIIAlias=function(e){this._asciiAlias=e},i.prototype.setLocation=function(e){this._location=e},i.prototype.setWorkRoomNo=function(e){this._workRoomNo=e},i.prototype.setStreetAddress=function(e){this._streetAddress=e},i.prototype.setCity=function(e){this._city=e},i.prototype.setState=function(e){this._state=e},i.prototype.setCountry=function(e){this._country=e},i.prototype.setPostalCode=function(e){this._postalCode=e},i.prototype.setCompany=function(e){this._company=e},i.prototype.setManager=function(e){this._manager=e},i.prototype.setDepartment=function(e){this._department=e},i.prototype.setLanguage=function(e){this._language=e},i.prototype.setEmailAddresses=function(e){this._emailAddresses=e},i.prototype.setPhoneNumbers=function(e){this._phoneNumbers=e},i.prototype.setHandles=function(e){this._handles=e},i.prototype.setBuddy=function(e){this._buddy=e},i.prototype.setFavorite=function(e){this._favorite=e},i.prototype.setNotes=function(e){this._notes=e},i.prototype.setRank=function(e){this._rank=e},e.Services.Contacts.EditableContact=i}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ContactEmailAddressType={EMAIL_ADDRESS_WORK:"EMAIL_ADDRESS_WORK",EMAIL_ADDRESS_OTHER:"EMAIL_ADDRESS_OTHER"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ContactHandleType={HANDLE_WORK:"HANDLE_WORK",HANDLE_OTHER:"HANDLE_OTHER"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ContactPhoneNumberType={PHONE_NUMBER_WORK:"PHONE_NUMBER_WORK",PHONE_NUMBER_MOBILE:"PHONE_NUMBER_MOBILE",PHONE_NUMBER_HOME:"PHONE_NUMBER_HOME",PHONE_NUMBER_FAX:"PHONE_NUMBER_FAX",PHONE_NUMBER_PAGER:"PHONE_NUMBER_PAGER",PHONE_NUMBER_OTHER:"PHONE_NUMBER_OTHER"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ContactPictureSize={XSMALL:"XSMALL",SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",XLARGE:"XLARGE",XXLARGE:"XXLARGE"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ContactsErrorReason={UNKNOWN_REASON:"UNKNOWN_REASON",INTERNAL_ERROR:"INTERNAL_ERROR",RETRY:"RETRY",SOURCE_NOT_CONNECTED:"SOURCE_NOT_CONNECTED",AUTHENTICATION_FAILED:"AUTHENTICATION_FAILED",REQUEST_TIMEOUT:"REQUEST_TIMEOUT",REQUEST_CANCELLED:"REQUEST_CANCELLED",DUPLICATE_CONTACT:"DUPLICATE_CONTACT",INVALID_CONTACT:"INVALID_CONTACT",REQUIRED_DATA_MISSING:"REQUIRED_DATA_MISSING",DELETE_CONTACT_NOT_SUPPORTED:"DELETE_CONTACT_NOT_SUPPORTED",ADD_CONTACT_NOT_SUPPORTED:"ADD_CONTACT_NOT_SUPPORTED",UPDATE_CONTACT_NOT_SUPPORTED:"UPDATE_CONTACT_NOT_SUPPORTED",NOT_FOUND:"NOT_FOUND"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.DirectorySearchErrorReason={UNKNOWN_REASON:"UNKNOWN_REASON",INTERNAL_ERROR:"INTERNAL_ERROR",RETRY:"RETRY",SOURCE_NOT_CONNECTED:"SOURCE_NOT_CONNECTED",AUTHENTICATION_FAILED:"AUTHENTICATION_FAILED",REQUEST_TIMEOUT:"REQUEST_TIMEOUT",REQUEST_CANCELLED:"REQUEST_CANCELLED",INVALID_SEARCH_REQUEST:"INVALID_SEARCH_SOURCE_TYPE",INVALID_SEARCH_STRING:"INVALID_SEARCH_STRING",INVALID_SEARCH_SOURCE:"INVALID_SEARCH_SOURCE",INVALID_SEARCH_SCOPE:"INVALID_SEARCH_SCOPE",INVALID_MAX_CHUNK_SIZE:"INVALID_CHUNK_SIZE",INVALID_MAX_RESULTS:"INVALID_MAX_RESULTS"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.ProviderSourceType={PROVIDER_SOURCE_ACS:"PROVIDER_SOURCE_ACS",PROVIDER_SOURCE_OTHER:"PROVIDER_SOURCE_OTHER"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.SearchScopeType={GIVEN_NAME:"GIVEN_NAME",SURNAME:"SURNAME",PHONE_NUMBER:"PHONE_NUMBER",EMAIL_ADDRESS:"EMAIL_ADDRESS",IM_HANDLE:"IM_HANDLE",ALL:"ALL"}}(AvayaClientServices,jQuery),function(e,t){"use strict";e.Services.Contacts.SearchSourceType={LOCAL:"LOCAL",NETWORK:"NETWORK",ALL:"ALL"}}(AvayaClientServices,jQuery),function(e){"use strict";function t(e){this._attachmentBuilder=e}t.prototype={_resizeImage:function(e,t){var i,a,n=document.createElement("canvas");return t.scale?(a=e.width*t.scale,i=e.height*t.scale):t.width&&!t.height?(a=t.width,i=parseInt(t.width*e.height/e.width)):t.height&&!t.width?(a=parseInt(t.height*e.width/e.height),i=t.height):(a=e.width,i=e.height),n.height=i,n.width=a,n.getContext("2d").drawImage(e,0,0,a,i),n.toDataURL("image/jpeg")},create:function(){}},e.Services.Messaging.AbstractThumbnailCreator=t}(AvayaClientServices),function(){"use strict";function e(e){this._thumbnailCreator=e}e.prototype={build:function(e,t){var i=new AvayaClientServices.Services.Messaging.Attachment(this._thumbnailCreator);return e=e||{},i.disposition=e.disposition,i.duration=e.duration,i.mimeType=e.mimeType,i.id=e.partId,i.location=e.location||e.media,i.size=e.size,i.name=i.getName(),i.file=t,i.status=e.status||AvayaClientServices.Services.Messaging.ResourceStatus.PUBLISHED,this._recalculateCapabilities(i),i},update:function(e,t){t.thumbnail&&(e.thumbnail.location=t.thumbnail.location),e.id=t.partId,e.location=t.location||t.media,e.duration!==t.duration&&(e.duration=t.duration,e._onDurationChangedCallbacks.fire(e,t.duration)),e.status!==AvayaClientServices.Services.Messaging.ResourceStatus.PUBLISHED&&(e.status=AvayaClientServices.Services.Messaging.ResourceStatus.PUBLISHED,e._onResourceStatusChangedCallbacks.fire(e,AvayaClientServices.Services.Messaging.ResourceStatus.PUBLISHED)),e.file&&(e.file=void 0)},_recalculateCapabilities:function(e){e._recalculateUpdateNameCapability(),e._recalculateUpdateMimeTypeCapability(),e._recalculateUpdateDurationCapability(),e._recalculateUpdateSizeCapability(),e._recalculateUpdateLocationCapability(),e._recalculateUpdateIsSelfGeneratedCapability(),e._recalculateCreateThumbnailCapability(),e._recalculateRemoveThumbnailCapability(),e._recalculateCanDownloadCapability(),e._recalculateCanConsumeCapability(),e._recalculateRemoveCapability()}},AvayaClientServices.Services.Messaging.AttachmentBuilder=e}(AvayaClientServices),function(e,t){"use strict";function i(i){this._thumbnailCreator=i,this.disposition="",this.duration=-1,this.mimeType="",this.id="",this.size=-1,this.file=void 0,this.status="",this.name="",this.location="",this.thumbnail=void 0,this._onNameChangedCallbacks=t.Callbacks(),this._onMimeTypeChangedCallbacks=t.Callbacks(),this._onDurationChangedCallbacks=t.Callbacks(),this._onSizeChangedCallbacks=t.Callbacks(),this._onResourceStatusChangedCallbacks=t.Callbacks(),this._onConsumptionStatusChangedCallbacks=t.Callbacks(),this._onTypeChangedCallbacks=t.Callbacks(),this._onHasThumbnailChangedCallbacks=t.Callbacks(),this._onIsSelfGeneratedCallbacks=t.Callbacks(),this._updateNameCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateMimeTypeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateDurationCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateSizeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateLocationCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateIsSelfGeneratedCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createThumbnailCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeThumbnailCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._canDownloadCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._canConsumeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={getAttachmentStatus:function(){return this.status},getName:function(){return this.name?this.name:this.disposition&&-1!==this.disposition.search("filename")?(this.name=new RegExp(/filename="([^"\\]*(?:\\.[^"\\]*)*)"/i).exec(this.disposition)[1],this.name):void 0},getMimeType:function(){return this.mimeType},isThumbnail:function(){return-1!==this.disposition.indexOf("inline")},getDuration:function(){return this.duration},getSize:function(){return this.size},getLocation:function(){return this.location},getAttachmentConsumptionStatus:function(){},getType:function(){return this.disposition?-1!==this.disposition.indexOf("inline")?e.Services.Messaging.AttachmentType.THUMBNAIL:e.Services.Messaging.AttachmentType.MAIN:void 0},isGeneratedContent:function(){},getThumbnail:function(){return this.isThumbnail()?this:this.thumbnail},setName:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.name=t},setMimeType:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.mimeType=t},setDuration:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"number"}]}),this.duration=t},setSize:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"number"}]}),this.size=t},setLocation:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.location=t},setIsGeneratedContent:function(e){},download:function(){return this.location},createThumbnail:function(){return!!this.getCreateThumbnailCapability().isAllowed&&this._thumbnailCreator.create(this)},createThumbnailFromResource:function(e){},removeThumbnail:function(){},setResourceStatus:function(e){this.status=e,this._onResourceStatusChangedCallbacks.fire(e)}},e.Services.Messaging.Attachment=i}(AvayaClientServices,jQuery),function(e){"use strict";AvayaClientServices.Services.Messaging.AttachmentStatus={READY_TO_DOWNLOAD:"READY_TO_DOWNLOAD",DOWNLOADING:"DOWNLOADING",READY_TO_CONSUME:"READY_TO_CONSUME",CONSUMED:"CONSUMED",ERROR:"ERROR"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.AttachmentType={MAIN:"MAIN",THUMBNAIL:"THUMBNAIL"}}(),function(e,t){"use strict";function i(e,t){this.action=e&&e.action||"typing",this.participant=t,this.state=e&&e.state||"paused",this.timestamp=e?e.timestamp:void 0}i.prototype={getAction:function(){return this.action},getParticipant:function(){return this.participant},getState:function(){return this.state},getTimestamp:function(){return this.timestamp}},e.Services.Messaging.ChatStateEvent=i}(AvayaClientServices,jQuery),function(e){"use strict";AvayaClientServices.Services.Messaging.ConversationType={TOPIC:"TOPIC",THREAD:"THREAD"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.DisplayOrder={DISPLAY_ORDER_FIRST:"DISPLAY_ORDER_FIRST",DISPLAY_ORDER_LAST:"DISPLAY_ORDER_LAST"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.MessageImportance={HIGH:"HIGH",LOW:"LOW",NORMAL:"NORMAL"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.MessageType={MESSAGE:"MESSAGE",JOINED:"JOINED",LEFT:"LEFT",SESSION:"SESSION",SUBJECT_CHANGED:"SUBJECT_CHANGED",CLOSED:"CLOSED",START:"START"}}(),function(e){"use strict";function t(){this._searchBody=!1,this._searchParticipants=!1,this._searchSubject=!1,this._resultsPerConversation=0,this._query="",this._after=void 0}t.prototype={isSearchParticipants:function(){return this._searchParticipants},isSearchSubject:function(){return this._searchSubject},isSearchBody:function(){return this._searchBody},getQueryAfter:function(){return this._after},getQuery:function(){return this._query},getNumberResultsPerConversation:function(){return this._resultsPerConversation},searchParticipants:function(e){this._searchParticipants=e},searchSubject:function(e){this._searchSubject=e},searchBody:function(e){this._searchBody=e},setQueryAfter:function(e){this._after=e},setQuery:function(e){this._query=e.toLowerCase()},setNumberResultsPerConversation:function(e){this._resultsPerConversation=e}},e.Services.Messaging.MessagingQuery=t}(AvayaClientServices),function(e){"use strict";AvayaClientServices.Services.Messaging.RefreshMode={POLL_PUSH_MODE:{value:0,description:"continous"},POLL_1_MIN:{value:1,description:"1 minutes"},POLL_2_MIN:{value:2,description:"2 minutes"},POLL_5_MIN:{value:5,description:"5 minutes"},POLL_15_MIN:{value:15,description:"15 minutes"},POLL_60_MIN:{value:60,description:"60 minutes"},POLL_MANUAL_MODE:{value:1e3,description:"manual"}}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.ResourceStatus={DRAFT_UNSENT:"DRAFT_UNSENT",DRAFT_SENDING:"DRAFT_SENDING",DRAFT_REMOVING:"DRAFT_REMOVING",DRAFT_ERROR:"DRAFT_ERROR",PUBLISHED:"PUBLISHED",PUBLISHED_SENT_PENDING_DELIVERY_OFFLINE:"PUBLISHED_SENT_PENDING_DELIVERY_OFFLINE",PUBLISHED_SENT_PENDING_DELIVERY_DND:"PUBLISHED_SENT_PENDING_DELIVERY_DND"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.SensitivityLevel={NORMAL:"NORMAL",PERSONAL:"PERSONAL",PRIVATE:"PRIVATE",CONFIDENTIAL:"CONFIDENTIAL"}}(),function(e){"use strict";AvayaClientServices.Services.Messaging.SessionType={AUDIO:"AUDIO",VIDEO:"VIDEO"}}(),function(e){"use strict";function t(e){this._href=e&&e.href||"",this._id=e&&e.id||"",this._lastAccessedTime=e&&e.lastAccessedTime||"",this._lastUpdated=e&&e.lastUpdated||""}t.prototype={getHref:function(){return this._href},getId:function(){return this._id},getLastAccessedTime:function(){return this._lastAccessedTime},getLastUpdatedTime:function(){return this._lastUpdated}},e.Services.Messaging.ConversationId=t}(AvayaClientServices),function(e,t){"use strict";function i(e,t,i,a,n,r){this._provider=e,this._messageService=t,this._participantsService=i,this._escalationService=a,this._messageBuilder=n,this._messagingService=void 0,this.TIMEOUT_FOR_TYPING=3e3,this._conversationBuilder=r}i.prototype={getParticipants:function(e,t,i){return e.participants},createMessage:function(t){var i={subject:t.subject,threadId:t.id,to:t.participants,event:{type:e.Services.Messaging.MessageType.MESSAGE},resourceStatus:e.Services.Messaging.ResourceStatus.DRAFT_UNSENT,flags:{sensitivity:t.getSensitivity()}},a=this._messageBuilder.build(i,this._participantsService.getSelfParticipant(),this._messageService,t);return t.getLastMessage()&&(a.coalesced=this._messageBuilder.isMessageCoalesced(a,t.getLastMessage())),a.addOnResourceStatusChangedCallback(function(i,n){if(n===e.Services.Messaging.ResourceStatus.PUBLISHED){var r=t._draftMessages.indexOf(i);t._draftMessages.splice(r,1),t.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_SENDING&&(t.id=i.getThreadId(),t.getParticipants(),t.setResourceStatus(e.Services.Messaging.ResourceStatus.PUBLISHED))}else n===e.Services.Messaging.ResourceStatus.DRAFT_ERROR?(t.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_SENDING&&t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_ERROR),t.messages.onDataSetChanged()):n===e.Services.Messaging.ResourceStatus.DRAFT_SENDING&&(t.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT&&t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_SENDING),t._onMessagesAddedCallbacks.fire(t,[a]),t.messages.onDataSetChanged());this._messageService._recalculateAllMessageCapabilities(a)}.bind(this)),t._draftMessages.push(a),t.messages.unshift(a),a},getMessageById:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e[i]},createNewClientMessage:function(e,t){return this._messageBuilder.build(e,this._participantsService.getOrCreateParticipant(e.from),this._messageService,t)},leave:function(e){var i=t.Deferred();return this._provider.leaveConversation(e.id).then(function(){this._messagingService.conversations.splice(this._messagingService.conversations.indexOf(e),1),this._messagingService.conversations.onDataSetChanged(),i.resolve(!0)}.bind(this),function(e){i.reject(e)}),i.promise()},changeSubject:function(e,t){for(var i={threadId:e.id,body:"",event:{type:"SUBJECT_CHANGE"},subject:t,to:[]},a=e.getParticipants(),n=0;n<a.length;n++)i.to.push({address:a[n].address,type:a[n].type});return this._provider.changeSubject(i)},getOtherMessages:function(e,t,i,a){return this._provider.getMessages(a.id,i,e,t).then(function(e){return a.messages.length>0&&this._conversationBuilder.update(a,e,this),e}.bind(this),function(e){return e})},markAllAsRead:function(e){return this._provider.markAllAsRead(e.id)},markMultipleAsRead:function(e,t,i){return this._provider.markAllAsRead(e.id,t,i)},removeMessage:function(e,i,a){var n=t.Deferred();if(a)if(a.getRemoveCapability().isAllowed){var r=e.indexOf(a);r>=0&&(e.splice(r,1),e.onDataSetChanged()),(r=i.indexOf(a))>=0&&i.splice(r,1),n.resolve()}else n.reject(a.getRemoveCapability().denialReason);else n.reject();return n.promise()},createEscalation:function(t,i){var a={type:e.Services.Messaging.MessageType.SESSION,sessionType:i,extensions:{},conversation:t},n=new e.Services.Messaging.Escalation(a,this._escalationService);return n.addParticipants(this.getParticipants(t)),n.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_UNSENT),n.addOnResourceStatusChangedCallback(function(i,a){if(a===e.Services.Messaging.ResourceStatus.PUBLISHED){var r=t._draftEscalations.indexOf(i);t._draftEscalations.splice(r,1)}else a===e.Services.Messaging.ResourceStatus.DRAFT_ERROR?t.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_SENDING&&t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_ERROR):a===e.Services.Messaging.ResourceStatus.DRAFT_SENDING&&t.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT&&t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_SENDING);this._escalationService._recalculateAllEscalationCapabilities(n)}.bind(this)),n},removeEscalation:function(e,i){var a=t.Deferred();if(e)if(e.getRemoveCapability().isAllowed){var n=i.indexOf(e);n>=0&&i.splice(n,1),a.resolve()}else a.reject(e.getRemoveCapability().denialReason);else a.reject();return a.promise()},addParticipantsAddresses:function(i,a){var n=t.Deferred(),r=!1,s={participants:[]};e.Base.Utils.clean(a,"");for(var o=0;o<a.length;o++)s.participants.push({address:a[o],type:"CONTACT"}),r=!0;return this.validateUsers(a).then(function(t){i.getStatus()===e.Services.Messaging.ResourceStatus.PUBLISHED?r?this._provider.addParticipantsToConversation(i.id,s).then(function(e){this._updateParticipantsList(i,e.participants),n.resolve(e)}.bind(this),function(e){n.reject(e)}):n.reject("Empty list of participants to add."):i.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT&&this._updateParticipantsList(i,t)}.bind(this),function(e){n.reject(e)}),n.promise()},validateUsers:function(e){function i(e){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)}for(var a,n=t.Deferred(),r=this._provider.getRoutableDomains(),s=[],o=[],c=0;c<e.length;c++){a=!1;for(var l=0;l<r.length;l++)null!==e[c].match(r[l])&&i(e[c])&&(s.push(e[c]),a=!0);a||o.push(e[c])}return s.length===e.length?this._provider.validateUsers(e).then(function(e){if(e.validatedAddresses[0].addresses.length>0){for(var t=[],i=0;i<e.validatedAddresses.length;i++)t.push(e.validatedAddresses[i].addresses[0]);n.resolve(t)}else n.reject(e)}.bind(this),function(e){n.reject(e)}):n.reject(o),n.promise()},addParticipants:function(e,t){for(var i=[],a=0;a<t.length;a++)i.push(t[a].address);return this.addParticipantsAddresses(e,i)},_updateParticipantsList:function(e,t){for(var i,a=!1,n=[],r=0;r<t.length;r++){i=!0;for(var s=0;s<e.participants.length;s++)if(t[r].address===e.participants[s].address){i=!1;break}if(i){var o=this._participantsService.getOrCreateParticipant(t[r]);n.push(o),e.participants.push(o),a=!0}}return a&&(e.participants.onDataSetChanged(),e._onParticipantsAddedCallbacks.fire(e,n)),e.participants},getParticipantsFromMessage:function(t){for(var i=new e.Base.DataSet,a=0;a<t.to.length;a++){var n=this._participantsService.getOrCreateParticipant(t.to[a]);i.push(n)}if(e.Base.Utils.isDefined(t.event)&&t.event.type===e.Services.Messaging.MessageType.LEFT)for(var r=0;r<t.event.participants.length;r++){var s=this._participantsService.getOrCreateParticipant(t.event.participants[r]),o=i.indexOf(s);i.splice(o,1)}return i},removeParticipantsAddresses:function(i,a){var n=t.Deferred(),r=!1,s=[];if(e.Base.Utils.clean(a,""),i.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT){for(var o=0;o<a.length;o++)for(var c=i.participants.length-1;c>=0;c--)if(i.participants[c].address===a[o]){s.push(i.participants.splice(c,1)[0]),r=!0;break}r&&(i.participants.onDataSetChanged(),i._onParticipantsRemovedCallbacks.fire(i,s)),n.resolve()}else n.reject("Could not remove participants");return n.promise()},removeParticipants:function(e,t){for(var i=[],a=0;a<t.length;a++)i.push(t[a].address);return this.removeParticipantsAddresses(e,i)},close:function(e){return this._provider.close(e.id).then(function(t){return e.closed=!0,e._onClosedStatusChangedCallbacks.fire(e,e.closed),t}.bind(this))},setLastAccessTime:function(e){this._provider.setLastAccessTime(e.id,{}).then(function(){e._onLastAccessTimeChangedCallbacks.fire(e,e.lastAccessTime)})},subscribeForTypingEvents:function(t,i){var a=function(a){if(i){var n=new e.Services.Messaging.ChatStateEvent(a,this._participantsService._getParticipant(a.address));i(n)}"composing"===a.state?this.addComposingParticipantToConversation(t,this._participantsService._getParticipant(a.address)):"paused"===a.state&&this.removeComposingParticipantFromConversation(t,this._participantsService._getParticipant(a.address))}.bind(this);return this._provider.subscribeForTypingEventsInConversation(t.getId(),a).then(function(e){return t._isSubscribed=!0,this._recalculateAllConversationCapabilities(t),e}.bind(this))},unsubscribeForTypingEvents:function(e){return this._provider.unsubscribeForTypingEventsInConversation(e.getId()).then(function(t){return e._isSubscribed=!1,this._recalculateAllConversationCapabilities(e),t}.bind(this))},reportTyping:function(t){var i=this._participantsService.getSelfParticipant();this.addComposingParticipantToConversation(t.conversation,i)?(this._setTypingTimeout(t.conversation),this._provider.reportTyping(t.threadId,!0).then(function(e){},function(t){e.Base.Logger.error("Error on report typing: ",t)})):(clearTimeout(t.conversation._typingTimeout),this._setTypingTimeout(t.conversation))},pauseTyping:function(t){clearTimeout(t._typingTimeout),this._provider.reportTyping(t.id,!1).then(function(){var e=this._participantsService.getSelfParticipant();this.removeComposingParticipantFromConversation(t,e)}.bind(this),function(t){e.Base.Logger.error("Error on report paused typing: ",t)})},reportRecordingAudio:function(e){return this._provider.reportRecordingAudio(e.getId(),!0)},pauseRecordingAudio:function(e){return this._provider.reportRecordingAudio(e.getId(),!1)},reportRecordingVideo:function(e){return this._provider.reportRecordingVideo(e.getId(),!0)},pauseRecordingVideo:function(e){return this._provider.reportRecordingVideo(e.getId(),!1)},reportAttachingFile:function(e){return this._provider.reportAttachingFile(e.getId(),!0)},pauseAttachingFile:function(e){return this._provider.reportAttachingFile(e.getId(),!1)},reportTakingPicture:function(e){return this._provider.reportTakingPicture(e.getId(),!0)},pauseTakingPicture:function(e){return this._provider.reportTakingPicture(e.getId(),!1)},_setTypingTimeout:function(e){e._typingTimeout=setTimeout(function(){this.pauseTyping(e)}.bind(this),this.TIMEOUT_FOR_TYPING)},addComposingParticipantToConversation:function(e,t){return e.getComposingParticipants().indexOf(t)<0&&(e.composingParticipants.push(t),e._onIsComposingStatusChangedCallbacks.fire(e,!0),!0)},removeComposingParticipantFromConversation:function(e,t){var i=e.composingParticipants.indexOf(t);i>=0&&(e.composingParticipants.splice(i,1),e._onIsComposingStatusChangedCallbacks.fire(e,!0))},isOpened:function(){return this._provider.isOpened()},_recalculateAllConversationCapabilities:function(e){e._recalculateUpdateSubjectCapability(),e._recalculateUpdateLastAccessTimeCapability(),e._recalculateUpdateSensitivityCapability(),e._recalculateOlderContentCapability(),e._recalculateAddParticipantsCapability(),e._recalculateRemoveParticipantsCapability(),e._recalculateCreateMessageCapability(),e._recalculateCreateEscalationCapability(),e._recalculateMarkAllContentAsReadCapability(),e._recalculateLeaveCapability(),e._recalculateRemoveCapability(),e._recalculateStartCapability(),e._recalculateUpdateTypeCapability(),e._recalculateIsTypingCapability()},isUpdateSubjectSupported:function(){return this._provider.isUpdateSubjectSupported()},isMarkAllContentAsReadSupported:function(){return this._provider.isMarkAllContentAsReadSupported()}},e.Services.Messaging.ConversationService=i}(AvayaClientServices,$),function(e,t){"use strict";function i(i){this._conversationService=i,this.attachmentCount=0,this.totalMessageCount=0,this.active=!1,this.closed=!1,this.sensitivity=e.Services.Messaging.SensitivityLevel.NORMAL,this.href="",this.id="",this.lastAccessedTime=void 0,this.lastUpdated=void 0,this.latestEntryTimestamp=void 0,this.subject="",this.totalCount=0,this.type=e.Services.Messaging.ConversationType.THREAD,this.unreadAttachmentCount=0,this.unreadCount=0,this.resourceStatus=e.Services.Messaging.ResourceStatus.PUBLISHED,this.messages=new e.Base.DataSet,this.previewText="",this.participants=[],this.composingParticipants=new e.Base.DataSet,this.multiparty=!1,this._draftMessages=[],this._draftEscalations=[],this._typingTimeout={},this._counts={eventCount:0,eventUnreadMessage:0,messageAttachment:0,messageCount:0,messageUnreadAttachment:0,messageUnreadMessage:0},this._isSubscribed=!1,this._onMessagesAddedCallbacks=t.Callbacks(),this._onSubjectChangedCallbacks=t.Callbacks(),this._onParticipantsAddedCallbacks=t.Callbacks(),this._onParticipantsRemovedCallbacks=t.Callbacks(),this._onActiveStatusChangedCallbacks=t.Callbacks(),this._onClosedStatusChangedCallbacks=t.Callbacks(),this._onMultiPartyStatusChangedCallbacks=t.Callbacks(),this._onIsComposingStatusChangedCallbacks=t.Callbacks(),this._onLastAccessTimeChangedCallbacks=t.Callbacks(),this._onLastUpdatedTimeChangedCallbacks=t.Callbacks(),this._onLatestEntryTimeChangedCallbacks=t.Callbacks(),this._onResourceStatusChangedCallbacks=t.Callbacks(),this._onPreviewTextChangedCallbacks=t.Callbacks(),this._onTotalMessagesCountChangedCallbacks=t.Callbacks(),this._onTotalUnreadMessageCountChangedCallbacks=t.Callbacks(),this._onTotalAttachmentCountChangedCallbacks=t.Callbacks(),this._onTotalUnreadAttachmentCountChangedCallbacks=t.Callbacks(),this._onTotalEventCountChangedCallbacks=t.Callbacks(),this._onTotalUnreadEventCountChangedCallbacks=t.Callbacks(),this._onSensitivityChangedCallbacks=t.Callbacks(),this._onTypeChangedCallbacks=t.Callbacks(),this._onMessagesRemovedCallbacks=t.Callbacks(),this._onOtherMessagesAddedCallbacks=t.Callbacks(),this._updateSubjectCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateLastAccessTimeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateSensitivityCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._olderContentCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._addParticipantsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeParticipantsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createMessageCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createEscalationCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._markAllContentAsReadCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._leaveCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._startCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateTypeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._isTypingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={getSensitivity:function(){return this.sensitivity},isActive:function(){return this.active},isClosed:function(){return this.closed},isActiveAndNotClosed:function(){return this.active&&!this.closed},isMultiParty:function(){return this.multiparty},isComposing:function(){return this.composingParticipants.length>0},isPrivate:function(){return this.sensitivity===e.Services.Messaging.SensitivityLevel.PRIVATE},hasUnviewedMessagesSinceLastAccess:function(){return this._counts.messageUnreadMessage>0},hasUnviewedAttachments:function(){return this._counts.messageUnreadAttachment>0},hasAttachments:function(){return this._counts.messageAttachment>0},isParticipantActive:function(e){},getLastAccessTime:function(){return this.lastAccessTime},getLastUpdatedTime:function(){return this.lastUpdated},getLastEntryTime:function(){return this.latestEntryTimestamp},getComposingParticipants:function(){return this.composingParticipants},getAllParticipants:function(){return this.participants},getActiveParticipants:function(){return this.getAllParticipants()},getActiveParticipantsSorted:function(e){},getType:function(){return this.type},getTotalMessageCount:function(){return this._counts.messageCount},getAttachmentCount:function(){return this._counts.messageAttachment},getUnreadAttachmentCount:function(){return this._counts.messageUnreadAttachment},getUnreadMessageCount:function(){return this._counts.messageUnreadMessage},getEventCount:function(){return this._counts.eventCount},getEventUnreadCount:function(){return this._counts.eventUnreadMessage},getPreviewText:function(){return this.previewText},getSubject:function(){return this.subject},getLastUpdatedByParticipant:function(){var e=this.getLastMessage();if(void 0!==e)return this.participants.filter(function(t){return t.address===e.from.address})[0]},getStatus:function(){return this.resourceStatus},setSensitivity:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.sensitivity!==t&&(this.sensitivity=t,this._onSensitivityChangedCallbacks.fire(this,t))},setResourceStatus:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.resourceStatus!==t&&(this.resourceStatus=t,this._onResourceStatusChangedCallbacks.fire(this,t))},setLastAccess:function(){this._conversationService.setLastAccessTime(this)},setSubject:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.subject!==t&&(this.getStatus()===e.Services.Messaging.ResourceStatus.PUBLISHED&&this._conversationService.changeSubject(this,t),this.subject=t,this._onSubjectChangedCallbacks.fire(this,this.subject))},setType:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.type!==t&&(this.type=t,this._onTypeChangedCallbacks.fire(this,t))},getLastMessage:function(){return this.messages.filter(function(t){return t.getType()===e.Services.Messaging.MessageType.MESSAGE})[0]},createMessage:function(){return this._conversationService.createMessage(this)},getDraftMessages:function(){return this._draftMessages},removeAllDraftMessages:function(){this._draftMessages.forEach(function(e){var t=this.messages.indexOf(e);t>=0&&this.messages.splice(t,1)}.bind(this)),this._draftMessages.splice(0,this._draftMessages.length)},createEscalation:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]});var i=this._conversationService.createEscalation(this,t);return this._draftEscalations.push(i),i},getAllDraftEscalations:function(){return this._draftEscalations},removeEscalation:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.Escalation}]}),this._conversationService.removeEscalation(t,this._draftEscalations)},removeAllDraftEscalations:function(){this._draftEscalations.splice(0,this._draftEscalations.length)},getMessages:function(){return this.messages},getOtherMessages:function(t,i,a){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),e.Base.Utils.validate(i,{optional:!0,validators:[{type:"type",expected:e.Services.Messaging.Message}]}),e.Base.Utils.validate(a,{optional:!0,validators:[{type:"type",expected:"number"}]}),this._conversationService.getOtherMessages(t,i,a,this)},markAllContentAsRead:function(){return this._conversationService.markAllAsRead(this)},subscribeForTypingEvents:function(e){return this._conversationService.subscribeForTypingEvents(this,e)},unsubscribeForTypingEvents:function(){return this._conversationService.unsubscribeForTypingEvents(this)},addParticipantsAddresses:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:"string"}]}),this._conversationService.addParticipantsAddresses(this,t)},addParticipants:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:e.Services.Messaging.Participant}]}),this._conversationService.addParticipants(this,t)},removeParticipantsAddresses:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:"string"}]}),this._conversationService.removeParticipantsAddresses(this,t)},removeParticipants:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:e.Services.Messaging.Participant}]}),this._conversationService.removeParticipants(this,t)},getParticipants:function(t,i){return e.Base.Utils.validate(t,{optional:!0,validators:[{type:"type",expected:"boolean"}]}),e.Base.Utils.validate(i,{optional:!0,validators:[{type:"type",expected:"function"}]}),t?this.getActiveParticipants():this.getAllParticipants()},removeMessage:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.Message}]}),this._conversationService.removeMessage(this.messages,this._draftMessages,t)},start:function(){var e=t.Deferred();return setTimeout(function(){e.resolve()}),e.promise()},leave:function(){return this._conversationService.leave(this)},clearLocalAttachmentData:function(){},close:function(){return this._conversationService.close(this)},_updateParticipantsList:function(e){this._conversationService._updateParticipantsList(this,e)},getId:function(){return this.id},reportRecordingAudio:function(){return this._conversationService.reportRecordingAudio(this)},pauseRecordingAudio:function(){return this._conversationService.pauseRecordingAudio(this)},reportRecordingVideo:function(){return this._conversationService.reportRecordingVideo(this)},pauseRecordingVideo:function(){return this._conversationService.pauseRecordingVideo(this)},reportAttachingFile:function(){return this._conversationService.reportAttachingFile(this)},pauseAttachingFile:function(){return this._conversationService.pauseAttachingFile(this)},reportTakingPicture:function(){return this._conversationService.reportTakingPicture(this)},pauseTakingPicture:function(){return this._conversationService.pauseTakingPicture(this)}},e.Services.Messaging.Conversation=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(e){this._provider=e}i.prototype={start:function(t){for(var i={extensions:t.extensions,sessionType:t.sessionType,type:t.type,participants:[]},a=0;a<t.participants.length;a++)i.participants.push({address:t.participants[a].address});return t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_SENDING),this._provider.callEscalationEvent(i,t.conversation.id).then(function(i){return t.setResourceStatus(e.Services.Messaging.ResourceStatus.PUBLISHED),this._recalculateAllEscalationCapabilities(t),t._onStartSuccessCallbacks.fire(t),i}.bind(this),function(e){this._recalculateAllEscalationCapabilities(t),t._onStartFailedCallbacks.fire(t,e)}.bind(this))},addParticipantsAddresses:function(e,i){var a=t.Deferred(),n=this._provider.getRoutableDomains();if(e.getAddParticipantsCapability().isAllowed){for(var r=!1,s=0;s<i.length;s++)for(var o=0;o<n.length;o++)null!==i[s].match(n[o])&&(e.participants.push({address:i[s]}),r=!0);r&&e.participants.onDataSetChanged(),a.resolve(e)}else a.reject(e.getAddParticipantsCapability().denialReason);return a.promise()},addParticipants:function(e,i){var a=t.Deferred();if(e.getAddParticipantsCapability().isAllowed){for(var n=!1,r=0;r<i.length;r++)e.participants.push(i[r]),n=!0;n&&e.participants.onDataSetChanged(),a.resolve(e)}else a.reject(e.getAddParticipantsCapability().denialReason);return a.promise()},removeParticipantsAddresses:function(e,i){var a=t.Deferred();if(e.getRemoveParticipantsCapability().isAllowed){for(var n=!1,r=e.participants.length-1;r>=0;r--)for(var s=i.length-1;s>=0;s--)if(e.participants[r].address===i[s]){e.participants.splice(r,1),i.splice(s,1),n=!0;break}n&&e.participants.onDataSetChanged(),a.resolve(e)}else a.reject(e.getRemoveParticipantsCapability().denialReason);return a.promise()},removeParticipants:function(e,i){var a,n=t.Deferred();if(e.getRemoveParticipantsCapability().isAllowed){for(var r=e.participants.length-1;r>=0;r--)for(var s=i.length-1;s>=0;s--)if(e.participants[r].address===i[s].address){e.participants.splice(r,1),i.splice(s,1),a=!0;break}a&&e.participants.onDataSetChanged(),n.resolve(e)}else n.reject(e.getRemoveParticipantsCapability().denialReason);return n.promise()},setSessionType:function(t,i){if(!e.Base.Utils.isDefined(e.Services.Messaging.SessionType[i]))throw t._onSessionTypeChangedFailedCallbacks.fire(this,i),new Error("Unknown Session type");t.sessionType=i,t._onSessionTypeChangedSuccessCallbacks.fire(this,i)},_recalculateAllEscalationCapabilities:function(e){e._recalculateStartCapability(),e._recalculateAddParticipantsCapability(),e._recalculateRemoveParticipantsCapability(),e._recalculateUpdateSessionTypeCapability(),e._recalculateRemoveCapability()}},e.Services.Messaging.EscalationService=i}(AvayaClientServices,$),function(e,t){"use strict";function i(t){e.Services.Messaging.AbstractThumbnailCreator.call(this,t)}i.prototype=Object.create(e.Services.Messaging.AbstractThumbnailCreator.prototype),i.prototype.create=function(e,i){var a=t.Deferred(),n={disposition:e.disposition.replace("attachment","inline"),mimeType:"image/jpeg",status:e.status},r=new FileReader;return r.onloadend=function(){var t=new Image;t.src=r.result;var s=new Blob([this._resizeImage(t,i)],{type:"image/jpeg"});n.size=s.size,e.thumbnail=this._attachmentBuilder.build(n,s),a.resolve(e.thumbnail)}.bind(this),r.onerror=function(e){a.reject(e)}.bind(this),r.readAsDataURL(e.file),a.promise()},e.Services.Messaging.ImageThumbnailCreator=i}(AvayaClientServices,jQuery),function(){"use strict";function e(e,t){this._attachmentBuilder=e,this._participantService=t}e.prototype={build:function(e,t,i,a){var n=new AvayaClientServices.Services.Messaging.Message(i,a);if(n.resourceStatus=e.resourceStatus||AvayaClientServices.Services.Messaging.ResourceStatus.PUBLISHED,n.body=e.body,e.event&&(n.type=e.event.type,n.eventRelatedParticipants=e.event.participants),e.flags&&(n.sensitivity=e.flags.sensitivity,n.importance=e.flags.importance,n.read=e.flags.read,n.doNotForward=e.flags.doNotForward),n.from=t,n.href=e.href,n.id=e.id,n.lastModifiedDate=e.lastModifiedDate?new Date(e.lastModifiedDate):new Date,n.receivedDate=new Date(e.receivedDate),n.subject=e.subject,n.threadId=e.threadId,n.to=[],e.to&&e.to.forEach&&(e.to.forEach(function(e){n.to.push(this._participantService.getOrCreateParticipant(e))}.bind(this)),a._updateParticipantsList(n.to)),e.parts){var r=[];e.parts.forEach(function(e){r.push(this._attachmentBuilder.build(e))}.bind(this)),n.parts=this.pairThumbnailsAndAttachments(r)}return i._recalculateAllMessageCapabilities(n),n},update:function(e,t){e.body!==t.body&&(e.body=t.body,e._onBodyChangedCallbacks.fire(e,e.body)),e.type!==t.event.type&&(e.type=t.event.type,e._onTypeChangedCallbacks.fire(e,e.type)),e.doNotForward!==t.flags.doNotForward&&(e.doNotForward=t.flags.doNotForward,e._onDoNotForwardStatusChangedCallbacks.fire(e,e.doNotForward)),e.importance!==t.flags.importance&&(e.importance=t.flags.importance,e._onImportanceChangedCallbacks.fire(e,e.importance)),e.sensitivity!==t.flags.sensitivity&&(e.sensitivity=t.flags.sensitivity,e._onSensitivityChangedCallbacks.fire(e,e.sensitivity)),e.read!==t.flags.read&&(e.read=t.flags.read,e._onIsReadStatusChangedCallbacks.fire(e,e.read)),e.href!==t.href&&(e.href=t.href);var i=new Date(t.lastModifiedDate);e.lastModifiedDate&&e.lastModifiedDate.toISOString()===i.toISOString()||(e.lastModifiedDate=i,e._onLastModifiedDateChangedCallbacks.fire(e,i)),i=new Date(t.receivedDate),e.receivedDate&&"Invalid Date"!==e.receivedDate.toString()&&e.receivedDate.toISOString()===i.toISOString()||(e.receivedDate=i),e.subject!==t.subject&&(e.subject=t.subject),e.id!==t.id&&(e.id=t.id),e.threadId!==t.threadId&&(e.threadId=t.threadId);var a=[];t.parts.forEach(function(e){a.push(this._attachmentBuilder.build(e))}.bind(this)),this.pairThumbnailsAndAttachments(a).forEach(function(t){var i=e.parts.filter(function(e){return e.disposition===t.disposition})[0];i&&this._attachmentBuilder.update(i,t)}.bind(this)),e._attachments.length>0&&e._attachments.splice(0,e._attachments.length)},isMessageCoalesced:function(e,t){if(null==e)return!1;if(null==t)return!1;if(e.getMessageStatus()===AvayaClientServices.Services.Messaging.ResourceStatus.DRAFT_ERROR)return!1;if(t.getMessageStatus()===AvayaClientServices.Services.Messaging.ResourceStatus.DRAFT_ERROR)return!1;if(void 0!==e.getFromParticipant()&&e.getFromParticipant().getAddress()!==t.getFromParticipant().getAddress())return!1;if(e.hasAttachment())return!1;if(e.getType()===AvayaClientServices.Services.Messaging.MessageType.JOINED||e.getType()===AvayaClientServices.Services.Messaging.MessageType.LEFT||e.getType()===AvayaClientServices.Services.Messaging.MessageType.CLOSED||e.getType()===AvayaClientServices.Services.Messaging.MessageType.START)return!1;if(t.getType()===AvayaClientServices.Services.Messaging.MessageType.JOINED||t.getType()===AvayaClientServices.Services.Messaging.MessageType.LEFT||t.getType()===AvayaClientServices.Services.Messaging.MessageType.CLOSED||t.getType()===AvayaClientServices.Services.Messaging.MessageType.START)return!1;if(e.getSensitivity()!==t.getSensitivity())return!1;if(t.hasAttachment())return!1;if(e.getReceivedDate()<t.getReceivedDate())return!1;var i=e.getReceivedDate()-t.getReceivedDate();return!(isNaN(i)||i>6e4)},pairThumbnailsAndAttachments:function(e){var t,i={},a=[],n=function(e){return function(t){return t.getName()===e}};for(t=0;t<e.length;t++)i[e[t].getName()]=e.filter(n(e[t].getName()));for(var r in i)if(i.hasOwnProperty(r))if(2===i[r].length){var s=i[r][0].isThumbnail()?i[r][0]:i[r][1],o=i[r][0].isThumbnail()?i[r][1]:i[r][0];o.thumbnail=s,a.push(o)}else for(t=0;t<i[r].length;t++)a.push(i[r][t]);return a}},AvayaClientServices.Services.Messaging.MessageBuilder=e}(AvayaClientServices),function(e,t){"use strict";function i(e,t,i){this._provider=e,this._attachmentBuilder=i,this._messageBuilder=t,this._messagesToRead=[],this._promises=[]}i.prototype={_prepareMessage:function(t){var i={body:t.getBody(),subject:t.subject,threadId:t.getThreadId(),flags:{sensitivity:t.getSensitivity(),importance:t.getImportance()},to:[]};e.Base.Utils.isUndefined(t.inReplyTo)||(i.inReplyTo=t.inReplyTo.id);for(var a=0;a<t.to.length;a++)i.to.push({address:t.to[a].address,type:t.to[a].type});return i},send:function(t){var i,a=this._prepareMessage(t),n=function(i){return this._messageBuilder.update(t,i),t.lastModifiedDate=new Date,t.setResourceStatus(e.Services.Messaging.ResourceStatus.PUBLISHED),this._recalculateAllMessageCapabilities(t),t.getAttachments().length>0&&t.getAttachments().forEach(function(t){t.setResourceStatus(e.Services.Messaging.ResourceStatus.PUBLISHED)}.bind(this)),t},r=function(i){return t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_ERROR),this._recalculateAllMessageCapabilities(t),t.getAttachments().length>0&&t.getAttachments().forEach(function(t){t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_ERROR)}.bind(this)),i};return t.getAttachments().length>0?(t.getAttachments().forEach(function(t){t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_SENDING)}.bind(this)),i=this._provider.sendMessageWithAttachments(a,t.getAttachments()).then(n.bind(this),r.bind(this))):i=this._provider.sendMessage(a).then(n.bind(this),r.bind(this)),t.setResourceStatus(e.Services.Messaging.ResourceStatus.DRAFT_SENDING),i},getPartById:function(e,t){return e.filter(function(e){return e.id===t})[0]},markAsRead:function(e){var i=t.Deferred();return 0===this._messagesToRead.length&&setTimeout(function(){var e=[];this._messagesToRead.forEach(function(t){e.push(t.id)}),this._provider.markAsReadBatch(e).then(function(e){this._messagesToRead.forEach(function(e){e._recalculateMarkAsReadCapability()}),this._promises.forEach(function(t){t.resolve(e)})}.bind(this),function(e){this._messagesToRead.forEach(function(e){e._recalculateMarkAsReadCapability()}),this._promises.forEach(function(t){t.reject(e)})}.bind(this)),this._messagesToRead=[],this._promises=[]}.bind(this),2e3),this._messagesToRead.push(e),this._promises.push(i),i.promise()},removeDraftAttachment:function(e,t){var i=e.parts.indexOf(t);-1!==i&&(e.parts.splice(i,1),e.parts.onDataSetChanged()),-1!==(i=e._attachments.indexOf(t))&&e._attachments.splice(e._attachments.indexOf(t),1)},removeAllDraftAttachments:function(e){e._attachments.forEach(function(t){var i=e.parts.indexOf(t);-1!==i&&e.parts.splice(i,1)}.bind(e)),e._attachments.length>0&&e.parts.onDataSetChanged(),e._attachments.splice(0,e._attachments.length)},createAttachment:function(t,i){if(this._validateAttachmentSize(i)){var a={disposition:'attachment; filename="'+i.name+'"',mimeType:""!==i.type?i.type:"application/octet-stream",size:i.size,status:e.Services.Messaging.ResourceStatus.DRAFT_UNSENT},n=this._attachmentBuilder.build(a,i);return t._attachments.push(n),t.parts.push(n),t.parts.onDataSetChanged(),n.addOnResourceStatusChangedCallback(function(){this._recalculateAllAttachmentCapabilities(n)}.bind(this)),n}throw new Error("Size not valid.")},stop:function(){this._messagesToRead=[],this._promises=[]},_recalculateAllMessageCapabilities:function(e){e._recalculateUpdateBodyCapability(),e._recalculateUpdateSensitivityCapability(),e._recalculateUpdateInReplyToCapability(),e._recalculateUpdateDoNotForwardCapability(),e._recalculateUpdateImportanceCapability(),e._recalculateCreateAttachmentCapability(),e._recalculateSendCapability(),e._recalculateMarkAsReadCapability(),e._recalculateRemoveCapability()},_recalculateAllAttachmentCapabilities:function(e){e._recalculateUpdateNameCapability(),e._recalculateUpdateMimeTypeCapability(),e._recalculateUpdateDurationCapability(),e._recalculateUpdateSizeCapability(),e._recalculateUpdateLocationCapability(),e._recalculateUpdateIsSelfGeneratedCapability(),e._recalculateCreateThumbnailCapability(),e._recalculateRemoveThumbnailCapability(),e._recalculateCanDownloadCapability(),e._recalculateCanConsumeCapability(),e._recalculateRemoveCapability()},_validateAttachmentSize:function(e){var t=this._provider.getResources();return 3===t.version&&t.limits?!(-1!==e.type.indexOf("image")&&t.limits.maxImageSize&&e.size>t.limits.maxImageSize)&&(!(-1!==e.type.indexOf("video")&&t.limits.maxVideoSize&&e.size>t.limits.maxVideoSize)&&(!(-1!==e.type.indexOf("audio")&&t.limits.maxAudioSize&&e.size>t.limits.maxAudioSize)&&(!(-1!==e.type.indexOf("text")&&t.limits&&t.limits.maxTextLength&&e.size>t.limits.maxTextLength)&&!(t.limits.maxGenericAttachmentSize&&e.size>t.limits.maxGenericAttachmentSize)))):4!==t.version||!t.outbox||!t.outbox.limits||!(-1!==e.type.indexOf("image")&&t.outbox.limits.maxImageSize&&e.size>t.outbox.limits.maxImageSize)&&(!(-1!==e.type.indexOf("video")&&t.outbox.limits.maxVideoSize&&e.size>t.outbox.limits.maxVideoSize)&&(!(-1!==e.type.indexOf("audio")&&t.outbox.limits.maxAudioSize&&e.size>t.outbox.limits.maxAudioSize)&&(!(-1!==e.type.indexOf("text")&&t.outbox.limits.maxTextLength&&e.size>t.outbox.limits.maxTextLength)&&!(t.outbox.limits.maxGenericAttachmentSize&&e.size>t.outbox.limits.maxGenericAttachmentSize))))}},e.Services.Messaging.MessageService=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(i,a){this._messageService=i,this.conversation=a,this.resourceStatus=e.Services.Messaging.ResourceStatus.PUBLISHED,this.body="",this.type=e.Services.Messaging.MessageType.MESSAGE,this.sensitivity=e.Services.Messaging.SensitivityLevel.NORMAL,this.importance=e.Services.Messaging.MessageImportance.NORMAL,this.read=!1,this.doNotForward=!1,this.from=void 0,this.href="",this.id="",this.lastModifiedDate=void 0,this.receivedDate=void 0,this.subject="",this.threadId="",this.to=void 0,this.parts=new e.Base.DataSet,this._attachments=[],this.coalesced=!1,this.inReplyTo=void 0,this._onTypeChangedCallbacks=t.Callbacks(),this._onBodyChangedCallbacks=t.Callbacks(),this._onInReplyToChangedCallbacks=t.Callbacks(),this._onLastModifiedDateChangedCallbacks=t.Callbacks(),this._onIsCoalescedStatusChangedCallbacks=t.Callbacks(),this._onHasAttachmentStatusChangedCallbacks=t.Callbacks(),this._onHasUnviewedAttachmentStatusChangedCallbacks=t.Callbacks(),this._onIsPrivateStatusChangedCallbacks=t.Callbacks(),this._onDoNotForwardStatusChangedCallbacks=t.Callbacks(),this._onIsReadStatusChangedCallbacks=t.Callbacks(),this._onResourceStatusChangedCallbacks=t.Callbacks(),this._onImportanceChangedCallbacks=t.Callbacks(),this._onSensitivityChangedCallbacks=t.Callbacks(),this._updateBodyCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateSensitivityCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateInReplyToCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateDoNotForwardCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateImportanceCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createAttachmentCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._sendCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._markAsReadCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={getType:function(){return this.type},getBody:function(){return this.body},getThreadId:function(){return this.threadId},getInReplyTo:function(){return this.inReplyTo},getLastModifiedDate:function(){return this.lastModifiedDate},getReceivedDate:function(){return this.receivedDate},isCoalesced:function(){return this.coalesced},hasAttachment:function(){return this.parts.length>0},hasUnviewedAttachment:function(){},isPrivate:function(){return this.sensitivity===e.Services.Messaging.SensitivityLevel.PRIVATE},isDoNotForward:function(){return this.doNotForward},isRead:function(){return this.read},isReceivedOfflineMessage:function(){},getFromParticipant:function(){return this.from},getParticipantsForType:function(){},getAttachments:function(){return this.parts},getMessageStatus:function(){return this.resourceStatus},getImportance:function(){return this.importance},getSensitivity:function(){return this.sensitivity},setBodyAndReportTyping:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.body!==t&&(this.body=t,this._onBodyChangedCallbacks.fire(this,t),this.conversation.getStatus()===e.Services.Messaging.ResourceStatus.PUBLISHED&&this.conversation.getIsTypingCapability().isAllowed&&this.conversation._conversationService.reportTyping(this))},setSensitivity:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.sensitivity!==t&&(this.sensitivity=t,this._onSensitivityChangedCallbacks.fire(this,t))},setIsCoalesced:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"boolean"}]}),this.coalesced!==t&&(this.coalesced=t,this._onIsCoalescedStatusChangedCallbacks.fire(this,t))},setInReplyTo:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.Message}]}),t instanceof e.Services.Messaging.Message&&void 0!==t.id&&this.inReplyTo!==t&&(this.inReplyTo=t,this._onInReplyToChangedCallbacks.fire(this,t))},setDoNotForward:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"boolean"}]}),this.doNotForward!==t&&(this.doNotForward=t,this._onDoNotForwardStatusChangedCallbacks.fire(this,t))},setResourceStatus:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.resourceStatus!==t&&(this.resourceStatus=t,this._onResourceStatusChangedCallbacks.fire(this,t))},setMessageImportance:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:"string"}]}),this.importance!==t&&(this.importance=t,this._onImportanceChangedCallbacks.fire(this,t))},markAsRead:function(){return this._messageService.markAsRead(this)},send:function(){return this._messageService.send(this)},createAttachment:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:File}]}),this._messageService.createAttachment(this,t)},removeDraftAttachment:function(t){e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.Attachment}]}),this._messageService.removeDraftAttachment(this,t)},removeAllDraftAttachments:function(){this._messageService.removeAllDraftAttachments(this)}},e.Services.Messaging.Message=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(t,i){var a=new e.Services.Messaging.ThumbnailCreator,n=i.getMessagingProviders(t)[0];this._messagingService=this._createMessagingService(n,a)}t.prototype={create:function(){var t=new e.Services.Messaging.Messaging(this._messagingService);return this._messagingService._recalculateAllMessagingCapabilities(t),t},_createMessagingService:function(t,i){var a=new e.Services.Messaging.ParticipantService,n=new e.Services.Messaging.AttachmentBuilder(i);i.registerCreator("image/*",new e.Services.Messaging.ImageThumbnailCreator(n)),i.registerCreator("video/*",new e.Services.Messaging.VideoThumbnailCreator(n));var r=new e.Services.Messaging.MessageBuilder(n,a),s=new e.Services.Messaging.MessageService(t,r,n),o=new e.Services.Messaging.EscalationService(t),c=new e.Services.Messaging.ConversationBuilder(r),l=new e.Services.Messaging.ConversationService(t,s,a,o,r,c),d=new e.Services.Messaging.MessagingService(t,l,s,a,c);return l._messagingService=d,d}},e.Services.Messaging.MessagingFactory=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i,a,n,r){this._hasStarted=!1,this._provider=t,this._messageService=a,this._conversationService=i,this.conversations=new e.Base.DataSet,this._draftConversations=[],this._identity={},this._participantsService=n,this._conversationBuilder=r}i.prototype={getConversations:function(e,t){var i=e.getRetrieveConversationsCapability();if(i.isAllowed){if(0===this.conversations.length){var a=function(e){t&&"function"==typeof t&&t(e)}.bind(this),n=function(t){this._updateConversationsContainer(t,this.conversations,e),0===this.conversations.length&&this.conversations.onDataSetChanged(),this._provider.observeConversations(),this._provider.on("conversations.update",function(t){this._updateConversationsContainer(t,this.conversations,e)}.bind(this))}.bind(this);this._provider.getConversations().then(n,a)}return this.conversations}throw new Error(i.denialReason)},getConversationIds:function(){return this._provider.getConversationIds()},getConversationById:function(t,i){var a=new e.Base.DataSet,n=this.conversations.filter(function(e){return e.id===t});return n.length>0?a.push(n[0]):this._provider.getConversationsByQuery({id:t}).then(function(e){this._updateConversationsContainer(e,a,i)}.bind(this)),a},getDraftConversations:function(){return this._draftConversations},leaveAllConversations:function(){return this.leaveConversations(this.conversations)},leaveConversations:function(e){for(var i=[],a=t.Deferred(),n=e.length,r=0;n>r;r++)i.push(e[r].leave());return t.when.apply(this,i).then(function(){for(var t=0;n>t;t++)this.conversations.splice(this.conversations.indexOf(e[t]),1);this.conversations.onDataSetChanged(),a.resolve(!0)}.bind(this),function(e){a.reject(e)}),a.promise()},createConversation:function(t){var i=this._conversationBuilder.build({resourceStatus:e.Services.Messaging.ResourceStatus.DRAFT_UNSENT},this._conversationService);return i.participants.push(this._participantsService.getSelfParticipant()),this.conversations.push(i),this.conversations.onDataSetChanged(),this._draftConversations.push(i),i.addOnResourceStatusChangedCallback(function(t,i){if(i===e.Services.Messaging.ResourceStatus.PUBLISHED){var a=this._draftConversations.indexOf(t);this._draftConversations.splice(a,1)}this._conversationService._recalculateAllConversationCapabilities(t)}.bind(this)),i.addOnActiveStatusChangedCallback(function(e){this._conversationService._recalculateAllConversationCapabilities(e)}.bind(this)),i.addOnClosedStatusChangedCallback(function(e,i){var a=this.conversations.indexOf(e);a>-1&&(this.conversations.splice(a,1),this.conversations.onDataSetChanged(),t._onConversationsRemovedCallbacks.fire(e,i)),this._conversationService._recalculateAllConversationCapabilities(e)}.bind(this)),i.lastUpdated=new Date,i},start:function(t,i){return e.Base.Logger.debug("MessagingService start"),this._hasStarted=!0,this._provider.start(i.ammConfiguration).then(function(){return t._resources=this._provider.getResources(),t.validateUsers([t.getSelfAddress()])}.bind(this)).then(function(e){var i=this._participantsService.getOrCreateParticipant(e[0]);this._identity.participant=i,this._participantsService.setSelfParticipant(i),this._recalculateAllMessagingCapabilities(t)}.bind(this),function(e){return this._hasStarted=!1,this._recalculateAllMessagingCapabilities(t),e}.bind(this))},stop:function(i){if(!this._hasStarted){var a=t.Deferred();return a.reject({code:401,message:"Messaging has yet not started."}),a.promise()}return this._provider.stop().then(function(t){this._messageService.stop(),this._participantsService.stop(),this._draftConversations=[];for(var a=this.conversations.length,n=0;a>n;n++){for(var r=this.conversations[n].messages.length,s=0;r>s;s++){for(var o=this.conversations[n].messages[s].parts.length,c=0;o>c;c++)delete this.conversations[n].messages[s].parts[c];delete this.conversations[n].messages[s]}for(var l=this.conversations[n]._draftEscalations.length,d=0;l>d;d++)delete this.conversations[n]._draftEscalations[d];delete this.conversations[n]}return this.conversations=new e.Base.DataSet,this._hasStarted=!1,i._resources={},i._onConversationsAddedCallbacks.empty(),i._onConversationsRemovedCallbacks.empty(),i._onMessagingLimitsChangedCallbacks.empty(),i._onNumberOfConversationWithUnreadContentChangedCallbacks.empty(),i._onNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallbacks.empty(),i._onRoutableDomainsChangedCallbacks.empty(),this._recalculateAllMessagingCapabilities(i),t}.bind(this))},getNumberOfConversationsWithUnreadContent:function(){return this.conversations.filter(function(e){return e.getUnreadMessageCount()>0||e.getUnreadAttachmentCount()>0}).length},validateUsers:function(e){return this._conversationService.validateUsers(e)},searchConversations:function(t,i,a){var n=new e.Base.DataSet,r={q:t.getQuery(),subject:t.isSearchSubject(),participants:t.isSearchParticipants(),body:t.isSearchBody()};return t.getQueryAfter()&&(r.after=t.getQueryAfter().toISOString()),this._provider.getConversationsByQuery(r).then(function(e){this._updateConversationsContainer(e,n,a)}.bind(this),function(e){i&&"function"==typeof i&&i(e)}),this._searchLocalConversations(this.conversations,t).forEach(function(e){n.push(e)}),setTimeout(function(){n.onDataSetChanged()},0),n},_createNewConversation:function(e,t){var i=this._conversationBuilder.build(e,this._conversationService);return this._conversationBuilder.update(i,e,this._conversationService),i.addOnClosedStatusChangedCallback(function(e,i){var a=this.conversations.indexOf(e);a>-1&&(this.conversations.splice(a,1),this.conversations.onDataSetChanged(),t._onConversationsRemovedCallbacks.fire(e,i))}.bind(this)),i},_getById:function(e,t){return e.filter(function(e){return e.id===t})[0]},_updateConversationsContainer:function(e,t,i){if(e&&e.conversations&&e.conversations.length>0){for(var a=[],n=!1,r=0;r<e.conversations.length;r++){var s=e.conversations[r],o=this._getById(t,s.id);if(o)o.getLastUpdatedTime().toISOString()!==new Date(s.lastUpdated).toISOString()&&(this._conversationBuilder.update(o,s,this._conversationService),n=!0);else{var c=this._createNewConversation(s,i);c.participants=this._conversationService.getParticipantsFromMessage(s.messages[0]),t.unshift(c),n=!0}a.push(s.id)}n&&t.onDataSetChanged()}},_searchLocalConversations:function(i,a){var n=[];return i.forEach(function(i){var r=!1;a.isSearchSubject()&&-1!==i.getSubject().toLowerCase().indexOf(a.getQuery())&&(r=!0),a.isSearchParticipants()&&i.getParticipants().forEach(function(e){(-1!==e.givenName.toLowerCase().indexOf(a.getQuery())||-1!==e.surname.toLowerCase().indexOf(a.getQuery()))&&(r=!0)});var s=i.getMessages();a.isSearchBody()&&(s=i.getMessages().filter(function(e){return a.isSearchBody()&&e.body&&-1!==e.body.toLowerCase().indexOf(a.getQuery())?(r=!0,!0):void 0}));var o=a.getQueryAfter();if(o&&r&&(r=i.getLastUpdatedTime()>=o),r){var c=t.extend(new e.Services.Messaging.Conversation,i);c.messages=new e.Base.DataSet,s.forEach(function(i){c.messages.push(t.extend(new e.Services.Messaging.Message(this._messageService,c),i))}.bind(this)),this._conversationBuilder._updatePreviewText(c),n.push(c)}}.bind(this)),n},removeConversation:function(e){var i=t.Deferred();if(e.getRemoveCapability().isAllowed){var a=this.conversations.indexOf(e);a>=0&&(this.conversations.splice(a,1),this.conversations.onDataSetChanged()),(a=this._draftConversations.indexOf(e))>=0&&this._draftConversations.splice(a,1),i.resolve()}else i.reject(e.getRemoveCapability().denialReason);return i.promise()},removeAllDraftConversations:function(){for(var e=this._draftConversations.length-1;e>=0;e--)this.removeConversation(this._draftConversations[e])},_recalculateAllMessagingCapabilities:function(e){e._recalculateRetrieveConversationsCapability(),e._recalculateStartServiceCapability(),e._recalculateCreateConversationCapability(),e._recalculateSearchConversationsCapability(),e._recalculateUpdateRefreshIntervalCapability(),e._recalculateValidateParticipantAddressCapability(),e._recalculateMarkContentAsReadCapability(),e._recalculateClearLocalDataCapability()}},e.Services.Messaging.MessagingService=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(i){this._messagingService=i,this._resources={},this._onMessagingLimitsChangedCallbacks=t.Callbacks(),this._onRoutableDomainsChangedCallbacks=t.Callbacks(),this._onNumberOfConversationWithUnreadContentChangedCallbacks=t.Callbacks(),this._onNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallbacks=t.Callbacks(),this._onConversationsAddedCallbacks=t.Callbacks(),this._onConversationsRemovedCallbacks=t.Callbacks(),this._retrieveConversationsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._startServiceCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createConversationCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._searchConversationsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateRefreshIntervalCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._validateParticipantAddressCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._markContentAsReadCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._clearLocalDataCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE)}i.prototype={getRefreshMode:function(){},getRoutableDomains:function(){return this._resources.domains},getSelfAddress:function(){return this._resources.self},getMessagingProviderType:function(){},getNumberOfConversationsWithUnviewedContentSinceLastAccess:function(){},getNumberOfConversationsWithUnreadContent:function(){return this._messagingService.getNumberOfConversationsWithUnreadContent()},createConversation:function(){return this._messagingService.createConversation(this)},getConversations:function(t){return e.Base.Utils.validate(t,{optional:!0,validators:[{type:"type",expected:"function"}]}),this._messagingService.getConversations(this,t)},getConversationIds:function(){return this._messagingService.getConversationIds()},getDraftConversations:function(){return this._messagingService.getDraftConversations()},searchConversations:function(t,i){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.MessagingQuery}]}),e.Base.Utils.validate(i,{optional:!0,validators:[{type:"type",expected:"function"}]}),this._messagingService.searchConversations(t,i,this)},getAllConversationsForContact:function(e){},refresh:function(){},setRefreshMode:function(e){},validateUsers:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:"string"}]}),this._messagingService.validateUsers(t)},leaveConversations:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:Array},{type:"arrayElementType",expected:e.Services.Messaging.Conversation}]}),this._messagingService.leaveConversations(t)},leaveAllConversations:function(){return this._messagingService.leaveAllConversations()},markMessagesAsRead:function(e,t){},start:function(e){return this._messagingService.start(this,e)},stop:function(){return this._messagingService.stop(this)},clearAllLocalData:function(){},removeConversation:function(t){return e.Base.Utils.validate(t,{validators:[{type:"defined"},{type:"type",expected:e.Services.Messaging.Conversation}]}),this._messagingService.removeConversation(t)},removeAllDraftConversations:function(){this._messagingService.removeAllDraftConversations()}},e.Services.Messaging.Messaging=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(e,t){this.address=e.address,this.type=e.type,this.givenName=e.givenName,this.language=e.language,this.modalities=e.modalities,this.nativeGivenName=e.nativeGivenName,this.nativeSurname=e.nativeSurname,this.surname=e.surname,this.contact=void 0,this.self=t}t.prototype={getType:function(){return this.type},getAddress:function(){return this.address},getGivenName:function(){return this.givenName},getSurname:function(){return this.nativeSurname},getDisplayName:function(){return this.givenName||this.surname?this.surname?this.givenName?this.displayOrder?this.displayOrder===e.Services.Messaging.DisplayOrder.DISPLAY_ORDER_FIRST?this.givenName+" "+this.surname:this.surname+" "+this.givenName:this.givenName+" "+this.surname:this.surname:this.givenName:this.address},getDisplayOrder:function(){return this.displayOrder},setDisplayOrder:function(e){this.displayOrder=e},getSupportedModalities:function(){return this.modalities},hasContact:function(){return void 0!==this.contact},isSelf:function(){return this.self},getContact:function(){return this.contact},getAllConversations:function(){}},e.Services.Messaging.Participant=t}(AvayaClientServices),function(e){"use strict";function t(){this._participants=[],this._selfParticipant=void 0}t.prototype={getOrCreateParticipant:function(t){var i=t.address||t.from.address,a=this._getParticipant(i);if(!a){var n=!!this._selfParticipant&&this._selfParticipant.getAddress()===i;a=new e.Services.Messaging.Participant(t,n),this._participants.push(a)}return a},_getParticipant:function(e){return this._participants.filter(function(t){return t.getAddress()===e})[0]},setSelfParticipant:function(e){this._selfParticipant=e,this._selfParticipant.self=!0},getSelfParticipant:function(){return this._selfParticipant},stop:function(){this._selfParticipant=void 0,this._participants=[]}},e.Services.Messaging.ParticipantService=t}(AvayaClientServices),function(e,t){"use strict";function i(e){this._config=e||{width:128},this._creators={}}i.prototype={getConfig:function(){return this._config},setConfig:function(e){this._config=e},registerCreator:function(e,t){this._creators[e]=t},unregisterCreator:function(e){this._creators[e]=void 0},create:function(e,t){var i;if(t||(t=this._config),e.getCreateThumbnailCapability().isAllowed)return i=this._creators[e.getMimeType()]?e.getMimeType():e.getMimeType().slice(0,e.getMimeType().indexOf("/")+1)+"*",this._creators[i].create(e,t)}},e.Services.Messaging.ThumbnailCreator=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t){e.Services.Messaging.AbstractThumbnailCreator.call(this,t)}i.prototype=Object.create(e.Services.Messaging.AbstractThumbnailCreator.prototype),i.prototype.create=function(e,i){var a=t.Deferred(),n={disposition:e.disposition.replace("attachment","inline"),mimeType:"image/jpeg",status:e.status},r=new FileReader;return r.onloadend=function(){this._getFirstFrameFromVideo(r.result,function(t){var r=new Image;r.src=t;var s=new Blob([this._resizeImage(r,i)],{type:"image/jpeg"});n.size=s.size,e.thumbnail=this._attachmentBuilder.build(n,s),a.resolve(e.thumbnail)}.bind(this))}.bind(this),r.readAsDataURL(e.file),a.promise()},i.prototype._getFirstFrameFromVideo=function(e,i){var a,n,r=document.createElement("canvas"),s=document.createElement("video"),o=document.createElement("source");o.src=e,o.type="video/mp4",s.appendChild(o),t(s).on("loadedmetadata",function(){r.height=n=s.videoHeight,r.width=a=s.videoWidth}),t(s).on("loadeddata",function(){r.getContext("2d").drawImage(s,0,0,a,n),i(r.toDataURL("image/jpeg"))}),t(s).on("error",function(){throw new Error}),s.load()},e.Services.Messaging.VideoThumbnailCreator=i}(AvayaClientServices,jQuery),function(e){"use strict";AvayaClientServices.Services.Presence.PresenceError={UNKNOWN:"UNKNOWN",UNSUPPORTED:"UNSUPPORTED",CANCELLED:"CANCELLED",INVALID_STATE:"INVALID_STATE",INTERNAL_ERROR:"INTERNAL_ERROR",SEND_ERROR:"SEND_ERROR",TIMEOUT:"TIMEOUT",RETRY_LIMIT_EXCEEDED:"RETRY_LIMIT_EXCEEDED",INVALID_RESPONSE:"INVALID_RESPONSE",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",SERVER_ERROR:"SERVER_ERROR"}}(),function(e){"use strict";AvayaClientServices.Services.Presence.PresenceLocationMode={PRESENCE_LOCATION_MODE_UNSPECIFIED:"PRESENCE_LOCATION_MODE_UNSPECIFIED",PRESENCE_LOCATION_MODE_OFFICE:"PRESENCE_LOCATION_MODE_OFFICE",PRESENCE_LOCATION_MODE_HOME:"PRESENCE_LOCATION_MODE_HOME",PRESENCE_LOCATION_MODE_MOBILE:"PRESENCE_LOCATION_MODE_MOBILE",PRESENCE_LOCATION_MODE_TRAVELING:"PRESENCE_LOCATION_MODE_TRAVELING"}}(),function(e){"use strict";AvayaClientServices.Services.Presence.PresenceOptions={PRESENCE_OPTION_MANUAL_STATE:0,PRESENCE_OPTION_LOCATION_MODE:1,PRESENCE_OPTION_NOTE:2}}(),function(e){"use strict";AvayaClientServices.Services.Presence.PresenceState={PRESENCE_STATE_UNSPECIFIED:"PRESENCE_STATE_UNSPECIFIED",PRESENCE_STATE_UNKNOWN:"PRESENCE_STATE_UNKNOWN",PRESENCE_STATE_AVAILABLE:"PRESENCE_STATE_AVAILABLE",PRESENCE_STATE_ON_A_CALL:"PRESENCE_STATE_ON_A_CALL",PRESENCE_STATE_BUSY:"PRESENCE_STATE_BUSY",PRESENCE_STATE_AWAY:"PRESENCE_STATE_AWAY",PRESENCE_STATE_DO_NOT_DISTURB:"PRESENCE_STATE_DO_NOT_DISTURB",PRESENCE_STATE_OUT_OF_OFFICE:"PRESENCE_STATE_OUT_OF_OFFICE",PRESENCE_STATE_OFFLINE:"PRESENCE_STATE_OFFLINE"}}(),function(e){"use strict";AvayaClientServices.Services.Presence.PresenceWatcherRequestResult={PRESENCE_WATCHER_REQUEST_ALLOWED:"PRESENCE_WATCHER_REQUEST_ALLOWED",PRESENCE_WATCHER_REQUEST_DENIED:"PRESENCE_WATCHER_REQUEST_DENIED",PRESENCE_WATCHER_REQUEST_CANCELLED:"PRESENCE_WATCHER_REQUEST_CANCELLED"}}(),function(e){"use strict";function t(e,t,i,a,n,r,s){}t.prototype={getError:function(){},getPresence:function(){}},e.Services.Presence.PresenceException=t}(AvayaClientServices),function(e){"use strict";function t(){this._onPresenceListSubscriptionStartedCallbacks=$.Callbacks(),this._onPresenceListSubscriptionPresenceReceivedCallbacks=$.Callbacks(),this._onPresenceListSubscriptionStoppedCallbacks=$.Callbacks()}t.prototype={addAddress:function(e){},removeAddress:function(e){},start:function(){},stop:function(){}},e.Services.Presence.PresenceListSubscription=t}(AvayaClientServices),function(e){"use strict";function t(){this._onSelfPresenceReceivedCallbacks=$.Callbacks(),this._onPresenceWatcherRequestReceivedCallbacks=$.Callbacks(),this._onPresenceServiceAvailableCallbacks=$.Callbacks(),this._onPresenceServiceUnavailableCallbacks=$.Callbacks()}t.prototype={createPresenceListSubscription:function(){},removePresenceListSubscription:function(e){},publishPresence:function(e){},setSendAllCallsOnDoNotDisturb:function(e){},getSendAllCallsOnDoNotDisturb:function(){},getSelfPresence:function(){}},e.Services.Presence.PresenceService=t}(AvayaClientServices),function(e){"use strict";function t(e,t,i,a){this._resource=e,this._id=t,this._uri=i,this._displayName=a}t.prototype={getId:function(){},getURI:function(){},getDisplayName:function(){},getWatchedResource:function(){}},e.Services.Presence.PresenceWatcherRequest=t}(AvayaClientServices),function(e){"use strict";function t(e){this._presentity=e}t.prototype={getSupportedOptions:function(){},setSupportedOptions:function(e){},getPresentity:function(){},getOverallState:function(){},setOverallState:function(e){},getManualState:function(){},setManualState:function(e){},getPhoneState:function(){},setPhoneState:function(e){},getPhoneContact:function(){},setPhoneContact:function(e){},getVideoState:function(){},setVideoState:function(e){},getVideoContact:function(){},setVideoContact:function(e){},getEnterpriseIMState:function(){},setEnterpriseIMState:function(e){},getEnterpriseIMContact:function(){},setEnterpriseIMContact:function(e){},getCalendarState:function(){},setCalendarState:function(e){},getCalendarStartTime:function(){},setCalendarStartTime:function(e){},getCalendarEndTime:function(){},setCalendarEndTime:function(e){},getLocationMode:function(){},setLocationMode:function(e){},getNote:function(){},setNote:function(e){},getPresenceStateString:function(){},getPresenceLocationModeString:function(){}},e.Services.Presence.Presence=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype={getCallLogId:function(){},getParticipantList:function(){},getStartTime:function(){},getCallDuration:function(){},isCallerIdPrivate:function(){},getSubject:function(){},getRemoteAddress:function(){},getLocalAddress:function(){},getCallType:function(){},getWebConferenceAddress:function(){},getChannelTypeList:function(){},isBridged:function(){},isIncoming:function(){},isMissed:function(){},isDeclined:function(){},isFailed:function(){},isRead:function(){},getCorrelatedCallLogIdList:function(){}},e.Services.SessionLogs.CallLogItem=t}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype={getUnreadCount:function(){}},e.Services.SessionLogs.CallLogsDataSet=t}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";e.Services.SessionLogs.create=function(){return new e.Services.SessionLogs.SessionLogs}}(AvayaClientServices=AvayaClientServices||{}),function(e){"use strict";function t(){}t.prototype={getCurrentCallLogItemList:function(){},markAsRead:function(e,t){},deleteCallLogItemList:function(e,t){}},e.Services.SessionLogs.SessionLogs=t}(AvayaClientServices=AvayaClientServices||{}),function(e,t){"use strict";function i(i){if(this._config=i,this._collaborationFactory=void 0,this._collaboration=void 0,this._callFactory=void 0,this._calls=void 0,this._messagingFactory=void 0,this._messaging=void 0,this._contactsProviders=[],this._userRegistrationSuccessfulCallbacks=t.Callbacks(),this._userUnregistrationSuccessfulCallbacks=t.Callbacks(),this._userRegistrationFailedCallbacks=t.Callbacks(),this._userUnregistrationFailedCallbacks=t.Callbacks(),this._providerFactory=new e.Base.ProviderFactory,this._config.sgConfiguration&&this._config.sgConfiguration.enabled?(this._callFactory=new e.Services.Call.CallFactory(this._config,this._providerFactory),this._callFactory.init(this._config),this._calls=this._callFactory.calls):this._config.uccpConfiguration&&this._config.uccpConfiguration.enabled&&(this._callFactory=new e.Services.Call.CallFactory(this._config,this._providerFactory),this._callFactory.init(this._config),this._calls=this._callFactory.calls),this._config.ammConfiguration&&this._config.ammConfiguration.enabled&&(this._messagingFactory=new e.Services.Messaging.MessagingFactory(this._config,this._providerFactory),this._messaging=this._messagingFactory.create()),this._config.wcsConfiguration&&this._config.wcsConfiguration.enabled&&(this._collaborationFactory=new e.Services.Collaboration.CollaborationFactory(this._config,this._providerFactory),this._collaboration=this._collaborationFactory.create()),this._config.gatewayConfig&&(this._callFactory=new e.Services.Call.CallFactory,this._callFactory.init(this._config),this._calls=this._callFactory.calls),this._config.acsConfiguration&&this._config.acsConfiguration.enabled){var a=this._providerFactory.getContactsProviders(this._config)[0],n=this._providerFactory.getDirectorySearchProviders(this._config)[0],r=new e.Services.Contacts.ContactsService(a,n);this._contacts=new e.Services.Contacts.Contacts(r)}}i.prototype={getCollaboration:function(){return this._collaboration},getMessaging:function(){return this._messaging},getContacts:function(){return this._contacts},getCalls:function(){return this._calls},stop:function(){var e=t.Deferred(),i=[];if(this._messaging){var a=this._messaging.stop();i.push(a)}if(this._contacts){var n=this._contacts.stop();i.push(n)}if(this._calls){var r=this._config.callUserConfiguration.incomingCall;this._calls._stop().then(function(){r&&this._userUnregistrationSuccessfulCallbacks.fire()}.bind(this),function(e){r&&this._userUnregistrationFailedCallbacks.fire(e)}.bind(this))}return t.when.apply(this,i).then(function(){e.resolve()},function(t){e.reject(t)}),e.promise()},start:function(){var e=t.Deferred(),i=[];if(this._messaging){var a=this._messaging.start(this._config);i.push(a)}if(this._contacts){var n=this._contacts.start(this._config);i.push(n)}if(this._calls){var r=this._config.callUserConfiguration.incomingCall;this._calls._start(r).then(function(){r&&this._userRegistrationSuccessfulCallbacks.fire()}.bind(this),function(e){r&&this._userRegistrationFailedCallbacks.fire(e)}.bind(this))}return t.when.apply(this,i).then(function(){e.resolve()},function(t){e.reject(t)}),e.promise()}},e.User=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Base.Observable.call(this),this._elements={},this._appliedElementIds=[]}i.prototype=Object.create(e.Base.Observable.prototype),i.prototype.getElement=function(e){return this._elements[e]},i.prototype.getElements=function(){},i.prototype.addElement=function(e,t){return!(!e||!t||this.getElement(e))&&(this._elements[e]=t,this.trigger("element_added",[t]),!0)},i.prototype.updateElement=function(e,t){if(e&&t){var i=this.getElement(e);if(i&&!this._areElementsEqual(i,t))return this._elements[e]=t,this.trigger("element_updated",[t]),!0}return!1},i.prototype.deleteElement=function(e){var t=this.getElement(e);return!!t&&(delete this._elements[e],this.trigger("element_deleted",[t]),!0)},i.prototype.empty=function(){for(var e in this._elements)this.deleteElement(e)},i.prototype.applyElements=function(i,a){for(var n,r,s=i.length,o=0;s>o;o++)n=i[o].elementId,r=i[o].element,n&&r&&(this.addElement(n,r)||this.updateElement(n,r)||this.getElement(n)?this._appliedElementIds.push(n):e.Base.Logger.warn("Failed to add or update cache element",r));if(!a){for(n in this._elements)-1===t.inArray(n,this._appliedElementIds)&&this.deleteElement(n);this._appliedElementIds=[]}},i.prototype._areElementsEqual=function(e,t){return e===t||"function"==typeof e.equals&&e.equals(t)},e.Base.ElementCache=i}(AvayaClientServices,jQuery),function(e){"use strict";function t(){e.Base.WebSocketProvider.apply(this),this._deferreds={},this._transactionIDLocation=""}t.prototype=Object.create(e.Base.WebSocketProvider.prototype),t.prototype.start=function(t,i,a){a&&a.transactionIDLocation&&(this._transactionIDLocation=a.transactionIDLocation),e.Base.WebSocketProvider.prototype.start.call(this,t,i,a),this._socket.onmessage=function(t){var i,a,n,r=!0;try{i=this.parseResponse(t.data),a=this.getTransactionIDFromResponse(i,this._transactionIDLocation),n=this._deferreds[a]}catch(e){"string"==typeof t.data&&console.error(e)}a&&n&&(e.Base.Logger.debug("Resolving message "+i.name+" with transId "+a),delete this._deferreds[a],r=!1,n.resolve(i)),r&&this.onMessage(t)}.bind(this)},t.prototype.parseMessage=function(e){return JSON.parse(e)},t.prototype.send=function(t,i){var a=$.Deferred(),n=this.getTransactionIDFromRequest(this.parseRequest(t),this._transactionIDLocation);return n&&(this._deferreds[n]=a),e.Base.WebSocketProvider.prototype.send.call(this,t,i).then(function(){n||a.resolve()},function(e){a.reject(e)}),a.promise()},t.prototype.close=function(){for(var t in this._deferreds)if(this._deferreds.hasOwnProperty(t)){var i=this._deferreds[t];e.Base.Utils.isDefined(i)&&i.reject({message:"Request aborted due to close request"})}return this._deferreds={},e.Base.WebSocketProvider.prototype.close.call(this)},t.prototype._getTransactionID=function(t,i){return e.Base.Utils.queryJSONObject(t,i)},t.prototype.getTransactionIDFromResponse=function(e,t){return this._getTransactionID(e,t)},t.prototype.getTransactionIDFromRequest=function(e,t){return this._getTransactionID(e,t)},t.prototype.parseRequest=function(e){return this.parseMessage(e)},t.prototype.parseResponse=function(e){return this.parseMessage(e)},e.Base.TransactionalWebSocketProvider=t}(AvayaClientServices),function(e){"use strict";function t(){this.defaultMessage="One or more elements in provided array are not compatible with required type."}t.prototype=Object.create(e.Base.Validators.BaseValidator.prototype),t.prototype.validate=function(e,t,i){var a=e.filter(function(e){return typeof e===t.expected||"object"==typeof e&&e instanceof t.expected}).length===e.length;return this._processCondition(a,e,t,i)},e.Base.Validators.ArrayElementTypeValidator=t}(AvayaClientServices),function(e,t){"use strict";function i(t,i,a){e.Providers.Interfaces.AbstractProvider.call(this),this._acsNetworkProvider=t,this._contactsConverter=i,this._requestBuilder=a,this._state=e.Providers.ACS.ACSProviderStates.STOPPED,this._allowedCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._deniedCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._contactsCapability=this._deniedCapability}i.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),i.prototype.getProviderType=function(){return"ACS"},i.prototype.start=function(t){return this._changeState(e.Providers.ACS.ACSProviderStates.STARTING),this._acsNetworkProvider.start(t.acsConfiguration).then(function(){this._changeState(e.Providers.ACS.ACSProviderStates.STARTED),this.recalculateCapabilities(),this._acsNetworkProvider.on("acs_availability_changed",this.recalculateCapabilities.bind(this))}.bind(this))},i.prototype.stop=function(){return this._changeState(e.Providers.ACS.ACSProviderStates.STOPPING),this._acsNetworkProvider.stop().then(function(){this._changeState(e.Providers.ACS.ACSProviderStates.STOPPED),this.recalculateCapabilities(),this._removeListeners()}.bind(this))},i.prototype._changeState=function(e){e!==this._state&&(this._state=e,this._onStateChange(e))},i.prototype._onStateChange=function(e){},i.prototype.recalculateCapabilities=function(){var t,i=this._acsNetworkProvider.getResources();t=this._acsNetworkProvider.isAcsAvailable()&&i.capabilities&&i.capabilities.indexOf("contacts")>=0?this._allowedCapability:this._deniedCapability,this._contactsCapability!==t&&(this._contactsCapability=t,this.trigger(e.Providers.Interfaces.ContactsProviderCallbackIds.CAPABILITIES_CHANGED))},e.Providers.ACS.ACSBaseProviderV1=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Providers.Interfaces.ContactsProvider.call(this),this._providers={},this._selectedProvider=void 0,this._userConfig={}}i.prototype=t.extend({},e.Providers.Interfaces.ContactsProvider.prototype),i.prototype.registerACSContactsProvider=function(e,t){this._providers[e]=t},i.prototype.start=function(e){t.isEmptyObject(e)||this._userConfig===e||(this._userConfig=e);var i=this._determineServerVersion();return this._selectedProvider=this._providers[i],this._selectedProvider.start(e)},i.prototype._determineServerVersion=function(){return 1},i.prototype.getProviderType=function(){return this._selectedProvider.getProviderType()},i.prototype.stop=function(){return this._selectedProvider.stop()},i.prototype.createContactForAdd=function(){return this._selectedProvider.createContactForAdd()},i.prototype.addContact=function(e){return this._selectedProvider.addContact(e)},i.prototype.updateContact=function(e){return this._selectedProvider.updateContact(e)},i.prototype.deleteContact=function(e){return this._selectedProvider.deleteContact(e)},i.prototype.retrieveAllContacts=function(){return this._selectedProvider.retrieveAllContacts()},i.prototype.getContactsChanges=function(){return this._selectedProvider.getContactsChanges()},i.prototype.getAddContactCapability=function(){return this._selectedProvider.getAddContactCapability()},i.prototype.getUpdateContactCapability=function(){return this._selectedProvider.getUpdateContactCapability()},i.prototype.getDeleteContactCapability=function(){return this._selectedProvider.getDeleteContactCapability()},i.prototype.addOnContactAddedCallback=function(e){return this._selectedProvider.addOnContactAddedCallback(e)},i.prototype.removeOnContactAddedCallback=function(e){return this._selectedProvider.removeOnContactAddedCallback(e)},i.prototype.addOnContactUpdatedCallback=function(e){return this._selectedProvider.addOnContactUpdatedCallback(e)},i.prototype.removeOnContactUpdatedCallback=function(e){return this._selectedProvider.removeOnContactUpdatedCallback(e)},i.prototype.addOnContactDeletedCallback=function(e){return this._selectedProvider.addOnContactDeletedCallback(e)},i.prototype.removeOnContactDeletedCallback=function(e){return this._selectedProvider.removeOnContactDeletedCallback(e)},i.prototype.on=function(e,t){return this._selectedProvider.on(e,t)},i.prototype.off=function(e,t){return this._selectedProvider.off(e,t)},e.Providers.ACS.ACSContactsProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t,i,a){e.Providers.Interfaces.ContactsProvider.call(this),e.Providers.ACS.ACSBaseProviderV1.call(this,t,i,a),this._longPoll=!1,this._getContactsETag=null,this._contactsCache=new e.Base.ElementCache,this._contactsCache.on("element_added",function(t){this.trigger(e.Providers.Interfaces.ContactsProviderCallbackIds.CONTACT_ADDED,[this._contactsConverter.convertACSContactV1toContact(t,!0),this])}.bind(this)),this._contactsCache.on("element_updated",function(t){this.trigger(e.Providers.Interfaces.ContactsProviderCallbackIds.CONTACT_UPDATED,[this._contactsConverter.convertACSContactV1toContact(t,!0),this])}.bind(this)),this._contactsCache.on("element_deleted",function(t){this.trigger(e.Providers.Interfaces.ContactsProviderCallbackIds.CONTACT_DELETED,[this._contactsConverter.convertACSContactV1toContact(t,!0),this])}.bind(this))}i.prototype=t.extend({},e.Providers.Interfaces.ContactsProvider.prototype,e.Providers.ACS.ACSBaseProviderV1.prototype),i.prototype.createContactForAdd=function(){var t=new e.Services.Contacts.EditableContact,i=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED);return t.getGivenName().setWriteCapability(i),t.getSurname().setWriteCapability(i),t.getDisplayName().setWriteCapability(i),t.getASCIIGivenName().setWriteCapability(i),t.getASCIISurname().setWriteCapability(i),t.getASCIIDisplayName().setWriteCapability(i),t.getAlias().setWriteCapability(i),t.getASCIIAlias().setWriteCapability(i),t.getLocation().setWriteCapability(i),t.getWorkRoomNo().setWriteCapability(i),t.getStreetAddress().setWriteCapability(i),t.getCity().setWriteCapability(i),t.getState().setWriteCapability(i),t.getCountry().setWriteCapability(i),t.getPostalCode().setWriteCapability(i),t.getCompany().setWriteCapability(i),t.getManager().setWriteCapability(i),t.getDepartment().setWriteCapability(i),t.getLanguage().setWriteCapability(i),t.getNotes().setWriteCapability(i),t.getRank().setWriteCapability(i),t.isBuddy().setWriteCapability(i),t.isFavorite().setWriteCapability(i),t},i.prototype.addContact=function(e){var t=this._contactsConverter.convertContactToACSContactV1(e),i=this._requestBuilder.buildAddUpdateContactData(t),a=this._requestBuilder.buildAddContactOptions();return this._acsNetworkProvider.send(i,a).then(function(e){var t=this._contactsConverter.extendAcsContact(e);t.contactIdentifier&&t.contactIdentifier.value&&this._contactsCache.addElement(t.contactIdentifier.value,t)}.bind(this))},i.prototype.updateContact=function(e){var t=this._contactsCache.getElement(e._uniqueAddressForMatching),i=this._contactsConverter.mergeContactWithACSContactV1(e,t),a=this._requestBuilder.buildAddUpdateContactData(i),n=this._requestBuilder.buildUpdateContactOptions();return this._acsNetworkProvider.send(a,n).then(function(e){var t=this._contactsConverter.extendAcsContact(e);t.contactIdentifier&&t.contactIdentifier.value&&this._contactsCache.updateElement(t.contactIdentifier.value,t)}.bind(this))},i.prototype.deleteContact=function(e){var t=this._contactsCache.getElement(e._uniqueAddressForMatching),i=this._requestBuilder.buildDeleteContactOptions(t.contactUrl.value);return this._acsNetworkProvider.send(null,i).then(function(e){"true"===e&&t.contactIdentifier&&t.contactIdentifier.value&&this._contactsCache.deleteElement(t.contactIdentifier.value,t)}.bind(this))},i.prototype.retrieveAllContacts=function(){var e=t.Deferred();return this._getContacts(!1).then(function(t){this._applyContactsToCache(t.contacts),e.resolve(this._contactsConverter.convertACSContactsV1toContactList(t,!0)),this._startPolling()}.bind(this),function(t){e.reject(t)},function(t){this._applyContactsToCache(t.contacts,!0),e.notify(this._contactsConverter.convertACSContactsV1toContactList(t,!0))}.bind(this)),e.promise()},i.prototype._startPolling=function(){return this._longPoll?void e.Base.Logger.warn("Contacts polling has been already started"):(this._longPoll=!0,void this._longPollContacts())},i.prototype._stopPolling=function(){return this._longPoll?void(this._longPoll=!1):void e.Base.Logger.warn("Contacts polling is not running")},i.prototype._longPollContacts=function(){this._getContacts(!0).then(function(e){e&&this._applyContactsToCache(e.contacts,!1),this._longPoll&&setTimeout(this._longPollContacts.bind(this),0)}.bind(this),function(e){this._longPoll&&setTimeout(this._longPollContacts.bind(this),0)}.bind(this),function(e){this._applyContactsToCache(e.contacts,!0)}.bind(this))},i.prototype._applyContactsToCache=function(t,i){for(var a=t.length,n=[],r=0;a>r;r++)t[r].contactIdentifier&&t[r].contactIdentifier.value?n.push({elementId:t[r].contactIdentifier.value,element:this._contactsConverter.extendAcsContact(t[r])}):e.Base.Logger.warn("Received contact does not have contactIdentifier set, ignoring it",t[r]);this._contactsCache.applyElements(n,i)},i.prototype._getContacts=function(i){var a=t.Deferred(),n=this._requestBuilder.buildGetContactsOptions(i,null,this._getContactsETag),r=function(t){e.Base.Logger.error("Failed to retrieve contacts from ACSv1 (longpoll="+i+")",t),a.reject(t)},s=function(t){if(t)if(t.hasMoreResults){a.notify(t);var i=t.contacts.length-1,o=t.contacts[i].id.value;if(!o)return e.Base.Logger.warn('Last contact of the partial response to retrieve contacts request does not have "id" property set (required for consequent requests)',t.contacts[i]),void r("Received invalid response from ACS");n=this._requestBuilder.buildGetContactsOptions(!1,o,this._getContactsETag),this._acsNetworkProvider.send(null,n).then(s.bind(this),r)}else this._getContactsETag=this._acsNetworkProvider.getETag(),a.resolve(t);else a.resolve()};return this._acsNetworkProvider.send(null,n).then(s.bind(this),r),a.promise()},i.prototype.getContactsChanges=function(){},i.prototype.getAddContactCapability=function(){return this._contactsCapability},i.prototype.getUpdateContactCapability=function(){return this._contactsCapability},i.prototype.getDeleteContactCapability=function(){return this._contactsCapability},i.prototype._onStateChange=function(t){t===e.Providers.ACS.ACSProviderStates.STOPPING?this._stopPolling():t===e.Providers.ACS.ACSProviderStates.STOPPED&&this._contactsCache.empty()},e.Providers.ACS.ACSContactsProviderV1=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Providers.Interfaces.DirectorySearchProvider.call(this),this._providers={},this._selectedProvider=void 0,this._userConfig={}}i.prototype=t.extend({},e.Providers.Interfaces.DirectorySearchProvider.prototype),i.prototype.registerACSDirectorySearchProvider=function(e,t){this._providers[e]=t},i.prototype.start=function(e){t.isEmptyObject(e)||this._userConfig===e||(this._userConfig=e);var i=this._determineServerVersion();return this._selectedProvider=this._providers[i],this._selectedProvider.start(e)},i.prototype._determineServerVersion=function(){return 1},i.prototype.getProviderType=function(){return this._selectedProvider.getProviderType()},i.prototype.stop=function(){return this._selectedProvider.stop()},i.prototype.startDirectorySearch=function(e){return this._selectedProvider.startDirectorySearch(e)},i.prototype.stopDirectorySearch=function(e){return this._selectedProvider.stopDirectorySearch(e)},i.prototype.getSearchContactCapability=function(){return this._selectedProvider.getSearchContactCapability()},i.prototype.on=function(e,t){return this._selectedProvider.on(e,t)},i.prototype.off=function(e,t){return this._selectedProvider.off(e,t)},e.Providers.ACS.ACSDirectorySearchProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t,i,a){e.Providers.Interfaces.DirectorySearchProvider.call(this),e.Providers.ACS.ACSBaseProviderV1.call(this,t,i,a),this._activeSearches={}}i.prototype=t.extend({},e.Providers.Interfaces.DirectorySearchProvider.prototype,e.Providers.ACS.ACSBaseProviderV1.prototype),i.prototype.startDirectorySearch=function(i){var a=t.Deferred();if(i)this._searchContacts(i).then(function(e){a.resolve(this._contactsConverter.convertACSContactsV1toContactList(e,!1))}.bind(this),function(e){a.reject(e)},function(e){a.notify(this._contactsConverter.convertACSContactsV1toContactList(e,!1))}.bind(this));else{var n="Search parameters weren't specified";a.reject(new e.Providers.ACS.ACSError(n,n))}return a.promise()},i.prototype._searchContacts=function(i){var a=t.Deferred(),n=this._requestBuilder.buildSearchContactsOptions(i),r=function(t){e.Base.Logger.error("Failed to retrieve directory contacts from ACSv1",t),a.reject(t)},s=function(t){if(this._activeSearches[i]){if(!t)return void a.resolve();if(t.hasMoreResults){a.notify(t);var o=t.contacts.length-1,c=t.contacts[o].id.value;if(!c)return e.Base.Logger.warn('Last contact of the partial response to retrieve contacts request does not have "id" property set (required for consequent requests)',t.contacts[o]),void r("Received invalid response from ACS");n=this._requestBuilder.buildSearchContactsOptions(i,c),this._acsNetworkProvider.send(null,n).then(s.bind(this),r)}else a.resolve(t),delete this._activeSearches[i]}};return this._activeSearches[i]=a,this._acsNetworkProvider.send(null,n).then(s.bind(this),r),a.promise()},i.prototype.stopDirectorySearch=function(i){var a=t.Deferred(),n=this._activeSearches[i];if(n){var r="Contact search has been canceled by user";n.reject(new e.Providers.ACS.ACSError(r,r)),delete this._activeSearches[i],a.resolve()}else{var s="Contact search is already completed/canceled or wasn't started";a.reject(new e.Providers.ACS.ACSError(s,s))}return a.promise()},i.prototype.getSearchContactCapability=function(){return this._contactsCapability},e.Providers.ACS.ACSDirectorySearchProviderV1=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t){e.Providers.Interfaces.MessagingProvider.call(this),this._eTag="",this._conversationsLastModified=void 0,this._isStarted=!1,this._networkProvider=t,this._resources={},this._config={},this._resourcesTypes={conversations:"application/vnd.avaya.aem.conversations.v1+json",error:"application/vnd.avaya.aem.error.v1+json",resources:"application/vnd.avaya.aem.resources.v1+json",validatedAddresses:"application/vnd.avaya.aem.validatedAddresses.v2+json",participants:"application/vnd.avaya.aem.participants.v1+json",message:"application/vnd.avaya.aem.message.v1+json",messageFlags:"application/vnd.avaya.aem.message.v1+json",messageIds:"application/vnd.avaya.aem.messageIds.v1+json",event:"application/vnd.avaya.aem.event.v1+json",conversation:"application/vnd.avaya.aem.conversation.v1+json",conversationIds:"application/vnd.avaya.aem.conversations.ids.v1+json",conversationAccessTime:"application/vnd.avaya.aem.conversation.access.time.v1+json",conversationFlags:"application/vnd.avaya.aem.conversation.flags.v1+json"},this._endpoints={conversations:"",validateAddresses:"",messages:"",outbox:"",markAsReadIf:"",markAsReadBatch:"",addresses:""}}i.prototype=Object.create(e.Providers.Interfaces.MessagingProvider.prototype),i.prototype.onCredentialsRequired=function(e){this._config.credentialProvider.onAuthenticationChallenge(void 0,function(t){this.onCredentialsRetrieved(t,e)}.bind(this))},i.prototype.onCredentialsRetrieved=function(t,i){var a=btoa(t.username+":"+t.password);(e.Base.Utils.isDefined(i.message)||e.Base.Utils.isDefined(i.options))&&(i.options.headers.Authorization="Basic "+a)},i.prototype.start=function(e){this._config=e,this._isStarted=!0},i.prototype.getConversations=function(e){var t=e||{headers:{}};return t.url=this._endpoints.conversations,t.sendType="GET",t.dataType="JSON",t.headers.Accept=[this._resourcesTypes.conversations,this._resourcesTypes.error].join(", "),this._networkProvider.send(null,t).then(function(e){return e},this._handleError.bind(this))},i.prototype.getConversationIds=function(){var e=t.Deferred();return e.reject(),e.promise()},i.prototype.getConversationsByQuery=function(e){var t={};return t.url=this._endpoints.conversations,t.sendType="GET",t.dataType="JSON",t.headers={Accept:[this._resourcesTypes.conversations,this._resourcesTypes.error].join(", ")},this._networkProvider.send(e,t).then(function(e){return e},this._handleError.bind(this))},i.prototype.parseResources=function(e){this._resources=e,this._config.endpoints={}},i.prototype.discoverResources=function(){var e={urlSuffix:"/aem/resources",sendType:"GET",dataType:"JSON"};return e.headers={Accept:[this._resourcesTypes.resources,this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,e).then(function(e){return this.parseResources(e),this._resources}.bind(this),this._handleError.bind(this))},i.prototype.getResources=function(){return this._resources},i.prototype.validateUsers=function(e){var t={},i=e.map(function(e){return"address="+e}).join("&");return t.sendType="GET",t.dataType="JSON",t.headers={Accept:[this._resourcesTypes.validatedAddresses,this._resourcesTypes.error].join(", ")},t.url=this._endpoints.validateAddresses,t.url+="?"+i,this._networkProvider.send(null,t).then(function(e){return e},this._handleError.bind(this))},i.prototype.getRoutableDomains=function(){return this._resources.domains},i.prototype.getParticipants=function(e,t){var i=t||{};return i.url=this._endpoints.conversations+"/"+e+"/participants",i.sendType="GET",i.dataType="JSON",i.headers={Accept:[this._resourcesTypes.participants,this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,i).then(function(e){return e},this._handleError.bind(this))},i.prototype.setLastAccessTime=function(e,t){var i=t||{};return i.url=this._endpoints.conversations+"/"+e,i.sendType="POST",i.headers={"Content-Type":[this._resourcesTypes.conversationAccessTime].join(", "),Accept:[this._resourcesTypes.conversationAccessTime,this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,i).then(function(e){return e},this._handleError.bind(this))},i.prototype.sendMessage=function(e,t){var i=t||{};return i.url=this._endpoints.outbox,i.dataType="JSON",i.headers={Accept:[this._resourcesTypes.message,this._resourcesTypes.error].join(", "),"Content-Type":this._resourcesTypes.message},this._networkProvider.send(JSON.stringify(e),i).then(function(e){return e},this._handleError.bind(this))},i.prototype._handleError=function(t){var i;try{i=t.responseJSON||JSON.parse(t.responseText)}catch(e){i=t.responseJSON}if(i){var a=i.error[0];return new e.Providers.AMM.AMMError(a.errorMsg,a.errorCode)}return new e.Providers.AMM.AMMError(t.responseText,t.status)},i.prototype.sendMessageWithAttachments=function(e,i,a){var n=a||{},r="boundary";n.url=this._endpoints.outbox,n.dataType="json",n.headers={Accept:[this._resourcesTypes.message,this._resourcesTypes.error].join(", "),"Content-Type":'multipart/related;boundary="'+r+'"'},n.processData=!1;var s=t.Deferred();return this._createThumbnailsPromises(i).then(function(){return this._createAttachmentsPromises(i)}.bind(this),function(e){s.reject(e)}).then(function(){var t=this._prepareRawBody(r,e,arguments[0]);this._networkProvider.send(t,n).then(function(e){s.resolve(e)},function(e){s.reject(this._handleError(e))}.bind(this))}.bind(this),function(e){s.reject(e)}),s.promise()},i.prototype._createThumbnailsPromises=function(e){var i=t.Deferred(),a=[];return e.forEach(function(e){a.push(e.createThumbnail())}),t.when.apply(this,a).then(function(){i.resolve(e)}),i.promise()},i.prototype._createAttachmentsPromises=function(e){var i=t.Deferred(),a=[];return e.forEach(function(e){a.push(this._readAttachment(e)),e.getCreateThumbnailCapability().isAllowed&&a.push(this._readAttachment(e.getThumbnail()))}.bind(this)),t.when.apply(this,a).then(function(){i.resolve(arguments)}),i.promise()},i.prototype._readAttachment=function(i){var a=t.Deferred(),n=new FileReader;return n.onload=function(t){var n={name:i.getName(),mime:i.getMimeType(),type:i.getType(),data:""},r="base64,";i.getType()===e.Services.Messaging.AttachmentType.THUMBNAIL&&-1!==t.target.result.indexOf(r)?n.data=atob(t.target.result.slice(t.target.result.indexOf(r)+r.length)):n.data=t.target.result,a.resolve(n)},n.onerror=function(e){a.reject(e)},n.readAsBinaryString(i.file),a.promise()},i.prototype._prepareRawBody=function(t,i,a){for(var n=["--boundary\n","Content-Type:application/vnd.avaya.aem.message.v1+json;\n\n",JSON.stringify(i),"\n"],r=0;r<a.length;r++){var s=a[r].type===e.Services.Messaging.AttachmentType.THUMBNAIL?"inline":"attachment";n.push("--"+t+"\n"),n.push("Content-Type:"+a[r].mime+"\n"),n.push("Content-Transfer-Encoding:binary\n"),n.push("Content-Disposition:"+s+'; filename="'+a[r].name+'"\n\n'),n.push(a[r].data+"\n")}n.push("--"+t+"--\n"),n=n.join("");for(var o=new Uint8Array(n.length),c=0;c<n.length;c++)o[c]=255&n.charCodeAt(c);return o},i.prototype.leaveConversation=function(e){var t={};return t.url=this._endpoints.conversations+"/"+e,t.sendType="DELETE",t.headers={Accept:[this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,t).then(function(e){return e},this._handleError.bind(this))},i.prototype.markAllAsRead=function(e,t,i){var a={};return a.url=this._endpoints.markAsReadIf,a.url+="?conversationId="+e,void 0!==t&&(a.url+="&hasAttachment="+!!t),i&&(a.url+="&upTo="+i),a.sendType="POST",a.headers={Accept:[this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,a).then(function(e){return e},this._handleError.bind(this))},i.prototype.changeSubject=function(e){var t={};return t.url=this._endpoints.outbox,t.dataType="JSON",t.headers={"Content-Type":this._resourcesTypes.message},this._networkProvider.send(JSON.stringify(e),t).then(function(e){return e},this._handleError.bind(this))},i.prototype.markAsReadBatch=function(t){var i={};if(i.url=this._endpoints.markAsReadBatch,""===i.url)throw new e.Providers.AMM.AMMError("Service is unavailable");i.sendType="POST",i.headers={Accept:[this._resourcesTypes.error].join(", "),"Content-Type":this._resourcesTypes.messageIds};var a=JSON.stringify({messageIds:t});return this._networkProvider.send(a,i).then(function(e){return e},this._handleError.bind(this))},i.prototype.getMessages=function(e,t,i,a){var n={};n.url=this._endpoints.conversations+"/"+e;var r="?";return void 0!==i&&(n.url+=r+"beforeId="+i.id,r="&"),void 0!==a&&(n.url+=r+"afterId="+a.id,r="&"),void 0!==t&&(n.url+=r+"maxEntries="+t),n.sendType="GET",n.dataType="JSON",n.headers={Accept:[this._resourcesTypes.conversation,this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,n).then(function(e){return e},this._handleError.bind(this))},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype.reportTyping=function(){},i.prototype.reportRecordingAudio=function(){},i.prototype.reportRecordingVideo=function(){},i.prototype.reportAttachingFile=function(){},i.prototype.reportTakingPicture=function(){},i.prototype.observeConversations=function(){},i.prototype.subscribeForTypingEventsInConversation=function(){},i.prototype.unsubscribeForTypingEventsInConversation=function(){},i.prototype.callEscalationEvent=function(e,t){var i={};return i.url=this._endpoints.conversations+"/"+t+"/events",i.sendType="POST",i.headers={"Content-Type":this._resourcesTypes.event},this._networkProvider.send(JSON.stringify(e),i).then(function(e){return e},this._handleError.bind(this))},i.prototype.addParticipantsToConversation=function(e,t){var i={};return i.url=this._endpoints.conversations+"/"+e+"/participants",i.sendType="POST",i.dataType="JSON",i.headers={"Content-Type":this._resourcesTypes.participants},this._networkProvider.send(JSON.stringify(t),i).then(function(e){return e},this._handleError.bind(this))},i.prototype.close=function(e){var t={};return t.url=this._endpoints.conversations+"/"+e+"/flags",t.sendType="POST",t.dataType="JSON",t.headers={"Content-Type":this._resourcesTypes.conversationFlags},this._networkProvider.send(JSON.stringify({closed:!0}),t).then(function(e){return e},this._handleError.bind(this))},i.prototype.stop=function(){this._isStarted=!1,this._eTag="";var e=t.Deferred();return this._networkProvider.onClose=function(){this._resources={},e.resolve()}.bind(this),this._networkProvider.onError=function(t){"abort"===t.statusText?e.resolve():e.reject(t)}.bind(this),this._networkProvider.close(),e.promise()},i.prototype.isUpdateSubjectSupported=function(){},i.prototype.isMarkAllContentAsReadSupported=function(){},e.Providers.AMM.AbstractAMMProvider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t){e.Providers.AMM.AbstractAMMProvider.call(this,t),this._networkProvider._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._resources={},this._resourcesTypes.resources="application/vnd.avaya.aem.resources.v2+json"}i.prototype=Object.create(e.Providers.AMM.AbstractAMMProvider.prototype),i.prototype.start=function(e){return this._config=e,this._isStarted=!0,this._networkProvider.onMessage=function(e,t){if(void 0!==t){var i=t.getResponseHeader("ETag");e.conversations&&(e.lastUpdated?this._conversationsLastModified=new Date(new Date(e.lastUpdated).getTime()+1):this._conversationsLastModified=new Date(new Date(t.getResponseHeader("Last-Modified")).getTime()+1)),null!=i&&(this._eTag=i)}}.bind(this),this._networkProvider.onError=function(e){return this._handleError(e)}.bind(this),this._networkProvider.start(this._config.serverInfo,this._config.credentialProvider)},i.prototype._longPollConversations=function(){if(!t.isEmptyObject(this._resources)){var e=30;this._resources.avayaRequestTimeout&&this._resources.avayaRequestTimeout.recommended&&(e=this._resources.avayaRequestTimeout.recommended);var i={headers:{"If-None-Match":this._eTag,"Avaya-Request-Timeout":e}};return this.getConversations(i)}},i.prototype.observeConversations=function(){return this._longPollConversations().then(function(e){return this._isStarted?(e&&e.conversations&&e.conversations.length>0&&this.trigger("conversations.update",[e]),this.observeConversations()):void 0}.bind(this))},i.prototype.isUpdateSubjectSupported=function(){return!0},i.prototype.isMarkAllContentAsReadSupported=function(){return!!this._resources&&!!this._resources.services&&!!this._resources.services.markAsReadIf},i.prototype.parseResources=function(i){this._resources=t.extend({},new e.Providers.AMM.ResourcesV2,i),this._endpoints.conversations=this._resources.conversationsResource.href,this._endpoints.validateAddresses=this._resources.services.validateAddresses,this._endpoints.messages=this._resources.messages,this._endpoints.outbox=this._resources.outbox,this._endpoints.markAsReadIf=this._resources.services.markAsReadIf,this._endpoints.addresses=this._resources.addresses},e.Providers.AMM.AMM2Provider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(t,i){e.Providers.AMM.AMM2Provider.call(this,t),this._networkProvider._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._resources={},this._webSocketProvider=i,this._resourcesTypes.resources="application/vnd.avaya.aem.resources.v4+json",this._resourcesTypes.conversations="application/vnd.avaya.aem.conversations.v2+json",this._previousETag=void 0,this._isListening=!1,this._requests={},this._callbacksForTypingEvents={},this._identity={},this._onCredentialsRequired=this.onCredentialsRequired.bind(this),this._dfdSubscribed={},this._dfdUnsubscribed={}}i.prototype=Object.create(e.Providers.AMM.AMM2Provider.prototype),i.prototype.start=function(t){return e.Providers.AMM.AMM2Provider.prototype.start.call(this,t)},i.prototype.startWebSocket=function(){var i=t.Deferred(),a=this.getResources().notifications.href||this.getResources().notifications.websocket.href;if(e.Base.Utils.isDefined(a)&&!this._webSocketProvider.isOpened()){var n=function(){this._webSocketProvider.onMessage=function(i){var a,n,r=JSON.parse(i.data);if(r.notification)switch(r.notification.service){case"conversation":this._previousETag=this._eTag,this._eTag=e.Base.Utils.queryJSONObject(r.notification,"contents.entityTag"),this.getConversationsByQuery({after:this._conversationsLastModified.toISOString()}).then(function(e){e&&e.conversations&&e.conversations.length>0&&this.trigger("conversations.update",[e])}.bind(this));break;case"chatState":var s=t.extend({},new e.Providers.AMM.NotificationContentsV1,r.notification.contents);this._callbacksForTypingEvents[r.notification.resource].fire(s)}else r.notified?this._handleSocketNotified(r.notified):r.discovery||(r.subscribed?(a=e.Base.Utils.queryJSONObject(r.subscribed,"results.successful[0].service"),n=e.Base.Utils.queryJSONObject(r.subscribed,"results.successful[0].resource"),"chatState"===a&&void 0!==this._dfdSubscribed[n]&&"pending"===this._dfdSubscribed[n].state()&&this._dfdSubscribed[n].resolve(r.subscribed)):r.unsubscribed&&(a=e.Base.Utils.queryJSONObject(r.unsubscribed,"results.successful[0].service"),n=e.Base.Utils.queryJSONObject(r.unsubscribed,"results.successful[0].resource"),"chatState"===a&&void 0!==this._dfdUnsubscribed[n]&&"pending"===this._dfdUnsubscribed[n].state()&&this._dfdUnsubscribed[n].resolve(r.unsubscribed)))}.bind(this),i.resolve()}.bind(this);this._webSocketProvider.onOpen=n,this._webSocketProvider.start({webSocketURL:a,maxConnectionErrorCount:5})}else i.reject("WebSocket Url undefined");return i.promise()},i.prototype.stop=function(){var i=t.Deferred();return e.Providers.AMM.AMM2Provider.prototype.stop.call(this).then(function(){this._webSocketProvider.onClose=function(){this._previousETag=void 0,this._conversationsLastModified=void 0,this._isListening=!1,i.resolve()}.bind(this);try{this._webSocketProvider.close()}catch(e){i.reject(e)}}.bind(this),function(e){i.reject(e)}),i.promise()},i.prototype.discoverResources=function(){var e={urlSuffix:"/aem/resources",sendType:"GET",dataType:"JSON"};return e.headers={Accept:[this._resourcesTypes.resources,this._resourcesTypes.error].join(", ")},this._networkProvider.send(null,e).then(function(e){return this.parseResources(e),this.startWebSocket(),this._resources}.bind(this),this._handleError.bind(this))},i.prototype.parseResources=function(i){this._resources=t.extend({},new e.Providers.AMM.ResourcesV4,i),this._endpoints.conversations=this._resources.conversationsResource.href,this._endpoints.validateAddresses=this._resources.services.validateAddresses.href,this._endpoints.messages=this._resources.messages.href,this._endpoints.outbox=this._resources.outbox.href,this._endpoints.markAsReadIf=this._resources.services.markAsReadIf.href,this._endpoints.markAsReadBatch=this._resources.services.markAsReadBatch.href},i.prototype.getConversations=function(t){return this._previousETag&&((t=t||{}).headers=t.headers||{},t.headers["If-None-Match"]=this._previousETag),e.Providers.AMM.AMM2Provider.prototype.getConversations.call(this,t)},i.prototype.getConversationIds=function(e){var t=e||{headers:{}};return t.url=this._endpoints.conversations,t.sendType="GET",t.dataType="JSON",t.headers["If-None-Match"]=this._previousETag,t.headers.Accept=[this._resourcesTypes.conversationIds,this._resourcesTypes.error].join(", "),this._networkProvider.send(null,t).then(function(e){return e},this._handleError.bind(this))},i.prototype.observeConversations=function(){var e={subscribe:{resources:[{application:"AMM",service:"conversation",resource:this._resources.conversationsResource.href}],version:"1"}};this._webSocketProvider.send(JSON.stringify(e))},i.prototype.reportTyping=function(t,i){return this._reportChatState(e.Providers.AMM.ChatStateActions.TYPING,t,i)},i.prototype.subscribeForTypingEventsInConversation=function(e,i){var a=this._resources.conversationsResource.href+"/"+e;this._dfdSubscribed[a]=t.Deferred();var n={subscribe:{resources:[{application:"AMM",service:"chatState",resource:a}]}},r=!1;return this._callbacksForTypingEvents[a]||(this._callbacksForTypingEvents[a]=t.Callbacks()),this._callbacksForTypingEvents[a].has()||(r=!0),this._callbacksForTypingEvents[a].has(i)||this._callbacksForTypingEvents[a].add(i),r&&this._webSocketProvider.send(JSON.stringify(n)),this._dfdSubscribed[a].promise()},i.prototype.unsubscribeForTypingEventsInConversation=function(e){var i=this._resources.conversationsResource.href+"/"+e;this._dfdUnsubscribed[i]=t.Deferred();var a={unsubscribe:{resources:[{application:"AMM",service:"chatState",resource:i}]}};return this._callbacksForTypingEvents[i]&&this._callbacksForTypingEvents[i].has()&&this._callbacksForTypingEvents[i].empty(),this._webSocketProvider.send(JSON.stringify(a)),this._dfdUnsubscribed[i].promise()},i.prototype.reportRecordingAudio=function(t,i){return this._reportChatState(e.Providers.AMM.ChatStateActions.RECORDING_AUDIO,t,i)},i.prototype.reportRecordingVideo=function(t,i){return this._reportChatState(e.Providers.AMM.ChatStateActions.RECORDING_VIDEO,t,i)},i.prototype.reportAttachingFile=function(t,i){return this._reportChatState(e.Providers.AMM.ChatStateActions.ATTACHING_FILE,t,i)},i.prototype.reportTakingPicture=function(t,i){return this._reportChatState(e.Providers.AMM.ChatStateActions.TAKING_PICTURE,t,i)},i.prototype._notifyThroughSocket=function(t,i){for(var a=e.Base.Utils.makeId();e.Base.Utils.isDefined(this._requests[a]);)a=e.Base.Utils.makeId();var n={notify:{requestId:a,notifications:[t]}};this._requests[a]=i,this._webSocketProvider.send(JSON.stringify(n))},i.prototype._handleSocketNotified=function(t){t.results.successful&&e.Base.Utils.isDefined(this._requests[t.requestId])?(this._requests[t.requestId].resolve(t.results.successful[0]),delete this._requests[t.requestId]):t.results.failed&&e.Base.Utils.isDefined(this._requests[t.requestId])&&(this._requests[t.requestId].reject(t.results.failed[0]),delete this._requests[t.requestId])},i.prototype.isUpdateSubjectSupported=function(){return!!(this._resources&&this._resources.conversationsResource&&this._resources.conversationsResource.capabilities&&this._resources.conversationsResource.capabilities.subjectChange)},i.prototype.isMarkAllContentAsReadSupported=function(){return!!this._resources&&!!this._resources.services&&!!this._resources.services.markAsReadIf},i.prototype._reportChatState=function(i,a,n){var r=t.Deferred(),s={application:"AMM",service:"chatState",resource:this._resources.conversationsResource.href+"/"+a,contents:{state:e.Providers.AMM.ChatStates.PAUSED}};return n&&(s.contents={action:i,state:e.Providers.AMM.ChatStates.COMPOSING}),this._notifyThroughSocket(s,r),r.promise()},i.prototype.isOpened=function(){return this._webSocketProvider.isOpened()},e.Providers.AMM.AMM3Provider=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Providers.AMM.AbstractAMMProvider.call(this),this._providers=[],this._selectedProvider=void 0,this._config={}}i.prototype=Object.create(e.Providers.AMM.AbstractAMMProvider.prototype),i.prototype.registerAMMProvider=function(e,t){this._providers.push({version:e,provider:t})},i.prototype.start=function(e){return t.isEmptyObject(e)||this._config===e||(this._config=e),this.determineServerVersion()},i.prototype.determineServerVersion=function(){var e=t.Deferred();this._providers.sort(function(e,t){return t.version-e.version});return this._checkServer(0,e,this._config),e.promise()},i.prototype._checkServer=function(t,i,a){this._isProperVersion(t,a).then(function(){this._selectedProvider=this._providers[t].provider,e.Base.Logger.info("Determined AMM server version: "+this._selectedProvider._resourcesTypes.resources),i.resolve()}.bind(this),function(e){t+=1,406===e.statusCode||t===this._providers.length-1?this._checkServer(t,i,a):i.reject(e)}.bind(this))},i.prototype._isProperVersion=function(e,t){return this._providers[e].provider.start(t),this._providers[e].provider.discoverResources()},i.prototype.getRoutableDomains=function(){return this._selectedProvider.getRoutableDomains()},i.prototype.getConversations=function(e){return this._selectedProvider.getConversations(e)},i.prototype.getConversationIds=function(t){return this._selectedProvider.getConversationIds(t).then(function(t){for(var i=[],a=0;a<t.conversationIds.length;a++)i.push(new e.Services.Messaging.ConversationId(t.conversationIds[a]));return i})},i.prototype.getConversationsByQuery=function(e){return this._selectedProvider.getConversationsByQuery(e)},i.prototype.discoverResources=function(){return this._selectedProvider.discoverResources()},i.prototype.getResources=function(){return this._selectedProvider.getResources()},i.prototype.validateUsers=function(e){return this._selectedProvider.validateUsers(e)},i.prototype.getParticipants=function(e,t){return this._selectedProvider.getParticipants(e,t)},i.prototype.sendMessage=function(e,t){return this._selectedProvider.sendMessage(e,t)},i.prototype.sendMessageWithAttachments=function(e,t,i){return this._selectedProvider.sendMessageWithAttachments(e,t,i)},i.prototype.leaveConversation=function(e){return this._selectedProvider.leaveConversation(e)},i.prototype.markAllAsRead=function(e){return this._selectedProvider.markAllAsRead(e)},i.prototype.changeSubject=function(e){return this._selectedProvider.changeSubject(e)},i.prototype.markAsReadBatch=function(e){return this._selectedProvider.markAsReadBatch(e)},i.prototype.getMessages=function(e,t,i,a){return this._selectedProvider.getMessages(e,t,i,a)},i.prototype.reportTyping=function(e,t){return this._selectedProvider.reportTyping(e,t)},i.prototype.reportRecordingAudio=function(e,t){return this._selectedProvider.reportRecordingAudio(e,t)},i.prototype.reportRecordingVideo=function(e,t){return this._selectedProvider.reportRecordingVideo(e,t)},i.prototype.reportAttachingFile=function(e,t){return this._selectedProvider.reportAttachingFile(e,t)},i.prototype.reportTakingPicture=function(e,t){return this._selectedProvider.reportTakingPicture(e,t)},i.prototype.observeConversations=function(){return this._selectedProvider.observeConversations()},i.prototype.callEscalationEvent=function(e,t){return this._selectedProvider.callEscalationEvent(e,t)},i.prototype.setLastAccessTime=function(e,t){return this._selectedProvider.setLastAccessTime(e,t)},i.prototype.addParticipantsToConversation=function(e,t){return this._selectedProvider.addParticipantsToConversation(e,t)},i.prototype.subscribeForTypingEventsInConversation=function(e,t){return this._selectedProvider.subscribeForTypingEventsInConversation(e,t)},i.prototype.unsubscribeForTypingEventsInConversation=function(e){return this._selectedProvider.unsubscribeForTypingEventsInConversation(e)},i.prototype.close=function(e){return this._selectedProvider.close(e)},i.prototype.stop=function(){return this._selectedProvider.stop()},i.prototype.on=function(e,t){return this._selectedProvider.on(e,t)},i.prototype.off=function(e,t){return this._selectedProvider.off(e,t)},i.prototype.isUpdateSubjectSupported=function(){return this._selectedProvider.isUpdateSubjectSupported()},i.prototype.isMarkAllContentAsReadSupported=function(){return this._selectedProvider.isMarkAllContentAsReadSupported()},i.prototype.isOpened=function(){return this._selectedProvider.isOpened()},e.Providers.AMM.AMMProvider=i}(AvayaClientServices,jQuery),function(e,t,i){"use strict";function a(t,i,a,n,r,s,o){e.Providers.Interfaces.AbstractProvider.call(this),this._collaborationProvider=t,this._networkProvider=i,this._screenCapturer=a,this._sharingCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._extensionRequestBuilder=n,this._contentSharingTagBuilder=r,this._bandwidthManager=s,this._screenSharingTagEncoder=o,this._startDeferred=void 0,this._networkProvider.addOnCapabilityChange(this._capabilityUpdate()),this._networkProvider.start()}a.prototype=Object.create(e.Providers.Interfaces.AbstractProvider.prototype),a.prototype.start=function(){return this._screenCapturer.on(e.Providers.ContentSharing.ScreenCapturerEvents.BLOCKS_CHANGED,function(e){this.sendFrame(e,!1)}.bind(this)),this._screenCapturer.on(e.Providers.ContentSharing.ScreenCapturerEvents.KEY_FRAME,function(e){this.sendFrame([e],!0)}.bind(this)),this._screenCapturer.on(e.Providers.ContentSharing.ScreenCapturerEvents.WINDOW_CLOSED,function(){this.stop()}.bind(this)),this._sendStartScreenSharing()},a.prototype.sendFrame=function(t,i){var a=new e.Providers.ContentSharing.FrameBlocks(i),n=this._contentSharingTagBuilder.createStartTag(i,i?this._screenCapturer.getWidth():0,i?this._screenCapturer.getHeight():0);n=this._screenSharingTagEncoder.encodeTag(n),a.addBlock(n),t.forEach(function(e){var t=this._contentSharingTagBuilder.createBlockTag(e);t=this._screenSharingTagEncoder.encodeTag(t),a.addBlock(t)}.bind(this)),a.addBlock(this._screenSharingTagEncoder.encodeTag(this._contentSharingTagBuilder.createEndTag())),this._bandwidthManager.addToQueue(a)},a.prototype.startFullScreen=function(){throw console.debug("MUST override AbstractScreenSharingProvider.startFullScreen()"),new Error("Cannot start fullscreen sharing. Unknown provider.")},a.prototype.startApplicationWindow=function(){throw console.debug("MUST override AbstractScreenSharingProvider.startApplicationWindow()"),new Error("Cannot start window sharing. Unknown provider.")},a.prototype.stop=function(){return this._screenCapturer.stop().then(function(){return this._sendStopScreenSharing()}.bind(this))},a.prototype.pause=function(){return console.log("Content Screen Sharing Provider: Pause sharing..."),this._screenCapturer.pause().then(function(e){return e||this._sendPauseScreenSharing()}.bind(this))},a.prototype.resume=function(){return console.log("Content Screen Sharing Provider: Resume sharing..."),this._screenCapturer.resume().then(function(e){return e?this._sendStartScreenSharing():e}.bind(this))},a.prototype.getShareApplicationWindowCapability=function(){return this._sharingCapability},a.prototype.getShareFullScreenCapability=function(){return this._sharingCapability},a.prototype.isOpened=function(){return this._collaborationProvider.isOpened()},a.prototype._capabilityUpdate=function(){return function(e,t){console.debug("Extension: "+e+" is installed? "+t),t?this._sharingCapability._updateIfChanged(t,e+" extension was installed or enabled"):this._sharingCapability._updateIfChanged(t,e+" extension was uninstalled or disabled")}.bind(this)},a.prototype._sendStartScreenSharing=function(){return this._collaborationProvider.sendStartScreenSharing()},a.prototype._sendStopScreenSharing=function(){return this._collaborationProvider.sendLiveEvent(e.Providers.WCS.WCSEventTypes.END_SCREEN_SHARING)},a.prototype._sendPauseScreenSharing=function(){return this._collaborationProvider.sendLiveEvent(e.Providers.WCS.WCSEventTypes.PAUSE_SCREEN_SHARING)},a.prototype._getUserMedia=function(t){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(t,function(t){e.Providers.ContentSharing.AbstractScreenSharingProvider.prototype.start.call(this).then(function(){this._screenCapturer.start(t,new e.Providers.ContentSharing.ScreenCapturerConfig),this._bandwidthManager.start(this._screenCapturer._config),"pending"===this._startDeferred.state()&&this._startDeferred.resolve()}.bind(this))}.bind(this),function(e){console.error(e),"pending"===this._startDeferred.state()&&this._startDeferred.reject(e)}.bind(this))},e.Providers.ContentSharing.AbstractScreenSharingProvider=a}(AvayaClientServices,window,jQuery),function(e,t,i){"use strict";function a(t,i,a,n,r,s,o){e.Providers.ContentSharing.AbstractScreenSharingProvider.call(this,t,i,a,n,r,s,o),this._mediaSourceId=void 0}a.prototype=Object.create(e.Providers.ContentSharing.AbstractScreenSharingProvider.prototype),a.prototype.startFullScreen=function(){return console.log("Chrome Content Screen Sharing Provider: Start full screen sharing..."),this._startDeferred=i.Deferred(),this._startEventListener(),this._networkProvider.send(this._extensionRequestBuilder.createStartSharingRequest("screen")),this._startDeferred.promise()},a.prototype.startApplicationWindow=function(){return console.log("Chrome Content Screen Sharing Provider: Start appl window sharing..."),this._startDeferred=i.Deferred(),this._startEventListener(),this._networkProvider.send(this._extensionRequestBuilder.createStartSharingRequest("window")),this._startDeferred.promise()},a.prototype.stop=function(){return console.log("Chrome Content Screen Sharing Provider: Stop sharing..."),e.Providers.ContentSharing.AbstractScreenSharingProvider.prototype.stop.call(this).then(function(){this._networkProvider.send(this._extensionRequestBuilder.createStopSharingRequest(this._mediaSourceId)),this._mediaSourceId=void 0,this._removeEventListener()}.bind(this))},a.prototype._startEventListener=function(){this._networkProvider.addOnMediaAvailableCallback(this._handleMediaAvailableEvent.bind(this)),this._networkProvider.addOnMediaCancelledCallback(this._handleMediaCanceledEvent.bind(this))},a.prototype._removeEventListener=function(){this._networkProvider._onMediaAvailableCallbacks.empty(),this._networkProvider._onMediaCancelledCallbacks.empty()},a.prototype._handleMediaAvailableEvent=function(e){console.debug("User enabled screen sharing"),this._mediaSourceId=e.data.mediaSourceId;var i={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:this._mediaSourceId,maxWidth:t.screen.width,maxHeight:t.screen.height,maxFrameRate:3}}};this._getUserMedia(i)},a.prototype._handleMediaCanceledEvent=function(e){console.error(e),"pending"===this._startDeferred.state()&&this._startDeferred.reject(e)},e.Providers.ContentSharing.ChromeScreenSharingProvider=a}(AvayaClientServices,window,jQuery),function(e,t,i){"use strict";function a(t,i,a,n,r,s,o){e.Providers.ContentSharing.AbstractScreenSharingProvider.call(this,t,i,a,n,r,s,o),this._startDeferred=void 0}a.prototype=Object.create(e.Providers.ContentSharing.AbstractScreenSharingProvider.prototype),a.prototype.startFullScreen=function(){return console.log("Firefox Content Screen Sharing Provider: Start full screen sharing..."),this._startDeferred=i.Deferred(),this._startScreenSharing("screen"),this._startDeferred.promise()},a.prototype.startApplicationWindow=function(){return console.log("Firefox Content Screen Sharing Provider: Start appl window sharing..."),this._startDeferred=i.Deferred(),this._startScreenSharing("window"),this._startDeferred.promise()},a.prototype.stop=function(){return console.log("Firefox Content Screen Sharing Provider: Stop sharing..."),e.Providers.ContentSharing.AbstractScreenSharingProvider.prototype.stop.call(this)},a.prototype._startScreenSharing=function(e){console.debug("User enabled screen sharing: "+e);var i={audio:!1,video:{mediaSource:e,mandatory:{maxWidth:t.screen.width,maxHeight:t.screen.height,maxFrameRate:3}}};this._getUserMedia(i)},e.Providers.ContentSharing.FirefoxScreenSharingProvider=a}(AvayaClientServices,window,jQuery),function(e){"use strict";function t(t){e.Providers.UCCP.UCCPMessage.call(this,"activeTalkerChangedEvent"),this.participantId=t}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPActiveTalkerChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.ADMISSION_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPAdmissionResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.AVAILABLE_LAYOUTS_CHANGED_EVENT),this.textOverlay=t,this.noSelfSee=i,this.geometries=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPAvailableLayoutsChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_GEOMETRY_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPChangeLayoutGeometryResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_SELF_SEE_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPChangeLayoutSelfSeeResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CHANGE_LAYOUT_OVERLAY_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPChangeLayoutTextOverlayResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,"chatEvent"),this.participantId=t,this.type=i,this.text=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPChatEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CHAT_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPChatResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_CHANGED_EVENT),this.textOverlay=t,this.noSelfSee=i,this.geometry=a}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPCurrentLayoutChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.CURRENT_LAYOUT_RESPONSE),this.transId=t,this.responseCode=i,this.textOverlay=a,this.noSelfSee=n,this.geometry=r}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPCurrentLayoutResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,"disconnectParticipantResponse"),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPDisconnectParticipantResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.EXTEND_MEETING_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPExtendMeetingResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o){e.Providers.UCCP.UCCPMessage.call(this,"handshakeResponse"),this.transId=t,this.responseCode=i,this.version=a,this.participantId=n,this.admissionPasscodeNeeded=r,this.admissionPermissionNeeded=s,this.commands=o}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPHandshakeResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_START_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPLectureModeStartResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,e.Providers.UCCP.UCCPMessageTypes.LECTURE_MODE_STOP_RESPONSE),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPLectureModeStopResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,"lockMeetingResponse"),this.transId=t,this.responseCode=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPLockMeetingResponse=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o,c,l,d,u,C){e.Providers.UCCP.UCCPMessage.call(this,"meetingInfoChangedEvent"),this.media=t,this.locked=i,this.mediaStatus=a,this.lecturerId=n,this.lecturerName=r,this.presenterId=s,this.presenterName=o,this.recording=c,this.streaming=l,this.encrypted=d,this.slidesAvailable=u,this.terminationTime=C}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPMeetingInfoChangedEvent=t}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Providers.UCCP.UCCPMessage.call(this,"meetingTerminationInProgressEvent"),this.reason=t,this.userName=i}t.prototype=Object.create(e.Providers.UCCP.UCCPMessage.prototype),e.Providers.UCCP.UCCPMeetingTerminationInProgressEvent=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};t.note&&(i.type=e.Base.Utils.queryJSONObject(t,"note[0]._attr.type._value"),i.text=e.Base.Utils.queryJSONObject(t,"note[0]._text")),i.meetingOwner="Y"===e.Base.Utils.queryJSONObject(t,"_attr.meeting_owner._value"),t._attr.target_id?(i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value"),i.personal=!0):i.personal=!1;var a=new e.Providers.WCS.AddNoteEventData(i.type,i.text,i.meetingOwner,i.personal,i.targetId);return new e.Providers.WCS.AddNoteEvent(this.stripCommonData(t),a)},e.Providers.WCS.AddNoteParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.AddWhiteboardEvent(this.stripCommonData(t))},e.Providers.WCS.AddWhiteboardParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value");var a=new e.Providers.WCS.AllowPresentingEventData(i.targetId);return new e.Providers.WCS.AllowPresentingEvent(this.stripCommonData(t),a)},e.Providers.WCS.AllowPresentingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.selection[0]._attr&&$.each(t.selection[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.ClearDrawingEventData(i.groupId,i.layerType);return new e.Providers.WCS.ClearDrawingEvent(this.stripCommonData(t),n)},e.Providers.WCS.ClearDrawingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};t.note&&(i.event_id=e.Base.Utils.queryJSONObject(t,"note[0]._attr.event_id._value"));var a=new e.Providers.WCS.DeleteNoteEventData(i.event_id);return new e.Providers.WCS.DeleteNoteEvent(this.stripCommonData(t),a)},e.Providers.WCS.DeleteNoteParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.selection[0]._attr&&$.each(t.selection[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.DeleteSelectionEventData(i.groupId,i.layerType,i.id,i.selectionX,i.selectionY);return new e.Providers.WCS.DeleteSelectionEvent(this.stripCommonData(t),n)},e.Providers.WCS.DeleteSelectionParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i=e.Base.Utils.queryJSONObject(t,"whiteboard[0]._attr.index._value"),a=new e.Providers.WCS.DeleteWhiteboardEventData(i);return new e.Providers.WCS.DeleteWhiteboardEvent(this.stripCommonData(t),a)},e.Providers.WCS.DeleteWhiteboardParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.DenyControlEvent(this.stripCommonData(t))},e.Providers.WCS.DenyControlParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value"),i.targetName=e.Base.Utils.queryJSONObject(t,"_attr.target_name._value");var a=new e.Providers.WCS.DenyPresentingEventData(i.targetId,i.targetName);return new e.Providers.WCS.DenyPresentingEvent(this.stripCommonData(t),a)},e.Providers.WCS.DenyPresentingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.circle[0]._attr&&$.each(t.circle[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),(i.fillColor||0===i.fillColor)&&(i.fillColor=this.colorIntToHex(i.fillColor),i.filled=!0),(i.color||0===i.color)&&(i.color=this.colorIntToHex(i.color),i.contour=!0),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.DrawCircleEventData(i.alpha,i.fillColor,i.color,i.groupId,i.layerType,i.width,i.x0,i.x1,i.y0,i.y1,i.filled,i.contour);return new e.Providers.WCS.DrawCircleEvent(this.stripCommonData(t),n)},e.Providers.WCS.DrawCircleParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={},a=[],n=[];if(t.m)n.push({x:e.Base.Utils.queryJSONObject(t,"m[0]._attr.x._value"),y:e.Base.Utils.queryJSONObject(t,"m[0]._attr.y._value")});else{if(t.lines&&t.lines[0]._attr&&$.each(t.lines[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),(i.fillColor||0===i.fillColor)&&(i.fillColor=this.colorIntToHex(i.fillColor),i.filled=!0),(i.color||0===i.color)&&(i.color=this.colorIntToHex(i.color),i.contour=!0),i.group){var r=this.convertGroup(i.group);i.layerType=r.layerType,i.groupId=r.groupId,delete i.group}t.lines&&t.lines[0].l&&$.each(t.lines[0].l,function(e,t){a.push({x:t._attr.x._value,y:t._attr.y._value})}.bind(this)),t.lines&&t.lines[0].m&&$.each(t.lines[0].m,function(e,t){n.push({x:t._attr.x._value,y:t._attr.y._value})}.bind(this))}var s=new e.Providers.WCS.DrawShapeEventData(i.alpha,i.fillColor,i.color,i.groupId,i.layerType,i.width,a,n,i.filled,i.contour);return new e.Providers.WCS.DrawShapeEvent(this.stripCommonData(t),s)},e.Providers.WCS.DrawShapeParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.drawText[0]._attr&&$.each(t.drawText[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.fillColor&&(i.fillColor=this.colorIntToHex(i.fillColor)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.DrawTextEventData(i.fillColor,i.fontSize,i.groupId,i.layerType,i.text,i.x,i.y);return new e.Providers.WCS.DrawTextEvent(this.stripCommonData(t),n)},e.Providers.WCS.DrawTextParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};i.targetId=e.Base.Utils.queryJSONObject(t,"_attr.target_id._value"),i.targetName=e.Base.Utils.queryJSONObject(t,"_attr.target_name._value"),i.targetParticipantId=e.Base.Utils.queryJSONObject(t,"_attr.targetParticipantId._value");var a=new e.Providers.WCS.EjectParticipantEventData(i.targetId,i.targetName,i.targetParticipantId);return new e.Providers.WCS.EjectParticipantEvent(this.stripCommonData(t),a)},e.Providers.WCS.EjectParticipantParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.EndControlEvent(this.stripCommonData(t))},e.Providers.WCS.EndControlParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i={};if(t.lines[0]._attr&&$.each(t.lines[0]._attr,function(e,t){i[this.stringToCamel(e)]=t._value}.bind(this)),i.group){var a=this.convertGroup(i.group);i.layerType=a.layerType,i.groupId=a.groupId,delete i.group}var n=new e.Providers.WCS.EndDrawShapeEventData(i.groupId,i.layerType);return new e.Providers.WCS.EndDrawShapeEvent(this.stripCommonData(t),n)},e.Providers.WCS.EndDrawShapeParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.EndMeetingEvent(this.stripCommonData(t))},e.Providers.WCS.EndMeetingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.EndScreenSharingEvent(this.stripCommonData(t))},e.Providers.WCS.EndScreenSharingParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){return new e.Providers.WCS.EndWhiteboardEvent(this.stripCommonData(t))},e.Providers.WCS.EndWhiteboardParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.AbstractParser.prototype),t.prototype.parse=function(t){var i={code:e.Base.Utils.queryJSONObject(t,"code[0]._text"),message:e.Base.Utils.queryJSONObject(t,"message[0]._text"),request_id:e.Base.Utils.queryJSONObject(t,"request_id[0]._text"),ws_connection_id:e.Base.Utils.queryJSONObject(t,"ws_connection_id[0]._text")},a=new e.Providers.WCS.ErrorEventData(i.code,i.message,i.request_id,i.ws_connection_id);return new e.Providers.WCS.ErrorEvent(a)},e.Providers.WCS.ErrorParser=t}(AvayaClientServices),function(e){"use strict";function t(){}t.prototype=Object.create(e.Providers.WCS.LiveEventParser.prototype),t.prototype.parse=function(t){var i=e.Base.Utils.queryJSONObject(t,"os_type[0]._text"),a=new e.Providers.WCS.GrantControlEventData(i);return new e.Providers.WCS.GrantControlEvent(this.stripCommonData(t),a)},e.Providers.WCS.GrantControlParser=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.WCS.WCSSharingTag.call(this,e.Providers.WCS.WCSScreenSharingTagTypes.BLOCK_TAG),this.width=0,this.height=0,this.x=0,this.y=0,this.imageType=0,this.length=0,this.data=[]}t.prototype=Object.create(e.Providers.WCS.WCSSharingTag.prototype),e.Providers.WCS.ScreenSharingBlockTag=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.WCS.WCSSharingTag.call(this,e.Providers.WCS.WCSScreenSharingTagTypes.CURSOR_TAG),this.x=0,this.y=0,this.creationTime=0}t.prototype=Object.create(e.Providers.WCS.WCSSharingTag.prototype),e.Providers.WCS.ScreenSharingCursorTag=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.WCS.WCSSharingTag.call(this,e.Providers.WCS.WCSScreenSharingTagTypes.END_TAG)}t.prototype=Object.create(e.Providers.WCS.WCSSharingTag.prototype),e.Providers.WCS.ScreenSharingEndTag=t}(AvayaClientServices),function(e){"use strict";function t(){e.Providers.WCS.WCSSharingTag.call(this,e.Providers.WCS.WCSScreenSharingTagTypes.START_TAG),this.isKeyFrame=!1,this.width=0,this.height=0,this.creationTime=0}t.prototype=Object.create(e.Providers.WCS.WCSSharingTag.prototype),e.Providers.WCS.ScreenSharingStartTag=t}(AvayaClientServices),function(e,t){"use strict";function i(){e.Base.TransactionalWebSocketProvider.apply(this),this._transactionIDLocation="request_id"}i.prototype=Object.create(e.Base.TransactionalWebSocketProvider.prototype),i.prototype.getTransactionIDFromRequest=function(e,t){return!(void 0===e||e instanceof ArrayBuffer||e instanceof Blob)&&e.match(t+"=(\\w*)&?")[1]},i.prototype.getTransactionIDFromResponse=function(e,t){if(void 0===e)return!1;var i=this._getTransactionID(e,"response[0].live_session[0].request_id[0]._text"),a=this._getTransactionID(e,"response[0].live_event[0].request_id[0]._text"),n=this._getTransactionID(e,"response[0].live_attendees[0].request_id[0]._text");return a||i||n},i.prototype.parseRequest=function(e){return e},i.prototype.parseResponse=function(e){return t.parseString(e)},e.Providers.WCS.WCSTransactionalWebSocketProvider=i}(AvayaClientServices,xmlToJSON),function(e,t){"use strict";(jQuery=jQuery||{}).extend(e.Services.Call.Call.prototype,{addOnLocalVideoAddedCallback:function(e){this._localVideoAddedCallbacks.add(e)},removeOnLocalVideoAddedCallback:function(e){this._localVideoAddedCallbacks.remove(e)},addOnLocalVideoRemovedCallback:function(e){this._localVideoRemovedCallbacks.add(e)},removeOnLocalVideoRemovedCallback:function(e){this._localVideoRemovedCallbacks.remove(e)},addOnRemoteVideoAddedCallback:function(e){this._remoteVideoAddedCallbacks.add(e)},removeOnRemoteVideoAddedCallback:function(e){this._remoteVideoAddedCallbacks.remove(e)},addOnRemoteVideoRemovedCallback:function(e){this._remoteVideoRemovedCallbacks.add(e)},removeOnRemoteVideoRemovedCallback:function(e){this._remoteVideoRemovedCallbacks.remove(e)},addOnCallStartedCallback:function(e){this._onCallStartedCallbacks.add(e)},removeOnCallStartedCallback:function(e){this._onCallStartedCallbacks.remove(e)},addOnCallRemoteAlertingCallback:function(e){this._onCallRemoteAlertingCallbacks.add(e)},removeOnCallRemoteAlertingCallback:function(e){this._onCallRemoteAlertingCallbacks.remove(e)},addOnCallRedirectedCallback:function(e){this._onCallRedirectedCallbacks.add(e)},removeOnCallRedirectedCallback:function(e){this._onCallRedirectedCallbacks.remove(e)},addOnCallQueuedCallback:function(e){this._onCallQueuedCallbacks.add(e)},removeOnCallQueuedCallback:function(e){this._onCallQueuedCallbacks.remove(e)},addOnCallIgnoredCallback:function(e){this._onCallIgnoredCallbacks.add(e)},removeOnCallIgnoredCallback:function(e){this._onCallIgnoredCallbacks.remove(e)},addOnCallEstablishedCallback:function(e){this._onCallEstablishedCallbacks.add(e)},removeOnCallEstablishedCallback:function(e){this._onCallEstablishedCallbacks.remove(e)},addOnCallRemoteAddressChangedCallback:function(e){this._onCallRemoteAddressChangedCallbacks.add(e)},removeOnCallRemoteAddressChangedCallback:function(e){this._onCallRemoteAddressChangedCallbacks.remove(e)},addOnCallHeldCallback:function(e){this._onCallHeldCallbacks.add(e)},removeOnCallHeldCallback:function(e){this._onCallHeldCallbacks.remove(e)},addOnCallUnheldCallback:function(e){this._onCallUnheldCallbacks.add(e)},removeOnCallUnheldCallback:function(e){this._onCallUnheldCallbacks.remove(e)},addOnCallHeldRemotelyCallback:function(e){this._onCallHeldRemotelyCallbacks.add(e)},removeOnCallHeldRemotelyCallback:function(e){this._onCallHeldRemotelyCallbacks.remove(e)},addOnCallUnheldRemotelyCallback:function(e){this._onCallUnheldRemotelyCallbacks.add(e)},removeOnCallUnheldRemotelyCallback:function(e){this._onCallUnheldRemotelyCallbacks.remove(e)},addOnCallJoinedCallback:function(e){this._onCallJoinedCallbacks.add(e)},removeOnCallJoinedCallback:function(e){this._onCallJoinedCallbacks.remove(e)},addOnCallEndedCallback:function(e){this._onCallEndedCallbacks.add(e)},removeOnCallEndedCallback:function(e){this._onCallEndedCallbacks.remove(e)},addOnCallAudioMuteStatusChangedCallback:function(e){this._onCallAudioMuteStatusChangedCallbacks.add(e)},removeOnCallAudioMuteStatusChangedCallback:function(e){this._onCallAudioMuteStatusChangedCallbacks.remove(e)},addOnCallIncomingVideoAddRequestReceivedCallback:function(e){this._onCallIncomingVideoAddRequestReceivedCallbacks.add(e)},removeOnCallIncomingVideoAddRequestReceivedCallback:function(e){this._onCallIncomingVideoAddRequestReceivedCallbacks.remove(e)},addOnCallIncomingVideoAddRequestAcceptedCallback:function(e){this._onCallIncomingVideoAddRequestAcceptedCallbacks.add(e)},removeOnCallIncomingVideoAddRequestAcceptedCallback:function(e){this._onCallIncomingVideoAddRequestAcceptedCallbacks.remove(e)},addOnCallIncomingVideoAddRequestDeniedCallback:function(e){this._onCallIncomingVideoAddRequestDeniedCallbacks.add(e)},removeOnCallIncomingVideoAddRequestDeniedCallback:function(e){this._onCallIncomingVideoAddRequestDeniedCallbacks.remove(e)},addOnCallIncomingVideoAddRequestTimedoutCallback:function(e){this._onCallIncomingVideoAddRequestTimedoutCallbacks.add(e)},removeOnCallIncomingVideoAddRequestTimedoutCallback:function(e){this._onCallIncomingVideoAddRequestTimedoutCallbacks.remove(e)},addOnCallDeniedCallback:function(e){this._onCallDeniedCallbacks.add(e)},removeOnCallDeniedCallback:function(e){this._onCallDeniedCallbacks.remove(e)},addOnCallConferenceStatusChangedCallback:function(e){this._onCallConferenceStatusChangedCallbacks.add(e)},removeOnCallConferenceStatusChangedCallback:function(e){this._onCallConferenceStatusChangedCallbacks.remove(e)},addOnParticipantDroppedCallback:function(e){this._participantDroppedCallbacks.add(e)},removeOnParticipantDroppedCallback:function(e){this._participantDroppedCallbacks.remove(e)},addOnCallFailedCallback:function(e){this._callFailedCallbacks.add(e)},removeOnCallFailedCallback:function(e){this._callFailedCallbacks.remove(e)},addOnCallServiceAvailableCallback:function(e){this._callServiceAvailableCallbacks.add(e)},removeOnCallServiceAvailableCallback:function(e){this._callServiceAvailableCallbacks.remove(e)},addOnCallServiceUnavailableCallback:function(e){this._callServiceUnavailableCallbacks.add(e)},removeOnCallServiceUnavailableCallback:function(e){this._callServiceUnavailableCallbacks.remove(e)}})}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";$.extend(e.Services.Call.Call.prototype,{getHoldCapability:function(){},getUnholdCapability:function(){},getJoinCapability:function(){},getMuteCapability:function(){return this._muteCapability},getUnmuteCapability:function(){},getSendDTMFCapability:function(){},getTransferCapability:function(){},getTransferToCapability:function(e){},getUpdateVideoChannelsCapability:function(){return this._videoChannelsCapability}})}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e,t){"use strict";(jQuery=jQuery||{}).extend(e.Services.Call.Calls.prototype,{addOnCallCreatedCallback:function(e){this._callCreatedCallbacks.add(e)},removeOnCallCreatedCallback:function(e){this._callCreatedCallbacks.remove(e)},addOnCallRemovedCallback:function(e){this._callRemovedCallbacks.add(e)},removeOnCallRemovedCallback:function(e){this._callRemovedCallbacks.remove(e)},addOnIncomingCallCallback:function(e){this._incomingCallCallbacks.add(e)},removeOnIncomingCallCallback:function(e){this._incomingCallCallbacks.remove(e)},addOnUndeliveredCallCallback:function(e){this._undeliveredCallCallbacks.add(e)},removeOnUndeliveredCallCallback:function(e){this._undeliveredCallCallbacks.remove(e)}})}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";$.extend(e.Services.Collaboration.Collaboration.prototype,{addOnCollaborationStartedCallback:function(e){this._onCollaborationStartedCallbacks.add(e)},removeOnCollaborationStartedCallback:function(e){this._onCollaborationStartedCallbacks.remove(e)},addOnCollaborationEndedCallback:function(e){this._onCollaborationEndedCallbacks.add(e)},removeOnCollaborationEndedCallback:function(e){this._onCollaborationEndedCallbacks.remove(e)},addOnCollaborationServiceAvailableCallback:function(e){this._onCollaborationServiceAvailableCallbacks.add(e)},removeOnCollaborationServiceAvailableCallback:function(e){this._onCollaborationServiceAvailableCallbacks.remove(e)},addOnCollaborationServiceUnavailableCallback:function(e){this._onCollaborationServiceUnavailableCallbacks.add(e)},removeOnCollaborationServiceUnavailableCallback:function(e){this._onCollaborationServiceUnavailableCallbacks.remove(e)},addOnCollaborationNearEndByEjectCallback:function(e){this._onCollaborationNearEndByEjectCallbacks.add(e)},removeOnCollaborationNearEndByEjectCallback:function(e){this._onCollaborationNearEndByEjectCallbacks.remove(e)},addOnCollaborationPresenterPrivilegeChangedCallback:function(e){this._onCollaborationPresenterPrivilegeChangedCallbacks.add(e)},removeOnCollaborationPresenterPrivilegeChangedCallback:function(e){this._onCollaborationPresenterPrivilegeChangedCallbacks.remove(e)},addOnCollaborationModeratorPrivilegeChangedCallback:function(e){this._onCollaborationModeratorPrivilegeChangedCallbacks.add(e)},removeOnCollaborationModeratorPrivilegeChangedCallback:function(e){this._onCollaborationModeratorPrivilegeChangedCallbacks.remove(e)},addOnCollaborationInitializedCallback:function(e){this._onCollaborationInitializedCallbacks.add(e)},removeOnCollaborationInitializedCallback:function(e){this._onCollaborationInitializedCallbacks.remove(e)},addOnCollaborationGetParticipantsResultCallback:function(e){this._onCollaborationGetParticipantsResultCallbacks.add(e)},removeOnCollaborationGetParticipantsResultCallback:function(e){this._onCollaborationGetParticipantsResultCallbacks.remove(e)}})}(AvayaClientServices),function(e){"use strict";var t={getChatCapability:function(){},getMeetingMinutesCapability:function(){},getContentSharingCapability:function(){return this._contentSharingCapability},_recalculateContentSharingCapability:function(){var t,i;this._contentSharing.getShareApplicationWindowCapability().isAllowed?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._contentSharingCapability._updateIfChanged(t,i)},getNetworkLibraryCapability:function(){},getLibrarySharingCapability:function(){},getWhiteboardCapability:function(){},getRetrieveParticipantListCapability:function(){}};$.extend(e.Services.Collaboration.Collaboration.prototype,t)}(AvayaClientServices),function(e){"use strict";function t(t){e.Services.Collaboration.WhiteboardSurface.call(this,t)}t.prototype=Object.create(e.Services.Collaboration.WhiteboardSurface.prototype),t.prototype.requestSlideData=function(){},e.Services.Collaboration.Slide=t}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Collaboration.ContentSharing.prototype,{addOnContentSharingStartedCallback:function(e){this._onContentSharingStartedCallbacks.add(e)},removeOnContentSharingStartedCallback:function(e){this._onContentSharingStartedCallbacks.remove(e)},addOnContentSharingEndedCallback:function(e){this._onContentSharingEndedCallbacks.add(e)},removeOnContentSharingEndedCallback:function(e){this._onContentSharingEndedCallbacks.remove(e)},addOnContentSharingPausedCallback:function(e){this._onContentSharingPausedCallbacks.add(e)},removeOnContentSharingPausedCallback:function(e){this._onContentSharingPausedCallbacks.remove(e)},addOnContentSharingResumedCallback:function(e){this._onContentSharingResumedCallbacks.add(e)},removeOnContentSharingResumedCallback:function(e){this._onContentSharingResumedCallbacks.remove(e)},addOnCursorReceivedCallback:function(e){this._onCursorReceivedCallbacks.add(e)},removeOnCursorReceivedCallback:function(e){this._onCursorReceivedCallbacks.remove(e)},addOnFrameChangedCallback:function(e){this._onFrameChangedCallbacks.add(e)},removeOnFrameChangedCallback:function(e){this._onFrameChangedCallbacks.remove(e)},addOnFrameReceivedCallback:function(e){this._onFrameReceivedCallbacks.add(e)},removeOnFrameReceivedCallback:function(e){this._onFrameReceivedCallbacks.remove(e)},addOnContentSharingRemoteControlOutgoingRequestDenyCallback:function(e){this._onContentSharingRemoteControlOutgoingRequestDenyCallbacks.add(e)},removeOnContentSharingRemoteControlOutgoingRequestDenyCallback:function(e){this._onContentSharingRemoteControlOutgoingRequestDenyCallbacks.remove(e)},addOnContentSharingRemoteControlOutgoingRequestGrantCallback:function(e){this._onContentSharingRemoteControlOutgoingRequestGrantCallbacks.add(e)},removeOnContentSharingRemoteControlOutgoingRequestGrantCallback:function(e){this._onContentSharingRemoteControlOutgoingRequestGrantCallbacks.remove(e)},addOnContentSharingRemoteControlIncomingOfferCallback:function(e){this._onContentSharingRemoteControlIncomingOfferCallbacks.add(e)},removeOnContentSharingRemoteControlIncomingOfferCallback:function(e){this._onContentSharingRemoteControlIncomingOfferCallbacks.remove(e)},addOnContentSharingRemoteControlIncomingDeclineCallback:function(e){this._onContentSharingRemoteControlIncomingDeclineCallbacks.add(e)},removeOnContentSharingRemoteControlIncomingDeclineCallback:function(e){this._onContentSharingRemoteControlIncomingDeclineCallbacks.remove(e)},addOnFrameReportReceivedCallbacks:function(e){this._onFrameReportReceivedCallbacks.add(e)},removeOnFrameReportReceivedCallbacks:function(e){this._onFrameReportReceivedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";var i={getShareApplicationWindowCapability:function(){return this._shareApplicationWindowCapability},_recalculateShareApplicationWindowCapability:function(){var t,i,a=this._contentSharingService.getShareApplicationWindowCapability(),n=this._contentSharingService.isOpened(),r=this._contentSharingService.isFeatureAvailable(e.Services.Collaboration.FeaturesAvailable.SCREEN_SHARING);a.isAllowed&&n&&r?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._shareApplicationWindowCapability._updateIfChanged(t,i)},getShareFullScreenCapability:function(){return this._shareFullScreenCapability},_recalculateShareFullScreenCapability:function(){var t,i,a=this._contentSharingService.getShareFullScreenCapability(),n=this._contentSharingService.isOpened(),r=this._contentSharingService.isFeatureAvailable(e.Services.Collaboration.FeaturesAvailable.SCREEN_SHARING);a.isAllowed&&n&&r?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._shareFullScreenCapability._updateIfChanged(t,i)},getSupportRemoteControlCapability:function(){},getRequestRemoteControlCapability:function(){}};jQuery.extend(e.Services.Collaboration.ContentSharing.prototype,i)}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Collaboration.LibraryManager,{})}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Collaboration.LibrarySharing,{addOnLibrarySlideSharedCallback:function(e){this._onLibrarySlideSharedCallback.add(e)},removeOnLibrarySlideSharedCallback:function(e){this._onLibrarySlideSharedCallback.remove(e)},addOnLibrarySharingEndedCallback:function(e){this._onLibrarySharingEndedCallback.add(e)},removeOnLibrarySharingEndedCallback:function(e){this._onLibrarySharingEndedCallback.remove(e)}})}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Collaboration.Whiteboard.prototype,{addOnWhiteboardStartedCallback:function(e){this._onWhiteboardStartedCallbacks.add(e)},removeOnWhiteboardStartedCallback:function(e){this._onWhiteboardStartedCallbacks.remove(e)},addOnWhiteboardEndedCallback:function(e){this._onWhiteboardEndedCallbacks.add(e)},removeOnWhiteboardEndedCallback:function(e){this._onWhiteboardEndedCallbacks.remove(e)},addOnWhiteboardSurfaceAddedCallback:function(e){this._onWhiteboardSurfaceAddedCallbacks.add(e)},removeOnWhiteboardSurfaceAddedCallback:function(e){this._onWhiteboardSurfaceAddedCallbacks.remove(e)},addOnWhiteboardSurfaceRemovedCallback:function(e){this._onWhiteboardSurfaceRemovedCallbacks.add(e)},removeOnWhiteboardSurfaceRemovedCallback:function(e){this._onWhiteboardSurfaceRemovedCallbacks.remove(e)},addOnWhiteboardSurfaceSetActiveCallback:function(e){this._onWhiteboardSurfaceSetActiveCallbacks.add(e)},removeOnWhiteboardSurfaceSetActiveCallback:function(e){this._onWhiteboardSurfaceSetActiveCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";var i={getRemoveWhiteboardCapability:function(){return this._removeWhiteboardCapability},_recalculateRemoveWhiteboardCapability:function(){var t,i;this._surfaces.length>1?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeWhiteboardCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Collaboration.Whiteboard.prototype,i)}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Collaboration.WhiteboardSurface.prototype,{addOnShapeAddedCallback:function(e){this._onShapeAddedCallbacks.add(e)},removeOnShapeAddedCallback:function(e){this._onShapeAddedCallbacks.remove(e)},addOnShapeUpdatedCallback:function(e){this._onShapeUpdatedCallbacks.add(e)},removeOnShapeUpdatedCallback:function(e){this._onShapeUpdatedCallbacks.remove(e)},addOnShapeDeletedCallback:function(e){this._onShapeDeletedCallbacks.add(e)},removeOnShapeDeletedCallback:function(e){this._onShapeDeletedCallbacks.remove(e)},addOnSurfaceClearedCallback:function(e){this._onSurfaceClearedCallbacks.add(e)},removeOnSurfaceClearedCallback:function(e){this._onSurfaceClearedCallbacks.remove(e)},addOnSurfaceStartedCallback:function(e){this._onSurfaceStartedCallbacks.add(e)},removeOnSurfaceStartedCallback:function(e){this._onSurfaceStartedCallbacks.remove(e)}})}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Services.Conference.Participant.call(this,t,i),this._remoteAddress="",this._participantURI="",this._remoteDisplayName="",this._applicationActive=!1,this._handRaised=!1,this._moderator=!1,this._presenter=!1,this._lecturer=!1,this._audioStatus=e.Services.Conference.ParticipantMediaState.MEDIA_STATUS_NO_MEDIA,this._videoStatus=e.Services.Conference.ParticipantMediaState.MEDIA_STATUS_NO_MEDIA,this._connectionStatus=e.Services.Conference.ParticipantConnectionStatus.CONNECTION_STATUS_UNKNOWN,this._disconnectionReason=void 0,this._audioId=void 0,this._videoId=void 0,this._participantId=void 0,this._lastSpokenTime=void 0,this._joinTime=void 0,this._leaveTimeStamp=void 0,this._audioFromParticipant="",this._audioToParticipant="",this._userId="",this._sourceID="",this._feccRecvSupport=!1,this._videoFromParticipant="",this._videoToParticipant="",this._contentFromParticipant="",this._contentToParticipant="",this._role="",this._isSelfParticipant=!1,this._onParticipantCollaborationStatusChangedCallbacks=$.Callbacks(),this._onParticipantConnectionStatusChangedCallbacks=$.Callbacks(),this._onParticipantSetAsModeratorCallbacks=$.Callbacks(),this._onParticipantUnsetAsModeratorCallbacks=$.Callbacks(),this._onParticipantSetAsLecturerCallbacks=$.Callbacks(),this._onParticipantUnsetAsLecturerCallbacks=$.Callbacks(),this._onParticipantSetAsPresenterCallbacks=$.Callbacks(),this._onParticipantUnsetAsPresenterCallbacks=$.Callbacks(),this._onParticipantAudioStatusChangedCallbacks=$.Callbacks(),this._onParticipantVideoStatusChangedCallbacks=$.Callbacks(),this._onParticipantActiveTalkerStatusChangedCallbacks=$.Callbacks(),this._onParticipantHandRaisedCallbacks=$.Callbacks(),this._onParticipantHandLoweredCallbacks=$.Callbacks()}t.prototype=Object.create(e.Services.Conference.Participant.prototype),t.prototype.mute=function(){return this._participantService.mute(this)},t.prototype.unmute=function(){return this._participantService.unmute(this)},t.prototype.blockVideo=function(){return this._participantService.blockVideo(this)},t.prototype.unblockVideo=function(){return this._participantService.unblockVideo(this)},t.prototype.lowerHand=function(e){return this._participantService.lowerHand(this,e)},t.prototype.setAsLecturer=function(){return this._participantService.setAsLecturer(this)},t.prototype.unsetAsLecturer=function(){return this._participantService.unsetAsLecturer()},t.prototype.setAsModerator=function(){},t.prototype.unsetAsModerator=function(){},t.prototype.setAsPresenter=function(){},t.prototype.unsetAsPresenter=function(){},t.prototype.isHandRaised=function(){return this._handRaised},t.prototype.getJoinTime=function(){return this._joinTime},t.prototype.isModerator=function(){return this._role===e.Services.Conference.ParticipantRole.MODERATOR},t.prototype.getParticipantAudioStatus=function(){return this._audioFromParticipant},t.prototype.getParticipantVideoStatus=function(){return this._videoFromParticipant},t.prototype.isLecturer=function(){return this._lecturer},t.prototype.getFeccRecvSupport=function(){return this._feccRecvSupport},t.prototype.getParticipantConnectionStatus=function(){return this._connectionStatus},e.Services.Conference.ActiveParticipant=t}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Conference.Chat.prototype,{addOnChatMessageReceivedCallback:function(e){this._onChatMessageReceivedCallbacks.add(e)},removeOnChatMessageReceivedCallback:function(e){this._onChatMessageReceivedCallbacks.remove(e)},addOnChatServiceAvailableCallback:function(e){this._onChatServiceAvailableCallbacks.add(e)},removeOnChatServiceAvailableCallback:function(e){this._onChatServiceAvailableCallbacks.remove(e)},addOnChatServiceUnavailableCallback:function(e){this._onChatServiceUnavailableCallbacks.add(e)},removeOnChatServiceUnavailableCallback:function(e){this._onChatServiceUnavailableCallbacks.remove(e)}})}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Conference.Conference.prototype,{addOnConferenceCapabilitiesChangedCallback:function(e){this._onConferenceCapabilitiesChangedCallbacks.add(e)},removeOnConferenceCapabilitiesChangedCallback:function(e){this._onConferenceCapabilitiesChangedCallbacks.remove(e)},addOnConferenceLockStatusChangedCallback:function(e){this._onConferenceLockStatusChangedCallbacks.add(e)},removeOnConferenceLockStatusChangedCallback:function(e){this._onConferenceLockStatusChangedCallbacks.remove(e)},addOnConferenceDisplayParticipantNameOnVideoChangedCallback:function(e){this._onConferenceDisplayParticipantNameOnVideoChangedCallbacks.add(e)},removeOnConferenceDisplayParticipantNameOnVideoChangedCallback:function(e){this._onConferenceDisplayParticipantNameOnVideoChangedCallbacks.remove(e)},addOnConferenceVideoSelfSeeChangedCallback:function(e){this._onConferenceVideoSelfSeeChangedCallbacks.add(e)},removeOnConferenceVideoSelfSeeChangedCallback:function(e){this._onConferenceVideoSelfSeeChangedCallbacks.remove(e)},addOnConferenceVideoLayoutChangedCallback:function(e){this._onConferenceVideoLayoutChangedCallbacks.add(e)},removeOnConferenceVideoLayoutChangedCallback:function(e){this._onConferenceVideoLayoutChangedCallbacks.remove(e)},addOnConferenceDisplayParticipantNameOnVideoAllowedCallback:function(e){this._onConferenceDisplayParticipantNameOnVideoAllowedCallbacks.add(e)},removeOnConferenceDisplayParticipantNameOnVideoAllowedCallback:function(e){this._onConferenceDisplayParticipantNameOnVideoAllowedCallbacks.remove(e)},addOnConferenceVideoSelfSeeAllowedCallback:function(e){this._onConferenceVideoSelfSeeAllowedCallbacks.add(e)},removeOnConferenceVideoSelfSeeAllowedCallback:function(e){this._onConferenceVideoSelfSeeAllowedCallbacks.remove(e)},addOnConferenceSupportedVideoLayoutsChangedCallback:function(e){this._onConferenceSupportedVideoLayoutsChangedCallbacks.add(e)},removeOnConferenceSupportedVideoLayoutsChangedCallback:function(e){this._onConferenceSupportedVideoLayoutsChangedCallbacks.remove(e)},addOnConferenceContinuationStatusChangedCallback:function(e){this._onConferenceContinuationStatusChangedCallbacks.add(e)},removeOnConferenceContinuationStatusChangedCallback:function(e){this._onConferenceContinuationStatusChangedCallbacks.remove(e)},addOnConferenceRecordingStatusChangedCallback:function(e){this._onConferenceRecordingStatusChangedCallbacks.add(e)},removeOnConferenceRecordingStatusChangedCallback:function(e){this._onConferenceRecordingStatusChangedCallbacks.remove(e)},addOnConferenceRecordingFailedCallbacks:function(e){this._onConferenceRecordingFailedCallbacks.add(e)},removeOnConferenceRecordingFailedCallbacks:function(e){this._onConferenceRecordingFailedCallbacks.remove(e)},addOnConferenceVideoStatusChangedCallback:function(e){this._onConferenceVideoStatusChangedCallbacks.add(e)},removeOnConferenceVideoStatusChangedCallback:function(e){this._onConferenceVideoStatusChangedCallbacks.remove(e)},addOnConferenceLectureModeStatusChangedCallback:function(e){this._onConferenceLectureModeStatusChangedCallbacks.add(e)},removeOnConferenceLectureModeStatusChangedCallback:function(e){this._onConferenceLectureModeStatusChangedCallbacks.remove(e)},addOnConferenceStreamingStatusChangedCallback:function(e){this._onConferenceStreamingStatusChangedCallbacks.add(e)},removeOnConferenceStreamingStatusChangedCallback:function(e){this._onConferenceStreamingStatusChangedCallbacks.remove(e)},addOnConferenceEncryptionStatusChangedCallback:function(e){this._onConferenceEncryptionStatusChangedCallbacks.add(e)},removeOnConferenceEncryptionStatusChangedCallback:function(e){this._onConferenceEncryptionStatusChangedCallbacks.remove(e)},addOnConferenceMeetingTerminationTimeChangedCallback:function(e){this._onConferenceMeetingTerminationTimeChangedCallbacks.add(e)},removeOnConferenceMeetingTerminationTimeChangedCallback:function(e){this._onConferenceMeetingTerminationTimeChangedCallbacks.remove(e)},addOnConferenceMeetingTerminationInProgressCallbacks:function(e){this._onConferenceMeetingTerminationInProgressCallbacks.add(e)},removeOnConferenceMeetingTerminationInProgressCallbacks:function(e){this._onConferenceMeetingTerminationInProgressCallbacks.remove(e)},addOnConferenceEntryExitToneChangedCallback:function(e){this._onConferenceEntryExitToneChangedCallbacks.add(e)},removeOnConferenceEntryExitToneChangedCallback:function(e){this._onConferenceEntryExitToneChangedCallbacks.remove(e)},addOnConferencePresentationModeStatusChangedCallback:function(e){this._onConferencePresentationModeStatusChangedCallbacks.add(e)},removeOnConferencePresentationModeStatusChangedCallback:function(e){this._onConferencePresentationModeStatusChangedCallbacks.remove(e)},addOnConferenceActiveTalkersChangedCallback:function(e){this._onConferenceActiveTalkersChangedCallbacks.add(e)},removeOnConferenceActiveTalkersChangedCallback:function(e){this._onConferenceActiveTalkersChangedCallbacks.remove(e)},addOnConferenceActiveVideoParticipantsChangedCallback:function(e){this._onConferenceActiveVideoParticipantsChangedCallbacks.add(e)},removeOnConferenceActiveVideoParticipantsChangedCallback:function(e){this._onConferenceActiveVideoParticipantsChangedCallbacks.remove(e)},addOnConferenceAllParticipantsMutedCallback:function(e){this._onConferenceAllParticipantsMutedCallbacks.add(e)},removeOnConferenceAllParticipantsMutedCallback:function(e){this._onConferenceAllParticipantsMutedCallbacks.remove(e)},addOnConferenceAllParticipantsUnmutedCallback:function(e){this._onConferenceAllParticipantsUnmutedCallbacks.add(e)},removeOnConferenceAllParticipantsUnmutedCallback:function(e){this._onConferenceAllParticipantsUnmutedCallbacks.remove(e)},addOnConferencePendingParticipantCallback:function(e){this._onConferencePendingParticipantCallbacks.add(e)},removeOnConferencePendingParticipantCallback:function(e){this._onConferencePendingParticipantCallbacks.remove(e)},addOnConferencePendingParticipantRemovedCallback:function(e){this._onConferencePendingParticipantRemovedCallbacks.add(e)},removeOnConferencePendingParticipantRemovedCallback:function(e){this._onConferencePendingParticipantRemovedCallbacks.remove(e)},addOnConferenceDroppedParticipantAddedCallback:function(e){this._onConferenceDroppedParticipantAddedCallbacks.add(e)},removeOnConferenceDroppedParticipantAddedCallback:function(e){this._onConferenceDroppedParticipantAddedCallbacks.remove(e)},addOnConferenceDroppedParticipantRemovedCallback:function(e){this._onConferenceDroppedParticipantRemovedCallbacks.add(e)},removeOnConferenceDroppedParticipantRemovedCallback:function(e){this._onConferenceDroppedParticipantRemovedCallbacks.remove(e)},addOnConferenceServiceAvailableCallback:function(e){this._onConferenceServiceAvailableCallbacks.add(e)},removeOnConferenceServiceAvailableCallback:function(e){this._onConferenceServiceAvailableCallbacks.remove(e)},addOnConferenceServiceUnavailableCallback:function(e){this._onConferenceServiceUnavailableCallbacks.add(e)},removeOnConferenceServiceUnavailableCallback:function(e){this._onConferenceServiceUnavailableCallbacks.remove(e)},addOnConferenceParticipantsAddedCallback:function(e){this._onConferenceParticipantsAddedCallbacks.add(e)},removeOnConferenceParticipantsAddedCallback:function(e){this._onConferenceParticipantsAddedCallbacks.remove(e)},addOnConferenceParticipantsRemovedCallback:function(e){this._onConferenceParticipantsRemovedCallbacks.add(e)},removeOnConferenceParticipantsRemovedCallback:function(e){this._onConferenceParticipantsRemovedCallbacks.remove(e)},addOnConferenceSubjectCallback:function(e){this._onConferenceSubjectChangedCallbacks.add(e)},removeOnConferenceSubjectCallback:function(e){this._onConferenceSubjectChangedCallbacks.remove(e)},addOnConferenceCollaborationURIChangedCallback:function(e){this._onConferenceCollaborationURIChangedCallbacks.add(e)},removeOnConferenceCollaborationURIChangedCallback:function(e){this._onConferenceCollaborationURIChangedCallbacks.remove(e)}})}(AvayaClientServices),function(e){"use strict";var t={getSupportInConferenceChatCapability:function(){},getSupportMeetingMinutesCapability:function(){},getModerateConferenceCapability:function(){},getUpdateLockStatusCapability:function(){return this._setLockCapability},_recalculateSetLockCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&this._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setLockCapability._updateIfChanged(t,i)},getUpdateContinuationStatusCapability:function(){return this._setContinuationStatusCapability},_recalculateSetContinuationStatusCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&this._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setContinuationStatusCapability._updateIfChanged(t,i)},getStartRecordingCapability:function(){return this._startRecordingCapability},getStopRecordingCapability:function(){return this._stopRecordingCapability},getPauseRecordingCapability:function(){return this._pauseRecordingCapability},getResumeRecordingCapability:function(){return this._resumeRecordingCapability},_recalculateStartStopRecordingCapability:function(){var t,i,a;e.Base.Utils.isDefined(this._selfParticipant)&&e.Base.Utils.isDefined(this._recorderStatus)&&e.Base.Utils.isDefined(this._recordingPermissions)?this._recordingPermissions===e.Services.Conference.PermissionStatus.NOT_ALLOWED||this._recorderStatus===e.Services.Conference.RecorderStatus.NONE?(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):this._recordingPermissions!==e.Services.Conference.PermissionStatus.NEED_MODERATOR||this._selfParticipant.isModerator()?(a=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this.isRecordingActive()?(t=!1,i=!0):(t=!0,i=!1)):(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_NEED_MODERATOR):(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._startRecordingCapability._updateIfChanged(t,a),this._stopRecordingCapability._updateIfChanged(i,a)},_recalculatePauseResumeRecordingCapability:function(){var t,i,a;e.Base.Utils.isDefined(this._selfParticipant)&&e.Base.Utils.isDefined(this._recorderStatus)&&e.Base.Utils.isDefined(this._recordingPermissions)?this._recordingPermissions===e.Services.Conference.PermissionStatus.NOT_ALLOWED||this._recorderStatus!==e.Services.Conference.RecorderStatus.WITH_PAUSE?(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):this._recordingPermissions!==e.Services.Conference.PermissionStatus.NEED_MODERATOR||this._selfParticipant.isModerator()?(a=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this.isRecordingPaused()?(t=!1,i=!0):(t=!0,i=!1)):(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_NEED_MODERATOR):(t=!1,i=!1,a=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._pauseRecordingCapability._updateIfChanged(t,a),this._resumeRecordingCapability._updateIfChanged(i,a)},getUpdateVideoAllowedStatusCapability:function(){},getUpdateEntryExitToneStatusCapability:function(){},getUpdateMultiplePresentersCapability:function(){},getSupportRaiseHandCapability:function(){return this._raiseHandSupportCapability},_recalculateRaiseHandSupportCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._raiseHandSupportCapability._updateIfChanged(t,i)},getSupportLowerHandCapability:function(){return this._lowerHandSupportCapability},_recalculateLowerHandSupportCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._lowerHandSupportCapability._updateIfChanged(t,i)},getRetrieveParticipantListCapability:function(){},getMuteAllParticipantsCapability:function(){return this._muteUnmuteAllCapability},getUnmuteAllParticipantsCapability:function(){return this._muteUnmuteAllCapability},_recalculateMuteUnmuteAllCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&this._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._muteUnmuteAllCapability._updateIfChanged(t,i)},getChangeParticipantRoleCapability:function(){},getSetAsLecturerCapability:function(){return this._setAsLecturerCapability},_recalculateSetAsLecturerCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&this._selfParticipant._isModerator?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setAsLecturerCapability._updateIfChanged(t,i)},getUpdateDisplayVideoParticipantNameCapability:function(){return this._setDisplayVideoParticipantNameCapability},_recalculateDisplayVideoParticipantNameCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&e.Base.Utils.isDefined(this._isVideoParticipantNameDisplayChangeAllowed)?this._isVideoParticipantNameDisplayChangeAllowed?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setDisplayVideoParticipantNameCapability._updateIfChanged(t,i)},getUpdateVideoSelfSeeCapability:function(){return this._setVideoSelfSeeCapability},_recalculateVideoSelfSeeCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&e.Base.Utils.isDefined(this._isVideoSelfSeeChangeAllowed)?this._isVideoSelfSeeChangeAllowed?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setVideoSelfSeeCapability._updateIfChanged(t,i)},getUpdateVideoLayoutCapability:function(){return this._setVideoLayoutCapability},_recalculateSetVideoLayoutCapability:function(){var t,i;if(e.Base.Utils.isDefined(this._selfParticipant)&&e.Base.Utils.isDefined(this._currentVideoLayout)&&e.Base.Utils.isDefined(this._supportedVideoLayouts)){t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED;for(var a=0;a<this._supportedVideoLayouts.length;++a)if(this._supportedVideoLayouts[a].geometry===this._currentVideoLayout){t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED;break}}else t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE;this._setVideoLayoutCapability._updateIfChanged(t,i)},getRequestToBecomeModeratorCapability:function(){return this._setRequestToBecomeModeratorCapability},_recalculateRequestToBecomeModeratorCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)?this._selfParticipant.isModerator()?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setRequestToBecomeModeratorCapability._updateIfChanged(t,i)},getAddParticipantViaDialoutCapability:function(){},getRemoveSelectParticipantCapability:function(){return this._removeSelectParticipantCapability},_recalculateRemoveSelectParticipantCapability:function(){var t,i;e.Base.Utils.isDefined(this._selfParticipant)&&this._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeSelectParticipantCapability._updateIfChanged(t,i)},getRemoveLastParticipantCapability:function(){},getAcceptPendingParticipantCapability:function(){},getDenyPendingParticipantCapability:function(){}};$.extend(e.Services.Conference.Conference.prototype,t)}(AvayaClientServices),function(e){"use strict";function t(t,i){e.Services.Conference.Participant.call(this,t,i)}t.prototype=Object.create(e.Services.Conference.Participant.prototype),t.prototype.reinvite=function(){},e.Services.Conference.DroppedParticipant=t}(AvayaClientServices),function(e){"use strict";var t={getMuteParticipantAudioCapability:function(){return this._muteUnmuteCapability},getUnmuteParticipantAudioCapability:function(){return this._muteUnmuteCapability},_recalculateMuteUnmuteCapability:function(){var t,i;this._audioFromParticipant===e.Services.Conference.MediaFromParticipantStatus.NA?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_CALL_HAS_NO_AUDIO):e.Base.Utils.isDefined(this._conference._selfParticipant)&&this._conference._selfParticipant.isModerator()||this.isSelfParticipant?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._muteUnmuteCapability._updateIfChanged(t,i)},getBlockParticipantVideoCapability:function(){return this._blockUnblockVideoCapability},getUnblockParticipantVideoCapability:function(){return this._blockUnblockVideoCapability},_recalculateBlockUnblockVideoCapability:function(){var t,i;this._videoFromParticipant===e.Services.Conference.MediaFromParticipantStatus.NA?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_CALL_HAS_NO_VIDEO):e.Base.Utils.isDefined(this._conference._selfParticipant)&&this._conference._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._blockUnblockVideoCapability._updateIfChanged(t,i)},getChangeRoleCapability:function(){},getAssignParticipantAsLecturerCapability:function(){return this._setUnsetAsLecturerCapability},_recalculateSetAsLecturerCapability:function(){var t,i;this._audioFromParticipant===e.Services.Conference.MediaFromParticipantStatus.NA?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_CALL_HAS_NO_AUDIO):e.Base.Utils.isDefined(this._conference._selfParticipant)&&this._conference._selfParticipant.isModerator()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._setUnsetAsLecturerCapability._updateIfChanged(t,i)},getLowerParticipantHandCapability:function(){return this._lowerHandCapability},_recalculateLowerHandCapability:function(){var t,i;e.Base.Utils.isDefined(this._conference._selfParticipant)&&this._conference._selfParticipant.isModerator()||this.isSelfParticipant?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._lowerHandCapability._updateIfChanged(t,i)}};$.extend(e.Services.Conference.Participant.prototype,t)}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Conference.PendingParticipant.prototype,{addOnPendingParticipantAcceptedCallback:function(e){this._onPendingParticipantAcceptedCallbacks.add(e)},removeOnPendingParticipantAcceptedCallback:function(e){this._onPendingParticipantAcceptedCallbacks.remove(e)},addOnPendingParticipantCancelledCallback:function(e){this._onPendingParticipantCancelledCallbacks.add(e)},removeOnPendingParticipantCancelledCallback:function(e){this._onPendingParticipantCancelledCallbacks.remove(e)},addOnPendingParticipantDeniedCallback:function(e){this._onPendingParticipantDeniedCallbacks.add(e)},removeOnPendingParticipantDeniedCallback:function(e){this._onPendingParticipantDeniedCallbacks.remove(e)},addOnParticipantStatusChangedCallback:function(e){this._onParticipantStatusChangedCallbacks.add(e)},removeOnParticipantStatusChangedCallback:function(e){this._onParticipantStatusChangedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._value=!1}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getValue=function(){return this._value},i.prototype.setValue=function(e){this._value=e},e.Services.Contacts.ContactBooleanField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";function i(){e.Services.Contacts.ContactField.call(this),this._address=void 0,this._emailAddressType=e.Services.Contacts.ContactEmailAddressType.EMAIL_ADDRESS_WORK}i.prototype=Object.create(e.Services.Contacts.ContactField.prototype),i.prototype.getAddress=function(){return this._address},i.prototype.setAddress=function(e){this._address=e},i.prototype.getEmailAddressType=function(){return this._emailAddressType},i.prototype.setEmailAddressType=function(e){this._emailAddressType=e},e.Services.Contacts.ContactEmailAddressField=i}(AvayaClientServices,jQuery),function(e,t){"use strict";jQuery.extend(e.Services.Contacts.Contacts.prototype,{addOnContactAddedCallback:function(e){this._onContactAddedCallbacks.add(e)},removeOnContactAddedCallback:function(e){this._onContactAddedCallbacks.remove(e)},addOnContactUpdatedCallback:function(e){this._onContactUpdatedCallbacks.add(e)},removeOnContactUpdatedCallback:function(e){this._onContactUpdatedCallbacks.remove(e)},addOnContactDeletedCallback:function(e){this._onContactDeletedCallbacks.add(e)},removeOnContactDeletedCallback:function(e){this._onContactDeletedCallbacks.remove(e)},addOnContactServicesCapabilitiesChangedCallback:function(e){this._onCapabilitiesChangedCallbacks.add(e)},removeOnContactServicesCapabilitiesChangedCallback:function(e){this._onCapabilitiesChangedCallbacks.remove(e)},addOnContactLoadingCompleteCallback:function(e){this._onContactLoadingCompleteCallbacks.add(e)},removeOnContactLoadingCompleteCallback:function(e){this._onContactLoadingCompleteCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Contacts.Contacts.prototype,{getAddContactCapability:function(){return this._contactsService.getAddContactCapability()},getUpdateContactCapability:function(){return this._contactsService.getUpdateContactCapability()},getDeleteContactCapability:function(){return this._contactsService.getDeleteContactCapability()},getSearchContactCapability:function(){return this._contactsService.getSearchContactCapability()}})}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Messaging.Attachment.prototype,{addOnNameChangedCallback:function(e){this._onNameChangedCallbacks.add(e)},removeOnNameChangedCallback:function(e){this._onNameChangedCallbacks.remove(e)},addOnMimeTypeChangedCallback:function(e){this._onMimeTypeChangedCallbacks.add(e)},removeOnMimeTypeChangedCallback:function(e){this._onMimeTypeChangedCallbacks.remove(e)},addOnDurationChangedCallback:function(e){this._onDurationChangedCallbacks.add(e)},removeOnDurationChangedCallback:function(e){this._onDurationChangedCallbacks.remove(e)},addOnSizeChangedCallback:function(e){this._onSizeChangedCallbacks.add(e)},removeOnSizeChangedCallback:function(e){this._onSizeChangedCallbacks.remove(e)},addOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.add(e)},removeOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.remove(e)},addOnConsumptionStatusChangedCallback:function(e){this._onConsumptionStatusChangedCallbacks.add(e)},removeOnConsumptionStatusChangedCallback:function(e){this._onConsumptionStatusChangedCallbacks.remove(e)},addOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.add(e)},removeOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.remove(e)},addOnHasThumbnailChangedCallback:function(e){this._onHasThumbnailChangedCallbacks.add(e)},removeOnHasThumbnailChangedCallback:function(e){this._onHasThumbnailChangedCallbacks.remove(e)},addOnIsSelfGeneratedCallback:function(e){this._onIsSelfGeneratedCallbacks.add(e)},removeOnIsSelfGeneratedCallback:function(e){this._onIsSelfGeneratedCallbacks.remove(e)}})}(window.AvayaClientServices),function(e,t){"use strict";var i={getUpdateNameCapability:function(){return this._updateNameCapability},_recalculateUpdateNameCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateNameCapability._updateIfChanged(t,i)},getUpdateMimeTypeCapability:function(){return this._updateMimeTypeCapability},_recalculateUpdateMimeTypeCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateMimeTypeCapability._updateIfChanged(t,i)},getUpdateDurationCapability:function(){return this._updateDurationCapability},_recalculateUpdateDurationCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateDurationCapability._updateIfChanged(t,i)},getUpdateSizeCapability:function(){return this._updateSizeCapability},_recalculateUpdateSizeCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateSizeCapability._updateIfChanged(t,i)},getUpdateLocationCapability:function(){return this._updateLocationCapability},_recalculateUpdateLocationCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateLocationCapability._updateIfChanged(t,i)},getUpdateIsSelfGeneratedCapability:function(){return this._updateIsSelfGeneratedCapability},_recalculateUpdateIsSelfGeneratedCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._updateIsSelfGeneratedCapability._updateIfChanged(!0,t)},getCreateThumbnailCapability:function(){return this._createThumbnailCapability},_recalculateCreateThumbnailCapability:function(){var t,i;for(var a in t=!1,this._thumbnailCreator._creators)if(this._thumbnailCreator._creators.hasOwnProperty(a)){var n=a;-1!==a.indexOf("/*")&&(n=a.slice(0,a.indexOf("/*"))),-1!==this.getMimeType().indexOf(n)&&(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED)}t||(i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createThumbnailCapability._updateIfChanged(t,i)},getRemoveThumbnailCapability:function(){return this._removeThumbnailCapability},_recalculateRemoveThumbnailCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._removeThumbnailCapability._updateIfChanged(t,i)},getCanDownloadCapability:function(){return this._canDownloadCapability},_recalculateCanDownloadCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._canDownloadCapability._updateIfChanged(!0,t)},getCanConsumeCapability:function(){return this._canConsumeCapability},_recalculateCanConsumeCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._canConsumeCapability._updateIfChanged(!0,t)},getRemoveCapability:function(){return this._removeCapability},_recalculateRemoveCapability:function(){var t,i;this.status!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._removeCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Messaging.Attachment.prototype,i)}(AvayaClientServices),function(e){"use strict";function t(e){this._messageBuilder=e}t.prototype={build:function(t,i){var a=new e.Services.Messaging.Conversation(i);a.attachmentCount=t.attachmentCount||0,t.counts&&(a.totalMessageCount=t.counts.messageCount||0),t.flags&&(a.active=t.flags.active,a.closed=t.flags.closed,a.sensitivity=t.flags.sensitivity),a.href=t.href,a.id=t.id,a.lastAccessTime=new Date(t.lastAccessedTime),a.participants=new e.Base.DataSet,a.lastUpdated=new Date(t.lastUpdated),a.latestEntryTimestamp=new Date(t.latestEntryTimestamp),a.subject=t.subject,a.totalCount=t.totalCount||0,a.type=t.type||e.Services.Messaging.ConversationType.THREAD,a.unreadAttachmentCount=t.unreadAttachmentCount||0,a.unreadCount=t.unreadCount||0,a.resourceStatus=t.resourceStatus||e.Services.Messaging.ResourceStatus.PUBLISHED,t.counts&&(a._counts.eventCount=t.counts.eventCount||0,a._counts.eventUnreadMessage=t.counts.eventUnreadMessage||0,a._counts.messageAttachment=t.counts.messageAttachment||0,a._counts.messageCount=t.counts.messageCount||0,a._counts.messageUnreadAttachment=t.counts.messageUnreadAttachment||0,a._counts.messageUnreadMessage=t.counts.messageUnreadMessage||0);var n=a.getLastMessage();return a.previewText=n?n.from.givenName+": "+n.body:"",i._recalculateAllConversationCapabilities(a),a},update:function(e,t,i){e.attachmentCount!==t.attachmentCount&&(e.attachmentCount=t.attachmentCount,e._onTotalAttachmentCountChangedCallbacks.fire(e,e.attachmentCount)),t.counts&&e.totalMessageCount!==t.counts.messageCount&&(e.totalMessageCount=t.counts.messageCount,e._onTotalMessagesCountChangedCallbacks.fire(e,e.totalMessageCount)),t.flags&&(e.active!==t.flags.active&&(e.active=t.flags.active,e._onActiveStatusChangedCallbacks.fire(e,e.active)),e.closed!==t.flags.closed&&(e.closed=t.flags.closed,e._onClosedStatusChangedCallbacks.fire(e,e.closed)),e.sensitivity!==t.flags.sensitivity&&(e.sensitivity=t.flags.sensitivity,e._onSensitivityChangedCallbacks.fire(e,e.sensitivity))),e.multiparty!==t.isMultiparty&&(e.multiparty=t.isMultiparty,e._onMultiPartyStatusChangedCallbacks.fire(e,e.multiparty));var a=new Date(t.lastUpdated);e.lastUpdated&&e.lastUpdated.getTime()===a.getTime()||(e.lastUpdated=a,e._onLastUpdatedTimeChangedCallbacks.fire(e,e.lastUpdated)),a=new Date(t.lastAccessedTime),e.lastAccessTime&&e.lastAccessTime.getTime()===a.getTime()||(e.lastAccessTime=a,e._onLastAccessTimeChangedCallbacks.fire(e,e.lastAccessTime)),a=new Date(t.latestEntryTimestamp),e.latestEntryTimestamp&&e.latestEntryTimestamp.getTime()===a.getTime()||(e.latestEntryTimestamp=a,e._onLatestEntryTimeChangedCallbacks.fire(e,e.latestEntryTimestamp)),e.subject!==t.subject&&(e.subject=t.subject,e._onSubjectChangedCallbacks.fire(e,e.subject)),e.type!==t.type&&(e.type=t.type,e._onTypeChangedCallbacks.fire(e,e.type)),e.unreadAttachmentCount!==t.unreadAttachmentCount&&(e.unreadAttachmentCount=t.unreadAttachmentCount,e._onTotalUnreadAttachmentCountChangedCallbacks.fire(e,e.unreadAttachmentCount)),e.unreadCount!==t.unreadCount&&(e.unreadCount=t.unreadCount,e._onTotalUnreadMessageCountChangedCallbacks.fire(e,e.unreadCount)),t.counts&&(e._counts.eventCount!==t.counts.eventCount&&(e._counts.eventCount=t.counts.eventCount,e._onTotalEventCountChangedCallbacks.fire(e,e._counts.eventCount)),e._counts.eventUnreadMessage!==t.counts.eventUnreadMessage&&(e._counts.eventUnreadMessage=t.counts.eventUnreadMessage,e._onTotalUnreadEventCountChangedCallbacks.fire(e,e._counts.eventUnreadMessage)),e._counts.messageAttachment!==t.counts.messageAttachment&&(e._counts.messageAttachment=t.counts.messageAttachment,e._onTotalAttachmentCountChangedCallbacks.fire(e,e._counts.messageAttachment)),e._counts.messageCount!==t.counts.messageCount&&(e._counts.messageCount=t.counts.messageCount,e._onTotalMessagesCountChangedCallbacks.fire(e,e._counts.messageCount)),e._counts.messageUnreadAttachment!==t.counts.messageUnreadAttachment&&(e._counts.messageUnreadAttachment=t.counts.messageUnreadAttachment,e._onTotalUnreadAttachmentCountChangedCallbacks.fire(e,e._counts.messageUnreadAttachment)),e._counts.messageUnreadMessage!==t.counts.messageUnreadMessage&&(e._counts.messageUnreadMessage=t.counts.messageUnreadMessage,e._onTotalUnreadMessageCountChangedCallbacks.fire(e,e._counts.messageUnreadMessage)));for(var n,r=!1,s=t.messages.length-1;s>=0;s--){var o=t.messages[s],c=this._getMessageById(e.messages,o.id);void 0!==c?c.getLastModifiedDate().toISOString()!==new Date(o.lastModifiedDate).toISOString()&&(t.messages[s+1]&&(n=this._getMessageById(e.messages,t.messages[s+1].id)),this._updateExistingMessage(c,o,n),r=!0):(t.messages[s+1]&&(n=this._getMessageById(e.messages,t.messages[s+1].id)),n=this._addNewMessage(e,o,n,i),e._onMessagesAddedCallbacks.fire(e,[n]),r=!0)}r&&(e.messages.onDataSetChanged(),this._updatePreviewText(e))},_getMessageById:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return e[i]},_updatePreviewText:function(e){var t=e.getLastMessage(),i=t&&t.from?t.from.givenName+": "+t.getBody():"";i!==e.previewText&&(e.previewText=i,e._onPreviewTextChangedCallbacks.fire(e,i))},_removeParticipant:function(e,t){var i=e.participants.filter(function(e){return e.address===t.eventRelatedParticipants[0].address});if(i.length>0){var a=e.participants.indexOf(i[0]);e.participants.splice(a,1),e._onParticipantsRemovedCallbacks.fire(e,i[0])}},_updateExistingMessage:function(e,t,i){return this._messageBuilder.update(e,t),i&&e.setIsCoalesced(this._messageBuilder.isMessageCoalesced(e,i)),e},_addNewMessage:function(t,i,a,n){var r=n.createNewClientMessage(i,t);return a&&r.setIsCoalesced(this._messageBuilder.isMessageCoalesced(r,a)),t.messages.push(r),r.getType()===e.Services.Messaging.MessageType.LEFT&&this._removeParticipant(t,r),r}},e.Services.Messaging.ConversationBuilder=t}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Messaging.Conversation.prototype,{addOnMessagesAddedCallback:function(e){this._onMessagesAddedCallbacks.add(e)},removeOnMessagesAddedCallback:function(e){this._onMessagesAddedCallbacks.remove(e)},addOnSubjectChangedCallback:function(e){this._onSubjectChangedCallbacks.add(e)},removeOnSubjectChangedCallback:function(e){this._onSubjectChangedCallbacks.remove(e)},addOnTotalMessagesCountChangedCallback:function(e){this._onTotalMessagesCountChangedCallbacks.add(e)},removeOnTotalMessagesCountChangedCallback:function(e){this._onTotalMessagesCountChangedCallbacks.remove(e)},addOnParticipantsAddedCallback:function(e){this._onParticipantsAddedCallbacks.add(e)},removeOnParticipantsAddedCallback:function(e){this._onParticipantsAddedCallbacks.remove(e)},addOnParticipantsRemovedCallback:function(e){this._onParticipantsRemovedCallbacks.add(e)},removeOnParticipantsRemovedCallback:function(e){this._onParticipantsRemovedCallbacks.remove(e)},addOnActiveStatusChangedCallback:function(e){this._onActiveStatusChangedCallbacks.add(e)},removeOnActiveStatusChangedCallback:function(e){this._onActiveStatusChangedCallbacks.remove(e)},addOnClosedStatusChangedCallback:function(e){this._onClosedStatusChangedCallbacks.add(e)},removeOnClosedStatusChangedCallback:function(e){this._onClosedStatusChangedCallbacks.remove(e)},addOnMultiPartyStatusChangedCallback:function(e){this._onMultiPartyStatusChangedCallbacks.add(e)},removeOnMultiPartyStatusChangedCallback:function(e){this._onMultiPartyStatusChangedCallbacks.remove(e)},addOnIsComposingStatusChangedCallback:function(e){this._onIsComposingStatusChangedCallbacks.add(e)},removeOnIsComposingStatusChangedCallback:function(e){this._onIsComposingStatusChangedCallbacks.remove(e)},addOnLastAccessTimeChangedCallback:function(e){this._onLastAccessTimeChangedCallbacks.add(e)},removeOnLastAccessTimeChangedCallback:function(e){this._onLastAccessTimeChangedCallbacks.remove(e)},addOnLastUpdatedTimeChangedCallback:function(e){this._onLastUpdatedTimeChangedCallbacks.add(e)},removeOnLastUpdatedTimeChangedCallback:function(e){this._onLastUpdatedTimeChangedCallbacks.remove(e)},addOnLatestEntryTimeChangedCallback:function(e){this._onLatestEntryTimeChangedCallbacks.add(e)},removeOnLatestEntryTimeChangedCallback:function(e){this._onLatestEntryTimeChangedCallbacks.remove(e)},addOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.add(e)},removeOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.remove(e)},addOnPreviewTextChangedCallback:function(e){this._onPreviewTextChangedCallbacks.add(e)},removeOnPreviewTextChangedCallback:function(e){this._onPreviewTextChangedCallbacks.remove(e)},addOnTotalAttachmentCountChangedCallback:function(e){this._onTotalAttachmentCountChangedCallbacks.add(e)},removeOnTotalAttachmentCountChangedCallback:function(e){this._onTotalAttachmentCountChangedCallbacks.remove(e)},addOnTotalUnreadMessageCountChangedCallback:function(e){this._onTotalUnreadMessageCountChangedCallbacks.add(e)},removeOnTotalUnreadMessageCountChangedCallback:function(e){this._onTotalUnreadMessageCountChangedCallbacks.remove(e)},addOnTotalUnreadAttachmentCountChangedCallback:function(e){this._onTotalUnreadAttachmentCountChangedCallbacks.add(e)},removeOnTotalUnreadAttachmentCountChangedCallback:function(e){this._onTotalUnreadAttachmentCountChangedCallbacks.remove(e)},addOnTotalEventCountChangedCallback:function(e){this._onTotalEventCountChangedCallbacks.add(e)},removeOnTotalEventCountChangedCallback:function(e){this._onTotalEventCountChangedCallbacks.remove(e)},addOnTotalUnreadEventCountChangedCallback:function(e){this._onTotalUnreadEventCountChangedCallbacks.add(e)},removeOnTotalUnreadEventCountChangedCallback:function(e){this._onTotalUnreadEventCountChangedCallbacks.remove(e)},addOnSensitivityChangedCallback:function(e){this._onSensitivityChangedCallbacks.add(e)},removeOnSensitivityChangedCallback:function(e){this._onSensitivityChangedCallbacks.remove(e)},addOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.add(e)},removeOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.remove(e)},addOnMessagesRemovedCallback:function(e){this._onMessagesRemovedCallbacks.add(e)},removeOnMessagesRemovedCallback:function(e){this._onMessagesRemovedCallbacks.remove(e)},addOnOtherMessagesAddedCallback:function(e){this._onOtherMessagesAddedCallbacks.add(e)},removeOnOtherMessagesAddedCallback:function(e){this._onOtherMessagesAddedCallbacks.remove(e)}})}(window.AvayaClientServices),function(e,t){"use strict";var i={getUpdateSubjectCapability:function(){return this._updateSubjectCapability},_recalculateUpdateSubjectCapability:function(){var t,i;this.closed?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):this.resourceStatus===e.Services.Messaging.ResourceStatus.PUBLISHED?this._conversationService.isUpdateSubjectSupported()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):this.resourceStatus===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT&&(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateSubjectCapability._updateIfChanged(t,i)},getUpdateLastAccessTimeCapability:function(){return this._updateLastAccessTimeCapability},_recalculateUpdateLastAccessTimeCapability:function(){var t,i;this.closed||this.resourceStatus!==e.Services.Messaging.ResourceStatus.PUBLISHED?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateLastAccessTimeCapability._updateIfChanged(t,i)},getUpdateSensitivityCapability:function(){return this._updateSensitivityCapability},_recalculateUpdateSensitivityCapability:function(){var t,i;this.closed||this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateSensitivityCapability._updateIfChanged(t,i)},getOlderContentCapability:function(){return this._olderContentCapability},_recalculateOlderContentCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.PUBLISHED?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):this.totalCount===this.messages.length?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._olderContentCapability._updateIfChanged(t,i)},getAddParticipantsCapability:function(){return this._addParticipantsCapability},_recalculateAddParticipantsCapability:function(){var t,i;this.isActive()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):this.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._addParticipantsCapability._updateIfChanged(t,i)},getRemoveParticipantsCapability:function(){return this._removeParticipantsCapability},_recalculateRemoveParticipantsCapability:function(){var t,i;this.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeParticipantsCapability._updateIfChanged(t,i)},getCreateMessageCapability:function(){return this._createMessageCapability},_recalculateCreateMessageCapability:function(){var t,i;this.closed?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._createMessageCapability._updateIfChanged(t,i)},getCreateEscalationCapability:function(){return this._createEscalationCapability},_recalculateCreateEscalationCapability:function(){var t,i;this.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._createEscalationCapability._updateIfChanged(t,i)},getMarkAllContentAsReadCapability:function(){return this._markAllContentAsReadCapability},_recalculateMarkAllContentAsReadCapability:function(){var t,i;0===this._counts.messageUnreadMessage?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):this._conversationService.isMarkAllContentAsReadSupported()?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED),this._markAllContentAsReadCapability._updateIfChanged(t,i)},getLeaveCapability:function(){return this._leaveCapability},_recalculateLeaveCapability:function(){var t,i;!this.active||this.closed?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._leaveCapability._updateIfChanged(t,i)},getRemoveCapability:function(){return this._removeCapability},_recalculateRemoveCapability:function(){var t,i;this.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability._updateIfChanged(t,i)},getStartCapability:function(){return this._startCapability},_recalculateStartCapability:function(){var t,i;(this.closed||!this.active)&&(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this.resourceStatus===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?0===this.participants.filter(function(e){return!e.isSelf()}).length?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._startCapability._updateIfChanged(t,i)},getUpdateTypeCapability:function(){return this._updateTypeCapability},_recalculateUpdateTypeCapability:function(){var t,i;this.getStatus()===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateTypeCapability._updateIfChanged(t,i)},getIsTypingCapability:function(){return this._isTypingCapability},_recalculateIsTypingCapability:function(){var t,i;this._conversationService.isOpened()&&this._isSubscribed?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._isTypingCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Messaging.Conversation.prototype,i)}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Messaging.Message.prototype,{addOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.add(e)},removeOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.remove(e)},addOnBodyChangedCallback:function(e){this._onBodyChangedCallbacks.add(e)},removeOnBodyChangedCallback:function(e){this._onBodyChangedCallbacks.remove(e)},addOnInReplyToChangedCallback:function(e){this._onInReplyToChangedCallbacks.add(e)},removeOnInReplyToChangedCallback:function(e){this._onInReplyToChangedCallbacks.remove(e)},addOnLastModifiedDateChangedCallback:function(e){this._onLastModifiedDateChangedCallbacks.add(e)},removeOnLastModifiedDateChangedCallback:function(e){this._onLastModifiedDateChangedCallbacks.remove(e)},addOnIsCoalescedStatusChangedCallback:function(e){this._onIsCoalescedStatusChangedCallbacks.add(e)},removeOnIsCoalescedStatusChangedCallback:function(e){this._onIsCoalescedStatusChangedCallbacks.remove(e)},addOnHasAttachmentStatusChangedCallback:function(e){this._onHasAttachmentStatusChangedCallbacks.add(e)},removeOnHasAttachmentStatusChangedCallback:function(e){this._onHasAttachmentStatusChangedCallbacks.remove(e)},addOnHasUnviewedAttachmentStatusChangedCallback:function(e){this._onHasUnviewedAttachmentStatusChangedCallbacks.add(e)},removeOnHasUnviewedAttachmentStatusChangedCallback:function(e){this._onHasUnviewedAttachmentStatusChangedCallbacks.remove(e)},addOnIsPrivateStatusChangedCallback:function(e){this._onIsPrivateStatusChangedCallbacks.add(e)},removeOnIsPrivateStatusChangedCallback:function(e){this._onIsPrivateStatusChangedCallbacks.remove(e)},addOnDoNotForwardStatusChangedCallback:function(e){this._onDoNotForwardStatusChangedCallbacks.add(e)},removeOnDoNotForwardStatusChangedCallback:function(e){this._onDoNotForwardStatusChangedCallbacks.remove(e)},addOnIsReadStatusChangedCallback:function(e){this._onIsReadStatusChangedCallbacks.add(e)},removeOnIsReadStatusChangedCallback:function(e){this._onIsReadStatusChangedCallbacks.remove(e)},addOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.add(e)},removeOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.remove(e)},addOnImportanceChangedCallback:function(e){this._onImportanceChangedCallbacks.add(e)},removeOnImportanceChangedCallback:function(e){this._onImportanceChangedCallbacks.remove(e)},addOnSensitivityChangedCallback:function(e){this._onSensitivityChangedCallbacks.add(e)},removeOnSensitivityChangedCallback:function(e){this._onSensitivityChangedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";var i={getUpdateBodyCapability:function(){return this._updateBodyCapability},_recalculateUpdateBodyCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateBodyCapability._updateIfChanged(t,i)},getUpdateSensitivityCapability:function(){return this._updateSensitivityCapability},_recalculateUpdateSensitivityCapability:function(){var t,i;this.conversation.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateSensitivityCapability._updateIfChanged(t,i)},getUpdateInReplyToCapability:function(){return this._updateInReplyToCapability},_recalculateUpdateInReplyToCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateInReplyToCapability._updateIfChanged(t,i)},getUpdateDoNotForwardCapability:function(){return this._updateDoNotForwardCapability},_recalculateUpdateDoNotForwardCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._updateDoNotForwardCapability._updateIfChanged(!0,t)},getUpdateImportanceCapability:function(){return this._updateImportanceCapability},_recalculateUpdateImportanceCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._updateImportanceCapability._updateIfChanged(t,i)},getCreateAttachmentCapability:function(e){return this._createAttachmentCapability},_recalculateCreateAttachmentCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._createAttachmentCapability._updateIfChanged(t,i)},getSendCapability:function(){return this._sendCapability},_recalculateSendCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):this.conversation.active?this.conversation.closed?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._sendCapability._updateIfChanged(t,i)},getMarkAsReadCapability:function(){return this._markAsReadCapability},_recalculateMarkAsReadCapability:function(){var t,i;this.read?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._markAsReadCapability._updateIfChanged(t,i)},getRemoveCapability:function(){return this._removeCapability},_recalculateRemoveCapability:function(){var t,i;this.resourceStatus!==e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._removeCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Messaging.Message.prototype,i)}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Messaging.Messaging.prototype,{addOnMessagingLimitsChangedCallback:function(e){this._onMessagingLimitsChangedCallbacks.add(e)},removeOnMessagingLimitsChangedCallback:function(e){this._onMessagingLimitsChangedCallbacks.remove(e)},addOnRoutableDomainsChangedCallback:function(e){this._onRoutableDomainsChangedCallbacks.add(e)},removeOnRoutableDomainsChangedCallback:function(e){this._onRoutableDomainsChangedCallbacks.remove(e)},addOnNumberOfConversationWithUnreadContentChangedCallback:function(e){this._onNumberOfConversationWithUnreadContentChangedCallbacks.add(e)},removeOnNumberOfConversationWithUnreadContentChangedCallback:function(e){this._onNumberOfConversationWithUnreadContentChangedCallbacks.remove(e)},addOnNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallback:function(e){this._onNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallbacks.add(e)},removeOnNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallback:function(e){this._onNumberOfConversationWithUnviewedContentSinceLastAccessChangedCallbacks.remove(e)},addOnConversationsAddedCallback:function(e){this._onConversationsAddedCallbacks.add(e)},removeOnConversationsAddedCallback:function(e){this._onConversationsAddedCallbacks.remove(e)},addOnConversationsRemovedCallback:function(e){this._onConversationsRemovedCallbacks.add(e)},removeOnConversationsRemovedCallback:function(e){this._onConversationsRemovedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";var i={getStartServiceCapability:function(){return this._startServiceCapability},_recalculateStartServiceCapability:function(){var t,i;this._messagingService._hasStarted?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE):(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED),this._startServiceCapability._updateIfChanged(t,i)},getCreateConversationCapability:function(){return this._createConversationCapability},_recalculateCreateConversationCapability:function(){var t,i;this._messagingService._hasStarted&&this._resources.conversationsResource.href?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):this._messagingService._hasStarted&&!this._resources.conversationsResource.href?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._createConversationCapability._updateIfChanged(t,i)},getRetrieveConversationsCapability:function(){return this._retrieveConversationsCapability},_recalculateRetrieveConversationsCapability:function(){var t,i;this._messagingService._hasStarted&&this._resources.conversationsResource.href?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._retrieveConversationsCapability._updateIfChanged(t,i)},getSearchConversationsCapability:function(){return this._searchConversationsCapability},_recalculateSearchConversationsCapability:function(){var t,i;this._messagingService._hasStarted&&this._resources.conversationsResource.href?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):this._messagingService._hasStarted&&!this._resources.conversationsResource.href?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._searchConversationsCapability._updateIfChanged(t,i)},getUpdateRefreshIntervalCapability:function(){return this._updateRefreshIntervalCapability},_recalculateUpdateRefreshIntervalCapability:function(){var t,i;this._messagingService._hasStarted?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateRefreshIntervalCapability._updateIfChanged(t,i)},getValidateParticipantAddressCapability:function(){return this._validateParticipantAddressCapability},_recalculateValidateParticipantAddressCapability:function(){var t,i;this._messagingService._hasStarted&&this._resources.services.validateAddress?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):this._messagingService._hasStarted&&!this._resources.services.validateAddress?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._validateParticipantAddressCapability._updateIfChanged(t,i)},getMarkContentAsReadCapability:function(){return this._markContentAsReadCapability},_recalculateMarkContentAsReadCapability:function(){var t,i;this._messagingService._hasStarted&&this._resources.services.markAsReadIf?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):this._messagingService._hasStarted&&!this._resources.services.markAsReadIf?(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_SUPPORTED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._markContentAsReadCapability._updateIfChanged(t,i)},getClearLocalDataCapability:function(){return this._clearLocalDataCapability},_recalculateClearLocalDataCapability:function(){var t,i;this._messagingService._hasStarted?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._clearLocalDataCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Messaging.Messaging.prototype,i)}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Presence.PresenceListSubscription,{addOnPresenceListSubscriptionStartedCallback:function(e){this._onPresenceListSubscriptionStartedCallbacks.add(e)},removeOnPresenceListSubscriptionStartedCallback:function(e){this._onPresenceListSubscriptionStartedCallbacks.remove(e)},addOnPresenceListSubscriptionPresenceReceivedCallback:function(e){this._onPresenceListSubscriptionPresenceReceivedCallbacks.add(e)},removeOnPresenceListSubscriptionPresenceReceivedCallback:function(e){this._onPresenceListSubscriptionPresenceReceivedCallbacks.remove(e)},addOnPresenceListSubscriptionStoppedCallback:function(e){this._onPresenceListSubscriptionStoppedCallbacks.add(e)},removeOnPresenceListSubscriptionStoppedCallback:function(e){this._onPresenceListSubscriptionStoppedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";jQuery.extend(e.Services.Presence.PresenceService,{addOnSelfPresenceReceivedCallback:function(e){this._onSelfPresenceReceivedCallbacks.add(e)},removeOnSelfPresenceReceivedCallback:function(e){this._onSelfPresenceReceivedCallbacks.remove(e)},addOnPresenceWatcherRequestReceivedCallback:function(e){this._onPresenceWatcherRequestReceivedCallbacks.add(e)},removeOnPresenceWatcherRequestReceivedCallback:function(e){this._onPresenceWatcherRequestReceivedCallbacks.remove(e)},addOnPresenceServiceAvailableCallback:function(e){this._onPresenceServiceAvailableCallbacks.add(e)},removeOnPresenceServiceAvailableCallback:function(e){this._onPresenceServiceAvailableCallbacks.remove(e)},addOnPresenceServiceUnavailableCallback:function(e){this._onPresenceServiceUnavailableCallbacks.add(e)},removeOnPresenceServiceUnavailableCallback:function(e){this._onPresenceServiceUnavailableCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";(jQuery=jQuery||{}).extend(e.User.prototype,{addOnUserRegistrationSuccessful:function(e){this._userRegistrationSuccessfulCallbacks.add(e)},removeOnUserRegistrationSuccessful:function(e){this._userRegistrationSuccessfulCallbacks.remove(e)},addOnUserRegistrationFailed:function(e){this._userRegistrationFailedCallbacks.add(e)},removeOnUserRegistrationFailed:function(e){this._userRegistrationFailedCallbacks.remove(e)},addOnUserUnregistrationSuccessful:function(e){this._userUnregistrationSuccessfulCallbacks.add(e)},removeOnUserUnregistrationSuccessful:function(e){this._userUnregistrationSuccessfulCallbacks.remove(e)},addOnUserUnregistrationFailed:function(e){this._userUnregistrationFailedCallbacks.add(e)},removeOnUserUnregistrationFailed:function(e){this._userUnregistrationFailedCallbacks.remove(e)}})}(window.AvayaClientServices=window.AvayaClientServices||{}),function(e){"use strict";var t=[];t.type=new e.Base.Validators.TypeValidator,t.arrayElementType=new e.Base.Validators.ArrayElementTypeValidator,t.defined=new e.Base.Validators.DefinedValidator,e.Base.Utils={isUndefined:function(e){return void 0===e},isDefined:function(e){return void 0!==e},validate:function(i,a,n){if(a.optional&&void 0===i)return!1;var r=!0;return a.validators.forEach(function(a){if(e.Base.Utils.isUndefined(t[a.type]))throw new Error("Validator of specified type does not exist.");r=r&&t[a.type].validate(i,a,n)}.bind(this)),r},makeId:function(e,t){var i;e||(e=10),i=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var a="",n=0;e>n;n++)a+=i.charAt(Math.floor(Math.random()*i.length));return a},clean:function(e,t){for(var i=0;i<e.length;i++)e[i]===t&&(e.splice(i,1),i--);return e},queryJSONObject:function(e,t){if(void 0!==e){var i=e,a=t.match(/(\w+)/g);if(a){for(var n=0;n<a.length;n++){if(!i[a[n]])return;i=i[a[n]]}return i}}}},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){var t=this;return function(){var i=Array.prototype.slice.call(arguments);return t.apply(e||null,i)}})}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n){this._id=e.Base.Utils.makeId(10,"0123456789"),this._color=a,this._width=n,this._translation=void 0,this._status=e.Services.Collaboration.SelectionStatus.PENDING,this._isMine=i,this._ownerDisplayName=t,this._finished=!1}t.prototype={getId:function(){return this._id},setId:function(e){this._id=e},getColor:function(){return this._color},getWidth:function(){return this._width},getOwnerDisplayName:function(){return this._ownerDisplayName},getTranslation:function(){return this._translation},setTranslation:function(e){this._translation=e},getStatus:function(){return this._status},setStatus:function(e){this._status=e},isMine:function(){return this._isMine},isFinished:function(){return this._finished},finishDrawing:function(){return this._finished=!0,$.when(this._finished)}},e.Services.Collaboration.AbstractShape=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o,c){e.Services.Collaboration.AbstractShape.call(this,a,r,s,c),this._topLeft=t,this._bottomRight=i,this._filled=n||!1,this._alpha=o||100}t.prototype=Object.create(e.Services.Collaboration.AbstractShape.prototype),t.prototype.getTopLeft=function(){return this._topLeft},t.prototype.setTopLeft=function(e){this._topLeft=e},t.prototype.getBottomRight=function(){return this._bottomRight},t.prototype.setBottomRight=function(e){this._bottomRight=e},t.prototype.isFilled=function(){return this._filled},t.prototype.getAlpha=function(){return this._alpha},e.Services.Collaboration.Circle=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s){e.Services.Collaboration.AbstractShape.call(this,t,a,n,s),this._filled=i||!1,this._finished=!1,this._sentPointsPos=0,this._points=[],this._alpha=r||100,this._onShapeFinished=void 0,this._readyToSendCallbacks=$.Callbacks(),this._throttlingInterval=100}t.prototype=Object.create(e.Services.Collaboration.AbstractShape.prototype),t.prototype.addPoint=function(e,t){var i=(new Date).getTime();this._points.push({isMove:e,point:t,_timestamp:i}),0===this.getSentPointsCount()?i-this._points[this.getSentPointsCount()]._timestamp>this._throttlingInterval&&this._readyToSendCallbacks.fire():i-this._points[this.getSentPointsCount()-1]._timestamp>this._throttlingInterval&&this._readyToSendCallbacks.fire()},t.prototype.addMovePoint=function(e){this.addPoint(!0,e)},t.prototype.addLinePoint=function(e){this.addPoint(!1,e)},t.prototype.finishDrawing=function(){return this._finished=!0,e.Base.Utils.isDefined(this._onShapeFinished)?this._onShapeFinished():$.when(this._finished)},t.prototype.getPoints=function(){return this._points},t.prototype.setPoints=function(e){this._points=e,this._sentPointsPos=0},t.prototype.updatePoints=function(e){for(var t=0;t<e.length;t++)this._points.push(e[t])},t.prototype.isFilled=function(){return this._filled},t.prototype.setFilled=function(e){this._filled=e},t.prototype.hasPointsToSend=function(){return this._sentPointsPos!==this._points.length},t.prototype.getPointsToSend=function(){return this._points.slice(this._sentPointsPos)},t.prototype.markPointsAsSent=function(e){this._sentPointsPos=e},t.prototype.getSentPointsCount=function(){return this._sentPointsPos},t.prototype.getAlpha=function(){return this._alpha},e.Services.Collaboration.Shape=t}(AvayaClientServices),function(e){"use strict";function t(t,i,a,n,r,s,o){e.Services.Collaboration.AbstractShape.call(this,a,r,s,o),this._content=t,this._filled=n||!1,this._fontSize=i,this._position=void 0}t.prototype=Object.create(e.Services.Collaboration.AbstractShape.prototype),t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(e){this._position=e},t.prototype.getContent=function(){return this._content},t.prototype.getFontSize=function(){return this._fontSize},e.Services.Collaboration.WhiteboardText=t}(AvayaClientServices),function(e){"use strict";$.extend(e.Services.Conference.ActiveParticipant.prototype,{addOnParticipantCollaborationStatusChangedCallback:function(e){this._onParticipantCollaborationStatusChangedCallbacks.add(e)},removeOnParticipantCollaborationStatusChangedCallback:function(e){this._onParticipantCollaborationStatusChangedCallbacks.remove(e)},addOnParticipantConnectionStatusChangedCallback:function(e){this._onParticipantConnectionStatusChangedCallbacks.add(e)},removeOnParticipantConnectionStatusChangedCallback:function(e){this._onParticipantConnectionStatusChangedCallbacks.remove(e)},addOnParticipantSetAsModeratorCallback:function(e){this._onParticipantSetAsModeratorCallbacks.add(e)},removeOnParticipantSetAsModeratorCallback:function(e){this._onParticipantSetAsModeratorCallbacks.remove(e)},addOnParticipantUnsetAsModeratorCallback:function(e){this._onParticipantUnsetAsModeratorCallbacks.add(e)},removeOnParticipantUnsetAsModeratorCallback:function(e){this._onParticipantUnsetAsModeratorCallbacks.remove(e)},addOnParticipantSetAsLecturerCallback:function(e){this._onParticipantSetAsLecturerCallbacks.add(e)},removeOnParticipantSetAsLecturerCallback:function(e){this._onParticipantSetAsLecturerCallbacks.remove(e)},addOnParticipantUnsetAsLecturerCallback:function(e){this._onParticipantUnsetAsLecturerCallbacks.add(e)},removeOnParticipantUnsetAsLecturerCallback:function(e){this._onParticipantUnsetAsLecturerCallbacks.remove(e)},addOnParticipantSetAsPresenterCallback:function(e){this._onParticipantSetAsPresenterCallbacks.add(e)},removeOnParticipantSetAsPresenterCallback:function(e){this._onParticipantSetAsPresenterCallbacks.remove(e)},addOnParticipantUnsetAsPresenterCallback:function(e){this._onParticipantUnsetAsPresenterCallbacks.add(e)},removeOnParticipantUnsetAsPresenterCallback:function(e){this._onParticipantUnsetAsPresenterCallbacks.remove(e)},addOnParticipantAudioStatusChangedCallback:function(e){this._onParticipantAudioStatusChangedCallbacks.add(e)},removeOnParticipantAudioStatusChangedCallback:function(e){this._onParticipantAudioStatusChangedCallbacks.remove(e)},addOnParticipantVideoStatusChangedCallback:function(e){this._onParticipantVideoStatusChangedCallbacks.add(e)},removeOnParticipantVideoStatusChangedCallback:function(e){this._onParticipantVideoStatusChangedCallbacks.remove(e)},addOnParticipantActiveTalkerStatusChangedCallback:function(e){this._onParticipantActiveTalkerStatusChangedCallbacks.add(e)},removeOnParticipantActiveTalkerStatusChangedCallback:function(e){this._onParticipantActiveTalkerStatusChangedCallbacks.remove(e)},addOnParticipantHandRaisedCallback:function(e){this._onParticipantHandRaisedCallbacks.add(e)},removeOnParticipantHandRaisedCallback:function(e){this._onParticipantHandRaisedCallbacks.remove(e)},addOnParticipantHandLoweredCallback:function(e){this._onParticipantHandLoweredCallbacks.add(e)},removeOnParticipantHandLoweredCallback:function(e){this._onParticipantHandLoweredCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";function i(i,a){this._escalationService=a,this.type=e.Services.Messaging.MessageType.SESSION,this.sessionType=e.Services.Messaging.SessionType.AUDIO,this.participants=new e.Base.DataSet,this.extensions={},this.resourceStatus=e.Services.Messaging.ResourceStatus.DRAFT_UNSENT,e.Base.Utils.isDefined(i)&&(this.type=i.type,this.sessionType=i.sessionType,this.extensions=i.extensions,this.conversation=i.conversation),this._onTypeChangedCallbacks=t.Callbacks(),this._onResourceStatusChangedCallbacks=t.Callbacks(),this._onSessionTypeChangedSuccessCallbacks=t.Callbacks(),this._onSessionTypeChangedFailedCallbacks=t.Callbacks(),this._onStartSuccessCallbacks=t.Callbacks(),this._onStartFailedCallbacks=t.Callbacks(),this._onMessagingEscalationCapabilitiesChangedCallbacks=t.Callbacks(),this._startCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._addParticipantsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeParticipantsCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateSessionTypeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability=new e.Base.Capability(e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),a._recalculateAllEscalationCapabilities(this)}i.prototype={getEscalationStatus:function(){return this.resourceStatus},getSessionType:function(){return this.sessionType},getConversation:function(){return this.conversation},getAllParticipants:function(){return this.participants},getAllSupportedParticipants:function(){},getAllUnSupportedParticipants:function(){},setSessionType:function(e){this._escalationService.setSessionType(this,e)},addParticipantsAddresses:function(e){return this._escalationService.addParticipantsAddresses(this,e)},addParticipants:function(e){return this._escalationService.addParticipants(this,e)},removeParticipantsAddresses:function(e){return this._escalationService.removeParticipantsAddresses(this,e)},removeParticipants:function(e){return this._escalationService.removeParticipants(this,e)},getParticipants:function(){return this.participants},start:function(){return this._escalationService.start(this)},setResourceStatus:function(t){if(!e.Base.Utils.isDefined(e.Services.Messaging.ResourceStatus[t]))throw new Error("Unknown ResourceStatus");this.resourceStatus=t,this._onResourceStatusChangedCallbacks.fire(this,t)},canEscalateForAllParticipants:function(){}},e.Services.Messaging.Escalation=i}(AvayaClientServices,jQuery),function(e,t){"use strict";jQuery.extend(e.Services.Messaging.Escalation.prototype,{addOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.add(e)},removeOnTypeChangedCallback:function(e){this._onTypeChangedCallbacks.remove(e)},addOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.add(e)},removeOnResourceStatusChangedCallback:function(e){this._onResourceStatusChangedCallbacks.remove(e)},addOnSessionTypeChangedSuccessCallback:function(e){this._onSessionTypeChangedSuccessCallbacks.add(e)},removeOnSessionTypeChangedSuccessCallback:function(e){this._onSessionTypeChangedSuccessCallbacks.remove(e)},addOnSessionTypeChangedFailedCallback:function(e){this._onSessionTypeChangedFailedCallbacks.add(e)},removeOnSessionTypeChangedFailedCallback:function(e){this._onSessionTypeChangedFailedCallbacks.remove(e)},addOnStartSuccessCallback:function(e){this._onStartSuccessCallbacks.add(e)},removeOnStartSuccessCallback:function(e){this._onStartSuccessCallbacks.remove(e)},addOnStartFailedCallback:function(e){this._onStartFailedCallbacks.add(e)},removeOnStartFailedCallback:function(e){this._onStartFailedCallbacks.remove(e)},addOnMessagingEscalationCapabilitiesChangedCallback:function(e){this._onMessagingEscalationCapabilitiesChangedCallbacks.add(e)},removeOnMessagingEscalationCapabilitiesChangedCallback:function(e){this._onMessagingEscalationCapabilitiesChangedCallbacks.remove(e)}})}(AvayaClientServices),function(e,t){"use strict";var i={getStartCapability:function(){return this._startCapability},_recalculateStartCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._startCapability._updateIfChanged(!0,t)},getAddParticipantsCapability:function(){return this._addParticipantsCapability},_recalculateAddParticipantsCapability:function(){var t;t=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED,this._addParticipantsCapability._updateIfChanged(!0,t)},getRemoveParticipantsCapability:function(){return this._removeParticipantsCapability},_recalculateRemoveParticipantsCapability:function(){var t,i;this.resourceStatus===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeParticipantsCapability._updateIfChanged(t,i)},getUpdateSessionTypeCapability:function(){return this._updateSessionTypeCapability},_recalculateUpdateSessionTypeCapability:function(){var t,i;this.resourceStatus===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._updateSessionTypeCapability._updateIfChanged(t,i)},getRemoveCapability:function(){return this._removeCapability},_recalculateRemoveCapability:function(){var t,i;this.resourceStatus===e.Services.Messaging.ResourceStatus.DRAFT_UNSENT?(t=!0,i=e.Base.CapabilityDenialReason.CAPABILITY_NOT_DENIED):(t=!1,i=e.Base.CapabilityDenialReason.CAPABILITY_INVALID_STATE),this._removeCapability._updateIfChanged(t,i)}};jQuery.extend(e.Services.Messaging.Escalation.prototype,i)}(AvayaClientServices);var webSocket,avayaGlobal={client:{regState:"G",firstName:"",lastName:"",email:"",phoneArea:"",phonePrefix:"",phoneBody:""},browserWarning:"Your browser does not support required features for this website. The earliest supported versions are Internet Explorer 10, Firefox 11, Chrome 31, Safari 7.1 and Opera 12.1",language:"en_GB",log:null,makeLogger:function(){"use strict";console.info("Creating a logger");var e=AvayaClientServices.Base.Logger;return null!==e?e.addLogger(console):(console.warn("AvayaClientServices were null!"),e=console),e},detectBrowserSupport:function(){"use strict";WebSocket&&XMLHttpRequest&&JSON&&window.jQuery||window.alert(this.browserWarning)},getEl:function(e){"use strict";return document.getElementById(e)},getSessionStorage:function(e){"use strict";return sessionStorage.getItem(e)},isStringEmpty:function(e){"use strict";return 0===e.length},setSessionStorage:function(e,t){"use strict";sessionStorage.setItem(e,t)},removeFromSessionStorage:function(e){"use strict";sessionStorage.removeItem(e)},clearSessionStorage:function(){"use strict";sessionStorage.removeItem("guid"),sessionStorage.removeItem("ak"),sessionStorage.removeItem("email"),sessionStorage.removeItem("firstName"),sessionStorage.removeItem("lastName"),sessionStorage.removeItem("phone"),sessionStorage.removeItem("reloadTimestamp"),sessionStorage.removeItem("users"),sessionStorage.removeItem("transcript"),sessionStorage.removeItem("chatAttrCount"),sessionStorage.removeItem("totalAttributes"),sessionStorage.removeItem("contextId")},wipeSessionStorage:function(){"use strict";sessionStorage.clear()},detachChildren:function(e){"use strict";for(;e.firstChild;)e.removeChild(e.firstChild)},getParameterByName:function(e,t){"use strict";t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i&&i[2]?decodeURIComponent(i[2].replace(/([\+%]20)+/g," ")):null},getParameter:function(e,t){"use strict";var i=t.indexOf(e+"=");if(i<0)return null;var a=t.indexOf("?",i),n=t.substring(i,a<0?t.length:a);return n=n.replace(e+"=",""),decodeURIComponent(n)},isJsonEmpty:function(e){"use strict";return 0===Object.keys(e).length&&e.constructor===Object},getIndicesOf:function(e,t,i){"use strict";var a=e.length;if(0!==a){var n,r=0,s=[];for(i||(t=t.toLowerCase(),e=e.toLowerCase());(n=t.indexOf(e,r))>-1;)s.push(n),r=n+a;return s}avayaGlobal.log.warn("Search string is empty!")}},links={secureAllConnections:!0,webChatHost:window.location.host&&window.location.host.match(/www\.mscdirect/)?"chat.mscdirect.com":"qachat.mscdirect.com",coBrowseHost:window.location.host&&window.location.host.match(/www\.mscdirect/)?"chat.mscdirect.com":"qachat.mscdirect.com",contextStoreHost:window.location.host&&window.location.host.match(/www\.mscdirect/)?"chat.mscdirect.com":"qachat.mscdirect.com",getWebChatUrl:function(){"use strict";return(links.secureAllConnections?"wss://":"ws://")+links.webChatHost+"/services/customer/chat"},getEstimatedWaitTimeUrl:function(){"use strict";return(links.secureAllConnections?"https://":"http://")+links.webChatHost+"/services/CustomerControllerService/gila/ewt/request"},getOceanaCoreDataServicesUrl:function(){"use strict";return(links.secureAllConnections?"https://":"http://")+links.contextStoreHost+"/services/OceanaCoreDataService/oceana/data/"},getCustomerManagementUrl:function(){"use strict";return(links.secureAllConnections?"https://":"http://")+links.contextStoreHost+"/services/CustomerManagement"},setupSecurity:function(){"use strict";links.isPageSecure()&&(links.secureAllConnections=!0),void 0!==window.coBrowse&&(coBrowse.isSecure=links.secureAllConnections)},getPathNameForConfig:function(){"use strict";var e=window.location.pathname,t=e.lastIndexOf("/");return e.substring(1,t)},getPageName:function(){"use strict";var e=window.location.pathname,t=e.lastIndexOf("/")+1;return e.substring(t)},getOcpHostname:function(){"use strict";var e=links.webChatUrl.indexOf("//");return links.webChatUrl.substring(e+2,links.webChatUrl.indexOf("/",e+3))},isPageSecure:function(){"use strict";return"https:"===window.location.protocol}},widgetConfig={radio:"radio",button:"button",selector:"selector",click:"click"},chatConfig={totalNumberOfRetries:0,maxNumberOfRetries:200,retryInterval:3e3,dontRetryConnection:!1,reconnectionTimeout:null,previouslyConnected:!1,resetTimer:5e3,messageTypeNewChatAck:"newChatAcknowledgement",messageTypeAck:"acknowledgement",messageTypeError:"error",messageTypeNotification:"notification",jsonMethodRequestChat:"requestChat",jsonMethodRouteCancel:"routeCancel",jsonMethodRequestNewParticipant:"newParticipant",jsonMethodRequestIsTyping:"isTyping",jsonMethodRequestNewMessage:"newMessage",jsonMethodRequestCloseConversation:"closeConversation",jsonMethodRequestParticipantLeave:"participantLeave",jsonMethodRequestNewPushMessage:"newPushPageMessage",jsonMethodRequestNewCoBrowseSessionKeyMessage:"newCoBrowseSessionKeyMessage",jsonMethodPing:"pong",jsonMethodFileTransfer:"newAgentFileTransfer",newMessageText:"{0} ({1}): {2}",fileTransferMessageText:"{0} transferred a file ({1}) at {2}. Please visit {3} to download it",transferNotificationText:"Transferring to another agent, please remain in the chat",chatbotTransferNotification:"Transferring to a live agent, please remain in the chat",pagePushMessageText:"{0} sent the following URL at ({1}): ",coBrowseMessageText:"{0} initiated a Co-Browsing session at ({1})",notifyOfObserve:!0,nofiyOfCoach:!0,notifyOfBarge:!0,suppressChatbotPresence:!1,pingTimer:5e3,typingTimeout:1e4,agentTypingTimeout:3e3,defaultUsername:"Customer",writeResponseClassResponse:"response",writeResponseClassSent:"sent",writeResponseClassSystem:"system",writeResponseClassError:"presav-chat-error",writeResponseClassDate:"date",writeResponseClassAgentDate:"agentDate",writeResponseClassChatbot:"chatbot",agentImage:"global/vendor/presidio-avaya/agent.png",agentTypingImage:"global/vendor/presidio-avaya/agent_typing.png",supervisorImage:"global/vendor/presidio-avaya/supervisor.png",supervisorTypingImage:"global/vendor/presidio-avaya/supervisor_typing.png",useSecureUrls:!1,leaseTime:1,requireFirstName:!0,requireLastName:!0,requireEmail:!0,requirePhone:!0,requireReason:!0,refreshTimeoutSeconds:180,setLeaseTime:function(e){"use strict";("number"!=typeof e||e>192)&&(avayaGlobal.log.warn("Invalid lease time! Resetting to default (1 hour)"),e=1),chatConfig.leaseTime=e},requestEwt:function(){"use strict";ewt.requestEwt()},showChatPanel:function(){"use strict";chatUI.showChatPanel()},initCobrowse:function(){"use strict";void 0!==window.coBrowse&&coBrowse.init()}},chatLogon={attributes:[],attributeCount:1,maxAttributes:10,contactTypeMenu:null,openChatButton:null,clearAttributes:function(){chatLogon.attributes=[]},logon:function(e,t,i,a,n,r){"use strict";chatUI.changeToChatMode(),webChat.initChat(!0,e,t,i,a,n,r)},checkEmailValidity:function(e){"use strict";var t=e.checkValidity()&&e.value.trim().length>0;console.log("Is email "+e.value+" valid? "+t),avayaGlobal.getEl("transcript-chat").disabled=!t,t||(avayaGlobal.getEl("transcript-chat").checked=!1)},validatePhone:function(){"use strict";var e=avayaGlobal.getEl("phone-country"),t=avayaGlobal.getEl("phone-area"),i=avayaGlobal.getEl("phone-chat");return chatLogon.isValidNumber(e,t,i)||e.value+t.value+i.value===""&&!chatConfig.requirePhone},gatherDetails:function(){"use strict";var e=avayaGlobal.isStringEmpty,t=avayaGlobal.getEl("user-chat").value,i=avayaGlobal.getEl("user-chat-last").value,a=avayaGlobal.getEl("email-chat").value,n=avayaGlobal.getEl("reason").value;!n&&webChat.settings.reasonIfBlank&&(n=webChat.settings.reasonIfBlank);var r="";chatConfig.requireEmail&&(!e(a)&&a.match("@")&&a.match(".")||(r+="A valid email address is required\n")),chatLogon.validatePhone()||(r+="A valid phone number is required\n");var s=!1;if(t.length>50?r+="Your name is too long. It must be less than 50 characters\n":chatConfig.requireFirstName&&e(t)&&(s=!0),i.length>100?r+="Your surname is too long. It must be less than 100 characters\n":chatConfig.requireLastName&&e(i)&&(s=!0),s&&(r+="You must provide a first name and last name\n"),n||(r+="Please select what you need help with\n"),""===r){chatLogon.reason=n,chatLogon.mscattribute=n;var o=avayaGlobal.getEl("phone-country").value,c=avayaGlobal.getEl("phone-area").value,l=avayaGlobal.getEl("phone-chat").value;webChat.addCustomFields(n),"R"===_MSCGlobal_.userType&&(webChat.addCustomFields("sessionId","abc123def987"),webChat.addCustomFields("original_user",_MSCGlobal_.firstName+" "+_MSCGlobal_.lastName),webChat.addCustomFields("original_email",_MSCGlobal_.email),webChat.addCustomFields("original_phone",_MSCGlobal_.phoneNumber)),avayaGlobal.setSessionStorage("user",t),avayaGlobal.setSessionStorage("user_last",i),avayaGlobal.setSessionStorage("phone",l),avayaGlobal.setSessionStorage("email",a),oceanaCoreData.initialise(),chatLogon.addAttribute(chatLogon.mscattribute),console.log("Webchat: Adding CS data and Inititialzing of OCP completed"),chatLogon.logon(t,i,a,o,c,l)}else{var d="Please correct the following errors:\n"+r;chatUI.showLoginErrors(d)}},addContextData:function(){"use strict";var e=$.trim(avayaGlobal.getEl("user-chat").value),t=$.trim(avayaGlobal.getEl("user-chat-last").value),i=$.trim(avayaGlobal.getEl("email-chat").value),a=$.trim(avayaGlobal.getEl("phone-country").value),n=$.trim(avayaGlobal.getEl("phone-area").value),r=$.trim(avayaGlobal.getEl("phone-chat").value),s=JSON.stringify({groupId:customerJourneyCommon.customerId,persistToEDM:!0,data:{FirstName:e,LastName:t,PhoneAreacode:n,Phone:r,RoutingAtrribute:chatLogon.mscattribute,Reason:chatLogon.reason,Comments:"",Email:i}}),o=new XMLHttpRequest;o.withCredentials=!0,o.addEventListener("readystatechange",function(){4===this.readyState&&(console.log(this.responseText),chatLogon.logon(e,t,i,a,n,r))}),console.log("CustomerJourney: Context ID  for upsert "+avayaGlobal.getSessionStorage("contextId")),o.open("PUT",(links.secureAllConnections?"https://":"http://")+links.contextStoreHost+"/services/ContextStoreRest/cs/contexts/upsert/"+avayaGlobal.getSessionStorage("contextId")+"?touchpoint=WEB"),o.setRequestHeader("content-type","application/json"),o.send(s)},isValidNumber:function(e,t,i){"use strict";var a=new RegExp("^("+e.getAttribute("pattern")+"|)$"),n=new RegExp("^("+t.getAttribute("pattern")+"|)$"),r=new RegExp("^"+i.getAttribute("pattern")+"$");return a.test(e.value)&&n.test(t.value)&&r.test(i.value)},addAttribute:function(e){"use strict";chatLogon.attributes.indexOf(e)<0&&chatLogon.attributeCount<chatLogon.maxAttributes&&(chatLogon.attributes.push(e),chatLogon.attributeCount++,chatLogon.saveAttributeCount())},removeAttribute:function(e){"use strict";var t=chatLogon.attributes.indexOf(e);chatLogon.attributes.splice(t,1),chatLogon.attributeCount>0&&(chatLogon.attributeCount--,chatLogon.saveAttributeCount())},saveAttributeCount:function(){"use strict";avayaGlobal.setSessionStorage("chatAttrCount",chatLogon.attributeCount)},loadAttributeCount:function(){"use strict";var e=avayaGlobal.getSessionStorage("totalAttributes");chatLogon.attributeCount=null!==e?parseInt(e):0}},chatUI={panelStartingHeight:null,panelStyleMaximized:"",requirementsSet:!1,reasonOptionsSet:!1,chatPostInstructionsSet:!1,hideChatPanel:function(){"use strict";$(".presav-chatPanel").fadeOut(400)},showChatPanel:function(){"use strict";$(".presav-chatPanel").fadeIn(400)},changeElementText:function(e,t){"use strict";$(e).text(t)},addEwtToChatTab:function(e){"use strict";$(".bottom_chat_btn").attr("title","Click to chat with an agent! Wait time is approximately "+e+" minutes")},changeToChatMode:function(e){"use strict";if(e&&(console.log("called!"),$("#chatForm").hide(),$("#chatInterfaceWrap").show()),chatUI.panelStartingHeight)console.log("maintaining panel height"),console.log(document.getElementById("chatPanel").style.height=chatUI.panelStartingHeight+"px");else{var t=Math.min(475,$(window).width()-20);$("#chatPanel").dialog({width:t,dialogClass:"fixedPosition presav-chatPanel",open:function(e,t){console.log("dialog re-opened"),"undefined"!=typeof localStorage&&localStorage.panelStartingTop&&$("#chatPanel").parent().css("top",localStorage.panelStartingTop),webChat.chatPanelMaximize(),webChat.chatPanelConfigureMinimize()},close:function(e,t){console.log("dialog closed after page nav"),void 0!==webSocket&&(console.log("calling closePanel (2)"),chatUI.closePanel(e)),$("#liveChatLink").show()}})}$("#chatForm").fadeOut(400),$("#chatInterfaceWrap").delay(400).fadeIn(400)},changeToLoginMode:function(){"use strict";$("#chatInterfaceWrap").fadeOut(400),$("#chatForm").delay(400).fadeIn(400);var e=Math.min(475,$(window).width()-20);$("#chatPanel").dialog({width:e,dialogClass:"fixedPosition presav-chatPanel"})},resetChatUI:function(){"use strict";chatUI.changeToLoginMode(),$("#chatPanel").dialog("close"),chatUI.showLiveChat()},showLiveChat:function(){$(".bottom_chat_btn").fadeIn(400)},resizeConfigPanel:function(){"use strict";$("#configPanel").dialog({width:400,height:350})},showAlert:function(e){"use strict";$("#alertDialog").dialog({draggable:!1,resizeable:!1,buttons:{OK:function(){$(this).dialog("close")}}}).text(e)},showLoginErrors:function(e){"use strict";$("#loginErrorsDiv").show("fold"),$("#loginErrorsDiv").text(e),setTimeout(function(){$("#loginErrorsDiv").hide("fold")},5e3)},markElAsRequired:function(e,t){"use strict";console.log("Setting "+e+" as "+(t?"required":"not required"));var i,a=$(e).html();i=t?a+"<sup class='presav-required'>*</sup>":a.replace("<sup class='presav-required'>*</sup>",""),$(e).html(i)},shakeChatTab:function(){"use strict";var e=0,t=1;window.tabShakeInterval=setInterval(function(){e++,$("#liveChatLink").css("right",4*t),t*=-1,e>=6&&clearTimeout(window.tabShakeInterval)},1e3)},closePanel:function(e){"use strict";e.preventDefault(),console.log("step 1"),avayaGlobal.log.debug("WebChat: closing chat panel"),chatSocket.clearRefresh(),chatSocket.manualClose=!0,clearTimeout(chatSocket.closeTimer),console.log("webSocket.readyState = "+webSocket.readyState),2!==webSocket.readyState&&(console.log("quitting chat"),webChat.quitChat())},setup:function(){"use strict";if(!chatUI.chatPostInstructionsSet&&webChat.settings.chatPostInstructions&&(chatUI.chatPostInstructionsSet=!0,$("#chatPostInstructions").html(webChat.settings.chatPostInstructions)),!chatUI.reasonOptionsSet&&webChat.settings.reasonOptions)for(var e in chatUI.reasonOptionsSet=!0,console.log("Appending reason field options"),webChat.settings.reasonOptions){var t=webChat.settings.reasonOptions[e];$("#reason").append('<option value="'+t[0]+'">'+t[1]+"</option>")}$("#showCoBrowseLink").click(function(e){coBrowseUI.checkDialogOpen(coBrowseUI.proactiveJoinDialogId)||coBrowseUI.createProactiveJoinDialog(!0),e.preventDefault()});try{$("#configLink").tooltip(),$(".configButton").tooltip()}catch(e){}$("#chatJavaScriptAlertHeader").hide(),chatUI.shakeChatTab(),chatUI.requirementsSet||(chatUI.requirementsSet=!0,chatUI.markElAsRequired("#firstNameLabel",chatConfig.requireFirstName),chatUI.markElAsRequired("#lastNameLabel",chatConfig.requireLastName),chatUI.markElAsRequired("#emailLabel",chatConfig.requireEmail),chatUI.markElAsRequired("#phoneLabel",chatConfig.requirePhone),chatUI.markElAsRequired("#reasonLabel",chatConfig.requireReason))},reloadChatPanel:function(){"use strict";console.log("Reloading chat panel"),chatUI.changeToChatMode(!0)},printTranscript:function(){var e=window.open("","PRINT","height=400,width=600");return e.document.write("<html><head><title>Chat Transcript</title>"),e.document.write('<link rel="stylesheet" type="text/stylesheet" href="'+webChat.cdnLocation+'global/presidio-avaya/chat-main-1.0.css" />'),e.document.write("</head><body >"),e.document.write("<h1>Chat Transcript</h1>"),e.document.write(document.getElementById("messages").innerHTML),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),!0},copyTranscript:function(){var e=document.createElement("div");e.innerHTML="<style>body{ background-color: transparent !important; }</style>"+document.getElementById("messages").innerHTML,console.log(e.innerHTML.length),e.style.position="fixed",e.style.pointerEvents="none",e.style.opacity=0;Array.prototype.slice.call(document.styleSheets).filter(function(e){return!e.disabled});document.body.appendChild(e),window.getSelection().removeAllRanges();var t=document.createRange();t.selectNode(e),window.getSelection().addRange(t),document.execCommand("copy"),document.body.removeChild(e)}},chatSocket={manualClose:!1,authToken:"",reconnecting:!1,openSocket:function(){"use strict";webChat.participants=avayaGlobal.getEl("participants"),avayaGlobal.log.trace("WebChat: Opening the WebSocket"),void 0===webSocket||webSocket.readyState===WebSocket.CLOSED?(clearTimeout(chatConfig.reconnectionTimeout),(webSocket=new WebSocket(links.getWebChatUrl())).onopen=chatSocket.handleOpen,webSocket.onmessage=chatSocket.handleMessage,webSocket.onerror=chatSocket.handleError,webSocket.onclose=function(e){avayaGlobal.log.debug("WebChat: Websocket closed with code "+e.code),webChat.disableControls(!0),!chatConfig.previouslyConnected||chatConfig.dontRetryConnection||1e3===e.code||1005===e.code?(avayaGlobal.clearSessionStorage(),chatSocket.handleClose(e)):1001===e.code?chatSocket.setupRefresh():chatSocket.reconnect()}):avayaGlobal.log.warn("WebChat: WebSocket is already opened")},handleClose:function(e){"use strict";e.wasClean?avayaGlobal.log.info("WebChat: Closing the WebSocket."):avayaGlobal.log.warn("WebChat: WebSocket closed abnormally. This may be caused by the user exiting before the chat starts or the agent closing the chat (in which case, ignore this), a certificate issue (e.g. your browser considers the certificate to be invalid), or an incorrect URL (e.g. not using a secure connection to a cluster that enforces secure connections). The URL is: ",links.getWebChatUrl()),webChat.disableControls(!0),webChat.initCalled=!1,webChat.updateUsers();var t=chatConfig.resetTimer;chatSocket.manualClose?(t=0,webChat.initCalled=!1):(webChat.writeResponse("Connection closed, chat has ended",chatConfig.writeResponseClassSystem),webChat.writeResponse("The panel will close automatically in "+t/1e3+" seconds",chatConfig.writeResponseClassSystem)),chatSocket.closeTimer=setTimeout(webChat.resetChat,t)},handleOpen:function(e){"use strict";chatSocket.manualClose=!1,webChat.pingInterval=setInterval(function(){webChat.sendPing()},chatConfig.pingTimer),webChat.timeouts.push(webChat.pingInterval),webChat.chatLogin(webChat.g_user,webChat.g_user_last,webChat.g_email,webChat.g_phone),Object.keys(webChat.users).length<=0?(avayaGlobal.log.debug("WebChat: No users in room, disabling controls"),webChat.disableControls(!0)):(avayaGlobal.log.debug("WebChat: Agents already in chat, enabling controls"),webChat.disableControls(!1))},handleMessage:function(e){"use strict";var t=JSON.parse(e.data),i=t.body;if(t.type===chatConfig.messageTypeNotification)webChat.handleNotification(t);else if(t.type===chatConfig.messageTypeError)chatSocket.parseErrorMessage(i);else if(t.type===chatConfig.messageTypeAck);else{if(t.type!==chatConfig.messageTypeNewChatAck)throw new TypeError("Unknown message type:\n"+t);webChat.guid=i.guid,webChat.disableControls(!1),chatSocket.resetConnectionAttempts(),webChat.writeResponse("Chat request approved",chatConfig.writeResponseClassSystem)}},handleError:function(e){"use strict";avayaGlobal.log.error("WebChat: WebSocket error",e),webChat.writeResponse("A connection error has occurred. Check the console for more details",chatConfig.writeResponseClassSystem)},parseErrorMessage:function(e){"use strict";var t=e.code,i=e.errorMessage;avayaGlobal.log.warn("WebChat: An error with status "+t+" occurred. ",i),503===t?webChat.writeResponse("We apologize, but the chat service appears to be unresponsive or down for maintenance. Please try again later",chatConfig.writeResponseClassSystem):webChat.writeResponse("We're sorry, an error occurred (Error "+e.code+": "+e.errorMessage+")  Please try again, or if necessary close this chat window and re-open.",chatConfig.writeResponseClassError),chatSocket.clearRefresh()},reconnect:function(){"use strict";chatConfig.dontRetryConnection?avayaGlobal.log.warn("Attempting to reconnect when we shouldn't!"):webSocket.readyState!==WebSocket.OPEN&&(chatConfig.reconnectionTimeout=setTimeout(function(){chatConfig.totalNumberOfRetries<=chatConfig.maxNumberOfRetries?(webChat.writeResponse("Attempting to reconnect...",chatConfig.writeResponseClassSystem),clearTimeout(chatConfig.reconnectionTimeout),chatConfig.totalNumberOfRetries++,chatSocket.openSocket()):webChat.writeResponse("Unable to reconnect, chat has ended",chatConfig.writeResponseClassSystem)},chatConfig.retryInterval))},resetConnectionAttempts:function(){"use strict";chatConfig.totalNumberOfRetries=0,clearTimeout(chatConfig.reconnectionTimeout)},resetWebSocket:function(){"use strict";webChat.initCalled=!1,chatConfig.previouslyConnected=!1,chatConfig.totalNumberOfRetries=0,webSocket=void 0},sendMessage:function(e){"use strict";var t=$.extend({},{authToken:chatSocket.authToken},e);null!==webSocket&&webSocket.send(JSON.stringify(t))},reloadAfterRefresh:function(){"use strict";var e=avayaGlobal.getSessionStorage("ak"),t=parseInt(avayaGlobal.getSessionStorage("guid")),i=avayaGlobal.getSessionStorage("reloadTimestamp");if(i&&(i=parseInt(i)),i){if(isNaN(i))return avayaGlobal.log.warn("WebChat: Reload timestamp is not a valid UTC timestamp!"),void chatSocket.clearRefresh();var a=Date.now(),n=a-i>=1e3*chatConfig.refreshTimeoutSeconds;if(avayaGlobal.log.debug("Current and closing timestamps are",a,i),avayaGlobal.log.debug(e,t,n),n)return avayaGlobal.log.warn("WebChat: session has probably expired"),void chatSocket.clearRefresh();if(null!==e&&null!==t&&!isNaN(t)){avayaGlobal.log.debug("WebChat: reloading the chat"),chatConfig.previouslyConnected=!0,webChat.guid=t,webChat.ak=e;var r=avayaGlobal.getSessionStorage("email"),s=avayaGlobal.getSessionStorage("firstName"),o=avayaGlobal.getSessionStorage("lastName"),c=JSON.parse(avayaGlobal.getSessionStorage("phone")),l=JSON.parse(avayaGlobal.getSessionStorage("users"));chatSocket.loadTranscript(),chatUI.reloadChatPanel(),webChat.initChat(!1,s,o,r,c.country,c.area,c.number),setTimeout(function(){chatSocket.reloadUsers(l),webChat.disableControls(!1)},500)}}else console.log("Reload timestamp has not yet been set")},reloadUsers:function(e){"use strict";var t=[];for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];console.log(i,a),t.push({id:i,name:a.name,type:a.agentType})}webChat.updateUsers(t)},setupRefresh:function(){"use strict";avayaGlobal.log.debug("WebChat: Refreshing page");var e=webChat.users;avayaGlobal.setSessionStorage("guid",webChat.guid),avayaGlobal.setSessionStorage("ak",webChat.ak),avayaGlobal.setSessionStorage("email",webChat.g_email),avayaGlobal.setSessionStorage("firstName",webChat.g_user),avayaGlobal.setSessionStorage("lastName",webChat.g_user_last),avayaGlobal.setSessionStorage("phone",JSON.stringify(webChat.g_phone)),avayaGlobal.setSessionStorage("reloadTimestamp",Date.now()),chatSocket.saveTranscript(),avayaGlobal.setSessionStorage("users",JSON.stringify(e))},saveTranscript:function(){"use strict";for(var e=[],t=webChat.getCurrentTranscript(),i=0;i<t.length;i++)e.push({textContent:t[i].textContent,className:t[i].className,innerHTML:t[i].innerHTML,tagName:t[i].tagName});avayaGlobal.setSessionStorage("transcript",JSON.stringify(e))},loadTranscript:function(){"use strict";for(var e,t=JSON.parse(avayaGlobal.getSessionStorage("transcript")),i="",a="",n=0;n<t.length;n++)(e=t[n]).innerHTML?(a="<"+(i=e.tagName?e.tagName.toLowerCase():"div")+' class="'+(e.className?e.className:"")+'">'+e.innerHTML+"</"+i+">",webChat.writeHtmlResponse(a)):webChat.writeResponse(e.textContent,e.className);setTimeout(function(){console.log(webChat.messsages);var e=document.getElementById("messages");e.scrollTop=e.scrollHeight},1e3)},clearRefresh:function(){"use strict";avayaGlobal.log.debug("WebChat: clearing refresh"),avayaGlobal.clearSessionStorage(),webChat.initCalled=!1}};!function(e,t,i,a,n){"use strict";var r=600,s="The chat is not currently available. Please try again later",o=1,c=0,l=5,d={1:{}},u=function(){var t=this.response;if(4===this.readyState)if(200===this.status){if(""===t)return void e.log.error("EWT: empty response! This may be caused by CORS issues or by blocking JavaScript (e.g. NoScript)");var i=JSON.parse(t);console.log("ewt retrun JSON is: ",i),n.parseServiceMap(i.serviceMetricsResponseMap,"1")}else""===t?e.log.error("EWT: empty response! This may be caused by CORS issues, the CustomerControllerService not being available, or by blocking JavaScript (e.g. NoScript). Response code: "+this.status):e.log.error("EWT: "+t),webChat.settings.initiallyShowChatStatus&&a.showAlert(s),a.hideChatPanel()};n.parseServiceMap=function(t,i){var n='The chat is available. Click the "Live Chat" tab to open the chat.',l=!1,d=t[i].metrics;if(void 0!==d){var u=parseInt(d.EWT),C=parseInt(d.ResourceStaffedCount);if(e.log.debug("EWT: wait time is "+u+". Maximum wait time is "+r),e.log.debug("EWT: "+C+" agents are logged in. Minimum allowed are "+o),u<r&&u>=c&&C>=o){var p=Math.round(u/60);n='The chat is available. Your estimated wait time is {0} minutes. Click the "Live Chat" tab to open the chat'.replace("{0}",p),l=!0,a.showChatPanel(),a.addEwtToChatTab(p)}else n=u>r?s:"No agents are currently available. Please try again later"}l?a.showChatPanel():a.hideChatPanel(),webChat.settings.initiallyShowChatStatus&&a.showAlert(n)};n.setPriority=function(t){("number"!=typeof t||t<1||t>10)&&(e.log.warn("EWT: Invalid priority! Resetting to default (5)"),t=5),l=t},n.setMinimumAgentCount=function(t){"number"!=typeof t&&(e.log.warn("EWT: Invalid min agent count! Using default (1)"),t=1),o=t},n.setMinWaitTime=function(t){"number"!=typeof t&&(e.log.warn("EWT: Invalid min wait time! Using default (0)"),t=0),c=t},n.setMaxWaitTime=function(t){("number"!=typeof t||t<0)&&(e.log.warn("EWT: Invalid max wait time! Using default (600)"),t=600),r=t},n.addService=function(t,i){var a=parseInt(i);a<1||a>6?e.log.error("EWT: Invalid service map ID! It must be between 1 and 6!"):d[i]=t},n.getPriority=function(){return l},n.getMinimumWaitTime=function(){return c},n.getMinimumAgentCount=function(){return o},n.getMaxWaitTime=function(){return r},n.requestEwt=function(a,n){var r=i.getEstimatedWaitTimeUrl();if(void 0===n&&(n=!1),r.indexOf("localhost")>-1||r.indexOf("127.0.0.1")>-1)e.log.warn("EWT: Pointing at localhost, so EWT will not be available");else if(!chatConfig.previouslyConnected||n){var s=function(){e.log.debug("EWT: Creating attribute map");for(var i={Channel:["Chat"]},a=t.attributes,n=0;n<a.length;n++){var r,s=a[n].split("."),o=s[0],c=s[1];Object.keys(i).indexOf(o)<0?(r=[c],i[o]=r):(r=i[o]).indexOf(c)<0&&r.push(c)}return i}();d[1].attributes=s,d[1].priority=l,console.log("Sending services to ewt with: ",d);var o=new XMLHttpRequest;o.open("POST",i.getEstimatedWaitTimeUrl()),o.setRequestHeader("Content-Type","application/json"),o.addEventListener("readystatechange",u),"function"==typeof a&&(o.onload=function(e){a(e)}),o.send(JSON.stringify({serviceMap:d}))}else console.log("Reconnecting, no EWT requested")}}(window.avayaGlobal,window.chatLogon,window.links,window.chatUI,window.ewt=window.ewt||{});var webChat={build:"3b",sendButton:null,closeButton:null,messages:null,outMessage:null,participants:null,users:{},chatBotName:"",guid:null,ak:null,webOnHoldComfortGroups:null,webOnHoldURLs:null,onHoldUrlInterval:null,onHoldComfortInterval:null,pingInterval:null,isTyping:!1,typeOut:null,activeAgentTypeOut:null,passiveAgentTypeOut:null,supervisorTypeOut:null,usersTable:null,lastIsTypingSent:0,timeBetweenMsgs:1e4,initCalled:!1,autoOpen:!1,timeouts:[],g_email:"",g_user:"",g_account:"",g_phone:"",g_country:"",customFields:[],customData:{},workflowType:"",routePointIdentifier:"Default",coBrowseEnabled:!0,coBrowseReady:!1,coBrowseIframe:null,coBrowseKey:"",isPagePushKey:!1,coBrowseOceanaPath:"cobrowse-oceana/js/",coBrowseSDKPath:"cobrowse-oceana/js/libs/",hideElements:["chatPanelHidden"],addCustomFields:function(e,t){"use strict";if(avayaGlobal.isStringEmpty(e))avayaGlobal.log.error("WebChat: Cannot have a custom field with an empty title!");else{for(var i=!1,a=0;a<webChat.customFields.length;a++){if(webChat.customFields[a].title===e){i=!0;break}}i||webChat.customFields.push({title:e,value:t})}},clearCustomFields:function(){"use strict";webChat.customFields=[]},removeCustomField:function(e){"use strict";for(var t=-1,i=0;i<webChat.customFields.length;i++){if(webChat.customFields[i].title===e){t=i;break}}t>-1&&webChat.customFields.splice(t,1)},appendLink:function(e,t,i,a){"use strict";var n=document.createElement("a");n.href=e,n.text=e,n.target="_"+t,a.appendChild(n),webChat.messages.scrollTop=webChat.messages.scrollHeight,i&&window.open(n)},chatLogin:function(e,t,i,a){"use strict";var n=avayaGlobal.getEl("transcript-chat").checked,r=chatConfig.leaseTime;avayaGlobal.log.debug("WebChat: Chat attributes are "+JSON.stringify(chatLogon.attributes)),avayaGlobal.isStringEmpty(i)&&(n=!1);var s,o=window.location.href;if(console.log("webchat: Context ID  == workid "+avayaGlobal.getSessionStorage("contextId")),chatConfig.previouslyConnected)s={apiVersion:"1.0",type:"request",body:{method:"renewChat",guid:webChat.guid,authenticationKey:webChat.ak}};else{if(webChat.customFields.length>10){for(var c="The limit of custom fields is 10. These fields were not added:",l=10;l<webChat.customFields.length;l++)c=c.concat("\n",webChat.customFields[l].title);webChat.customFields.splice(10,webChat.customFields.length-10),webChat.writeResponse(c,chatConfig.writeResponseClassSystem)}s={apiVersion:"1.0",type:"request",body:{method:"requestChat",deviceType:navigator.userAgent,routePointIdentifier:webChat.routePointIdentifier,workFlowType:webChat.workflowType,requestTranscript:n,workRequestId:avayaGlobal.getSessionStorage("contextId"),calledParty:o,leaseTime:r,intrinsics:{channelAttribute:"Chat",attributes:chatLogon.attributes,email:i,name:e,lastName:t,country:a.country,area:a.area,phoneNumber:a.number,topic:"",customFields:webChat.customFields},priority:ewt.getPriority(),customData:webChat.customData}},$("#messages").empty(),webChat.writeMessageBlock("Sending chat request.",chatConfig.writeResponseClassSystem)}chatSocket.sendMessage(s),""===webChat.g_user&&(webChat.g_user=chatConfig.defaultUsername)},clearAllTimeouts:function(){"use strict";for(var e=0;e<webChat.timeouts.length;e++)clearTimeout(webChat.timeouts[e])},clearTypingTimeout:function(e){"use strict";e&&clearTimeout(e)},disableControls:function(e){"use strict";webChat.sendButton.disabled=e,webChat.outMessage.disabled=e,!1===e?(webChat.outMessage.addEventListener("keydown",webChat.onType),webChat.sendButton.addEventListener("onclick",webChat.sendChatMessage)):(webChat.outMessage.value="",webChat.outMessage.removeEventListener("keydown",webChat.onType),webChat.sendButton.removeEventListener("onclick",webChat.sendChatMessage))},handleNotification:function(e){"use strict";var t=e.body,i=t.method;if(i===chatConfig.jsonMethodRequestChat)webChat.notifyRequestChat(t);else if(i===chatConfig.jsonMethodRouteCancel)webChat.notifyRouteCancel();else if(i===chatConfig.jsonMethodRequestNewParticipant)webChat.notifyNewParticipant(t);else if(i===chatConfig.jsonMethodRequestIsTyping)webChat.notifyIsTyping(t);else if(i===chatConfig.jsonMethodRequestNewMessage)webChat.notifyNewMessage(t);else if(i===chatConfig.jsonMethodRequestCloseConversation)webChat.notifyCloseConversation();else if(i===chatConfig.jsonMethodRequestParticipantLeave)webChat.notifyParticipantLeave(t);else if(i===chatConfig.jsonMethodRequestNewPushMessage)webChat.notifyNewPagePushMessage(t);else if(i===chatConfig.jsonMethodRequestNewCoBrowseSessionKeyMessage)webChat.notifyNewCoBrowseSessionKeyMessage(t);else if(i===chatConfig.jsonMethodPing);else{if(i!==chatConfig.jsonMethodFileTransfer)throw new TypeError("Received notification with unknown method: ".concat(i));webChat.notifyFileTransfer(t)}},initChat:function(e,t,i,a,n,r,s){"use strict";webChat.initCalled||(void 0===e&&(e=!0),webChat.g_user=t,webChat.g_user_last=i,webChat.g_email=a,webChat.g_phone={country:n,area:r,number:s},void 0===webChat.outMessage&&(webChat.outMessage=avayaGlobal.getEl("outmessage")),webChat.disableControls(e),chatSocket.openSocket(),webChat.initCalled=!0)},notifyCloseConversation:function(){"use strict";chatSocket.manualClose=!1,chatConfig.dontRetryConnection=!0,avayaGlobal.clearSessionStorage()},resetChat:function(){"use strict";avayaGlobal.log.info("WebChat: Resetting chat"),avayaGlobal.detachChildren(webChat.messages),chatLogon.clearAttributes(),chatUI.resetChatUI(),webChat.updateUsers(),webChat.clearAllTimeouts(),webChat.outMessage.textContent="",webChat.ak=null,webChat.guid=null,webChat.lastIsTypingSent=0,chatSocket.resetWebSocket(),chatConfig.dontRetryConnection=!1},notifyIsTyping:function(e){"use strict";var t=e.isTyping;if(!0===t){var i,a=webChat.users[e.agentId];a.isTyping=t,webChat.updateTypingCell(a,!0),void 0!==(i="active_participant"===a.type?chatConfig.activeAgentTypeOut:"passive_participant"===a.type?chatConfig.passiveAgentTypeOut:chatConfig.supervisorTypeOut)&&webChat.clearTypingTimer(i),i=setTimeout(function(){void 0!==webChat.users&&(a.isTyping=!1,webChat.updateTypingCell(a,!1))},chatConfig.agentTypingTimeout),webChat.timeouts.push(i)}},writeMessageBlock:function(e,t,i){"use strict";i=i||{},"string"==typeof e&&(e={message:e,displayName:i.displayName?i.displayName:"System",timestamp:(new Date).getTime()});var a,n="AM",r=new Date(e.timestamp),s=parseInt(r.getHours()),o=r.getMinutes().toString();s>12&&(n="PM",s-=12),a=s+":"+(1===o.length?"0":"")+o+" "+n;var c,l,d=e.message.split(/(\s)+/),u=document.createElement("span");for(c in d)d[c].match(/^((www\.[-a-z0-9]+)|(http:\/\/)|(https:\/\/))/)?(l=document.createElement("a"),d[c].toLowerCase().match("mscdirect.com")||(l.target="_blank"),l.href=(d[c].match(/^www/)?"http://":"")+d[c],l.appendChild(document.createTextNode(d[c])),u.appendChild(l)):u.appendChild(document.createTextNode(d[c])),u.appendChild(document.createTextNode(" "));var C=document.createElement("div");C.setAttribute("class","presav-message-wrap"+(t?" "+t:""));var p=document.createElement("div");p.setAttribute("class","presav-timestamp"),p.setAttribute("data-timestamp",htmlEntities(e.timestamp)),p.append(document.createTextNode(a)),C.appendChild(p);var h=document.createElement("div");h.setAttribute("class","presav-messager"),h.appendChild(document.createTextNode(htmlEntities(e.displayName?e.displayName:"Agent"))),C.appendChild(h),document.createElement("div").setAttribute("class","presav-message"),C.appendChild(u),webChat.messages.appendChild(C),webChat.messages.scrollTop=webChat.messages.scrollHeight},notifyNewMessage:function(e){"use strict";var t;if("widget"!==e.type)return t=e.displayName===webChat.chatBotName?chatConfig.writeResponseClassChatbot:chatConfig.writeResponseClassResponse,void webChat.writeMessageBlock(e,t);var i=new Date(e.timestamp),a=e.displayName+" ("+i.toLocaleTimeString()+")";webChat.writeResponse(a,chatConfig.writeResponseClassAgentDate),t=e.displayName===webChat.chatBotName?chatConfig.writeResponseClassChatbot:chatConfig.writeResponseClassResponse,webChat.writeResponse(e.data.text,t),webChat.createWidgets(e.data)},notifyNewPagePushMessage:function(e){"use strict";var t,i=new Date(e.timestamp),a=e.pagePushURL,n=e.displayName,r=avayaGlobal.getParameterByName("key",e.pagePushURL);null!==r?(avayaGlobal.log.debug("WebChat/CoBrowse: Recieved Co-Browse page push request for session "+r+"."),webChat.coBrowseKey=r,webChat.isPagePushKey=!0,coBrowseUI.showCoBrowseIframe(a),t="System: ("+i.toLocaleTimeString()+")",webChat.writeResponse(t,chatConfig.writeResponseClassSystem),webChat.writeResponse("Co-Browsing session initiated",chatConfig.writeResponseClassSystem)):(t=n+" ("+i.toLocaleTimeString()+")",webChat.writeResponse(t,chatConfig.writeResponseClassAgentDate),webChat.writeResponse("Agent sent the following link: "+a,chatConfig.writeResponseClassSystem))},postCoBrowseDialogCleanUp:function(){"use strict";var e=webChat.coBrowseIframe.contentWindow,t=e.coBrowse,i=e.coBrowseUI;t&&i?i.closeHangingDialogs():coBrowseUI.closeHangingDialogs()},notifyNewCoBrowseSessionKeyMessage:function(e){"use strict";webChat.postCoBrowseDialogCleanUp();var t=e.sessionKey;webChat.cleanUpPagePushCoBrowse(),webChat.writeResponse("Co-Browsing session initiated",chatConfig.writeResponseClassSystem),webChat.joinKeyPushCoBrowse(t)},notifyNewParticipant:function(e){"use strict";var t=e.agentId,i=e.role;"AvayaAutomatedResource"===t&&(webChat.chatBotName=e.displayName);var a="AvayaAutomatedResource"===t&&!chatConfig.suppressChatbotPresence,n="supervisor_observe"===i&&chatConfig.notifyOfObserve,r="supervisor_barge"===i&&chatConfig.notifyOfBarge;(a||n||r||"active_participant"===i)&&webChat.writeMessageBlock("An agent has joined the chat",chatConfig.writeResponseClassSystem);var s=e.participants;webChat.updateUsers(s),webChat.stopOnHoldMessages(),webChat.disableControls(!1)},notifyParticipantLeave:function(e){"use strict";var t=e.agentId,i=e.participants;e.endChatFlag&&(chatConfig.dontRetryConnection=!0);for(var a=!1,n=0;n<i.length;n++)if(i[n].id===t){a=!0;break}var r=e.leaveReason.toLowerCase();console.log(r);var s="escalate"===r&&chatConfig.suppressChatbotPresence;0===Object.keys(e.participants).length?(avayaGlobal.log.info("WebChat: Only the customer remains in the room."),webChat.disableControls(!0),webChat.startOnHoldMessages(),"transfer"===r?webChat.writeResponse(chatConfig.transferNotificationText,chatConfig.writeResponseClassSystem):"escalate"!==r||chatConfig.suppressChatbotPresence?webChat.writeResponse("An agent has left the chat",chatConfig.writeResponseClassSystem):webChat.writeResponse(chatConfig.chatbotTransferNotification,chatConfig.writeResponseClassSystem)):!s&&a&&webChat.writeResponse("An agent has left the chat",chatConfig.writeResponseClassSystem),webChat.updateUsers(i)},notifyRequestChat:function(e){"use strict";webChat.guid=e.guid,webChat.g_user=e.intrinsics.name,webChat.ak=e.authenticationKey;var t=e.workRequestId;avayaGlobal.log.info("WebChat: workRequestId is "+t+", contactUUID/chatroom key is "+webChat.ak),chatSocket.retries>0&&chatSocket.resetConnectionAttempts();var i="undefined"!=typeof coBrowse&&webChat.coBrowseEnabled;webChat.sendCoBrowseStatus(i),chatConfig.previouslyConnected?webChat.messages.scrollTop=webChat.messages.scrollHeight:(webChat.writeMessageBlock("Chat request approved.  Please wait while we connect you with the next available associate.",chatConfig.writeResponseClassSystem),chatConfig.previouslyConnected=!0,e.isEmailValid||(webChat.writeResponse("There are invalid characters in your email address. You will not be able to receive a transcript",chatConfig.writeResponseClassSystem),webChat.g_email=""),webChat.webOnHoldComfortGroups=e.webOnHoldComfortGroups[0],webChat.webOnHoldURLs=e.webOnHoldURLs[0],webChat.startOnHoldMessages())},notifyRouteCancel:function(){"use strict";webChat.writeResponse("No suitable agents could be found",chatConfig.writeResponseClassSystem),chatConfig.dontRetryConnection=!0},notifyFileTransfer:function(e){"use strict";avayaGlobal.log.info("WebChat: Notifying of file transfer");var t=e.agentName,i=e.address,a=e.name,n=(new Date).toLocaleString(),r=chatConfig.fileTransferMessageText;i=webChat.replaceFileTransferHost(i),r=(r=(r=(r=r.replace("{0}",t)).replace("{1}",a)).replace("{2}",n)).replace("{3}",i),webChat.writeMessageBlock(r,chatConfig.writeResponseClassResponse)},replaceFileTransferHost:function(e){"use strict";var t=links.webChatHost;return e=e.replace(/:\/\/[^\/]+/,"://"+t)},notifyVideoOrVoice:function(e){"use strict";avayaGlobal.log.debug("WebChat: "+e)},onType:function(e){"use strict";13===e.keyCode?webChat.sendChatMessage():webChat.startTypingTimer()},playOnHoldMessage:function(e){"use strict";var t;if(void 0!==e.urls){t=e.urls[e.currentSequence];var i=e.description+": "+t.url;webChat.writeResponse(i,chatConfig.writeResponseClassSystem)}else t=e.messages[e.currentSequence],webChat.writeResponse(t.message,chatConfig.writeResponseClassSystem);e.currentSequence++,(void 0!==e.numberOfMessages&&e.currentSequence>=e.numberOfMessages||void 0!==e.urls&&e.currentSequence>=e.urls.length)&&(e.currentSequence=0)},quitChat:function(){"use strict";chatConfig.dontRetryConnection=!0,chatSocket.manualClose=!0,webChat.clearAllTimeouts(),null!==webSocket&&webSocket.readyState===webSocket.OPEN?console.log("Original logic block for calling close"):console.log("Criteria for close not met! Calling anyway");webChat.writeResponse("Close request sent",chatConfig.writeResponseClassSent),chatSocket.sendMessage({apiVersion:"1.0",type:"request",body:{method:"closeConversation"}})},sendChatMessage:function(e){"use strict";e=e||webChat.outMessage.value;avayaGlobal.isStringEmpty(e)||(webChat.writeMessageBlock({timestamp:(new Date).getTime(),displayName:webChat.g_user,message:e},chatConfig.writeResponseClassSent),webChat.outMessage.value="",chatSocket.sendMessage({apiVersion:"1.0",type:"request",body:{method:"newMessage",message:e,type:"text",data:{message:e},customData:webChat.customData}}))},sendWidgetMessage:function(){"use strict";var e=(new Date).toLocaleTimeString(),t=webChat.g_user+" ("+e+")";webChat.writeResponse(t,chatConfig.writeResponseClassDate),webChat.writeResponse(this.getAttribute("value"),chatConfig.writeResponseClassSent);var i={apiVersion:"1.0",type:"request",body:{method:"newMessage",message:this.getAttribute("value"),type:"customResponse",data:{message:this.getAttribute("value"),correlationId:this.getAttribute("data-correlationId")},customData:webChat.customData}};chatSocket.sendMessage(i)},sendIsTyping:function(e){"use strict";var t={apiVersion:"1.0",type:"request",body:{method:"isTyping",isTyping:e}};webChat.lastIsTypingSent=Date.now(),chatSocket.sendMessage(t)},sendCoBrowseStatus:function(e){"use strict";var t={apiVersion:"1.0",type:"request",body:{method:"coBrowseStatus",isEnabled:e}};chatSocket.sendMessage(t)},sendPing:function(){"use strict";chatSocket.sendMessage({apiVersion:"1.0",type:"request",body:{method:"ping"}})},startOnHoldMessages:function(){"use strict";avayaGlobal.log.info("WebChat: Starting the On Hold messages");var e=webChat.webOnHoldURLs.urls.length>0,t=webChat.webOnHoldComfortGroups.messages.length>0;if(t||e||avayaGlobal.log.warn("WebChat: On Hold messages are not defined!"),t){var i=webChat.webOnHoldComfortGroups.messages.sort(function(e,t){return e.sequence-t.sequence});webChat.webOnHoldComfortGroups.messages=i,webChat.webOnHoldComfortGroups.currentSequence=0,webChat.onHoldComfortInterval=setInterval(function(){webChat.playOnHoldMessage(webChat.webOnHoldComfortGroups)},1e3*webChat.webOnHoldComfortGroups.delay),webChat.timeouts.push(webChat.onHoldComfortInterval)}e&&(webChat.webOnHoldURLs.currentSequence=0,webChat.onHoldUrlInterval=setInterval(function(){webChat.playOnHoldMessage(webChat.webOnHoldURLs)},1e3*webChat.webOnHoldURLs.holdTime),webChat.timeouts.push(webChat.onHoldUrlInterval))},stopOnHoldMessages:function(){"use strict";avayaGlobal.log.info("Web On Hold: Stopping messages"),clearInterval(webChat.onHoldUrlInterval),clearInterval(webChat.onHoldComfortInterval)},startTypingTimer:function(){"use strict";Date.now()>=webChat.lastIsTypingSent+webChat.timeBetweenMsgs&&webChat.sendIsTyping(!0)},updateTypingCell:function(e,t){"use strict";var i=e.image;"active_participant"===e.agentType||"passive_participant"===e.agentType?i.src=this.cdnLocation+(t?chatConfig.agentTypingImage:chatConfig.agentImage):i.src=this.cdnLocation+(t?chatConfig.supervisorTypingImage:chatConfig.supervisorImage),i.nextSibling.textContent=t?e.name.concat(" is typing"):e.name},updateUsers:function(e){"use strict";webChat.users={};for(var t=0;t<webChat.participants.children.length;t++){var i=webChat.participants.children[t],a=i.getElementsByTagName("img")[0];i.className="hidden",a.className="hidden",a.src="",a.nextSibling.textContent=""}if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n];avayaGlobal.log.debug("WebChat: Adding agent with id "+r.id+" and name "+r.name);var s=webChat.participants.children[n];s.className="user";var o=s.getElementsByTagName("img")[0];o.src="supervisor_barge"===r.type?chatConfig.supervisorImage:chatConfig.agentImage,o.className="",o.nextSibling.textContent=r.name,webChat.users[r.id]={name:r.name,isTyping:!1,agentType:r.type,image:o}}},splitText:function(e){"use strict";for(var t=e.split(" "),i=[],a=0;a<t.length;a++)i.push(t[a]),i.push(" ");return i},writeResponse:function(e,t){"use strict";var i=document.createElement("p");i.className=t;for(var a=webChat.splitText(e),n=0;n<a.length;n++){var r=document.createElement("span");0===a[n].indexOf("http://")&&a[n].length>7||0===a[n].indexOf("https://")&&a[n].length>8?webChat.appendLink(a[n],"blank",!1,r):r.textContent=a[n],i.appendChild(r)}webChat.messages.appendChild(i),webChat.messages.scrollTop=webChat.messages.scrollHeight},writeHtmlResponse:function(e,t){$(webChat.messages).append(e),webChat.messages.scrollTop=webChat.messages.scrollHeight},createWidgets:function(e){"use strict";var t=e.widgetType.split("|");t[0].toLowerCase()===widgetConfig.selector.toLowerCase()?webChat.createSelectorElement(e,t[1]):t[0].toLowerCase()===widgetConfig.click.toLowerCase()?webChat.createClickElement(e,t[1]):avayaGlobal.log.warn("This type of widget ("+t+") is not supported")},createSelectorElement:function(e,t){"use strict";var i=document.createElement("div");i.className=chatConfig.writeResponseClassResponse,t.toLowerCase()===widgetConfig.radio.toLowerCase()&&webChat.createRadioElement(e,i),i.append(document.createElement("br")),webChat.messages.appendChild(i),webChat.messages.scrollTop=webChat.messages.scrollHeight},createClickElement:function(e,t){"use strict";var i=document.createElement("div");i.className=chatConfig.writeResponseClassResponse,t.toLowerCase()===widgetConfig.button.toLowerCase()&&webChat.createButtonElement(e,i),i.append(document.createElement("br")),webChat.messages.appendChild(i),webChat.messages.scrollTop=webChat.messages.scrollHeight},createRadioElement:function(e,t){"use strict";for(var i in e.selectItems){var a=document.createElement("label"),n=document.createElement("input");n.type="radio",n.value=e.selectItems[i].product,n.id=e.selectItems[i].id,n.name=e.selectorType,n.setAttribute("data-correlationId",e.correlationId),n.addEventListener("click",webChat.sendWidgetMessage),a.append(n),t.append(a);var r=document.createElement("span"),s=document.createTextNode(e.selectItems[i].product);r.append(s),r.setAttribute("class","radio-widget"),t.append(r),t.append(document.createElement("br"))}},createButtonElement:function(e,t){"use strict";for(var i in e.selectItems){var a=document.createElement("BUTTON");a.setAttribute("class","button-widget"),a.setAttribute("id",e.selectItems[i].id),a.setAttribute("value",e.selectItems[i].product),a.setAttribute("data-correlationId",e.correlationId),a.addEventListener("click",webChat.sendWidgetMessage),a.append(document.createTextNode(e.selectItems[i].product)),t.append(a)}},setWorkflowType:function(e){"use strict";webChat.workflowType=e},gatherChatElements:function(){"use strict";chatLogon.openChatButton=document.getElementById("openbutton-chat"),webChat.sendButton=document.getElementById("sendbutton-chat"),webChat.closeButton=document.getElementById("closebutton-chat"),webChat.messages=document.getElementById("messages"),webChat.outMessage=document.getElementById("outmessage"),webChat.participants=document.getElementById("participants"),webChat.coBrowseIframe=document.getElementById("cobrowse")},onLoadCoBrowseIframe:function(){"use strict";var e=webChat.coBrowseIframe.contentWindow,t=e.coBrowse,i=e.coBrowseUI;void 0!==t&&void 0!==i&&(i.addListener(webChat),t.init(webChat.coBrowseSDKPath,avayaGlobal.log,[webChat,i],links.coBrowseHost),e.onbeforeunload=webChat.onBeforeUnloadCoBrowseIframe)},onBeforeUnloadCoBrowseIframe:function(){"use strict";var e=webChat.coBrowseIframe.contentWindow,t=e.coBrowse,i=e.coBrowseUI;void 0!==t&&void 0!==i&&i.closeHangingDialogs()},onCoBrowseReady:function(e){"use strict";webChat.isPagePushKey?webChat.coBrowseKey&&webChat.joinPagePushCoBrowse():(webChat.coBrowseReady=!0,coBrowseUI.showCoBrowseLinkDiv())},onCoBrowseSessionClose:function(e,t,i){"use strict";if(webChat.coBrowseKey="",webChat.initCalled){var a=new Date;webChat.writeResponse("System ("+a.toLocaleTimeString()+")",chatConfig.writeResponseClassSystem),webChat.writeResponse("Co-Browsing session finished",chatConfig.writeResponseClassSystem)}},onCoBrowseStopSuccess:function(e){"use strict";if(webChat.initCalled){var t=new Date;webChat.writeResponse("System ("+t.toLocaleTimeString()+")",chatConfig.writeResponseClassSystem),webChat.writeResponse("Co-Browsing session finished",chatConfig.writeResponseClassSystem)}},onCoBrowseUIJoinRequest:function(e,t,i){"use strict";var a=webChat.hideElements.concat(coBrowseUI.hiddenElements);coBrowse.joinSession(t,i,a),coBrowseUI.hideCoBrowseLinkDiv()},onCoBrowseUIJoinFailure:function(e){"use strict";webChat.coBrowseKey&&webChat.isPagePushKey&&webChat.cleanUpPagePushCoBrowse()},onCoBrowseUICleanUp:function(e){"use strict";webChat.isPagePushKey&&webChat.cleanUpPagePushCoBrowse(),coBrowseUI.showCoBrowseLinkDiv()},initCoBrowse:function(){"use strict";coBrowse.init(webChat.coBrowseSDKPath,avayaGlobal.log,[webChat,coBrowseUI],links.coBrowseHost)},joinPagePushCoBrowse:function(){"use strict";coBrowseUI.closeDialog(coBrowseUI.proactiveJoinDialogId),coBrowseUI.hideCoBrowseLinkDiv();var e=webChat.coBrowseIframe.contentWindow.coBrowse;if(e){var t=webChat.hideElements.concat(coBrowseUI.hiddenElements);e.joinSession(webChat.g_user,webChat.coBrowseKey,t)}},joinKeyPushCoBrowse:function(e){"use strict";var t=webChat.hideElements.concat(coBrowseUI.hiddenElements);coBrowse.joinSession(webChat.g_user,e,t),coBrowseUI.hideCoBrowseLinkDiv()},cleanUpPagePushCoBrowse:function(){"use strict";webChat.isPagePushKey=!1,coBrowseUI.hideCoBrowseIframe()},setupWebChat:function(e){"use strict";this.settings=e||{};var t=window.location.host;t.match(/quality\./)?this.cdnLocation="//qacdn.mscdirect.com/":t.match(/dev\./)?this.cdnLocation="//devcdn.mscdirect.com/":this.settings.cdnLocation?this.cdnLocation=this.settings.cdnLocation:this.cdnLocation="//cdn.mscdirect.com/",this.settings.webChatHost&&(links.webChatHost=this.settings.webChatHost),this.settings.coBrowseHost&&(links.coBrowseHost=this.settings.coBrowseHost),this.settings.contextStoreHost&&(links.contextStoreHost=this.settings.contextStoreHost),avayaGlobal.detectBrowserSupport(),avayaGlobal.log=avayaGlobal.makeLogger(),links.setupSecurity(),webChat.gatherChatElements(),this.settings.initChatConfigPanel&&chatConfigPanel.setup(),chatUI.setup(),this.settings.initCobrowse&&(webChat.coBrowseIframe.onload=webChat.onLoadCoBrowseIframe,coBrowseUI.addListener(webChat),webChat.initCoBrowse()),chatSocket.reloadAfterRefresh(),ewt.requestEwt(),chatLogon.saveAttributeCount(),window.onbeforeunload=function(){if(webChat.initCalled&&(chatSocket.setupRefresh(),document.getElementById("outmessage").value.length))return"You will lose the message you are typing to the agent if you leave now.  Continue?"},window.onunload=function(){if("undefined"!=typeof coBrowse)return coBrowse.stopSession(),"Ending session"}},getCurrentTranscript:function(){"use strict";return avayaGlobal.getEl("messages").children},chatPanelConfigureMinimize:function(){$(".presav-chatPanel .ui-dialog-titlebar .ui-dialog-titlebar-minimize").length||($(".ui-dialog-titlebar").append('<a href="#" style="right:40px;" class="ui-dialog-titlebar-minimize ui-corner-all" role="button"><span class="ui-icon ui-icon-minusthick">minimize</span></a>'),$(".presav-chatPanel .ui-dialog-titlebar .ui-dialog-titlebar-minimize")&&document.querySelector(".presav-chatPanel .ui-dialog-titlebar .ui-dialog-titlebar-minimize").addEventListener("click",function(){var e=$(".presav-chatPanel"),t=e.attr("style");return e.hasClass("presav-minimize")?(e.removeClass("presav-minimize").attr("style",chatUI.panelStyleMaximized),$(".presav-chatPanel .ui-dialog-titlebar-minimize span").removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick"),webChat.messages.scrollTop=webChat.messages.scrollHeight):(chatUI.panelStyleMaximized=t,e.addClass("presav-minimize").attr("style","width: 200px; z-index: 1015; bottom: 0px; right: 20px; top: inherit; left: inherit;"),$(".presav-chatPanel .ui-dialog-titlebar-minimize span").removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick")),!1}))},chatPanelMaximize:function(){var e=$(".presav-chatPanel");e.hasClass("presav-minimize")&&(e.removeClass("presav-minimize").attr("style",chatUI.panelStyleMaximized),$(".presav-chatPanel .ui-dialog-titlebar-minimize span").removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick"),webChat.messages.scrollTop=webChat.messages.scrollHeight)}};function initChat(e,t,i,a,n){var r=(n||"").split("|");avayaGlobal.client.regState=e||"g",avayaGlobal.client.firstName=t||"",avayaGlobal.client.lastName=i||"",avayaGlobal.client.email=a||"",avayaGlobal.client.phoneArea=r[0]?r[0]:"",avayaGlobal.client.phonePrefix=r[1]?r[1]:"",avayaGlobal.client.phoneBody=r[2]?r[2]:"",$(".bottom_chat_btn").fadeOut(400);var s=Math.min(475,$(window).width()-20);return $("#chatPanel").dialog({width:s,dialogClass:"fixedPosition presav-chatPanel",open:function(e,t){console.log("dialog opened"),webChat.chatPanelMaximize(),webChat.chatPanelConfigureMinimize(),document.getElementById("user-chat").value=avayaGlobal.client.firstName,document.getElementById("user-chat-last").value=avayaGlobal.client.lastName,document.getElementById("email-chat").value=avayaGlobal.client.email,document.getElementById("phone-area").value=avayaGlobal.client.phoneArea,document.getElementById("phone-country").value="+1",document.getElementById("phone-chat").value=avayaGlobal.client.phonePrefix+(avayaGlobal.client.phonePrefix&&avayaGlobal.client.phoneBody?"-":"")+avayaGlobal.client.phoneBody,chatUI.panelStartingHeight=document.getElementById("chatPanel").offsetHeight,localStorage.panelStartingTop=$("#chatPanel").parent().css("top")},close:function(e,t){console.log("dialog closed"),void 0!==webSocket&&(console.log("calling closePanel (1)"),chatUI.closePanel(e)),$(".bottom_chat_btn").fadeIn(400)}}),!1}function htmlEntities(e){return String(e).replace(/&/g,"&").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var oceanaCoreData={data:{},attributes:{Channel:["Chat"]},tempAttributes:{},requestingAttributes:!1,priority:5,getContext:function(){"use strict";if(""!==customerJourneyCommon.contextId){oceanaCoreData.requestingAttributes=!0;var e=new XMLHttpRequest,t=links.getOceanaCoreDataServicesUrl()+"context/"+customerJourneyCommon.contextId;e.open("GET",t),e.setRequestHeader("Content-Type","application/json"),e.addEventListener("readystatechange",oceanaCoreData.handleGetContextResponse),e.send()}else avayaGlobal.log.warn("CustomerJourney: Cannot retrieve attributes if contextId is empty! Create a context first")},handleGetContextResponse:function(){"use strict";if(4===this.readyState)if(200===this.status){console.log(this.response);var e=JSON.parse(this.response);oceanaCoreData.nonOceanaData=e.data,oceanaCoreData.attributes=e.schema.ServiceMap[1].attributes,oceanaCoreData.requestingAttributes=!1,avayaGlobal.isJsonEmpty(oceanaCoreData.tempAttributes)||oceanaCoreData.addTemporaryAttributes()}else avayaGlobal.log.warn("Customer Journey: ",this.responseText),0===this.status&&avayaGlobal.log.warn("Customer Journey: returned 0. This may be caused by CORS issues or by blocking JavaScript"),this.responseText.indexOf("does not have a schema")>0&&oceanaCoreData.initialise()},addTemporaryAttributes:function(){"use strict";for(var e in oceanaCoreData.tempAttributes)if(oceanaCoreData.tempAttributes.hasOwnProperty(e))if(avayaGlobal.log.debug("CustomerJourney: Examining key "+e+"."+oceanaCoreData.attributes[e]),void 0!==oceanaCoreData.attributes[e]){avayaGlobal.log.debug("The key "+e+" exists in the temp attributes and CS attributes. Temp value "+oceanaCoreData.tempAttributes[e]+"; actual value "+oceanaCoreData.attributes[e]);var t=oceanaCoreData.mergeAttributeArrays(oceanaCoreData.attributes[e],oceanaCoreData.tempAttributes[e]);oceanaCoreData.attributes[e]=t}else oceanaCoreData.attributes[e]=oceanaCoreData.tempAttributes[e];avayaGlobal.log.debug("CustomerJourney: Temporary attributes merged. Attributes are now "+oceanaCoreData.attributes),oceanaCoreData.updateAttributes(),oceanaCoreData.tempAttributes={}},mergeAttributeArrays:function(e,t){"use strict";for(var i=e,a=0;a<t.length;a++){var n=t[a];avayaGlobal.log.debug("CustomerJourney: Checking if "+n+" exists in CS attributes"),e.indexOf(n)<0&&(avayaGlobal.log.debug("CustomerJourney: The value "+n+" does not exist in the array"),e.push(n))}return i},updateAttributes:function(){"use strict";if(""!==customerJourneyCommon.contextId){avayaGlobal.log.debug("CustomerJourney: Updating attributes for ID "+customerJourneyCommon.contextId);var e=oceanaCoreData.priority.toString(),t={data:oceanaCoreData.data,ServiceMap:{1:{attributes:oceanaCoreData.attributes,priority:e}}},i=new XMLHttpRequest,a=links.getOceanaCoreDataServicesUrl()+"update/serviceMap/"+customerJourneyCommon.contextId+"?journeyElement="+customerJourneyCommon.pageTouchpoint;i.open("PUT",a),i.setRequestHeader("Content-Type","application/json"),i.addEventListener("readystatechange",oceanaCoreData.handleGenericUpdateResponse),i.send(JSON.stringify(t))}else avayaGlobal.log.warn("CustomerJourney: Cannot update attributes without a context ID! Create a context first.")},handleGenericUpdateResponse:function(){"use strict";4===this.readyState&&(0===this.status?avayaGlobal.log.warn("Customer Journey: returned 0 when updating data. This may be caused by CORS issues or by blocking JavaScript"):avayaGlobal.log.warn("CustomerJourney: Updating data returned HTTP "+this.status+" - "+this.responseText))},addAttribute:function(e){"use strict";if(customerJourneyCommon.canAddAttributes())if(""!==e.trim()&&void 0!==e){var t,i=e.split("."),a=i.shift();""===customerJourneyCommon.contextId&&(avayaGlobal.log.warn("CustomerJourney: Cannot update attributes if context ID is empty! Initialising new context"),oceanaCoreData.initialise()),oceanaCoreData.attributes.hasOwnProperty(a)?t=oceanaCoreData.attributes[a]:(avayaGlobal.log.debug("CustomerJourney: The attribute "+a+" does not exist. It can be added"),t=[]),t.indexOf(i[0])<0&&(t.push(i[0]),oceanaCoreData.attributes[a]=t,avayaGlobal.log.debug("CustomerJourney: Attributes are now "+JSON.stringify(oceanaCoreData.attributes)),oceanaCoreData.updateAttributes(),oceanaCoreData.totalAttributes++,avayaGlobal.setSessionStorage("totalAttributes",oceanaCoreData.totalAttributes))}else avayaGlobal.log.error("CustomerJourney: Cannot add an undefined or empty attribute! Add an attribute in the format Key.Value, e.g. Language.English");else avayaGlobal.log.warn("OCPROVIDER-1026: cannot have more than 10 attributes in total")},initialise:function(){"use strict";null===avayaGlobal.log&&(avayaGlobal.log=avayaGlobal.makeLogger());var e=avayaGlobal.getSessionStorage("totalAttributes");oceanaCoreData.totalAttributes=null!==e?parseInt(e):0,avayaGlobal.log.debug("CustomerJourney: Total attributes are now "+oceanaCoreData.totalAttributes),customerJourneyCommon.loadCustomerId();var t=customerJourneyCommon.loadContextId();null===t||""===t?(avayaGlobal.log.info("CustomerJourney: Context ID is null. Creating a new context"),oceanaCoreData.createContext()):(avayaGlobal.log.info("CustomerJourney: Context ID is "+t+". Requesting previously-gathered attributes"),oceanaCoreData.getContext())},createContext:function(){"use strict";if(null===oceanaCoreData.csInstance||avayaGlobal.isJsonEmpty(oceanaCoreData.attributes)||""===oceanaCoreData.customerId)avayaGlobal.log.warn("CustomerJourney: Cannot create context if customerID or attributes are empty! Request a customer ID and add attributes first");else{avayaGlobal.log.info("CustomerJourney: Creating a context");var e=oceanaCoreData.priority.toString(),t={data:oceanaCoreData.nonOceanaData,schema:{ServiceMap:{1:{attributes:oceanaCoreData.attributes,priority:e}},CustomerId:customerJourneyCommon.customerId,Strategy:"Most Idle"},groupId:customerJourneyCommon.customerId,contextId:customerJourneyCommon.contextId,persistToEDM:!0},i=new XMLHttpRequest;try{i.timeout=1e4}catch(e){}i.open("POST",links.getOceanaCoreDataServicesUrl()+"context/schema?journeyElement="+customerJourneyCommon.pageTouchpoint),i.setRequestHeader("Content-Type","application/json"),i.addEventListener("readystatechange",oceanaCoreData.handleCreateContextResponse),i.send(JSON.stringify(t))}},handleCreateContextResponse:function(){"use strict";4===this.readyState&&(200===this.status?(customerJourneyCommon.setContextId(JSON.parse(this.response).data.contextId),chatLogon.addContextData(),console.log("OCD: Context ID  after creation and add context "+avayaGlobal.getSessionStorage("contextId"))):0===this.status?avayaGlobal.log.warn("Customer Journey: Requesting a Context returned 0. This may be caused by CORS issues or by blocking JavaScript"):avayaGlobal.log.warn("CustomerJourney: Creating Context returned HTTP "+this.status+" - "+this.responseText))},updateCustomerId:function(){"use strict";var e={CustomerId:customerJourneyCommon.customerId},t=new XMLHttpRequest;t.open("PUT",links.getOceanaCoreDataServicesUrl()+"update/customerId/"+customerJourneyCommon.contextId),t.setRequestHeader("Content-Type","application/json"),t.addEventListener("readystatechange",oceanaCoreData.handleGenericUpdateResponse),t.send(JSON.stringify(e))},setPriority:function(e){"use strict";(e<1||e>10||"number"!=typeof e)&&(avayaGlobal.log.warn("Customer Journey: Priority ("+e+") is invalid! Resetting to default (5)"),e=5),oceanaCoreData.priority=e},addDataPair:function(e,t){"use strict";"string"==typeof e?oceanaCoreData.data[e]=t:avayaGlobal.log.warn("Customer Journey: Data entries must have a valid key that is of type String!")},updateTopic:function(e){"use strict";if(void 0===e||avayaGlobal.isStringEmpty(e)||avayaGlobal.isStringEmpty(customerJourneyCommon.contextId))avayaGlobal.log.error("Customer Journey: The topic and context ID must not be empty or undefined when updating the topic!");else{var t=links.getCustomerManagementUrl()+"/oceana/data/update/topic/"+customerJourneyCommon.contextId+"?topic="+e,i=new XMLHttpRequest;i.open("PUT",t),i.setRequestHeader("Content-Type","application/json"),i.addEventListener("readystatechange",oceanaCoreData.handleGenericUpdateResponse),i.send()}}},customerJourneyCommon={contextId:"",customerId:"DefaultCustomerId",pageTouchpoint:"web",maxAttributes:10,totalAttributes:0,listeners:[],setPageTouchpoint:function(e){"use strict";customerJourneyCommon.pageTouchpoint=e},clearContextId:function(){"use strict";customerJourneyCommon.setContextId(""),avayaGlobal.setSessionStorage("totalAttributes",0)},setContextId:function(e){"use strict";customerJourneyCommon.contextId=e,customerJourneyCommon.saveContextId()},saveContextId:function(){"use strict";avayaGlobal.log.info("CustomerJourney: Context ID is now "+customerJourneyCommon.contextId),avayaGlobal.setSessionStorage("contextId",customerJourneyCommon.contextId)},loadContextId:function(){"use strict";var e=avayaGlobal.getSessionStorage("contextId");return customerJourneyCommon.contextId=e,e},setCustomerId:function(e){"use strict";customerJourneyCommon.customerId=e,avayaGlobal.setSessionStorage("customerId",e)},loadCustomerId:function(){"use strict";var e=avayaGlobal.getSessionStorage("customerId");customerJourneyCommon.customerId=e||customerJourneyCommon.customerId},clearCustomerId:function(){"use strict";customerJourneyCommon.setCustomerId("DefaultCustomerId")},setup:function(){"use strict";avayaGlobal.detectBrowserSupport(),avayaGlobal.log=avayaGlobal.makeLogger(),customerJourneyCommon.loadUrlsFromStorage(),customerJourneyCommon.getTouchpointFromPage(),customerJourneyCommon.loadCustomerId(),customerJourneyCommon.addListeners(),links.setupSecurity()},reset:function(){"use strict";customerJourneyCommon.clearContextId(),customerJourneyCommon.clearCustomerId()},addListeners:function(){"use strict";var e=[];void 0!==window.contextStore&&e.push(window.contextStore),void 0!==window.oceanaCoreData&&e.push(window.oceanaCoreData),0===e.count&&avayaGlobal.log.error("CustomerJourney: No customer journey listeners on the page"),customerJourneyCommon.listeners=e},canAddAttributes:function(){"use strict";return customerJourneyCommon.totalAttributes<customerJourneyCommon.maxAttributes},requestCustomerId:function(e,t){"use strict";avayaGlobal.log.debug("CustomerJourney: Requesting Customer ID using parameter "+e);var i=links.getCustomerManagementUrl()+"/rest/customers/customerId?"+e+"="+t,a=new XMLHttpRequest;a.open("GET",i),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),a.addEventListener("readystatechange",customerJourneyCommon.parseCustomerId),a.send("")},parseCustomerId:function(){"use strict";if(4===this.readyState){var e=this.response;avayaGlobal.log.debug("CustomerJourney: Parsing customer ID");var t=window.contextStoreUI;if(200===this.status){var i=JSON.parse(e).customerId;customerJourneyCommon.setCustomerId(i),t.setSubscribeStatus("You have subscribed. Your ID is "+i);for(var a=customerJourneyCommon.listeners,n=0;n<a.length;n++)a[n].initialise();t.cleanSubscribePanel()}else{var r=JSON.parse(e);avayaGlobal.log.error("CustomerJourney: "+e);var s=r.errors[0].type+": "+r.errors[0].message;t.setSubscribeStatus(s)}}},getTouchpointFromPage:function(){"use strict";var e=links.getPageName();customerJourneyCommon.setPageTouchpoint(e)},loadUrlsFromStorage:function(){"use strict";var e=localStorage.getItem("chatSettings"),t=JSON.parse(e),i=links.getPathNameForConfig();if(null!==t){var a=t[i].urls;links.contextStoreHost=a.contextStoreHost,links.secureAllConnections=a.secureAllConnections}},getPageTopic:function(){"use strict";return""}};$(document).ready(function(){$("body").append(_AVAYA_HTML_)});